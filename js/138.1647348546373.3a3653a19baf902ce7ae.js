"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[138],{60076:(e,t,a)=>{a.d(t,{ZP:()=>p,_j:()=>u,yS:()=>l});var n=a(96985),r=a.n(n),i=a(34018),s=a(98583),o=(0,n.lazy)((function(){return Promise.all([a.e(482),a.e(650),a.e(222),a.e(46),a.e(557),a.e(593)]).then(a.bind(a,24080))})),c=(0,n.lazy)((function(){return Promise.all([a.e(482),a.e(462),a.e(565),a.e(818)]).then(a.bind(a,71641))})),u={sources:{path:"/sources"},sourcesNew:{path:"/sources/new",writeAccess:!0},sourcesRemove:{path:"/sources/remove/:id",redirectNoId:!0,writeAccess:!0},sourcesDetail:{path:"/sources/detail/:id",redirectNoId:!0},sourcesDetailRename:{path:"/sources/detail/:id/rename",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemove:{path:"/sources/detail/:id/remove",redirectNoId:!0,writeAccess:!0},sourcesDetailAddApp:{path:"/sources/detail/:id/add_app/:app_type_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemoveApp:{path:"/sources/detail/:id/remove_app/:app_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailEditCredentials:{path:"/sources/detail/:id/edit_credentials",redirectNoId:!0,writeAccess:!0}},l=function(e,t){return e.replace(":id",t)};const p=function(){return r().createElement(n.Suspense,{fallback:r().createElement(s.zx,null)},r().createElement(i.Switch,null,r().createElement(i.Route,{path:u.sourcesDetail.path,component:c}),r().createElement(i.Route,{component:o})))}},4138:(e,t,a)=>{a.d(t,{Cu:()=>P,M5:()=>M,Rj:()=>w,TA:()=>k,be:()=>Z,oI:()=>x,rL:()=>T,sd:()=>N,uc:()=>j,ye:()=>C});var n=a(4942),r=a(15861),i=a(29439),s=a(87757),o=a.n(s),c=a(9069),u=a.n(c),l=a(27361),p=a.n(l),d=a(36968),f=a.n(d),m=a(79477),v=a(17207),h=a(84866),y=a(4833),_=a(6407),g=a(63032);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=u().create();Z.interceptors.request.use(v.w5),Z.interceptors.response.use(v.xH),Z.interceptors.response.use(null,v.Di),Z.interceptors.response.use(null,v.ub),Z.interceptors.response.use(null,v.ud),Z.interceptors.response.use((function(e){return e.errors&&e.errors.length>0?Promise.reject({detail:e.errors[0].message}):e})),Z.interceptors.response.use(null,(function(e){if(e.errors&&403===e.errors[0].status)return Promise.reject({detail:e.errors[0].detail,title:"Forbidden access"});throw e}));var w=function(){return{checkAvailabilitySource:function(e){return Z.post("".concat(_.s,"/sources/").concat(e,"/check_availability"))},updateSource:function(e,t){return Z.patch("".concat(_.s,"/sources/").concat(e),t)},updateEndpoint:function(e,t){return Z.patch("".concat(_.s,"/endpoints/").concat(e),t)},createEndpoint:function(e){return Z.post("".concat(_.s,"/endpoints"),e)},updateAuthentication:function(e,t){return Z.patch("".concat(_.s,"/authentications/").concat(e),t)},createAuthentication:function(e){return Z.post("".concat(_.s,"/authentications"),e)},showSource:function(e){return Z.get("".concat(_.s,"/sources/").concat(e))},listSourceEndpoints:function(e){return Z.get("".concat(_.s,"/sources/").concat(e,"/endpoints"))},listSourceApplications:function(e){return Z.get("".concat(_.s,"/sources/").concat(e,"/applications"))},listEndpointAuthentications:function(e){return Z.get("".concat(_.s,"/endpoints/").concat(e,"/authentications"))},deleteSource:function(e){return Z.delete("".concat(_.s,"/sources/").concat(e))},createApplication:function(e){return Z.post("".concat(_.s,"/applications"),e)},postGraphQL:function(e){return Z.post("".concat(_.s,"/graphql"),e)},listSourceTypes:function(){return Z.get("".concat(_.s,"/source_types"))},doLoadAppTypes:function(){return Z.get("".concat(_.s,"/application_types"))},deleteApplication:function(e){return Z.delete("".concat(_.s,"/applications/").concat(e))},createAuthApp:function(e){return Z.post("".concat(_.s,"/application_authentications"),e)},deleteAuthentication:function(e){return Z.delete("".concat(_.s,"/authentications/").concat(e))},showAuthentication:function(e){return Z.get("".concat(_.s,"/authentications/").concat(e))},updateApplication:function(e,t){return Z.patch("".concat(_.s,"/applications/").concat(e),t)},showApplication:function(e){return Z.get("".concat(_.s,"/applications/").concat(e))},listSourceAuthentications:function(e){return Z.get("".concat(_.s,"/sources/").concat(e,"/authentications"))},createSource:function(e){return Z.post("".concat(_.s,"/sources"),e)},getEndpoint:function(e){return Z.get("".concat(_.s,"/endpoints/").concat(e))},getGoogleAccount:function(){return Z.get("".concat(_.s,"/app_meta_data?filter[name]=gcp_service_account"))},bulkCreate:function(e){return Z.post("".concat(_.s,"/bulk_create"),e)},pauseApplication:function(e){return Z.post("".concat(_.s,"/applications/").concat(e,"/pause"))},unpauseApplication:function(e){return Z.post("".concat(_.s,"/applications/").concat(e,"/unpause"))},pauseSource:function(e){return Z.post("".concat(_.s,"/sources/").concat(e,"/pause"))},unpauseSource:function(e){return Z.post("".concat(_.s,"/sources/").concat(e,"/unpause"))}}},M=function(){return w().doLoadAppTypes()},k=function(e){return w().deleteSource(e).catch((function(e){throw{error:{detail:e.errors[0].detail}}}))},O=function(e,t){return"limit:".concat(e,", offset:").concat((t-1)*e)},A=function(e,t){return e?"source_type_id"===e?'sort_by:{source_type:{product_name:"'.concat(t,'"}}'):"applications"===e?'sort_by:{applications:{__count:"'.concat(t,'"}}'):"sort_by:{".concat(e,':"').concat(t,'"}'):""},S="\n    id,\n    created_at,\n    source_type_id,\n    name,\n    imported,\n    availability_status,\n    source_ref,\n    last_checked_at,\n    updated_at,\n    last_available_at,\n    app_creation_workflow,\n    paused_at,\n    authentications { authtype, username, availability_status_error, availability_status }\n    applications { application_type_id, id, availability_status_error, availability_status, paused_at, authentications { id, resource_type } },\n    endpoints { id, scheme, host, port, path, receptor_node, role, certificate_authority, verify_ssl, availability_status_error, availability_status, authentications { authtype, availability_status, availability_status_error } }\n",j=function(e){var t=e.pageSize,a=e.pageNumber,n=e.sortBy,r=e.sortDirection,i=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=[];n.name&&i.push('name: { contains_i: "'.concat(n.name,'" }')),(null===(e=n.source_type_id)||void 0===e?void 0:e.length)>0&&i.push("source_type_id: { eq: [".concat(n.source_type_id.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }")),(null===(t=n.applications)||void 0===t?void 0:t.length)>0&&i.push("applications: { application_type_id: { eq: [".concat(n.applications.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }}")),r===h.JL&&i.push('source_type: { vendor: { not_eq: "Red Hat"} }'),r===h.B0&&i.push('source_type: { vendor: "Red Hat" }');var s=null===(a=n.availability_status)||void 0===a?void 0:a[0];return s&&(s===y.Rl?i.push('availability_status: { eq: "'.concat(y.Rl,'" }')):s===y.nZ&&i.push('availability_status: { eq: ["'.concat(y.L,'", "').concat(y.nZ,'"] }'))),i.length>0?"filter: { ".concat(i.join(", ")," }"):""}(e.filterValue,e.activeVendor),s=[O(t,a),A(n,r),i].join(",");return w().postGraphQL({query:"{ sources(".concat(s,")\n      { ").concat(S," },\n     sources_aggregate(").concat(i,"){aggregate{total_count}}\n    }")}).then((function(e){return e.data}))},P=function(e){return w().createApplication(e)},T=function(e,t){return w().deleteApplication(e).catch((function(e){var a=(0,i.Z)(e.errors,1)[0].detail;throw{error:{title:t,detail:a}}}))},N=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=[];n.name&&i.push("filter[name][contains_i]=".concat(n.name)),(null===(e=n.source_type_id)||void 0===e?void 0:e.length)>0&&n.source_type_id.map((function(e){return i.push("filter[source_type_id][]=".concat(e))})),(null===(t=n.applications)||void 0===t?void 0:t.length)>0&&n.applications.map((function(e){return i.push("filter[applications][application_type_id][eq][]=".concat(e))})),r===h.JL&&i.push("filter[source_type][vendor][not_eq]=Red Hat"),r===h.B0&&i.push("filter[source_type][vendor]=Red Hat");var s=null===(a=n.availability_status)||void 0===a?void 0:a[0];return s&&(s===y.Rl?i.push("filter[availability_status]=".concat(y.Rl)):s===y.nZ&&(i.push("filter[availability_status][]=".concat(y.L)),i.push("filter[availability_status][]=".concat(y.nZ)))),i.length>0?i.join("&"):""},x=function(e){return w().postGraphQL({query:"{ sources(filter: { id: { eq: ".concat(e,"}})\n            { ").concat(S," }\n        }")}).then((function(e){return e.data}))},C=function(){var e=(0,r.Z)(o().mark((function e(t,a,n){var r,i,s,c,u,l,d,v,h,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().postGraphQL({query:"{ sources(filter: { id: { eq: ".concat(t,"}})\n          { source_type_id, applications {\n              application_type_id,\n              id,\n              availability_status_error,\n              availability_status,\n              paused_at,\n              authentications {\n                  id\n              }\n          } }\n      }")});case 2:return c=e.sent,u=[],null===(r=c.data.sources)||void 0===r||null===(i=r[0])||void 0===i||null===(s=i.applications)||void 0===s||s.forEach((function(e){u.push(w().showApplication(e.id))})),e.next=7,Promise.all(u);case 7:if(l=e.sent,d=n.find((function(e){var t,a;return e.id===(null===(t=c.data.sources)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.source_type_id)})),v=a.find((function(e){return e.name===m.f.COST_MANAGAMENT})),!l.length){e.next=18;break}h=o().mark((function e(a){var n,r,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l[a],r=n.extra,i=n.application_type_id,s=E({},r),i!==v.id||!g.ZV.includes(d.name)||Object.keys(r).length){e.next=7;break}return e.next=5,(0,g.xS)(t);case 5:u=e.sent,Object.keys(g.Iw).forEach((function(e){var t=p()(u,e);t&&f()(s,g.Iw[e],t)}));case 7:c.data.sources[0].applications[a]=E(E({},c.data.sources[0].applications[a]),{},{extra:s});case 8:case"end":return e.stop()}}),e)})),y=0;case 13:if(!(y<l.length)){e.next=18;break}return e.delegateYield(h(y),"t0",15);case 15:y++,e.next=13;break;case 18:return e.abrupt("return",c.data);case 19:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},98583:(e,t,a)=>{a.d(t,{X6:()=>M,Xf:()=>b,aN:()=>_,mI:()=>E,sk:()=>Z,zx:()=>g});var n=a(87462),r=a(45987),i=a(96985),s=a.n(i),o=a(45697),c=a.n(o),u=a(8351),l=a(80123),p=a(39173),d=a(44873),f=a(46731),m=a(30567),v=a(86896),h=["isDeleting"],y=["row"],_=function(e){var t=e.width,a=void 0===t?"100%":t,n=e.height,r=void 0===n?"100%":n,i=e.className,o=void 0===i?"":i;return s().createElement("span",{className:"src-c-loader ".concat(o),style:{width:a,height:r},role:"progressbar"})};_.propTypes={className:c().string,width:c().oneOfType([c().string,c().number]),height:c().oneOfType([c().string,c().number])};var g=function(){var e=(0,v.Z)();return s().createElement(s().Fragment,null,s().createElement(l.Z,null,s().createElement(p.Z,{title:e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),s().createElement(d.Z,{type:"content"},s().createElement("div",{className:"src-c-fake_content pf-u-p-lg"},s().createElement(_,null))))},b=function(){return s().createElement(_,{className:"top-pagination",height:30,width:200})},E=function(){return s().createElement(f.Bullseye,{className:"src-c-bullseye__placeholder-loader","data-testid":"placeholder-table"},s().createElement(f.Spinner,{size:"xl"}))},Z=function(e){var t=e.row,a=t.isDeleting,i=(0,r.Z)(t,h),o=(0,r.Z)(e,y);return a?s().createElement("tr",null,s().createElement("td",{colSpan:m.W,className:"pf-u-p-md","data-testid":"removing-row"},s().createElement(_,{height:100}))):s().createElement(u.RowWrapper,(0,n.Z)({},o,{row:i,className:"src-c-row-vertical-centered","data-testid":"row"}))};Z.propTypes={row:c().object.isRequired};var w=function(e){return s().createElement(f.Card,{className:"pf-u-m-md"},s().createElement(f.CardBody,null,s().createElement(_,e)))},M=function(){return s().createElement("div",{className:"src-c-detail-page"},s().createElement(l.Z,null,s().createElement(_,{height:96})),s().createElement(f.Grid,null,s().createElement(f.GridItem,{md:"6"},s().createElement(w,{height:218})),s().createElement(f.GridItem,{md:"6"},s().createElement(w,{height:218})),s().createElement(f.GridItem,{md:"12"},s().createElement(w,{height:324}))))}},4833:(e,t,a)=>{a.d(t,{BN:()=>z,Bj:()=>R,Ee:()=>T,Fd:()=>A,Gz:()=>U,L:()=>C,P5:()=>S,Rl:()=>N,Z3:()=>V,bF:()=>O,c:()=>W,jl:()=>P,nZ:()=>x,vh:()=>j});var n=a(45987),r=a(87462),i=a(93433),s=a(29439),o=a(4942),c=a(96985),u=a.n(c),l=a(45697),p=a.n(l),d=a(46731),f=a(43047),m=a(5913),v=a(17546),h=a(44012),y=a(86896),_=a(62410),g=a(34018),b=a(60076),E=a(86866),Z=["app","showStatusText"],w=["applications"];function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(e){return{http:"80",https:"443"}[e]},A=function(e){var t=Object.keys(e).reduce((function(t,a){return k(k({},t),{},(0,o.Z)({},a,e[a]||""))}),{}),a=t.scheme,n=void 0===a?"":a,r=t.host,i=void 0===r?"":r,s=t.path,c=void 0===s?"":s,u=t.port,l=void 0===u?"":u,p="".concat(n,"://").concat(i).concat(function(e,t){return t&&String(t)!==O(e)?":".concat(t):""}(n,l)).concat(c);if("://"!==p)return p},S=function(e,t,a){var n=a.sourceTypes.find((function(t){return t.id===e}));return n&&n.product_name||e||""},j=function(e){return u().createElement("span",{className:"src-c-help-cursor"},u().createElement(_.Z,{type:"relative",date:e}))},P=function(e,t,a){var n=a.sourceTypes;return u().createElement(d.TextContent,null,u().createElement(g.Link,{to:(0,b.yS)(b._j.sourcesDetail.path,t.id)},e),u().createElement("br",{key:"".concat(t.id,"-br")}),u().createElement(d.Text,{key:t.id,component:d.TextVariants.small},function(e,t){var a=t.find((function(t){return t.id===e.source_type_id}));return a&&"openshift"===a.name}(t,n)&&function(e){return e.endpoints&&e.endpoints[0]&&A(e.endpoints[0])}(t)))},T=function(e){if(!e)return null;var t=function(e){return{cfme:u().createElement(h.Z,{id:"sources.cloudformImportTooltip",defaultMessage:"This source can be managed from your connected CloudForms application."})}[e.toLowerCase()]}(e);return t?u().createElement(d.Tooltip,{content:t},u().createElement(d.Badge,{isRead:!0,className:"src-m-help-cursor"},u().createElement(h.Z,{id:"sources.imported",defaultMessage:"imported"}))):u().createElement(d.Badge,{isRead:!0},u().createElement(h.Z,{id:"sources.imported",defaultMessage:"imported"}))},N="available",x="unavailable",C="partially_available",R="in_progress",D="paused_at",L="rhel_azure",q=function(e){var t;return(t={},(0,o.Z)(t,x,"red"),(0,o.Z)(t,N,"green"),(0,o.Z)(t,C,"orange"),(0,o.Z)(t,D,"cyan"),t)[e]||"grey"},I=function(e){var t;return(t={},(0,o.Z)(t,x,u().createElement(h.Z,{id:"sources.unavailable",defaultMessage:"Unavailable"})),(0,o.Z)(t,N,u().createElement(h.Z,{id:"sources.available",defaultMessage:"Available"})),(0,o.Z)(t,C,u().createElement(h.Z,{id:"sources.partiallyAvailable",defaultMessage:"Partially available"})),(0,o.Z)(t,R,u().createElement(h.Z,{id:"sources.inProgress",defaultMessage:"In progress"})),(0,o.Z)(t,D,u().createElement(h.Z,{id:"sources.paused",defaultMessage:"Paused"})),t)[e]||u().createElement(h.Z,{id:"sources.unknown",defaultMessage:"Unknown"})},F=function(){return u().createElement(h.Z,{id:"sources.unknownError",defaultMessage:"unavailable"})},B=function(e,t){return u().createElement(u().Fragment,null,t.source&&u().createElement(u().Fragment,null,u().createElement(h.Z,{id:"sources.sourceError",defaultMessage:"Source's status: { error }",values:{error:t.source}}),u().createElement("br",null)),t.endpoint&&u().createElement(u().Fragment,null,u().createElement(h.Z,{id:"sources.endpointError",defaultMessage:"Endpoint error: { error }",values:{error:t.endpoint}}),u().createElement("br",null)),t.authentications&&u().createElement(h.Z,{id:"sources.authErrors",defaultMessage:"Authentication {count, plural, one {status} other {statuses}} : { errors }",values:{count:t.authentications.length,errors:t.authentications.map((function(e){var t=e.error,a=e.type;return u().createElement(u().Fragment,{key:a},u().createElement(h.Z,{id:"sources.errorAuthTemplate",defaultMessage:"{ type }: { error }",values:{error:t,type:a}}),u().createElement("br",null))}))}}),t.applications&&u().createElement(h.Z,{id:"sources.appErrors",defaultMessage:"Application {count, plural, one {status} other {statutes}}: { errors }",values:{count:t.applications.length,errors:t.applications.map((function(t){var a,n=t.error,r=t.id;return u().createElement(u().Fragment,{key:r},u().createElement(h.Z,{id:"sources.errorAppTemplate",defaultMessage:"{ app }: { error }",values:{error:n,app:(null===(a=e.find((function(e){return e.id===r})))||void 0===a?void 0:a.display_name)||r}}),u().createElement("br",null))}))}}))},G=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(a={},(0,o.Z)(a,x,u().createElement(u().Fragment,null,u().createElement(h.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),u().createElement("hr",null),B(t,n))),(0,o.Z)(a,N,u().createElement(h.Z,{id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,o.Z)(a,C,u().createElement(u().Fragment,null,u().createElement(h.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),u().createElement("hr",null),B(t,n))),(0,o.Z)(a,R,u().createElement(h.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),(0,o.Z)(a,D,u().createElement(h.Z,{id:"sources.pausedStatus",defaultMessage:"Data collection is temporarily disabled. Resume source to reestablish connection."})),(0,o.Z)(a,L,u().createElement(h.Z,{id:"sources.rhelAzureStatus",defaultMessage:"This source cannot currently be monitored in Sources, and does not reflect true status or resources."})),a)[e]||u().createElement(h.Z,{id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})},z=function(e,t,a){var n=a.appTypes,o=a.sourceTypes,c=function(e){var t=e.availability_status,a=e.availability_status_error,n=e.applications,r=void 0===n?[]:n,o=e.endpoints;o=void 0===o?[]:o;var c=(0,s.Z)(o,1)[0];if(t===R)return{errors:{},status:R};var l={},p=0,d=0;return t===x?(l=k(k({},l),{},{source:a||u().createElement(F,null)}),p++,d++):t===N&&p++,r.map((function(e){e.availability_status===x?(l=k(k({},l),{},{applications:[].concat((0,i.Z)(l.applications?l.applications:[]),[{id:e.application_type_id,error:e.availability_status_error||u().createElement(F,null)}])}),p++,d++):e.availability_status===N&&p++})),(null==c?void 0:c.availability_status)===x?(l=k(k({},l),{},{endpoint:c.availability_status_error||u().createElement(F,null)}),p++,d++):(null==c?void 0:c.availability_status)===N&&p++,null!=c&&c.authentications&&c.authentications.map((function(e){e.availability_status===x?(l=k(k({},l),{},{authentications:[].concat((0,i.Z)(l.authentications?l.authentications:[]),[{type:e.authtype,error:e.availability_status_error||u().createElement(F,null)}])}),p++,d++):e.availability_status===N&&p++})),{errors:l,status:0===d?0===p?"unknown":N:d===p?x:C}}(t),l=t.paused_at?D:(0,E.Z)({source:t,sourceTypes:o,appTypes:n})?L:c.status;return u().createElement("span",null,u().createElement(d.Popover,{showClose:!1,"aria-label":"".concat(l," popover"),bodyContent:G(l,n,c.errors)},u().createElement(d.Label,(0,r.Z)({className:"src-m-clickable",color:q(l)},t.availability_status===R&&{icon:u().createElement(m.ZP,null)},t.paused_at&&{icon:u().createElement(v.ZP,null)}),I(l))))},W=function(e){var t=e.app,a=e.showStatusText,i=(0,n.Z)(e,Z),s=(0,y.Z)(),c=function(e,t,a){var n;return(n={},(0,o.Z)(n,N,a.formatMessage({id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,o.Z)(n,x,t||a.formatMessage({id:"sources.unknownError",defaultMessage:"Unknown error"})),(0,o.Z)(n,R,u().createElement(h.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),n)[e]||a.formatMessage({id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})}(t.availability_status,t.availability_status_error,s);return u().createElement(d.Popover,(0,r.Z)({showClose:!1,key:t.display_name,"aria-label":"".concat(t.display_name," popover"),bodyContent:t.paused_at?"".concat(c," ").concat(s.formatMessage({id:"appplication.paused.additionalText",defaultMessage:"Resume this application to continue data collection."})):c},t.paused_at&&{headerContent:s.formatMessage({id:"application.paused.header",defaultMessage:"Application paused"})}),u().createElement(d.Label,(0,r.Z)({className:"src-m-clickable",color:q(t.availability_status)},t.availability_status===R&&{icon:u().createElement(m.ZP,null)},t.paused_at&&{icon:u().createElement(v.ZP,null)},i),a?I(t.availability_status):t.display_name))};W.propTypes={app:p().shape({display_name:p().string,availability_status:p().string,availability_status_error:p().string,paused_at:p().string}),showStatusText:p().bool};var H=function(e){var t=e.applications,a=(0,n.Z)(e,w),i=(0,y.Z)();return u().createElement(d.LabelGroup,(0,r.Z)({},a,{numLabels:2,collapsedText:i.formatMessage({id:"applications.showMore",defaultMessage:"{remaining} more"},{remaining:"${remaining}"})}),t.map((function(e,t){return u().createElement(W,{app:e,key:e.id||t})})))};H.propTypes={applications:p().arrayOf(p().shape({display_name:p().string,availability_status:p().string,availability_status_error:p().string,paused_at:p().string})).isRequired};var U=function(e,t,a){var n=a.appTypes,r=e.map((function(e){return function(e,t,a){var n=a.find((function(t){return t.id===e.application_type_id}));if(n){var r,i,s,o,c,u,l=e.availability_status,p=e.availability_status_error;return"Endpoint"===(null===(r=e.authentications)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.resource_type)&&(l=null===(s=t.endpoints)||void 0===s||null===(o=s[0])||void 0===o?void 0:o.availability_status,p=null===(c=t.endpoints)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.availability_status_error),{display_name:n.display_name,paused_at:e.paused_at,availability_status:l,availability_status_error:p}}}(e,t,n)})).filter(Boolean).sort((function(e,t){return e.display_name.localeCompare(t.display_name)}));return 0===r.length?"--":u().createElement(H,{numLabels:2,collapsedText:!0,applications:r})},V=function(e,t,a){var n=a.intl,r=a.sourceType;if("account_authorization"===e){var i,s=null==r?void 0:r.schema.authentication.find((function(e){return e.is_superkey})),o=null==t||null===(i=t.authentications)||void 0===i?void 0:i.find((function(e){var t=e.authtype;return t&&t===s.type}));return u().createElement(u().Fragment,null,n.formatMessage({id:"configurationMode.trust",defaultMessage:"Account authorization"}),(null==o?void 0:o.availability_status)===x&&u().createElement(d.Tooltip,{position:"top",content:o.availability_status_error||n.formatMessage({id:"configurationMode.trustmode.defaultError",defaultMessage:"Edit credentials required."})},u().createElement("span",{className:"pf-u-ml-sm"},u().createElement(f.ZP,{fill:"#C9190B"}))),u().createElement("div",{className:"pf-u-mt-sm"},u().createElement(g.Link,{to:(0,b.yS)(b._j.sourcesDetailEditCredentials.path,t.id)},u().createElement(d.Button,{variant:"link",id:"edit-super-credentials",isInline:!0},t.paused_at?n.formatMessage({id:"sources.viewCredentials",defaultMessage:"View credentials"}):n.formatMessage({id:"sources.editCredentials",defaultMessage:"Edit credentials"})))))}return n.formatMessage({id:"configurationMode.manual",defaultMessage:"Manual configuration"})}}}]);
//# sourceMappingURL=../sourcemaps/138.8c28755e9d074356fe687c3bd38149d1.js.map