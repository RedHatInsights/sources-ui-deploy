(self.webpackChunksources=self.webpackChunksources||[]).push([[1995],{43461:(e,t,a)=>{"use strict";a.d(t,{Z:()=>M});var s=a(28416),r=a.n(s),i=a(30446),n=a(25387),o=a(55140),l=a(87281),c=a(45697),u=a.n(c),d=a(86706),p=a(60079),m=a(31665);class E extends s.Component{state={error:null};static getDerivedStateFromError(e,t){return{error:e,errorInfo:t}}componentDidCatch(e){const t=p.Tb(e);this.props.dispatch((0,m.Hz)({title:`${e.toString()} (Sentry ID: ${t})`,variant:"danger",description:e.stack}))}render(){const{error:e}=this.state,{children:t}=this.props;return e?r().createElement(s.Fragment,null,"Error occurred"):r().createElement(s.Fragment,null,t)}}E.propTypes={dispatch:u().func.isRequired,children:u().node};const _=(0,d.$j)()(E);var g=a(71795);const h=e=>t=>(t({type:g.a.SET_WRITE_PERMISSIONS_PENDING}),e("sources",!0).then((e=>{const a=e.reduce(((e,t)=>[...e,t?.permission]),[]),s=a.includes("sources:*:*")||a.includes("sources:*:write");t({type:g.a.SET_WRITE_PERMISSIONS_FULFILLED,payload:s})})).catch((e=>t({type:g.a.SET_WRITE_PERMISSIONS_REJECTED,payload:{error:{detail:e.detail||e.data,title:"Cannot get user's credentials"}}})))),f=e=>t=>(t({type:g.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_PENDING}),e("integrations",!0).then((e=>{const a=e.map((e=>e?.permission)),s=a.includes("integrations:*:*")||a.includes("integrations:endpoints:read")||a.includes("integrations:endpoints:write");t({type:g.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_FULFILLED,payload:s})})).catch((e=>t({type:g.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_REJECTED,payload:{error:{detail:e.detail||e.data,title:"Cannot get user's credentials"}}})))),y=e=>t=>(t({type:g.a.SET_ORG_ADMIN_PENDING}),e().then((({identity:{user:{is_org_admin:e}}})=>{t({type:g.a.SET_ORG_ADMIN_FULFILLED,payload:e})})).catch((e=>t({type:g.a.SET_ORG_ADMIN_REJECTED,payload:{error:{detail:e.detail||e.data,title:"Cannot get user's credentials"}}})))),I=({children:e})=>{const t=(0,d.I0)(),{auth:{getUser:a},getUserPermissions:r}=(0,o.Z)();return(0,s.useEffect)((()=>{Promise.all([t(h(r)),t(y(a)),t(f(r))])}),[]),e};var v=a(48947),S=a(29698);const N=()=>{const e=(0,d.I0)(),{pathname:t}=(0,v.useLocation)(),a=(0,d.v9)((({sources:e})=>e),d.wU),r=(0,s.useRef)(t),{auth:{getToken:i},isProd:n}=(0,o.Z)();return(0,s.useEffect)((()=>{(async()=>{const{applications:t,types:a}=(0,S.uY)(),s=await i();t||a?Promise.all([e((0,m.WP)()),e((0,m.qJ)()),e((0,m.Yi)(s,n()))]).then((()=>e((0,m.il)(S.mB)))):Promise.all([e((0,m.WP)()),e((0,m.qJ)()),e((0,m.il)(S.mB)),e((0,m.Yi)(s,n()))])})()}),[]),(0,s.useEffect)((()=>{r.current!==t&&((0,S.rh)(a),r.current=t)}),[t]),null};var T=a(39911),b=a(90573);const M=()=>{const e=(0,o.Z)();return e?.updateDocumentTitle?.("Integrations"),(0,s.useEffect)((()=>((0,b.YY)(e.auth.getUser,e.auth.logout),()=>{sessionStorage.removeItem(T.t)})),[]),r().createElement(n.Pj,{locale:"en"},r().createElement(r().Fragment,null,r().createElement(i.ZP,null),r().createElement(_,null,r().createElement(I,null,r().createElement("section",{className:"pf-v5-u-p-0 src-c-section-main"},r().createElement(N,null),r().createElement(l.ZP,null))))))}},87281:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>C,yS:()=>P,_j:()=>A});var s=a(28416),r=a.n(s),i=a(48947),n=a(63663),o=a(45697),l=a.n(o),c=a(97979),u=a(86706),d=a(25387),p=a(31665),m=a(82866),E=a(42399),_=a(95111);const g=()=>{const e=(0,d.YB)(),t=(0,m.E)(),a=(0,u.v9)((({user:e})=>e.isOrgAdmin)),i=(0,u.I0)();return(0,s.useEffect)((()=>{if(!1===t){const t=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),s=(0,E.$)(e,a);i((0,p.Hz)({title:t,variant:"danger",description:s}))}}),[t]),!1===t?r().createElement(_.Z,{to:A.sources.path}):null};var h=a(40423);const f=()=>{const e=(0,d.YB)(),t=(0,c.L)(),a=(0,u.I0)();return(0,s.useEffect)((()=>{t.paused_at&&a((0,p.Hz)({title:e.formatMessage({id:"sources.sourcePausedRedirect",defaultMessage:"Integration is paused"}),variant:"danger",description:e.formatMessage({id:"sources.sourcePausedRedirectDescription",defaultMessage:"You cannot perform this action on a paused integration."})}))}),[t.paused_at]),t.paused_at?r().createElement(_.Z,{to:P(A.sourcesDetail.path,t.id)}):null},y=({route:e,children:t})=>e.redirectNoId&&(0,c.L)()||!e.redirectNoId?r().createElement(r().Fragment,null,e.noPaused&&r().createElement(f,null),e.writeAccess&&r().createElement(g,null),t):r().createElement(h.Z,null);y.propTypes={route:l().shape({path:l().string.isRequired,redirectNoId:l().bool,writeAccess:l().bool,noPaused:l().bool}).isRequired,children:l().node.isRequired};const I=({route:e,children:t})=>{const a=(0,i.useOutletContext)();return r().createElement(y,{route:e},(0,s.cloneElement)(t,a))};I.propTypes={route:l().shape({path:l().string.isRequired,redirectNoId:l().bool,writeAccess:l().bool,noPaused:l().bool}).isRequired,componentProps:l().any,children:l().node.isRequired};const v=I,S=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(8188),a.e(7017),a.e(1186),a.e(6634),a.e(2611),a.e(2185),a.e(8718),a.e(1036),a.e(2345),a.e(8019),a.e(6678),a.e(593)]).then(a.bind(a,7562)))),N=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(8188),a.e(7017),a.e(1186),a.e(6634),a.e(7444),a.e(8718),a.e(2345),a.e(8019),a.e(6077),a.e(535),a.e(3233),a.e(5393),a.e(6678),a.e(6818)]).then(a.bind(a,57564)))),T=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(7017),a.e(1186),a.e(6634),a.e(7444),a.e(236),a.e(9820),a.e(2345),a.e(8019),a.e(6494),a.e(6077),a.e(535),a.e(9236),a.e(6441),a.e(3233),a.e(3047),a.e(3791)]).then(a.bind(a,29061)))),b=(0,s.lazy)((()=>Promise.all([a.e(2345),a.e(6494),a.e(6077),a.e(9236),a.e(1128)]).then(a.bind(a,40786)))),M=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(7017),a.e(1186),a.e(6634),a.e(7444),a.e(236),a.e(9820),a.e(2345),a.e(8019),a.e(6494),a.e(6077),a.e(535),a.e(9236),a.e(6441),a.e(5393),a.e(2281)]).then(a.bind(a,85556)))),L=(0,s.lazy)((()=>Promise.all([a.e(2345),a.e(6494),a.e(9236),a.e(759)]).then(a.bind(a,20759)))),R=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(1186),a.e(6634),a.e(7444),a.e(2345),a.e(8019),a.e(6494),a.e(6077),a.e(535),a.e(6441),a.e(3233),a.e(3047),a.e(5576)]).then(a.bind(a,75460)))),D=(0,s.lazy)((()=>Promise.all([a.e(9121),a.e(1186),a.e(6634),a.e(7444),a.e(2345),a.e(8019),a.e(6494),a.e(6077),a.e(535),a.e(970)]).then(a.bind(a,75629)))),A={sources:{path:"/"},sourcesNew:{path:"new",writeAccess:!0},sourcesRemove:{path:"remove/:id",redirectNoId:!0,writeAccess:!0},sourcesDetail:{path:"detail/:id",redirectNoId:!0},sourcesDetailRename:{path:"detail/:id/rename",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemove:{path:"detail/:id/remove",redirectNoId:!0,writeAccess:!0},sourcesDetailAddApp:{path:"detail/:id/add_app/:app_type_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemoveApp:{path:"detail/:id/remove_app/:app_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailEditCredentials:{path:"detail/:id/edit_credentials",redirectNoId:!0,writeAccess:!0}},P=(e,t)=>e.replace(":id",t),$=[{route:{path:"/"},element:S,childRoutes:[{route:A.sourcesRemove,element:b,elementProps:{backPath:A.sources.path}},{route:A.sourcesNew,element:T}]},{route:A.sourcesDetail,element:N,childRoutes:[{route:A.sourcesDetail,path:"remove",element:b},{route:A.sourcesDetailAddApp,path:"add_app/:app_type_id",element:M},{route:A.sourcesDetailRemoveApp,path:"remove_app/:app_id",element:L},{route:A.sourcesDetail,path:"rename",element:R},{route:A.sourcesDetail,path:"edit_credentials",element:D}]}],O=(e=[])=>e.map((({route:e,path:t,element:a,childRoutes:s,elementProps:n})=>r().createElement(i.Route,{key:t||e.path,path:t||e.path,element:r().createElement(v,{route:e},r().createElement(a,{...n}))},O(s)))),C=()=>{const e=(0,s.useMemo)((()=>O($)),[$]);return r().createElement(s.Suspense,{fallback:r().createElement(n.zx,null)},r().createElement(i.Routes,null,e))}},90573:(e,t,a)=>{"use strict";a.d(t,{be:()=>d,Cu:()=>v,rL:()=>S,M5:()=>_,ye:()=>b,uc:()=>I,oI:()=>T,TA:()=>g,i$:()=>E,Rj:()=>m,YY:()=>p,sd:()=>N});var s=a(11107),r=a.n(s),i=a(80729),n=a(75614),o=a(63367),l=a(34155);const c=`${l.env.BASE_PATH||"/api"}/sources/v3.1`,u=`${l.env.BASE_PATH||"/api"}/cost-management/v1`,d=r().create();d.interceptors.response.use((function(e){return e.data?e.data:e})),d.interceptors.response.use(null,(function(e){throw e.response&&e.response.status>=500&&e.response.status<600&&(0,i.e)((t=>{t.setTag("request_id",e.response.req_id)})),e})),d.interceptors.response.use(null,(function(e){if(!r().isCancel(e))try{const t={...e};if(t.response&&t.response.data)throw t.response.data;throw e}catch(e){const t=(0,i.Tb)(e);throw e.sentryId=t,e}})),d.interceptors.response.use((e=>e.errors&&e.errors.length>0?Promise.reject({detail:e.errors[0].message}):e)),d.interceptors.response.use(null,(e=>{if(e.errors&&403===e.errors[0].status)return Promise.reject({detail:e.errors[0].detail,title:"Forbidden access"});throw e}));const p=(e,t)=>{d.interceptors.request.use((e=>async t=>(await e(),t))(e)),d.interceptors.response.use(null,(e=>t=>{if(t.response&&401===t.response.status)return e(),!1;throw t})(t))},m=()=>({checkAvailabilitySource:e=>d.post(`${c}/sources/${e}/check_availability`),updateSource:(e,t)=>d.patch(`${c}/sources/${e}`,t),updateEndpoint:(e,t)=>d.patch(`${c}/endpoints/${e}`,t),createEndpoint:e=>d.post(`${c}/endpoints`,e),updateAuthentication:(e,t)=>d.patch(`${c}/authentications/${e}`,t),createAuthentication:e=>d.post(`${c}/authentications`,e),showSource:e=>d.get(`${c}/sources/${e}`),listSourceEndpoints:e=>d.get(`${c}/sources/${e}/endpoints`),listSourceApplications:e=>d.get(`${c}/sources/${e}/applications`),listEndpointAuthentications:e=>d.get(`${c}/endpoints/${e}/authentications`),deleteSource:e=>d.delete(`${c}/sources/${e}`),createApplication:e=>d.post(`${c}/applications`,e),postGraphQL:e=>d.post(`${c}/graphql`,e),listSourceTypes:()=>d.get(`${c}/source_types`),doLoadAppTypes:()=>d.get(`${c}/application_types`),deleteApplication:e=>d.delete(`${c}/applications/${e}`),createAuthApp:e=>d.post(`${c}/application_authentications`,e),deleteAuthentication:e=>d.delete(`${c}/authentications/${e}`),showAuthentication:e=>d.get(`${c}/authentications/${e}`),updateApplication:(e,t)=>d.patch(`${c}/applications/${e}`,t),showApplication:e=>d.get(`${c}/applications/${e}`),listSourceAuthentications:e=>d.get(`${c}/sources/${e}/authentications`),createSource:e=>d.post(`${c}/sources`,e),getEndpoint:e=>d.get(`${c}/endpoints/${e}`),getGoogleAccount:()=>d.get(`${c}/app_meta_data?filter[name]=gcp_service_account`),bulkCreate:e=>d.post(`${c}/bulk_create`,e),pauseApplication:e=>d.post(`${c}/applications/${e}/pause`),unpauseApplication:e=>d.post(`${c}/applications/${e}/unpause`),pauseSource:e=>d.post(`${c}/sources/${e}/pause`),unpauseSource:e=>d.post(`${c}/sources/${e}/unpause`),getLighthouseLink:()=>d.get(`${c}/app_meta_data?filter[name]=azure_lighthouse_template`),getProvAppType:()=>d.get(`${c}/application_types?filter[name]=/insights/platform/provisioning`),getProvMetadata:e=>d.get(`${c}/app_meta_data?filter[name]=aws_wizard_account_number&application_type_id=${e}`),getProvisioningServiceAccount:e=>d.get(`${c}/app_meta_data?filter[name]=gcp_service_account&application_type_id=${e}`)}),E=()=>({listAwsRegions:(e=1e4,t=0)=>d.get(`${u}/sources/aws-s3-regions/?limit=${e}&offset=${t}`)}),_=()=>m().doLoadAppTypes(),g=e=>m().deleteSource(e).catch((e=>{throw{error:{detail:e.errors[0].detail}}})),h=(e,t)=>`limit:${e}, offset:${(t-1)*e}`,f=(e,t)=>e?"source_type_id"===e?`sort_by: { name: "source_type.product_name", direction: ${t} }`:"applications"===e?`sort_by: { name: "applications", direction: ${t} }`:`sort_by: { name: "${e}", direction: ${t} }`:"",y="\n    id,\n    created_at,\n    source_type_id,\n    name,\n    imported,\n    availability_status,\n    source_ref,\n    last_checked_at,\n    updated_at,\n    last_available_at,\n    app_creation_workflow,\n    paused_at,\n    authentications { authtype, username, availability_status_error, availability_status }\n    applications { application_type_id, id, availability_status_error, availability_status, paused_at, authentications { id, resource_type } },\n    endpoints { id, scheme, host, port, path, receptor_node, role, certificate_authority, verify_ssl, availability_status_error, availability_status, authentications { authtype, availability_status, availability_status_error } }\n",I=({pageSize:e,pageNumber:t,sortBy:a,sortDirection:s,filterValue:r,activeCategory:i})=>{const l=((e={},t)=>{let a=[];e.name&&a.push(`{ name: "name", operation: "contains_i", value: "${e.name}" }`),e.source_type_id?.length>0&&a.push(`{ name: "source_type_id", operation: "eq", value: [${e.source_type_id.map((e=>`"${e}"`)).join(", ")}] }`),e.applications?.length>0&&a.push(`{ name: "applications.application_type_id", operation: "eq", value: [${e.applications.map((e=>`"${e}"`)).join(", ")}] }`),t===n.JL&&a.push('{ name: "source_type.category", operation: "eq", value: "Cloud" }'),t===n.B0&&a.push('{ name: "source_type.category", operation: "eq", value: "Red Hat" }');const s=e.availability_status?.[0];return s&&(s===o.Rl?a.push(`{ name: "availability_status", operation: "eq", value: "${o.Rl}" }`):s===o.nZ&&a.push(`{ name: "availability_status", operation: "eq", value: ["${o.L}", "${o.nZ}"] }`)),a.length>0?`filter: [ ${a.join(", ")} ]`:""})(r,i),c=[h(e,t),f(a,s),l].join(",");return m().postGraphQL({query:`{ sources(${c})\n      { ${y} },\n     meta{count}\n    }`}).then((({data:e})=>e))},v=e=>m().createApplication(e),S=(e,t)=>m().deleteApplication(e).catch((({errors:[{detail:e}]})=>{throw{error:{title:t,detail:e}}})),N=(e={},t)=>{let a=[];e.name&&a.push(`filter[name][contains_i]=${e.name}`),e.source_type_id?.length>0&&e.source_type_id.map((e=>a.push(`filter[source_type_id][]=${e}`))),e.applications?.length>0&&e.applications.map((e=>a.push(`filter[applications][application_type_id][eq][]=${e}`))),t===n.JL&&a.push("filter[source_type][category]=Cloud"),t===n.B0&&a.push("filter[source_type][category]=Red Hat");const s=e.availability_status?.[0];return s&&(s===o.Rl?a.push(`filter[availability_status]=${o.Rl}`):s===o.nZ&&(a.push(`filter[availability_status][]=${o.L}`),a.push(`filter[availability_status][]=${o.nZ}`))),a.length>0?a.join("&"):""},T=e=>m().postGraphQL({query:`{ sources(filter: { name: "id", operation: "eq", value: "${e}" })\n            { ${y} }\n        }`}).then((({data:e})=>e)),b=e=>m().postGraphQL({query:`{ sources(filter: { name: "id", operation: "eq", value: "${e}" })\n          { applications {\n              application_type_id,\n              id,\n              availability_status_error,\n              availability_status,\n              paused_at,\n              extra,\n              authentications {\n                  id\n              }\n          } }\n      }`}).then((({data:e})=>e))},5495:(e,t,a)=>{"use strict";a.d(t,{S:()=>n,Z:()=>o});var s=a(90573),r=a(27361),i=a.n(r);const n=(e,t=void 0)=>{let a;return e||(a="Undefined error"),a||"string"!=typeof e||(a=e),a||(a=i()(e,"errors[0].detail",JSON.stringify(e,null,2))),t?(0,s.Rj)().deleteSource(t).then((()=>a)).catch((e=>{const t=i()(e,"errors[0].detail",JSON.stringify(e,null,2));return`${a}. The source was not removed, try remove it later: ${t}`})):a},o=n},96380:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(28416),r=a.n(s),i=a(48947),n=a(78116),o=a(45697),l=a.n(o);const c=r().forwardRef(((e,t)=>r().createElement(i.Link,{...e,ref:t,to:(0,n.n)(e.to,n.d)})));c.displayName="AppLink",c.propTypes={to:l().oneOfType([l().string,l().object])};const u=c},95111:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(28416),r=a.n(s),i=a(48947),n=a(78116),o=a(45697),l=a.n(o);const c=e=>r().createElement(i.Navigate,{...e,to:(0,n.n)(e.to,n.d)});c.displayName="AppNavigate",c.propTypes={to:l().oneOfType([l().string,l().object])};const u=c},39911:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v,t:()=>I});var s=a(28416),r=a.n(s),i=a(25387),n=a(2387),o=a(5521),l=a(82001),c=a(11480),u=a(82793),d=a(82010),p=a.n(d),m=a(48186),E=a.n(m),_=a(36551),g=a.n(_),h=a(91139),f=a.n(h),y=a(55140);const I="ins-c-sources__cloud_cards_expanded",v=r().memo((()=>{const[e,t]=(0,s.useState)((()=>{const e=sessionStorage.getItem(I);return!e||"true"===e})),a=(0,i.YB)(),{isBeta:d}=(0,y.Z)();(0,s.useEffect)((()=>{sessionStorage.setItem(I,e)}),[e]);const m=d()?"preview/":"",_=`/${m}settings/connector`,h=`/${m}insights/subscriptions/rhel`;return r().createElement(n.Card,{isExpanded:e,className:"pf-v5-u-mb-lg pf-v5-u-mt-md pf-v5-u-mt-0-on-md src-c-card-info"},r().createElement(n.CardHeader,{onExpand:()=>t(!e)},r().createElement(n.CardTitle,null,a.formatMessage({id:"cloud.nowWhat",defaultMessage:"I connected to cloud. Now what?"}))),r().createElement(n.CardExpandableContent,null,r().createElement(n.CardBody,null,r().createElement(u.TextContent,null,r().createElement(o.Grid,{hasGutter:!0},r().createElement(o.GridItem,{md:4},r().createElement(c.Stack,null,r().createElement(c.StackItem,{className:"pf-v5-u-mb-sm"},r().createElement(u.Text,{className:"pf-v5-u-font-size-sm pf-v5-u-font-weight-bold pf-v5-u-link-color-hover"},r().createElement(l.Icon,{size:"md",className:"pf-v5-u-pl-sm pf-v5-u-pr-md"},r().createElement(E(),{color:"#0066cc","aria-label":"Builder image icon"})),a.formatMessage({id:"cloud.goldImages",defaultMessage:"Use gold images"}))),r().createElement(c.StackItem,{isFilled:!0},r().createElement(u.Text,{className:"text pf-v5-u-mb-sm"},a.formatMessage({id:"cloud.goldImages.description",defaultMessage:"Connecting to Amazon Web Services or Microsoft Azure unlocks automatic access to Red Hat gold images. View gold images in your provider console."})),r().createElement(u.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/2023/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access#using-gold-images-on-aws_cloud-access",target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.goldImages.awsLink",defaultMessage:"Use Red Hat gold images on AWS"})),r().createElement("br",null),r().createElement(u.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/2023/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access#using-gold-images-on-azure_cloud-access",target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.goldImages.azureLink",defaultMessage:"Use Red Hat gold images on Microsoft Azure"}))),r().createElement(c.StackItem,{className:"pf-v5-u-mt-lg"},r().createElement(u.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/2023/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access",target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.goldImages.moreLink",defaultMessage:"Learn more about Red Hat gold images"}),r().createElement(p(),{className:"pf-v5-u-ml-sm"}))))),r().createElement(o.GridItem,{md:4},r().createElement(c.Stack,null,r().createElement(c.StackItem,{className:"pf-v5-u-mb-sm"},r().createElement(u.Text,{className:"pf-v5-u-font-size-sm pf-v5-u-font-weight-bold pf-v5-u-link-color-hover"},r().createElement(l.Icon,{size:"md",className:"pf-v5-u-pl-sm pf-v5-u-pr-md"},r().createElement(g(),{color:"#0066cc","aria-label":"Trend up icon"})),a.formatMessage({id:"cloud.insights",defaultMessage:"Explore Red Hat Insights"}))),r().createElement(c.StackItem,{isFilled:!0},r().createElement(u.Text,{className:"text pf-v5-u-mb-sm"},a.formatMessage({id:"cloud.insights.description",defaultMessage:"Use RHEL instances in the cloud and gain other value-add services, such as predictive analytics."})),r().createElement(u.Text,{className:"text",component:"a",href:"https://www.redhat.com/en/technologies/management/insights",target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.insights.insightsLinkt",defaultMessage:"Learn more about Red Hat Insights"}))),r().createElement(c.StackItem,{className:"pf-v5-u-mt-lg"},r().createElement(u.Text,{className:"text",component:"a",href:_,target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.insights.moreLink",defaultMessage:"Enable additional Insights services"}),r().createElement(p(),{className:"pf-v5-u-ml-sm"}))))),r().createElement(o.GridItem,{md:4},r().createElement(c.Stack,null,r().createElement(c.StackItem,{className:"pf-v5-u-mb-sm"},r().createElement(u.Text,{className:"pf-v5-u-font-size-sm pf-v5-u-font-weight-bold pf-v5-u-link-color-hover"},r().createElement(l.Icon,{size:"md",className:"pf-v5-u-pl-sm pf-v5-u-pr-md"},r().createElement(f(),{color:"#0066cc","aria-label":"List icon"})),a.formatMessage({id:"cloud.subwatch",defaultMessage:"Track usage with Subscriptions"}))),r().createElement(c.StackItem,{isFilled:!0},r().createElement(u.Text,{className:"text pf-v5-u-mb-sm"},a.formatMessage({id:"cloud.subwatch.description",defaultMessage:"Use the Subscriptions service to monitor account-level summaries of your Red Hat subscription profile."})),r().createElement(u.Text,{className:"text",component:"a",href:"https://access.redhat.com/products/subscription-central",target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.subwatch.learnMore",defaultMessage:"Learn more about Subscriptions"}))),r().createElement(c.StackItem,{className:"pf-v5-u-mt-lg"},r().createElement(u.Text,{className:"text",component:"a",href:h,target:"_blank",rel:"noopener noreferrer"},a.formatMessage({id:"cloud.subwatch.goTo",defaultMessage:"Go to Subscriptions"}),r().createElement(p(),{className:"pf-v5-u-ml-sm"}))))))))))}))},40423:(e,t,a)=>{"use strict";a.d(t,{Z:()=>E});var s=a(28416),r=a.n(s),i=a(86706),n=a(48947),o=a(25387),l=a(31665),c=a(90573),u=a(15185),d=a(87281),p=a(97979),m=a(95111);const E=()=>{const{id:e}=(0,n.useParams)(),t=(0,o.YB)(),a=(0,p.L)(),E=(0,u.W)(),{appTypesLoaded:_,sourceTypesLoaded:g}=(0,i.v9)((({sources:e})=>e),i.wU),h=(0,i.I0)(),[f,y]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{E&&_&&g&&(0,c.oI)(e).then((({sources:[e]})=>(h((0,l._B)(e)),e))).then((a=>{a||h((0,l.Hz)({title:t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),variant:"danger",description:t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e})})),y(!0)}))}),[E,_,g]),f&&!a?r().createElement(m.Z,{to:d._j.sources.path}):null}},63663:(e,t,a)=>{"use strict";a.d(t,{X6:()=>N,Xf:()=>y,aN:()=>h,mI:()=>I,sk:()=>v,zx:()=>f});var s=a(28416),r=a.n(s),i=a(45697),n=a.n(i),o=a(55573),l=a(63456),c=a(39173),u=a(7876),d=a(67187),p=a(2387),m=a(5521),E=a(54602),_=a(2012),g=a(25387);const h=({width:e="100%",height:t="100%",className:a=""})=>r().createElement("span",{className:`src-c-loader ${a}`,style:{width:e,height:t},role:"progressbar"});h.propTypes={className:n().string,width:n().oneOfType([n().string,n().number]),height:n().oneOfType([n().string,n().number])};const f=()=>{const e=(0,g.YB)();return r().createElement(r().Fragment,null,r().createElement(l.Z,null,r().createElement(c.Z,{title:e.formatMessage({id:"sources.sources",defaultMessage:"Integrations"})})),r().createElement(u.Z,{type:"content"},r().createElement("div",{className:"src-c-fake_content pf-v5-u-p-lg"},r().createElement(h,null))))},y=()=>r().createElement(h,{className:"top-pagination",height:30,width:200}),I=()=>r().createElement(d.Bullseye,{className:"src-c-bullseye__placeholder-loader","data-testid":"placeholder-table"},r().createElement(E.Spinner,{size:"xl"})),v=({row:{isDeleting:e,...t},...a})=>e?r().createElement("tr",null,r().createElement("td",{colSpan:_.W,className:"pf-v5-u-p-md","data-testid":"removing-row"},r().createElement(h,{height:100}))):r().createElement(o.e,{...a,row:t,className:"src-c-row-vertical-centered","data-testid":"row"});v.propTypes={row:n().object.isRequired};const S=e=>r().createElement(p.Card,{className:"pf-v5-u-m-md"},r().createElement(p.CardBody,null,r().createElement(h,{...e}))),N=()=>r().createElement("div",{className:"src-c-detail-page"},r().createElement(l.Z,null,r().createElement(h,{height:96})),r().createElement(m.Grid,null,r().createElement(m.GridItem,{md:"6"},r().createElement(S,{height:218})),r().createElement(m.GridItem,{md:"6"},r().createElement(S,{height:218})),r().createElement(m.GridItem,{md:"12"},r().createElement(S,{height:324}))))},64072:(e,t,a)=>{"use strict";a.d(t,{M:()=>s,b:()=>r});const s="manual_configuration",r="account_authorization"},82866:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(86706);const r=()=>{const e=(0,s.v9)((({user:e})=>e?.writePermissions));if("boolean"==typeof e)return!!e}},15185:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var s=a(86706);const r=()=>(0,s.v9)((({sources:e})=>e.loaded))<=0},97979:(e,t,a)=>{"use strict";a.d(t,{L:()=>i});var s=a(86706),r=a(48947);const i=()=>{const{id:e}=(0,r.useParams)();return(0,s.v9)((({sources:t})=>t.entities.find((t=>t.id===e))))}},87645:(e,t,a)=>{"use strict";a.d(t,{$g:()=>d,BW:()=>l,Gs:()=>u,Q9:()=>o,aE:()=>c,aI:()=>s,d5:()=>p,dD:()=>i,ei:()=>r,lN:()=>n});const s=["LOAD_ENTITIES","CREATE_SOURCE","REMOVE_SOURCE","LOAD_HCS_ENROLLMENT","LOAD_SOURCE_TYPES","LOAD_APP_TYPES","REMOVE_APPLICATION","RENAME_SOURCE"].reduce(((e,t)=>({...e,[t]:t,[`${t}_PENDING`]:`${t}_PENDING`,[`${t}_FULFILLED`]:`${t}_FULFILLED`,[`${t}_REJECTED`]:`${t}_REJECTED`})),{}),r="SORT_ENTITIES",i="PAGE_AND_SIZE",n="FILTER_SOURCES",o="ADD_APP_TO_SOURCE",l="SET_COUNT",c="ADD_HIDDEN_SOURCE",u="CLEAR_FILTERS",d="SET_CATEGORY",p="STATUS_CHECK_PENDING"},31665:(e,t,a)=>{"use strict";a.d(t,{_B:()=>L,Hz:()=>N,K5:()=>D,OU:()=>S,qJ:()=>y,il:()=>g,Yi:()=>f,WP:()=>h,zm:()=>v,xz:()=>$,Yn:()=>M,Gd:()=>b,wZ:()=>T,d4:()=>A,AX:()=>O,Qr:()=>P,mE:()=>R,Bb:()=>I});var s=a(28416),r=a.n(s),i=a(89572),n=a.n(i),o=a(96758),l=a.n(o),c=a(83215),u=a(87645),d=a(90573),p=a(32321),m=a(5495),E=a(69706),_=a(75614);const g=e=>(t,a)=>{t({type:u.aI.LOAD_ENTITIES_PENDING,options:"function"==typeof e?e(a):e});const{pageSize:s,pageNumber:r,sortBy:i,sortDirection:n,filterValue:o,activeCategory:l}=a().sources;return(0,d.uc)({pageSize:s,pageNumber:r,sortBy:i,sortDirection:n,filterValue:o,activeCategory:l}).then((({sources:e,meta:a})=>t({type:u.aI.LOAD_ENTITIES_FULFILLED,payload:{sources:e,meta:a}}))).catch((e=>t({type:u.aI.LOAD_ENTITIES_REJECTED,meta:{noError:!0},payload:{error:{detail:e.detail||e.data,title:e.title||"Fetching data failed, try refresh page"}}})))},h=()=>e=>(e({type:u.aI.LOAD_SOURCE_TYPES_PENDING}),(0,d.Rj)().listSourceTypes().then((e=>e.data)).then((t=>e({type:u.aI.LOAD_SOURCE_TYPES_FULFILLED,payload:t}))).catch((t=>e({type:u.aI.LOAD_SOURCE_TYPES_REJECTED,payload:{error:t},meta:{noError:!0}})))),f=(e,t)=>a=>(a({type:u.aI.LOAD_HCS_ENROLLMENT_PENDING}),(async(e,t)=>fetch(`https://billing.${t?"":"stage."}api.redhat.com/v1/authorization/hcsEnrollment`,{headers:{Authorization:`Bearer ${e}`}}).then((e=>200!==e.status?{hcsDeal:!1}:e.json())).catch((e=>(console.error(e),console.log("Failed to check HCS enrollment"),{hcsDeal:!1}))))(e,t).then((({hcsDeal:e})=>a({type:u.aI.LOAD_HCS_ENROLLMENT_FULFILLED,payload:e}))).catch((e=>a({type:u.aI.LOAD_HCS_ENROLLMENT_REJECTED,payload:{error:e},meta:{noError:!0}})))),y=()=>e=>(e({type:u.aI.LOAD_APP_TYPES_PENDING}),(0,d.M5)().then((t=>e({type:u.aI.LOAD_APP_TYPES_FULFILLED,payload:t.data}))).catch((t=>e({type:u.aI.LOAD_APP_TYPES_REJECTED,payload:{error:t},meta:{noError:!0}})))),I=(e,t)=>a=>(a({type:u.ei,payload:{column:e,direction:t}}),a(g())),v=(e,t)=>a=>(a({type:u.dD,payload:{page:e,size:t}}),a(g({paginationClicked:!0}))),S=e=>t=>(t({type:u.lN,payload:{value:e}}),t(g())),N=e=>t=>t({type:c.Dv,payload:{dismissable:!0,...e}}),T=(e,t)=>a=>(a({type:u.aI.REMOVE_SOURCE_PENDING,meta:{sourceId:e}}),(0,d.TA)(e).then((()=>a(g({loaded:0})))).then((()=>{a({type:u.aI.REMOVE_SOURCE_FULFILLED,meta:{sourceId:e}}),a(N({title:t,variant:"success"}))})).catch((()=>a({type:u.aI.REMOVE_SOURCE_REJECTED,meta:{sourceId:e}})))),b=e=>({type:c.Kf,payload:e}),M=(e,t,a,s)=>({type:u.aI.REMOVE_APPLICATION,payload:()=>(0,d.rL)(e,s),meta:{appId:e,sourceId:t,notifications:{fulfilled:{variant:"success",title:a,dismissable:!0}}}}),L=e=>({type:u.aE,payload:{source:e}}),R=e=>({type:u.d5,payload:{sourceId:e}}),D=()=>e=>(e({type:u.Gs}),e(g())),A=(e,t,a)=>(s,r)=>{const i=r().sources.entities.find((t=>t.id===e))?.name;return s({type:u.aI.RENAME_SOURCE_PENDING,payload:{id:e,name:t}}),(0,d.Rj)().updateSource(e,{name:t}).catch((t=>s({type:u.aI.RENAME_SOURCE_REJECTED,payload:{error:{detail:t.errors?.[0]?.detail||t,title:a},id:e,name:i}})))},P=e=>t=>(t({type:u.$g,payload:{category:e}}),e!==_.Du&&t(g({pageNumber:1}))),$=(e,t,a)=>s=>(0,d.Rj)().pauseSource(e).then((()=>{s(N({title:a.formatMessage({id:"source.paused.alert.title",defaultMessage:"Integration paused"}),description:a.formatMessage({id:"source.paused.alert.description",defaultMessage:"Integration <b>{ sourceName }</b> is now paused. Data collection for all connected applications will be disabled until the integration is resumed."},{sourceName:t,b:p.S}),variant:"default",customIcon:r().createElement(n(),null)})),s(g({loaded:0}))})).catch((e=>{s(N({title:a.formatMessage({id:"source.paused.alert.error",defaultMessage:"Integration pause failed"}),description:(0,E.Z)(a,(0,m.Z)(e)),variant:"danger"}))})),O=(e,t,a)=>s=>(0,d.Rj)().unpauseSource(e).then((()=>{s(N({title:a.formatMessage({id:"source.resumed.alert.title",defaultMessage:"Integration resumed"}),description:a.formatMessage({id:"source.resumed.alert.description",defaultMessage:"Integration <b>{ sourceName }</b> will recontinue data collection for connected applications."},{sourceName:t,b:p.S}),variant:"default",customIcon:r().createElement(l(),null)})),s(g({loaded:0}))})).catch((e=>{s(N({title:a.formatMessage({id:"source.resume.alert.error",defaultMessage:"Integration resume failed"}),description:(0,E.Z)(a,(0,m.Z)(e)),variant:"danger"}))}))},71795:(e,t,a)=>{"use strict";a.d(t,{a:()=>s});const s=["SET_WRITE_PERMISSIONS","SET_ORG_ADMIN","SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS"].reduce(((e,t)=>({...e,[t]:t,[`${t}_PENDING`]:`${t}_PENDING`,[`${t}_FULFILLED`]:`${t}_FULFILLED`,[`${t}_REJECTED`]:`${t}_REJECTED`})),{})},75614:(e,t,a)=>{"use strict";a.d(t,{B0:()=>n,Du:()=>l,IV:()=>h,JL:()=>o,M$:()=>p,N9:()=>i,OH:()=>r,Q9:()=>c,Qk:()=>m,Qr:()=>E,T2:()=>v,X0:()=>y,XA:()=>d,_Z:()=>u,_m:()=>g,fn:()=>_,mD:()=>f,mr:()=>s,sC:()=>I});const s="hcs",r="satellite",i="ansible-tower",n="Red Hat",o="Cloud",l="Integrations",c="Communications",u="Reporting",d="Webhooks",p="/insights/platform/topological-inventory",m="/insights/platform/fifi",E="/insights/platform/cost-management",_="/insights/platform/cloud-meter",g="/insights/platform/provisioning",h="/insights/platform/catalog",f="overview",y="Hybrid Committed Spend",I="2",v=e=>[e.find((({name:e})=>e===_))?.id,e.find((({name:e})=>e===E))?.id]},42399:(e,t,a)=>{"use strict";a.d(t,{$:()=>s,Z:()=>r});const s=(e,t)=>t?e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must add Cloud Integration Administrator permissions to your user."}):e.formatMessage({id:"sources.notWritePermissionButton",defaultMessage:"To perform this action, your Organization Administrator must grant you Cloud Integration Administrator permissions."}),r=(e,t)=>({tooltipProps:{content:s(e,t)},tooltip:s(e,t),isDisabled:!0,className:"src-m-dropdown-item-disabled"})},32321:(e,t,a)=>{"use strict";a.d(t,{S:()=>n});var s=a(28416),r=a.n(s);let i=0;const n=e=>r().createElement("b",{key:`b-${e.length}-${i++}}`},e)},55874:(e,t,a)=>{"use strict";a.d(t,{X5:()=>N});var s=a(9036),r=a(84885),i=a(83215),n=a(53894),o=a(54157),l=a.n(o),c=a(87645),u=a(75614);const d={loaded:0,pageSize:50,pageNumber:1,entities:[],numberOfEntities:0,appTypesLoaded:!1,sourceTypesLoaded:!1,filterValue:{},sortBy:"created_at",sortDirection:"desc",removingSources:[],activeCategory:u.JL,appTypes:[],sourceTypes:[],hcsEnrolled:!1,hcsEnrolledLoaded:!1},p=(e,{payload:{sourceId:t,app:a}})=>({...e,entities:e.entities.map((e=>e.id===t?{...e,applications:[...e.applications,a]}:e))}),m=(e,{payload:{id:t,name:a}})=>({...e,entities:e.entities.map((e=>e.id===t?{...e,name:a}:e))}),E={[c.aI.LOAD_ENTITIES_PENDING]:(e,{options:t})=>({...e,loaded:e.loaded+1,paginationClicked:!1,...t}),[c.aI.LOAD_ENTITIES_FULFILLED]:(e,{payload:{sources:t,meta:a},options:s})=>({...e,loaded:Math.max(e.loaded-1,0),entities:t,numberOfEntities:a?.count,...s}),[c.aI.LOAD_ENTITIES_REJECTED]:(e,{payload:{error:t}})=>({...e,fetchingError:t}),[c.aI.LOAD_SOURCE_TYPES_PENDING]:e=>({...e,sourceTypes:[],sourceTypesLoaded:!1}),[c.aI.LOAD_SOURCE_TYPES_FULFILLED]:(e,{payload:t})=>({...e,sourceTypes:t,sourceTypesLoaded:!0}),[c.aI.LOAD_SOURCE_TYPES_REJECTED]:(e,{payload:{error:t}})=>({...e,fetchingError:t}),[c.aI.LOAD_HCS_ENROLLMENT_PENDING]:e=>({...e,hcsEnrolled:!1,hcsEnrolledLoaded:!1}),[c.aI.LOAD_HCS_ENROLLMENT_FULFILLED]:(e,{payload:t})=>({...e,hcsEnrolled:t,hcsEnrolledLoaded:!0}),[c.aI.LOAD_HCS_ENROLLMENT_REJECTED]:(e,{payload:{error:t}})=>({...e,fetchingError:t}),[c.aI.LOAD_APP_TYPES_PENDING]:e=>({...e,appTypes:[],appTypesLoaded:!1}),[c.aI.LOAD_APP_TYPES_FULFILLED]:(e,{payload:t})=>({...e,appTypes:t,appTypesLoaded:!0}),[c.aI.LOAD_APP_TYPES_REJECTED]:(e,{payload:{error:t}})=>({...e,fetchingError:t}),[c.aI.REMOVE_SOURCE_PENDING]:(e,{meta:t})=>({...e,removingSources:[...e.removingSources,t.sourceId]}),[c.aI.REMOVE_SOURCE_FULFILLED]:(e,{meta:t})=>({...e,removingSources:e.removingSources.filter((e=>e!==t.sourceId)),entities:e.entities.filter((e=>e.id!==t.sourceId))}),[c.aI.REMOVE_SOURCE_REJECTED]:(e,{meta:t})=>({...e,removingSources:e.removingSources.filter((e=>e!==t.sourceId))}),[c.aI.REMOVE_APPLICATION_PENDING]:(e,{meta:t})=>({...e,entities:e.entities.map((e=>e.id===t.sourceId?{...e,applications:e.applications.map((e=>e.id===t.appId?{...e,isDeleting:!0}:e))}:e))}),[c.aI.REMOVE_APPLICATION_FULFILLED]:(e,{meta:t})=>({...e,entities:e.entities.map((e=>e.id===t.sourceId?{...e,applications:e.applications.filter((e=>e.id!==t.appId))}:e))}),[c.aI.REMOVE_APPLICATION_REJECTED]:(e,{meta:t})=>({...e,entities:e.entities.map((e=>e.id===t.sourceId?{...e,applications:e.applications.map((e=>e.id===t.appId?{...e,isDeleting:void 0}:e))}:e))}),[c.aI.RENAME_SOURCE_PENDING]:m,[c.aI.RENAME_SOURCE_REJECTED]:m,[c.ei]:(e,{payload:{column:t,direction:a}})=>({...e,sortBy:t,sortDirection:a}),[c.dD]:(e,{payload:{page:t,size:a}})=>({...e,pageSize:a,pageNumber:t}),[c.lN]:(e,{payload:{value:t}})=>({...e,filterValue:{...e.filterValue,...t},pageNumber:1}),[c.Q9]:p,[c.Q9]:p,[c.BW]:(e,{payload:{count:t}})=>({...e,numberOfEntities:t}),[c.aE]:(e,{payload:{source:t}})=>({...e,entities:[...e.entities,{...t,hidden:!0}]}),[c.d5]:(e,{payload:{sourceId:t}})=>({...e,entities:e.entities.map((e=>e.id===t?{...e,isCheckPending:!0}:e))}),[c.Gs]:e=>({...e,filterValue:{},pageNumber:1}),[c.$g]:(e,{payload:{category:t}})=>({...e,filterValue:{...e.filterValue,source_type_id:[],applications:[]},activeCategory:t})};var _=a(71795);const g={writePermissions:void 0,integrationsEndpointsPermissions:void 0,isOrgAdmin:void 0},h=e=>({...e,writePermissions:void 0}),f=e=>({...e,isOrgAdmin:void 0}),y=e=>({...e,integrationsEndpointsPermissions:void 0}),I={[_.a.SET_WRITE_PERMISSIONS_PENDING]:h,[_.a.SET_WRITE_PERMISSIONS_FULFILLED]:(e,{payload:t})=>({...e,writePermissions:t}),[_.a.SET_WRITE_PERMISSIONS_REJECTED]:h,[_.a.SET_ORG_ADMIN_PENDING]:f,[_.a.SET_ORG_ADMIN_FULFILLED]:(e,{payload:t})=>({...e,isOrgAdmin:t}),[_.a.SET_ORG_ADMIN_REJECTED]:f,[_.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_PENDING]:y,[_.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_FULFILLED]:(e,{payload:t})=>({...e,integrationsEndpointsPermissions:t}),[_.a.SET_INTEGRATIONS_ENDPOINTS_PERMISSIONS_REJECTED]:y};var v=a(29698);const S=e=>t=>a=>{if(a.type===c.aI.LOAD_ENTITIES_PENDING){const t=e.getState().sources;(0,v.rh)({...t,...a.options})}else a.type===c.$g&&a.payload?.category===u.Du&&(0,v.rh)({removeQuery:!0,activeCategory:a.payload?.category});t(a)},N=()=>((e=[],t={})=>{const a=[n.Z,(0,r.ZP)({errorTitleKey:"error.title",errorDescriptionKey:"error.detail"}),l(),S,...e],o=(0,v.mB)(),c=new s.ZP({},a);return c.register({sources:(0,s.Gg)(E,{...d,...t.sources,activeCategory:[u.JL,u.B0,u.Q9,u._Z,u.XA].includes(o?.activeCategory)?o.activeCategory:t.sources?.activeCategory||d?.activeCategory||u.JL})}),c.register({user:(0,s.Gg)(I,{...g,...t.user})}),c.register({notifications:i.ee}),c.getStore()})()},69706:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s=(e,t)=>e.formatMessage({id:"tryAgain.text",defaultMessage:"{ error }. Please try again."},{error:t})},29698:(e,t,a)=>{"use strict";a.d(t,{mB:()=>c,rh:()=>o,uY:()=>l});var s=a(90573),r=a(63367),i=a(2012),n=a(75614);const o=({sortBy:e,sortDirection:t,pageNumber:a,pageSize:r,filterValue:i,activeCategory:o,removeQuery:l})=>{const c=`sort_by[]=${e}:${t}`,u=`limit=${r}&offset=${(a-1)*r}&category=${o||n.JL}`,d=(0,s.sd)(i),p=`?${c}&${u}${d?`&${d}`:""}`,m=decodeURIComponent(`${window.location.pathname}${l?`?category=${o}`:p}`);return location.href!==m?history.replaceState("","",m):null},l=e=>{const t=e||new URLSearchParams(window.location.search),a=t.getAll("application"),s=t.getAll("type"),r=t.getAll("category");return{applications:a.length&&a,types:s.length&&s,category:r}},c=e=>{let t={};const a=new URLSearchParams(window.location.search),s=a.get("sort_by[]");let o,c;s&&(o=s.split(":")[0],c=s.split(":")[1],o=(0,i.E)({formatMessage:()=>""}).filter((({sortable:e})=>e)).map((({value:e})=>e)).includes(o)?o:"created_at",c=["desc","asc"].includes(c)?c:"desc"),o&&c&&(t={sortBy:o,sortDirection:c});const u=a.get("limit"),d=a.get("offset");let p;d&&u&&(p=d/u+1,isNaN(p)&&(p=void 0)),u&&p&&(t={...t,pageNumber:parseInt(p,10),pageSize:Math.min(parseInt(u,10),100)});let m={};const E=a.get("filter[name][contains_i]");E&&(m={name:E});const _=a.getAll("filter[source_type_id][]");_.length>0&&(m={...m,source_type_id:_});const g=a.getAll("filter[applications][application_type_id][eq][]");g.length>0&&(m={...m,applications:g}),a.get("filter[availability_status]")?m={...m,availability_status:[r.Rl]}:a.get("filter[availability_status][]")&&(m={...m,availability_status:[r.nZ]});const{applications:h,types:f}=l(a);if(h||f){const{appTypes:t,sourceTypes:a}=e().sources,s=h.map?.((e=>t.find((({name:t})=>t.includes(e)))?.id)).filter(Boolean),r=f.map?.((e=>a.find((({name:t})=>t===e))?.id)).filter(Boolean);m={...m,...s?.length&&{applications:s},...r?.length&&{source_type_id:r}}}Object.entries(m).map((([e,t])=>t)).filter(Boolean).length>0&&(t={...t,filterValue:m});const y=a.get("category")||a.get("activeVendor");return[n.JL,n.B0,n.Q9,n._Z,n.XA].includes(y)&&(t={...t,activeCategory:y}),t}},78116:(e,t,a)=>{"use strict";a.d(t,{d:()=>s,n:()=>r});const s="/settings/integrations",r=(e,t)=>"string"==typeof e?`${t}/${e}`.replaceAll("//","/"):{...e,pathname:`${t}/${e.pathname}`.replaceAll("//","/")}},63367:(e,t,a)=>{"use strict";a.d(t,{BN:()=>B,Bj:()=>C,Ee:()=>A,Fd:()=>M,Gz:()=>Z,L:()=>O,P5:()=>L,Rl:()=>P,Z3:()=>J,bF:()=>b,c:()=>z,jl:()=>D,nZ:()=>$,vh:()=>R});var s=a(28416),r=a.n(s),i=a(45697),n=a.n(i),o=a(47914),l=a(46665),c=a(85964),u=a(41564),d=a(82793),p=a(42309),m=a(57945),E=a.n(m),_=a(85333),g=a.n(_),h=a(89572),f=a.n(h),y=a(64072),I=a(25387),v=a(62410),S=a(48947),N=a(87281),T=a(96380);const b=e=>({http:"80",https:"443"}[e]),M=e=>{const t=Object.keys(e).reduce(((t,a)=>({...t,[a]:e[a]||""})),{}),{scheme:a="",host:s="",path:r="",port:i=""}=t,n=`${a}://${s}${((e,t)=>t&&String(t)!==b(e)?`:${t}`:"")(a,i)}${r}`;if("://"!==n)return n},L=(e,t,{sourceTypes:a})=>{const s=a.find((t=>t.id===e));return s&&s.product_name||e||""},R=e=>r().createElement("span",{className:"src-c-help-cursor"},r().createElement(v.Z,{type:"relative",date:e})),D=(e,t,{sourceTypes:a})=>r().createElement(d.TextContent,null,r().createElement(S.Link,{to:(0,N.yS)(N._j.sourcesDetail.path,t.id)},e),r().createElement("br",{key:`${t.id}-br`}),r().createElement(d.Text,{key:t.id,component:d.TextVariants.small},((e,t)=>{const a=t.find((t=>t.id===e.source_type_id));return a&&"openshift"===a.name})(t,a)&&(e=>e.endpoints&&e.endpoints[0]&&M(e.endpoints[0]))(t))),A=e=>{if(!e)return null;const t=(e=>({cfme:r().createElement(I._H,{id:"sources.cloudformImportTooltip",defaultMessage:"This source can be managed from your connected CloudForms application."})}[e.toLowerCase()]))(e);return t?r().createElement(p.Tooltip,{content:t},r().createElement(o.Badge,{isRead:!0,className:"src-m-help-cursor"},r().createElement(I._H,{id:"sources.imported",defaultMessage:"imported"}))):r().createElement(o.Badge,{isRead:!0},r().createElement(I._H,{id:"sources.imported",defaultMessage:"imported"}))},P="available",$="unavailable",O="partially_available",C="in_progress",w="paused_at",k=e=>({[$]:"red",[P]:"green",[O]:"orange",[w]:"cyan"}[e]||"grey"),F=e=>({[$]:r().createElement(I._H,{id:"sources.unavailable",defaultMessage:"Unavailable"}),[P]:r().createElement(I._H,{id:"sources.available",defaultMessage:"Available"}),[O]:r().createElement(I._H,{id:"sources.partiallyAvailable",defaultMessage:"Partially available"}),[C]:r().createElement(I._H,{id:"sources.inProgress",defaultMessage:"In progress"}),[w]:r().createElement(I._H,{id:"sources.paused",defaultMessage:"Paused"})}[e]||r().createElement(I._H,{id:"sources.unknown",defaultMessage:"Unknown"})),U=()=>r().createElement(I._H,{id:"sources.unknownError",defaultMessage:"unavailable"}),G=(e,t)=>r().createElement(r().Fragment,null,t.source&&r().createElement(r().Fragment,null,r().createElement(I._H,{id:"sources.sourceError",defaultMessage:"Source's status: { error }",values:{error:t.source}}),r().createElement("br",null)),t.endpoint&&r().createElement(r().Fragment,null,r().createElement(I._H,{id:"sources.endpointError",defaultMessage:"Endpoint error: { error }",values:{error:t.endpoint}}),r().createElement("br",null)),t.authentications&&r().createElement(I._H,{id:"sources.authErrors",defaultMessage:"Authentication {count, plural, one {status} other {statuses}} : { errors }",values:{count:t.authentications.length,errors:t.authentications.map((({error:e,type:t})=>r().createElement(r().Fragment,{key:t},r().createElement(I._H,{id:"sources.errorAuthTemplate",defaultMessage:"{ type }: { error }",values:{error:e,type:t}}),r().createElement("br",null))))}}),t.applications&&r().createElement(I._H,{id:"sources.appErrors",defaultMessage:"Application {count, plural, one {status} other {statutes}}: { errors }",values:{count:t.applications.length,errors:t.applications.map((({error:t,id:a})=>r().createElement(r().Fragment,{key:a},r().createElement(I._H,{id:"sources.errorAppTemplate",defaultMessage:"{ app }: { error }",values:{error:t,app:e.find((e=>e.id===a))?.display_name||a}}),r().createElement("br",null))))}})),H=(e,t,a={})=>({[$]:r().createElement(r().Fragment,null,r().createElement(I._H,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(a).length}}),r().createElement("hr",null),G(t,a)),[P]:r().createElement(I._H,{id:"sources.appStatusOK",defaultMessage:"Everything works fine."}),[O]:r().createElement(r().Fragment,null,r().createElement(I._H,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(a).length}}),r().createElement("hr",null),G(t,a)),[C]:r().createElement(I._H,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."}),[w]:r().createElement(I._H,{id:"sources.pausedStatus",defaultMessage:"Data collection is temporarily disabled. Resume source to reestablish connection."})}[e]||r().createElement(I._H,{id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})),B=(e,t,{appTypes:a})=>{const s=(({availability_status:e,availability_status_error:t,applications:a=[],endpoints:[s]=[]})=>{if(e===C)return{errors:{},status:C};let i={},n=0,o=0;return e===$?(i={...i,source:t||r().createElement(U,null)},n++,o++):e===P&&n++,a.map((e=>{e.availability_status===$?(i={...i,applications:[...i.applications?i.applications:[],{id:e.application_type_id,error:e.availability_status_error||r().createElement(U,null)}]},n++,o++):e.availability_status===P&&n++})),s?.availability_status===$?(i={...i,endpoint:s.availability_status_error||r().createElement(U,null)},n++,o++):s?.availability_status===P&&n++,s?.authentications&&s.authentications.map((e=>{e.availability_status===$?(i={...i,authentications:[...i.authentications?i.authentications:[],{type:e.authtype,error:e.availability_status_error||r().createElement(U,null)}]},n++,o++):e.availability_status===P&&n++})),{errors:i,status:0===o?0===n?"unknown":P:o===n?$:O}})(t),i=t.paused_at?w:s.status;return r().createElement("span",null,r().createElement(u.Popover,{showClose:!1,"aria-label":`${i} popover`,bodyContent:H(i,a,s.errors)},r().createElement(c.Label,{className:"src-m-clickable",color:k(i),...t.availability_status===C&&{icon:r().createElement(g(),null)},...t.paused_at&&{icon:r().createElement(f(),null)}},F(i))))},z=({app:e,showStatusText:t,...a})=>{const s=(0,I.YB)(),i=((e,t,a)=>({[P]:a.formatMessage({id:"sources.appStatusOK",defaultMessage:"Everything works fine."}),[$]:t||a.formatMessage({id:"sources.unknownError",defaultMessage:"Unknown error"}),[C]:r().createElement(I._H,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})}[e]||a.formatMessage({id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})))(e.availability_status,e.availability_status_error,s);return r().createElement(u.Popover,{showClose:!1,key:e.display_name,"aria-label":`${e.display_name} popover`,bodyContent:e.paused_at?`${i} ${s.formatMessage({id:"appplication.paused.additionalText",defaultMessage:"Resume this application to continue data collection."})}`:i,...e.paused_at&&{headerContent:s.formatMessage({id:"application.paused.header",defaultMessage:"Application paused"})}},r().createElement(c.Label,{className:"src-m-clickable",color:k(e.availability_status),...e.availability_status===C&&{icon:r().createElement(g(),null)},...e.paused_at&&{icon:r().createElement(f(),null)},...a},t?F(e.availability_status):e.display_name))};z.propTypes={app:n().shape({display_name:n().string,availability_status:n().string,availability_status_error:n().string,paused_at:n().string}),showStatusText:n().bool};const x=({applications:e,...t})=>{const a=(0,I.YB)();return r().createElement(c.LabelGroup,{...t,numLabels:2,collapsedText:a.formatMessage({id:"applications.showMore",defaultMessage:"{remaining} more"},{remaining:"${remaining}"})},e.map(((e,t)=>r().createElement(z,{app:e,key:e.id||t}))))};x.propTypes={applications:n().arrayOf(n().shape({display_name:n().string,availability_status:n().string,availability_status_error:n().string,paused_at:n().string})).isRequired};const Z=(e,t,{appTypes:a})=>{const s=e.map((e=>((e,t,a)=>{const s=a.find((t=>t.id===e.application_type_id));if(s){let a=e.availability_status,r=e.availability_status_error;return"Endpoint"===e.authentications?.[0]?.resource_type&&(a=t.endpoints?.[0]?.availability_status,r=t.endpoints?.[0]?.availability_status_error),{display_name:s.display_name,paused_at:e.paused_at,availability_status:a,availability_status_error:r}}})(e,t,a))).filter(Boolean).sort(((e,t)=>e.display_name.localeCompare(t.display_name)));return 0===s.length?"--":r().createElement(x,{numLabels:2,collapsedText:!0,applications:s})},J=(e,t,{intl:a,sourceType:s})=>{if(e===y.b){const e=s?.schema.authentication.find((({is_superkey:e})=>e)),i=t?.authentications?.find((({authtype:t})=>t&&t===e?.type));return r().createElement(r().Fragment,null,a.formatMessage({id:"configurationMode.trust",defaultMessage:"Account authorization"}),i?.availability_status===$&&r().createElement(p.Tooltip,{position:"top",content:i.availability_status_error||a.formatMessage({id:"configurationMode.trustmode.defaultError",defaultMessage:"Edit credentials required."})},r().createElement("span",{className:"pf-v5-u-ml-sm"},r().createElement(E(),{fill:"#C9190B"}))),r().createElement("div",{className:"pf-v5-u-mt-sm"},r().createElement(T.Z,{to:(0,N.yS)(N._j.sourcesDetailEditCredentials.path,t.id)},r().createElement(l.Button,{variant:"link",id:"edit-super-credentials",isInline:!0},t.paused_at?a.formatMessage({id:"sources.viewCredentials",defaultMessage:"View credentials"}):a.formatMessage({id:"sources.editCredentials",defaultMessage:"Edit credentials"})))))}return a.formatMessage({id:"configurationMode.manual",defaultMessage:"Manual configuration"})}},2012:(e,t,a)=>{"use strict";a.d(t,{E:()=>r,W:()=>i});var s=a(63367);const r=(e,t=!1)=>[{title:e.formatMessage({id:"sources.name",defaultMessage:"Name"}),value:"name",formatter:s.jl,sortable:!t},{title:e.formatMessage({id:"sources.type",defaultMessage:"Type"}),value:"source_type_id",formatter:s.P5,sortable:!t},{title:e.formatMessage({id:"sources.connectedApplications",defaultMessage:"Connected applications"}),value:"applications",formatter:s.Gz},{title:e.formatMessage({id:"sources.addedDate",defaultMessage:"Date added"}),value:"created_at",formatter:s.vh,sortable:!t},{hidden:!0,value:"imported",formatter:s.Ee},{title:e.formatMessage({id:"sources.status",defaultMessage:"Status"}),value:"availability_status",formatter:s.BN}],i=r({formatMessage:()=>""}).length+1},11452:()=>{},34946:()=>{},10108:()=>{},81320:()=>{},88361:()=>{},21626:()=>{},66822:()=>{},54994:()=>{},37494:()=>{},67761:()=>{},314:()=>{},53519:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1995.e6039f8a631cb4095660f97ba1a9d53f.js.map