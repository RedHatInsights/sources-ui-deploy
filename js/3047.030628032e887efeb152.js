"use strict";(self.webpackChunksources=self.webpackChunksources||[]).push([[3047],{22955:(e,a,t)=>{t.d(a,{$l:()=>i,UW:()=>n,lH:()=>o});var s=t(90573);const o=()=>(0,s.Rj)().listSourceTypes().then((e=>({sourceTypes:e.data.filter((({name:e})=>"rh-marketplace"!==e))}))),i=()=>(0,s.Rj)().doLoadAppTypes().then((e=>({applicationTypes:e.data}))),n=e=>(0,s.Rj)().postGraphQL({query:`{ sources(filter: {name: "name", value: "${e}"})\n        { id, name }\n    }`})},73047:(e,a,t)=>{t.d(a,{AQ:()=>X,ZP:()=>ne});var s=t(28416),o=t.n(s),i=t(45697),n=t.n(i),r=t(25387),l=t(48880),c=t(96354),d=t(64124),p=t(82793),u=t(99166);var m=t(22955),g=t(58104),f=t(18111),y=t(85964),M=t(64072),b=t(28495);const _=({sourceTypes:e})=>{const{renderForm:a,getState:t}=(0,l.default)(),s=t().values;return a((0,b.Z)(e,s.source_type))};_.propTypes={sourceTypes:n().array};const h=_;var w=t(32321);const v=(e,a)=>({name:"configuration_step",title:e.formatMessage({id:"wizard.configurationStep",defaultMessage:"Select configuration"}),nextStep:({values:e})=>{if(e.source?.app_creation_workflow)return e.source?.app_creation_workflow===M.b?"select_applications":"application_step"},fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:e.formatMessage({id:"wizard.accountAuthDescription",defaultMessage:"Configure your integration manually or let us manage all necessary credentials by selecting <b>account authorization</b> configuration."},{b:w.S})},{component:c.Z.RADIO,name:"source.app_creation_workflow",label:e.formatMessage({id:"wizard.configurationMode",defaultMessage:"Select a configuration mode"}),isRequired:!0,resolveProps:(a,t,s)=>({options:[{label:o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},e.formatMessage({id:"wizard.accountAuth",defaultMessage:"Account authorization"}),o().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},e.formatMessage({id:"wizard.confMode.reccomended",defaultMessage:"Recommended"}))),description:e.formatMessage({id:"wizard.accountAuth.desc",defaultMessage:"A new automated integration configuration method. Provide your {type} account credentials and let Red Hat configure and manage your integration for you."},{type:{amazon:"AWS",azure:"Azure"}[s.getState().values.source_type]||s.getState().values.source_type}),value:M.b}]}),validate:[{type:d.Z.REQUIRED}]},{component:c.Z.SUB_FORM,name:"sub-form",fields:[{component:"description",name:"super-key-credentials",Content:h,sourceTypes:a}],condition:{when:"source.app_creation_workflow",is:M.b},className:"pf-v5-u-ml-md"},{component:c.Z.RADIO,name:"source.app_creation_workflow",options:[{label:e.formatMessage({id:"wizard.manualAuth",defaultMessage:"Manual configuration"}),description:e.formatMessage({id:"wizard.manualAuth.desc",defaultMessage:"Configure and manage your integration manually if you do not wish to provide account authorization credentials. You will set up integrations the same way you do today."}),value:M.M}]}]});var E=t(11480),T=t(83233),z=t(46441),k=t.n(z);const A=({title:e,description:a,isEnabled:t,...s})=>o().createElement(E.StackItem,{...s},o().createElement(T.Flex,null,o().createElement(T.FlexItem,{spacer:{default:"spacerSm"}},o().createElement(k(),{fill:t?"#3E8635":"#6A6E73"})),o().createElement(T.FlexItem,null,o().createElement(p.Text,{className:"pf-v5-u-mb-xs src-c-wizard__rhel-desc-title"},e),o().createElement(p.Text,null,a))));A.propTypes={title:n().string.isRequired,description:n().string.isRequired,isEnabled:n().bool};const S=A,R=({id:e})=>{const a=(0,r.YB)(),{getState:t}=(0,l.default)(),s=t().values,i=s.source.app_creation_workflow===M.b&&s.applications?.includes(e)||s.source.app_creation_workflow!==M.b&&s.application?.application_type_id===e;return"azure"===s.source_type?o().createElement(E.Stack,null,o().createElement(S,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.azure.description",defaultMessage:"Unlock cloud images in Microsoft Azure and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:i}),o().createElement(S,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:i})):"google"===s.source_type?o().createElement(E.Stack,null,o().createElement(S,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.google.description",defaultMessage:"Unlock cloud images in Google Cloud and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:i}),o().createElement(S,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:i})):o().createElement(E.Stack,null,o().createElement(S,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Unlock cloud images in AWS and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:i}),o().createElement(S,{title:a.formatMessage({id:"rhelbundle.subwatch.title",defaultMessage:"High precision subscription watch data"}),description:a.formatMessage({id:"rhelbundle.subwatch.description",defaultMessage:"View precise public cloud usage data in subscription watch."}),className:"pf-v5-u-mb-sm",isEnabled:i}),o().createElement(S,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:i}))};R.propTypes={id:n().string.isRequired};const I=R;var x=t(86706);const N=({id:e})=>{const a=(0,r.YB)(),{getState:t}=(0,l.default)(),i=(0,x.v9)((({sources:e})=>e.sourceTypes),x.wU),n=t().values,c=(0,s.useMemo)((()=>n.source?.app_creation_workflow===M.b&&n.applications?.includes(e)||n.source?.app_creation_workflow!==M.b&&n.application?.application_type_id===e),[n.application?.application_type_id]);return o().createElement(E.Stack,null,o().createElement(S,{title:a.formatMessage({id:"hcsbundle.track.title",defaultMessage:"Track Red Hat committed spend"}),description:a.formatMessage({id:"hcsbundle.track.description",defaultMessage:"Track spend through {application} and apply them to your Red Hat committed spend."},{application:i.find((e=>e.name===n.source_type))?.product_name}),className:"pf-v5-u-mb-sm",isEnabled:c}),o().createElement(S,{title:a.formatMessage({id:"cost.app.title",defaultMessage:"Cost management"}),description:a.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),isEnabled:c}))};N.propTypes={id:n().string.isRequired};const Z=N;var C=t(75614);const D=(e,a,t)=>({[C.Qr]:t?o().createElement(Z,{id:e.id}):a.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),[C.fn]:o().createElement(I,{id:e.id}),[C._m]:a.formatMessage({id:"provisioning.sources.description",defaultMessage:"Build and launch images with custom content as Virtual Machines in hybrid cloud environments."})}[e.name]),L=(e,a,t)=>({[C.fn]:o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},"RHEL management"," ",o().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},a.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))),[C._m]:a.formatMessage({id:"provisioning.sources.label",defaultMessage:"Launch images"}),[C.Qr]:t?o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},`${C.X0} `,o().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},a.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))):e.display_name}[e.name]),B=(e,a,t)=>[...e.sort(((e,a)=>e.display_name.localeCompare(a.display_name))).map((e=>({value:e.id,label:L(e,a,t)||e.display_name,description:D(e,a,t)})))],H=(e,a)=>({name:"select_applications",title:a.formatMessage({id:"applications.select",defaultMessage:"Select applications"}),nextStep:"summary",fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:a.formatMessage({id:"applications.description",defaultMessage:"Configuring your cloud integrations provides additional capabilities included with your subscription. You can turn these features on or off at any time after integration creation."})},{component:"switch-group",name:"applications",label:a.formatMessage({id:"applications.availableApplications",defaultMessage:"Available applications"}),options:B(e,a,void 0),applicationTypes:e}]});var U=t(13119),F=t(5495);const P=async(e,a=void 0,t)=>{if(!e)return;let s;try{s=await(0,m.UW)(e)}catch(e){return void console.error((0,F.Z)(e))}if(s.data.sources.find((({id:e})=>e!==a)))throw t.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"})};let q=!0;const Q=e=>q=e,X=((e,a=250,t={onlyResolvesLast:!1})=>(0,u.Z)(e,a,t))(P),Y=e=>[...e.map((e=>({...e,product_name:"Red Hat"===e.category?e.product_name.replace("Red Hat ",""):e.product_name}))).sort(((e,a)=>e.product_name.localeCompare(a.product_name))).map((e=>({value:e.name,label:e.product_name})))],O=e=>(a,t)=>{const s=t.getState().values.source_type,o=e.find((e=>e.id===a.value));if(!s||!o||o.supported_source_types.includes(s))return a},$={amazon:"/apps/frontend-assets/partners-icons/aws.svg","ansible-tower":"/apps/frontend-assets/red-hat-logos/stacked.svg",azure:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg",openshift:"/apps/frontend-assets/red-hat-logos/stacked.svg",satellite:"/apps/frontend-assets/red-hat-logos/stacked.svg",google:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"},W=e=>a=>{const t=e.find((e=>e.name===a));return t&&(t.icon_url||$[a])?()=>o().createElement("img",{src:$[a]||t.icon_url,alt:t.product_name,className:"src-c-wizard__icon "+("Red Hat"===t.category?"redhat-icon":"pf-v5-u-mb-sm")}):null},V=e=>({values:{application:a,source_type:t}})=>{if(e)return"application_step";const s=a&&a.application_type_id!==f.Dt&&a.application_type_id;return s?`${t}-${s}`:`${t}-generic`},j=e=>({values:a})=>{return t=e.find((({name:e})=>e===a.source_type)),t?.schema.authentication.find((({is_superkey:e})=>e))?"configuration_step":"application_step";var t},G=({intl:e,sourceTypes:a,applicationTypes:t})=>({component:"card-select",name:"source_type",isRequired:!0,label:e.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"A. Select your integration type"}),iconMapper:W(a),validate:[{type:d.Z.REQUIRED}],options:Y(a)}),J=({intl:e,sourceTypes:a,applicationTypes:t,disableAppSelection:s})=>[G({intl:e,sourceTypes:a,applicationTypes:t}),{component:"enhanced-radio",name:"application.application_type_id",label:e.formatMessage({id:"wizard.selectApplication",defaultMessage:"B. Application"}),options:B(t,e,C.B0),mutator:O(t),isDisabled:s,isRequired:!0,validate:[{type:d.Z.REQUIRED}],condition:{when:"source_type",isNotEmpty:!0}}],K=(e,a,t,s)=>({name:"application_step",title:a.formatMessage({id:"wizard.selectApplication",defaultMessage:"Select application"}),nextStep:V(),fields:[{component:c.Z.PLAIN_TEXT,name:"app-description",label:a.formatMessage({id:"wizard.applicationDescription",defaultMessage:"Select an application to connect to your integration. You can connect additional applications after integration creation."})},{component:"enhanced-radio",name:"application.application_type_id",label:a.formatMessage({id:"wizard.selectApplicationType",defaultMessage:"Select an application"}),options:B(e,a,s),mutator:O(e),menuIsPortal:!0,isRequired:!0,validate:[{type:d.Z.REQUIRED}]},{component:c.Z.TEXT_FIELD,name:"source_type",hideField:!0}]}),ee=(e,a,t,s)=>({title:s.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Integration type and application"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:s.formatMessage({id:"wizard.selectRedHatType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your cloud provider and application."})},...J({intl:s,sourceTypes:e,applicationTypes:a,disableAppSelection:t})]}),ae=(e,a,t)=>({title:t.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Select cloud provider"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:t.formatMessage({id:"wizard.selectCloudType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your cloud provider."})},{...G({intl:t,sourceTypes:e,applicationTypes:a}),label:t.formatMessage({id:"wizard.selectCloudProvider",defaultMessage:"Select a cloud provider"})}]}),te=({sourceTypes:e})=>{const a=(0,r.YB)(),{getState:t}=(0,l.default)(),s=e.find((({name:e})=>e===t().values.source_type))?.product_name;return o().createElement(p.TextContent,{key:"step1"},o().createElement(p.Text,{component:p.TextVariants.p},a.formatMessage({id:"wizard.nameDescription",defaultMessage:"Enter a name for your {typeName} integration."},{typeName:s})))};te.propTypes={sourceTypes:n().array};const se=(e,a,t,s)=>({title:e.formatMessage({id:"wizard.nameSource",defaultMessage:"Name integration"}),name:"name_step",nextStep:s===C.B0?V(a):j(t),fields:[{component:"description",name:"description-summary",Content:te,sourceTypes:t},{component:c.Z.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Integration name"}),placeholder:"integration_name",isRequired:!0,validate:[a=>(e=>q?(Q(!1),(a,t)=>a?P(a,t,e):void 0):X)(e)(a,void 0,e),{type:d.Z.REQUIRED}],resolveProps:U.Z}]}),oe=()=>{const e=(0,r.YB)();return o().createElement(p.TextContent,null,o().createElement(p.Text,{component:p.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click <b>Add</b> to add your integration. To edit details in previous steps, click <b>Back</b>."},{b:w.S})))},ie=(e,a,t)=>({fields:[{component:"description",name:"description-summary",Content:oe},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:a},{name:"source_type",component:c.Z.TEXT_FIELD,hideField:!0}],name:"summary",title:t.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}),ne=(e,a,t,s,o,i,n,r,l,d)=>(Q(!0),{fields:[{component:c.Z.WIZARD,name:"wizard",className:"sources",title:(0,f.Z5)(r),inModal:!0,description:(0,f.A6)(r),buttonLabels:{submit:o.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:o.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:o.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:o.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:s,showTitles:!0,initialState:n,closeButtonAriaLabel:o.formatMessage({id:"wizard.close",defaultMessage:"Close wizard"}),crossroads:["application.application_type_id","source_type","auth_select","source.app_creation_workflow","application.extra.storage_only"],fields:[...i?[]:r===C.B0?[ee(e,a,t,o)]:[ae(e,a,o)],se(o,i,e,r),v(o,e),H(a,o),K(a,o,0,d),...(0,g.dD)(e,a,void 0,l,d),ie(e,a,o)]}]})},28495:(e,a,t)=>{t.d(a,{Z:()=>o});var s=t(58104);const o=(e,a)=>{const t=e.find((({name:e})=>e===a))?.schema.authentication.find((({is_superkey:e,type:a})=>e||"access_key_secret_key"===a)),o=(0,s.gF)(a,t.type);return[...(0,s.YD)(a,t.type),...(0,s.Ow)((0,s.sM)(t.fields,o),a,t.type)]}}}]);
//# sourceMappingURL=../sourcemaps/3047.a82cb58826faccd873e15d30ac69cbc0.js.map