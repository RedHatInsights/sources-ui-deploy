/*! For license information please see 3047.82c22e3668d2ff4d1047.js.LICENSE.txt */
"use strict";(self.webpackChunksources=self.webpackChunksources||[]).push([[3047],{99166:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(69496),s=a.n(n);var o=function(){return o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)},i={key:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},onlyResolvesLast:!0},r=function(){function e(e){this.config=e,this.debounceSingleton=null,this.debounceCache={}}return e.prototype._createDebouncedFunction=function(){var e,t,a=s()(this.config.func,this.config.wait,this.config.options);return this.config.options.onlyResolvesLast&&(e=a,t=null,a=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];t&&t();var s,o,i,r,l=(s=e.apply(void 0,a),o=null,i=null,r=new Promise((function(e,t){o=e,i=t})),s&&s.then((function(e){o&&o(e)}),(function(e){i&&i(e)})),{promise:r,resolve:function(e){o&&o(e)},reject:function(e){i&&i(e)},cancel:function(){o=null,i=null}});return t=l.cancel,l.promise}),{func:a}},e.prototype.getDebouncedFunction=function(e){var t,a=(t=this.config.options).key.apply(t,e);return null==a?(this.debounceSingleton||(this.debounceSingleton=this._createDebouncedFunction()),this.debounceSingleton):(this.debounceCache[a]||(this.debounceCache[a]=this._createDebouncedFunction()),this.debounceCache[a])},e}();const l=function(e,t,a){var n=o({},i,a),s=new r({func:e,wait:t,options:n});return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.getDebouncedFunction(e).func.apply(void 0,e)}}},69496:e=>{e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0,s=void 0,o=void 0,i=[];return function(){var l=function(e){return"function"==typeof e?e():e}(t),c=(new Date).getTime(),d=!n||c-n>l;n=c;for(var p=arguments.length,u=Array(p),m=0;m<p;m++)u[m]=arguments[m];if(d&&a.leading)return a.accumulate?Promise.resolve(e.call(this,[u])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(u)));if(s?clearTimeout(o):s=function(){var e={};return e.promise=new Promise((function(t,a){e.resolve=t,e.reject=a})),e}(),i.push(u),o=setTimeout(r.bind(this),l),a.accumulate){var g=i.length-1;return s.promise.then((function(e){return e[g]}))}return s.promise};function r(){var t=s;clearTimeout(o),Promise.resolve(a.accumulate?e.call(this,i):e.apply(this,i[i.length-1])).then(t.resolve,t.reject),i=[],s=null}}},22955:(e,t,a)=>{a.d(t,{$l:()=>o,UW:()=>i,lH:()=>s});var n=a(90573);const s=()=>(0,n.Rj)().listSourceTypes().then((e=>({sourceTypes:e.data.filter((({name:e})=>"rh-marketplace"!==e))}))),o=()=>(0,n.Rj)().doLoadAppTypes().then((e=>({applicationTypes:e.data}))),i=e=>(0,n.Rj)().postGraphQL({query:`{ sources(filter: {name: "name", value: "${e}"})\n        { id, name }\n    }`})},73047:(e,t,a)=>{a.d(t,{AQ:()=>Q,ZP:()=>ie});var n=a(28416),s=a.n(n),o=a(45697),i=a.n(o),r=a(25387),l=a(48880),c=a(96354),d=a(64124),p=a(64380),u=a(99166);var m=a(22955),g=a(58104),f=a(18111),y=a(78173),h=a(64072),b=a(28495);const M=({sourceTypes:e})=>{const{renderForm:t,getState:a}=(0,l.default)(),n=a().values;return t((0,b.Z)(e,n.source_type))};M.propTypes={sourceTypes:i().array};const _=M;var v=a(32321);const w=(e,t)=>({name:"configuration_step",title:e.formatMessage({id:"wizard.configurationStep",defaultMessage:"Select configuration"}),nextStep:({values:e})=>{if(e.source?.app_creation_workflow)return e.source?.app_creation_workflow===h.b?"select_applications":"application_step"},fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:e.formatMessage({id:"wizard.accountAuthDescription",defaultMessage:"Configure your integration manually or let us manage all necessary credentials by selecting <b>account authorization</b> configuration."},{b:v.S})},{component:c.Z.RADIO,name:"source.app_creation_workflow",label:e.formatMessage({id:"wizard.configurationMode",defaultMessage:"Select a configuration mode"}),isRequired:!0,resolveProps:(t,a,n)=>({options:[{label:s().createElement("span",{className:"src-c-wizard__rhel-mag-label"},e.formatMessage({id:"wizard.accountAuth",defaultMessage:"Account authorization"}),s().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},e.formatMessage({id:"wizard.confMode.reccomended",defaultMessage:"Recommended"}))),description:e.formatMessage({id:"wizard.accountAuth.desc",defaultMessage:"A new automated integration configuration method. Provide your {type} account credentials and let Red Hat configure and manage your integration for you."},{type:{amazon:"AWS",azure:"Azure"}[n.getState().values.source_type]||n.getState().values.source_type}),value:h.b}]}),validate:[{type:d.Z.REQUIRED}]},{component:c.Z.SUB_FORM,name:"sub-form",fields:[{component:"description",name:"super-key-credentials",Content:_,sourceTypes:t}],condition:{when:"source.app_creation_workflow",is:h.b},className:"pf-v5-u-ml-md"},{component:c.Z.RADIO,name:"source.app_creation_workflow",options:[{label:e.formatMessage({id:"wizard.manualAuth",defaultMessage:"Manual configuration"}),description:e.formatMessage({id:"wizard.manualAuth.desc",defaultMessage:"Configure and manage your integration manually if you do not wish to provide account authorization credentials. You will set up integrations the same way you do today."}),value:h.M}]}]});var T=a(23539),E=a(86304),z=a(71214),S=a.n(z);const k=({title:e,description:t,isEnabled:a,...n})=>s().createElement(T.StackItem,{...n},s().createElement(E.Flex,null,s().createElement(E.FlexItem,{spacer:{default:"spacerSm"}},s().createElement(S(),{fill:a?"#3E8635":"#6A6E73"})),s().createElement(E.FlexItem,null,s().createElement(p.Text,{className:"pf-v5-u-mb-xs src-c-wizard__rhel-desc-title"},e),s().createElement(p.Text,null,t))));k.propTypes={title:i().string.isRequired,description:i().string.isRequired,isEnabled:i().bool};const A=k,R=({id:e})=>{const t=(0,r.YB)(),{getState:a}=(0,l.default)(),n=a().values,o=n.source.app_creation_workflow===h.b&&n.applications?.includes(e)||n.source.app_creation_workflow!==h.b&&n.application?.application_type_id===e;return"azure"===n.source_type?s().createElement(T.Stack,null,s().createElement(A,{title:t.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:t.formatMessage({id:"rhelbundle.goldImages.azure.description",defaultMessage:"Unlock cloud images in Microsoft Azure and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:o}),s().createElement(A,{title:t.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:t.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:o})):"google"===n.source_type?s().createElement(T.Stack,null,s().createElement(A,{title:t.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:t.formatMessage({id:"rhelbundle.goldImages.google.description",defaultMessage:"Unlock cloud images in Google Cloud and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:o}),s().createElement(A,{title:t.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:t.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:o})):s().createElement(T.Stack,null,s().createElement(A,{title:t.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:t.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Unlock cloud images in AWS and bring your own subscription instead of paying hourly."}),className:"pf-v5-u-mb-sm",isEnabled:o}),s().createElement(A,{title:t.formatMessage({id:"rhelbundle.subwatch.title",defaultMessage:"High precision subscription watch data"}),description:t.formatMessage({id:"rhelbundle.subwatch.description",defaultMessage:"View precise public cloud usage data in subscription watch."}),className:"pf-v5-u-mb-sm",isEnabled:o}),s().createElement(A,{title:t.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:t.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:o}))};R.propTypes={id:i().string.isRequired};const I=R;var x=a(86706);const D=({id:e})=>{const t=(0,r.YB)(),{getState:a}=(0,l.default)(),o=(0,x.v9)((({sources:e})=>e.sourceTypes),x.wU),i=a().values,c=(0,n.useMemo)((()=>i.source?.app_creation_workflow===h.b&&i.applications?.includes(e)||i.source?.app_creation_workflow!==h.b&&i.application?.application_type_id===e),[i.application?.application_type_id]);return s().createElement(T.Stack,null,s().createElement(A,{title:t.formatMessage({id:"hcsbundle.track.title",defaultMessage:"Track Red Hat committed spend"}),description:t.formatMessage({id:"hcsbundle.track.description",defaultMessage:"Track spend through {application} and apply them to your Red Hat committed spend."},{application:o.find((e=>e.name===i.source_type))?.product_name}),className:"pf-v5-u-mb-sm",isEnabled:c}),s().createElement(A,{title:t.formatMessage({id:"cost.app.title",defaultMessage:"Cost management"}),description:t.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),isEnabled:c}))};D.propTypes={id:i().string.isRequired};const Z=D;var C=a(75614);const N=(e,t,a)=>({[C.Qr]:a?s().createElement(Z,{id:e.id}):t.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),[C.fn]:s().createElement(I,{id:e.id}),[C._m]:t.formatMessage({id:"provisioning.sources.description",defaultMessage:"Build and launch images with custom content as Virtual Machines in hybrid cloud environments."})}[e.name]),L=(e,t,a)=>({[C.fn]:s().createElement("span",{className:"src-c-wizard__rhel-mag-label"},"RHEL management"," ",s().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},t.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))),[C._m]:t.formatMessage({id:"provisioning.sources.label",defaultMessage:"Launch images"}),[C.Qr]:a?s().createElement("span",{className:"src-c-wizard__rhel-mag-label"},`${C.X0} `,s().createElement(y.Label,{className:"pf-v5-u-ml-sm",color:"purple"},t.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))):e.display_name}[e.name]),P=(e,t,a)=>[...e.sort(((e,t)=>e.display_name.localeCompare(t.display_name))).map((e=>({value:e.id,label:L(e,t,a)||e.display_name,description:N(e,t,a)})))],F=(e,t)=>({name:"select_applications",title:t.formatMessage({id:"applications.select",defaultMessage:"Select applications"}),nextStep:"summary",fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:t.formatMessage({id:"applications.description",defaultMessage:"Configuring your cloud integrations provides additional capabilities included with your subscription. You can turn these features on or off at any time after integration creation."})},{component:"switch-group",name:"applications",label:t.formatMessage({id:"applications.availableApplications",defaultMessage:"Available applications"}),options:P(e,t,void 0),applicationTypes:e}]});var B=a(13119),H=a(5495);const U=async(e,t=void 0,a)=>{if(!e)return;let n;try{n=await(0,m.UW)(e)}catch(e){return void console.error((0,H.Z)(e))}if(n.data.sources.find((({id:e})=>e!==t)))throw a.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"})};let q=!0;const O=e=>q=e,Q=((e,t=250,a={onlyResolvesLast:!1})=>(0,u.Z)(e,t,a))(U),X=e=>[...e.map((e=>({...e,product_name:"Red Hat"===e.category?e.product_name.replace("Red Hat ",""):e.product_name}))).sort(((e,t)=>e.product_name.localeCompare(t.product_name))).map((e=>({value:e.name,label:e.product_name})))],Y=e=>(t,a)=>{const n=a.getState().values.source_type,s=e.find((e=>e.id===t.value));if(!n||!s||s.supported_source_types.includes(n))return t},j={amazon:"/apps/frontend-assets/partners-icons/aws.svg","ansible-tower":"/apps/frontend-assets/red-hat-logos/stacked.svg",azure:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg",openshift:"/apps/frontend-assets/red-hat-logos/stacked.svg",satellite:"/apps/frontend-assets/red-hat-logos/stacked.svg",google:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"},$=e=>t=>{const a=e.find((e=>e.name===t));return a&&(a.icon_url||j[t])?()=>s().createElement("img",{src:j[t]||a.icon_url,alt:a.product_name,className:"src-c-wizard__icon "+("Red Hat"===a.category?"redhat-icon":"pf-v5-u-mb-sm")}):null},W=e=>({values:{application:t,source_type:a}})=>{if(e)return"application_step";const n=t&&t.application_type_id!==f.Dt&&t.application_type_id;return n?`${a}-${n}`:`${a}-generic`},V=e=>({values:t})=>{return a=e.find((({name:e})=>e===t.source_type)),a?.schema.authentication.find((({is_superkey:e})=>e))?"configuration_step":"application_step";var a},G=({intl:e,sourceTypes:t,applicationTypes:a})=>({component:"card-select",name:"source_type",isRequired:!0,label:e.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"A. Select your integration type"}),iconMapper:$(t),validate:[{type:d.Z.REQUIRED}],options:X(t)}),J=({intl:e,sourceTypes:t,applicationTypes:a,disableAppSelection:n})=>[G({intl:e,sourceTypes:t,applicationTypes:a}),{component:"enhanced-radio",name:"application.application_type_id",label:e.formatMessage({id:"wizard.selectApplication",defaultMessage:"B. Application"}),options:P(a,e,C.B0),mutator:Y(a),isDisabled:n,isRequired:!0,validate:[{type:d.Z.REQUIRED}],condition:{when:"source_type",isNotEmpty:!0}}],K=(e,t,a,n)=>({name:"application_step",title:t.formatMessage({id:"wizard.selectApplication",defaultMessage:"Select application"}),nextStep:W(),fields:[{component:c.Z.PLAIN_TEXT,name:"app-description",label:t.formatMessage({id:"wizard.applicationDescription",defaultMessage:"Select an application to connect to your integration. You can connect additional applications after integration creation."})},{component:"enhanced-radio",name:"application.application_type_id",label:t.formatMessage({id:"wizard.selectApplicationType",defaultMessage:"Select an application"}),options:P(e,t,n),mutator:Y(e),menuIsPortal:!0,isRequired:!0,validate:[{type:d.Z.REQUIRED}]},{component:c.Z.TEXT_FIELD,name:"source_type",hideField:!0}]}),ee=(e,t,a,n)=>({title:n.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Integration type and application"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:n.formatMessage({id:"wizard.selectRedHatType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your cloud provider and application."})},...J({intl:n,sourceTypes:e,applicationTypes:t,disableAppSelection:a})]}),te=(e,t,a)=>({title:a.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Select cloud provider"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:a.formatMessage({id:"wizard.selectCloudType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your cloud provider."})},{...G({intl:a,sourceTypes:e,applicationTypes:t}),label:a.formatMessage({id:"wizard.selectCloudProvider",defaultMessage:"Select a cloud provider"})}]}),ae=({sourceTypes:e})=>{const t=(0,r.YB)(),{getState:a}=(0,l.default)(),n=e.find((({name:e})=>e===a().values.source_type))?.product_name;return s().createElement(p.TextContent,{key:"step1"},s().createElement(p.Text,{component:p.TextVariants.p},t.formatMessage({id:"wizard.nameDescription",defaultMessage:"Enter a name for your {typeName} integration."},{typeName:n})))};ae.propTypes={sourceTypes:i().array};const ne=(e,t,a,n)=>({title:e.formatMessage({id:"wizard.nameSource",defaultMessage:"Name integration"}),name:"name_step",nextStep:n===C.B0?W(t):V(a),fields:[{component:"description",name:"description-summary",Content:ae,sourceTypes:a},{component:c.Z.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Integration name"}),placeholder:"integration_name",isRequired:!0,validate:[t=>(e=>q?(O(!1),(t,a)=>t?U(t,a,e):void 0):Q)(e)(t,void 0,e),{type:d.Z.REQUIRED}],resolveProps:B.Z}]}),se=()=>{const e=(0,r.YB)();return s().createElement(p.TextContent,null,s().createElement(p.Text,{component:p.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click <b>Add</b> to add your integration. To edit details in previous steps, click <b>Back</b>."},{b:v.S})))},oe=(e,t,a)=>({fields:[{component:"description",name:"description-summary",Content:se},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t},{name:"source_type",component:c.Z.TEXT_FIELD,hideField:!0}],name:"summary",title:a.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}),ie=(e,t,a,n,s,o,i,r,l,d)=>(O(!0),{fields:[{component:c.Z.WIZARD,name:"wizard",className:"sources",title:(0,f.Z5)(r),inModal:!0,description:(0,f.A6)(r),buttonLabels:{submit:s.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:s.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:s.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:s.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:n,showTitles:!0,initialState:i,closeButtonAriaLabel:s.formatMessage({id:"wizard.close",defaultMessage:"Close wizard"}),crossroads:["application.application_type_id","source_type","auth_select","source.app_creation_workflow","application.extra.storage_only"],fields:[...o?[]:r===C.B0?[ee(e,t,a,s)]:[te(e,t,s)],ne(s,o,e,r),w(s,e),F(t,s),K(t,s,0,d),...(0,g.dD)(e,t,void 0,l,d),oe(e,t,s)]}]})},28495:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(58104);const s=(e,t)=>{const a=e.find((({name:e})=>e===t))?.schema.authentication.find((({is_superkey:e,type:t})=>e||"access_key_secret_key"===t)),s=(0,n.gF)(t,a.type);return[...(0,n.YD)(t,a.type),...(0,n.Ow)((0,n.sM)(a.fields,s),t,a.type)]}}}]);
//# sourceMappingURL=../sourcemaps/3047.2ad934f08be8165d389b2b13bbe80c9c.js.map