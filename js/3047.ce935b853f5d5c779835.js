/*! For license information please see 3047.ce935b853f5d5c779835.js.LICENSE.txt */
"use strict";(self.webpackChunksources=self.webpackChunksources||[]).push([[3047],{99166:(e,a,t)=>{t.d(a,{Z:()=>l});var s=t(69496),o=t.n(s);var n=function(){return n=Object.assign||function(e){for(var a,t=1,s=arguments.length;t<s;t++)for(var o in a=arguments[t])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e},n.apply(this,arguments)},i={key:function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return null},onlyResolvesLast:!0},r=function(){function e(e){this.config=e,this.debounceSingleton=null,this.debounceCache={}}return e.prototype._createDebouncedFunction=function(){var e,a,t=o()(this.config.func,this.config.wait,this.config.options);return this.config.options.onlyResolvesLast&&(e=t,a=null,t=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];a&&a();var o,n,i,r,l=(o=e.apply(void 0,t),n=null,i=null,r=new Promise((function(e,a){n=e,i=a})),o&&o.then((function(e){n&&n(e)}),(function(e){i&&i(e)})),{promise:r,resolve:function(e){n&&n(e)},reject:function(e){i&&i(e)},cancel:function(){n=null,i=null}});return a=l.cancel,l.promise}),{func:t}},e.prototype.getDebouncedFunction=function(e){var a,t=(a=this.config.options).key.apply(a,e);return null==t?(this.debounceSingleton||(this.debounceSingleton=this._createDebouncedFunction()),this.debounceSingleton):(this.debounceCache[t]||(this.debounceCache[t]=this._createDebouncedFunction()),this.debounceCache[t])},e}();const l=function(e,a,t){var s=n({},i,t),o=new r({func:e,wait:a,options:s});return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return o.getDebouncedFunction(e).func.apply(void 0,e)}}},69496:e=>{e.exports=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=void 0,o=void 0,n=void 0,i=[];return function(){var l=function(e){return"function"==typeof e?e():e}(a),c=(new Date).getTime(),d=!s||c-s>l;s=c;for(var p=arguments.length,u=Array(p),m=0;m<p;m++)u[m]=arguments[m];if(d&&t.leading)return t.accumulate?Promise.resolve(e.call(this,[u])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(u)));if(o?clearTimeout(n):o=function(){var e={};return e.promise=new Promise((function(a,t){e.resolve=a,e.reject=t})),e}(),i.push(u),n=setTimeout(r.bind(this),l),t.accumulate){var f=i.length-1;return o.promise.then((function(e){return e[f]}))}return o.promise};function r(){var a=o;clearTimeout(n),Promise.resolve(t.accumulate?e.call(this,i):e.apply(this,i[i.length-1])).then(a.resolve,a.reject),i=[],o=null}}},22955:(e,a,t)=>{t.d(a,{$l:()=>n,UW:()=>i,lH:()=>o});var s=t(90573);const o=()=>(0,s.Rj)().listSourceTypes().then((e=>({sourceTypes:e.data.filter((({name:e})=>"rh-marketplace"!==e))}))),n=()=>(0,s.Rj)().doLoadAppTypes().then((e=>({applicationTypes:e.data}))),i=e=>(0,s.Rj)().postGraphQL({query:`{ sources(filter: {name: "name", value: "${e}"})\n        { id, name }\n    }`})},73047:(e,a,t)=>{t.d(a,{AQ:()=>X,ZP:()=>ie});var s=t(28416),o=t.n(s),n=t(45697),i=t.n(n),r=t(86896),l=t(48880),c=t(96354),d=t(64124),p=t(64129),u=t(99166);var m=t(22955),f=t(58104),g=t(18111),y=t(41868),h=t(64072),b=t(28495);const M=({sourceTypes:e})=>{const{renderForm:a,getState:t}=(0,l.default)(),s=t().values;return a((0,b.Z)(e,s.source_type))};M.propTypes={sourceTypes:i().array};const _=M;var v=t(32321);const w=(e,a)=>({name:"configuration_step",title:e.formatMessage({id:"wizard.configurationStep",defaultMessage:"Select configuration"}),nextStep:({values:e})=>{if(e.source?.app_creation_workflow)return e.source?.app_creation_workflow===h.b?"select_applications":"application_step"},fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:e.formatMessage({id:"wizard.accountAuthDescription",defaultMessage:"Configure your source manually or let us manage all necessary credentials by selecting <b>account authorization</b> configuration."},{b:v.S})},{component:c.Z.RADIO,name:"source.app_creation_workflow",label:e.formatMessage({id:"wizard.configurationMode",defaultMessage:"Select a configuration mode"}),isRequired:!0,resolveProps:(a,t,s)=>({options:[{label:o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},e.formatMessage({id:"wizard.accountAuth",defaultMessage:"Account authorization"}),o().createElement(y.Label,{className:"pf-u-ml-sm",color:"purple"},e.formatMessage({id:"wizard.confMode.reccomended",defaultMessage:"Recommended"}))),description:e.formatMessage({id:"wizard.accountAuth.desc",defaultMessage:"A new automated source configuration method. Provide your {type} account credentials and let Red Hat configure and manage your source for you."},{type:{amazon:"AWS",azure:"Azure"}[s.getState().values.source_type]||s.getState().values.source_type}),value:h.b}]}),validate:[{type:d.Z.REQUIRED}]},{component:c.Z.SUB_FORM,name:"sub-form",fields:[{component:"description",name:"super-key-credentials",Content:_,sourceTypes:a}],condition:{when:"source.app_creation_workflow",is:h.b},className:"pf-u-ml-md"},{component:c.Z.RADIO,name:"source.app_creation_workflow",options:[{label:e.formatMessage({id:"wizard.manualAuth",defaultMessage:"Manual configuration"}),description:e.formatMessage({id:"wizard.manualAuth.desc",defaultMessage:"Configure and manage your source manually if you do not wish to provide account authorization credentials. You will set up sources the same way you do today."}),value:h.M}]}]});var T=t(8746),E=t(36530),z=t(44278),S=t.n(z);const k=({title:e,description:a,isEnabled:t,...s})=>o().createElement(T.StackItem,{...s},o().createElement(E.Flex,null,o().createElement(E.FlexItem,{spacer:{default:"spacerSm"}},o().createElement(S(),{fill:t?"#3E8635":"#6A6E73"})),o().createElement(E.FlexItem,null,o().createElement(p.Text,{className:"pf-u-mb-xs src-c-wizard__rhel-desc-title"},e),o().createElement(p.Text,null,a))));k.propTypes={title:i().string.isRequired,description:i().string.isRequired,isEnabled:i().bool};const A=k,R=({id:e})=>{const a=(0,r.Z)(),{getState:t}=(0,l.default)(),s=t().values,n=s.source.app_creation_workflow===h.b&&s.applications?.includes(e)||s.source.app_creation_workflow!==h.b&&s.application?.application_type_id===e;return"azure"===s.source_type?o().createElement(T.Stack,null,o().createElement(A,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.azure.description",defaultMessage:"Unlock cloud images in Microsoft Azure and bring your own subscription instead of paying hourly."}),className:"pf-u-mb-sm",isEnabled:n}),o().createElement(A,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:n})):"google"===s.source_type?o().createElement(T.Stack,null,o().createElement(A,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.google.description",defaultMessage:"Unlock cloud images in Google Cloud and bring your own subscription instead of paying hourly."}),className:"pf-u-mb-sm",isEnabled:n}),o().createElement(A,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:n})):o().createElement(T.Stack,null,o().createElement(A,{title:a.formatMessage({id:"rhelbundle.goldImages.title",defaultMessage:"Red Hat gold images"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Unlock cloud images in AWS and bring your own subscription instead of paying hourly."}),className:"pf-u-mb-sm",isEnabled:n}),o().createElement(A,{title:a.formatMessage({id:"rhelbundle.subwatch.title",defaultMessage:"High precision subscription watch data"}),description:a.formatMessage({id:"rhelbundle.subwatch.description",defaultMessage:"View precise public cloud usage data in subscription watch."}),className:"pf-u-mb-sm",isEnabled:n}),o().createElement(A,{title:a.formatMessage({id:"rhelbundle.autoregistration.title",defaultMessage:"Autoregistration"}),description:a.formatMessage({id:"rhelbundle.goldImages.description",defaultMessage:"Cloud instances automatically connect to console.redhat.com when provisioned."}),isEnabled:n}))};R.propTypes={id:i().string.isRequired};const Z=R;var I=t(86706);const x=({id:e})=>{const a=(0,r.Z)(),{getState:t}=(0,l.default)(),n=(0,I.v9)((({sources:e})=>e.sourceTypes),I.wU),i=t().values,c=(0,s.useMemo)((()=>i.source.app_creation_workflow===h.b&&i.applications?.includes(e)||i.source.app_creation_workflow!==h.b&&i.application?.application_type_id===e),[i.application?.application_type_id]);return o().createElement(T.Stack,null,o().createElement(A,{title:a.formatMessage({id:"hcsbundle.track.title",defaultMessage:"Track Red Hat committed spend"}),description:a.formatMessage({id:"hcsbundle.track.description",defaultMessage:"Track spend through {application} and apply them to your Red Hat committed spend."},{application:n.find((e=>e.name===i.source_type))?.product_name}),className:"pf-u-mb-sm",isEnabled:c}),o().createElement(A,{title:a.formatMessage({id:"cost.app.title",defaultMessage:"Cost management"}),description:a.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),isEnabled:c}))};x.propTypes={id:i().string.isRequired};const D=x;var N=t(75614);const C=(e,a,t)=>({[N.Qr]:t?o().createElement(D,{id:e.id}):a.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."}),[N.fn]:o().createElement(Z,{id:e.id}),[N._m]:a.formatMessage({id:"provisioning.sources.description",defaultMessage:"Build and launch images with custom content as Virtual Machines in hybrid cloud environments."})}[e.name]),L=(e,a,t)=>({[N.fn]:o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},"RHEL management"," ",o().createElement(y.Label,{className:"pf-u-ml-sm",color:"purple"},a.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))),[N._m]:a.formatMessage({id:"provisioning.sources.label",defaultMessage:"Launch images"}),[N.Qr]:t?o().createElement("span",{className:"src-c-wizard__rhel-mag-label"},`${N.X0} `,o().createElement(y.Label,{className:"pf-u-ml-sm",color:"purple"},a.formatMessage({id:"sub.bundle",defaultMessage:"Bundle"}))):e.display_name}[e.name]),P=(e,a,t,s)=>[...e.sort(((e,a)=>e.display_name.localeCompare(a.display_name))).map((e=>({value:e.id,label:L(e,a,s)||e.display_name,description:C(e,a,s)}))),...t!==N.B0?[{label:a.formatMessage({id:"wizard.noApplication",defaultMessage:"No application"}),value:g.Dt}]:[]],F=(e,a)=>({name:"select_applications",title:a.formatMessage({id:"applications.select",defaultMessage:"Select applications"}),nextStep:"summary",fields:[{component:c.Z.PLAIN_TEXT,name:"conf-desc",label:a.formatMessage({id:"applications.description",defaultMessage:"Configuring your cloud sources provides additional capabilities included with your subscription. You can turn these features on or off at any time after source creation."})},{component:"switch-group",name:"applications",label:a.formatMessage({id:"applications.availableApplications",defaultMessage:"Available applications"}),options:P(e,a,void 0),applicationTypes:e}]});var H=t(13119),B=t(5495);const U=async(e,a=void 0,t)=>{if(!e)return;let s;try{s=await(0,m.UW)(e)}catch(e){return void console.error((0,B.Z)(e))}if(s.data.sources.find((({id:e})=>e!==a)))throw t.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"})};let q=!0;const O=e=>q=e,X=((e,a=250,t={onlyResolvesLast:!1})=>(0,u.Z)(e,a,t))(U),j=e=>[...e.map((e=>({...e,product_name:"Red Hat"===e.category?e.product_name.replace("Red Hat ",""):e.product_name}))).sort(((e,a)=>e.product_name.localeCompare(a.product_name))).map((e=>({value:e.name,label:e.product_name})))],Q=e=>(a,t)=>{const s=t.getState().values.source_type,o=e.find((e=>e.id===a.value));if(!s||!o||o.supported_source_types.includes(s))return a},$={amazon:"/apps/frontend-assets/partners-icons/aws.svg","ansible-tower":"/apps/frontend-assets/red-hat-logos/stacked.svg",azure:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg",openshift:"/apps/frontend-assets/red-hat-logos/stacked.svg",satellite:"/apps/frontend-assets/red-hat-logos/stacked.svg",google:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"},W=e=>a=>{const t=e.find((e=>e.name===a));return t&&(t.icon_url||$[a])?()=>o().createElement("img",{src:$[a]||t.icon_url,alt:t.product_name,className:"src-c-wizard__icon "+("Red Hat"===t.category?"redhat-icon":"pf-u-mb-sm")}):null},Y=e=>({values:{application:a,source_type:t}})=>{if(e)return"application_step";const s=a&&a.application_type_id!==g.Dt&&a.application_type_id;return s?`${t}-${s}`:`${t}-generic`},V=e=>({values:a})=>{return t=e.find((({name:e})=>e===a.source_type)),t?.schema.authentication.find((({is_superkey:e})=>e))?"configuration_step":"application_step";var t},G=({intl:e,sourceTypes:a,applicationTypes:t})=>({component:"card-select",name:"source_type",isRequired:!0,label:e.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"A. Select your source type"}),iconMapper:W(a),validate:[{type:d.Z.REQUIRED}],options:j(a)}),J=({intl:e,sourceTypes:a,applicationTypes:t,disableAppSelection:s})=>[G({intl:e,sourceTypes:a,applicationTypes:t}),{component:"enhanced-radio",name:"application.application_type_id",label:e.formatMessage({id:"wizard.selectApplication",defaultMessage:"B. Application"}),options:P(t,e,N.B0),mutator:Q(t),isDisabled:s,isRequired:!0,validate:[{type:d.Z.REQUIRED}],condition:{when:"source_type",isNotEmpty:!0}}],K=(e,a,t,s)=>({name:"application_step",title:a.formatMessage({id:"wizard.selectApplication",defaultMessage:"Select application"}),nextStep:Y(),fields:[{component:c.Z.PLAIN_TEXT,name:"app-description",label:a.formatMessage({id:"wizard.applicationDescription",defaultMessage:"Select an application to connect to your source. You can connect additional applications after source creation."})},{component:"enhanced-radio",name:"application.application_type_id",options:P(e,a,t,s),mutator:Q(e),menuIsPortal:!0},{component:c.Z.TEXT_FIELD,name:"source_type",hideField:!0}]}),ee=(e,a,t,s)=>({title:s.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Source type and application"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:s.formatMessage({id:"wizard.selectRedHatType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your source type and application."})},...J({intl:s,sourceTypes:e,applicationTypes:a,disableAppSelection:t})]}),ae=(e,a,t)=>({title:t.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Select source type"}),name:"types_step",nextStep:"name_step",fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text",label:t.formatMessage({id:"wizard.selectCloudType",defaultMessage:"To import data for an application, you need to connect to a data source. Start by selecting your source type."})},{...G({intl:t,sourceTypes:e,applicationTypes:a}),label:t.formatMessage({id:"wizard.selectCloudProvider",defaultMessage:"Select a cloud provider"})}]}),te=({sourceTypes:e})=>{const a=(0,r.Z)(),{getState:t}=(0,l.default)(),s=e.find((({name:e})=>e===t().values.source_type))?.product_name;return o().createElement(p.TextContent,{key:"step1"},o().createElement(p.Text,{component:p.TextVariants.p},a.formatMessage({id:"wizard.nameDescription",defaultMessage:"Enter a name for your {typeName} source."},{typeName:s})))};te.propTypes={sourceTypes:i().array};const se=(e,a,t,s)=>({title:e.formatMessage({id:"wizard.nameSource",defaultMessage:"Name source"}),name:"name_step",nextStep:s===N.B0?Y(a):V(t),fields:[{component:"description",name:"description-summary",Content:te,sourceTypes:t},{component:c.Z.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Source name"}),placeholder:"source_name",isRequired:!0,validate:[a=>(e=>q?(O(!1),(a,t)=>a?U(a,t,e):void 0):X)(e)(a,void 0,e),{type:d.Z.REQUIRED}],resolveProps:H.Z}]}),oe=()=>{const e=(0,r.Z)();return o().createElement(p.TextContent,null,o().createElement(p.Text,{component:p.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click <b>Add</b> to add your source. To edit details in previous steps, click <b>Back</b>."},{b:v.S})))},ne=(e,a,t)=>({fields:[{component:"description",name:"description-summary",Content:oe},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:a},{name:"source_type",component:c.Z.TEXT_FIELD,hideField:!0}],name:"summary",title:t.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}),ie=(e,a,t,s,o,n,i,r,l,d)=>(O(!0),{fields:[{component:c.Z.WIZARD,name:"wizard",className:"sources",title:(0,g.Z5)(r),inModal:!0,description:(0,g.A6)(r),buttonLabels:{submit:o.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:o.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:o.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:o.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:s,showTitles:!0,initialState:i,closeButtonAriaLabel:o.formatMessage({id:"wizard.close",defaultMessage:"Close wizard"}),crossroads:["application.application_type_id","source_type","auth_select","source.app_creation_workflow","application.extra.storage_only"],fields:[...n?[]:r===N.B0?[ee(e,a,t,o)]:[ae(e,a,o)],se(o,n,e,r),w(o,e),F(a,o),K(a,o,r,d),...(0,f.dD)(e,a,void 0,l,d),ne(e,a,o)]}]})},28495:(e,a,t)=>{t.d(a,{Z:()=>o});var s=t(58104);const o=(e,a)=>{const t=e.find((({name:e})=>e===a))?.schema.authentication.find((({is_superkey:e,type:a})=>e||"access_key_secret_key"===a)),o=(0,s.gF)(a,t.type);return[...(0,s.YD)(a,t.type),...(0,s.Ow)((0,s.sM)(t.fields,o),a,t.type)]}}}]);
//# sourceMappingURL=../sourcemaps/3047.3eb36c86939e111f6c003131401bc39b.js.map