"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[346],{68309:(e,t,a)=>{a.d(t,{Z:()=>L});var n=a(92950),r=a.n(n),o=a(51344),i=a(86350),s=a(29558),c=a(86235),l=a(60076),u=a(15671),d=a(43144),p=a(97326),m=a(60136),f=a(82963),g=a(61120),E=a(4942),h=a(45697),y=a.n(h),b=a(44745),v=a(60079),_=a(98495);var T=function(e){(0,m.Z)(i,e);var t,a,o=(t=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,g.Z)(t);if(a){var r=(0,g.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,f.Z)(this,e)});function i(){var e;(0,u.Z)(this,i);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=o.call.apply(o,[this].concat(a)),(0,E.Z)((0,p.Z)(e),"state",{error:null}),e}return(0,d.Z)(i,[{key:"componentDidCatch",value:function(e){var t=v.Tb(e);this.props.dispatch((0,_.Hz)({title:"".concat(e.toString()," (Sentry ID: ").concat(t,")"),variant:"danger",description:e.stack}))}},{key:"render",value:function(){var e=this.state.error,t=this.props.children;return e?r().createElement(n.Fragment,null,"Error occurred"):r().createElement(n.Fragment,null,t)}}],[{key:"getDerivedStateFromError",value:function(e,t){return{error:e,errorInfo:t}}}]),i}(n.Component);T.propTypes={dispatch:y().func.isRequired,children:y().node};const M=(0,b.connect)()(T);var I=a(93433),w=a(45199);const Z=function(e){var t=e.children,a=(0,b.useDispatch)();return(0,n.useEffect)((function(){a((function(e){return e({type:w.a.SET_WRITE_PERMISSIONS_PENDING}),insights.chrome.getUserPermissions("sources",!0).then((function(t){var a=t.reduce((function(e,t){return[].concat((0,I.Z)(e),[null==t?void 0:t.permission])}),[]),n=a.includes("sources:*:*")||a.includes("sources:*:write");e({type:w.a.SET_WRITE_PERMISSIONS_FULFILLED,payload:n})})).catch((function(t){return e({type:w.a.SET_WRITE_PERMISSIONS_REJECTED,payload:{error:{detail:t.detail||t.data,title:"Cannot get user's credentials"}}})}))}))}),[]),t};var S=a(54876);const x=function(){var e=(0,b.useDispatch)(),t=(0,c.useLocation)().pathname,a=(0,b.useSelector)((function(e){return e.sources}),b.shallowEqual),r=(0,n.useRef)(t);return(0,n.useEffect)((function(){var t=(0,S.uY)(),a=t.applications,n=t.types;a||n?Promise.all([e((0,_.WP)()),e((0,_.qJ)())]).then((function(){return e((0,_.il)(S.mB))})):Promise.all([e((0,_.WP)()),e((0,_.qJ)()),e((0,_.il)(S.mB))])}),[]),(0,n.useEffect)((function(){r.current!==t&&((0,S.rh)(a),r.current=t)}),[t]),null};var O=a(7995);const A=function(){var e=(0,c.useHistory)();return(0,n.useEffect)((function(){try{insights.chrome.init(),insights.chrome.identifyApp("sources");var t=insights.chrome.on("APP_NAVIGATION",(function(t){var a;return"sources"===(t.navId.split("/").pop()||(null===(a=t.domEvent)||void 0===a?void 0:a.href.split("/").pop()))&&e.push(l._j.sources.path)}));return function(){return null==t?void 0:t()}}catch(e){console.warn("Failed to initialize chrome navigation.")}}),[]),null};var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a="/",n=e.replace(/(#|\?).*/,"").split("/");return n.shift(),"beta"===n[0]&&(n.shift(),a="/beta/"),(0,I.Z)(new Array(t)).reduce((function(e,a,r){return"".concat(e).concat(n[r]||"").concat(r<t-1?"/":"")}),a)};const L=function(){return(0,n.useEffect)((function(){return function(){sessionStorage.removeItem(O.t)}}),[]),r().createElement(c.BrowserRouter,{basename:P(location.pathname,1)},r().createElement(s.Z,{locale:"en"},r().createElement(r().Fragment,null,r().createElement(o.ZP,null),r().createElement(M,null,r().createElement(Z,null,r().createElement(i.Z,{style:{padding:0}},r().createElement(x,null),r().createElement(A,null),r().createElement(l.ZP,null)))))))}},60076:(e,t,a)=>{a.d(t,{_j:()=>l,yS:()=>u,ZP:()=>d});var n=a(92950),r=a.n(n),o=a(86235),i=a(98583),s=(0,n.lazy)((function(){return Promise.all([a.e(410),a.e(252),a.e(736),a.e(662),a.e(482),a.e(593)]).then(a.bind(a,75490))})),c=(0,n.lazy)((function(){return Promise.all([a.e(410),a.e(736),a.e(198),a.e(662),a.e(818)]).then(a.bind(a,71641))})),l={sources:{path:"/sources"},sourcesNew:{path:"/sources/new",writeAccess:!0},sourcesRemove:{path:"/sources/remove/:id",redirectNoId:!0,writeAccess:!0},sourcesDetail:{path:"/sources/detail/:id",redirectNoId:!0},sourcesDetailRename:{path:"/sources/detail/:id/rename",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemove:{path:"/sources/detail/:id/remove",redirectNoId:!0,writeAccess:!0},sourcesDetailAddApp:{path:"/sources/detail/:id/add_app/:app_type_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemoveApp:{path:"/sources/detail/:id/remove_app/:app_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailEditCredentials:{path:"/sources/detail/:id/edit_credentials",redirectNoId:!0,writeAccess:!0}},u=function(e,t){return e.replace(":id",t)};const d=function(){return r().createElement(n.Suspense,{fallback:r().createElement(i.zx,null)},r().createElement(o.Switch,null,r().createElement(o.Route,{path:l.sourcesDetail.path,component:c}),r().createElement(o.Route,{component:s})))}},79829:(e,t,a)=>{a.d(t,{be:()=>x,Cu:()=>k,rL:()=>N,M5:()=>A,ye:()=>F,uc:()=>R,oI:()=>z,TA:()=>P,Rj:()=>O,sd:()=>j});var n=a(4942),r=a(15861),o=a(29439),i=a(87757),s=a.n(i),c=a(19694),l=a.n(c),u=a(27361),d=a.n(u),p=a(36968),m=a.n(p),f=a(79477),g=a(87469);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(){return(h=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=a(84866),b=a(17570),v=a(34155),_="".concat(v.env.BASE_PATH||"/api","/cost-management/v1"),T="".concat(v.env.BASE_PATH||"/api","/sources/v3.1"),M=function(e){return x.get("".concat(_,"/sources/").concat(e,"/")).catch((function(){return{}}))},I=["amazon","azure"],w={"billing_source.data_source.bucket":"bucket","billing_source.data_source.resource_group":"resource_group","billing_source.data_source.storage_account":"storage_account","authentication.credentials.subscription_id":"subscription_id"};function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=l().create();x.interceptors.request.use((function(e){return h.apply(this,arguments)})),x.interceptors.response.use((function(e){return e.data?e.data:e})),x.interceptors.response.use(null,(function(e){if(e.response&&401===e.response.status)return window.insights.chrome.auth.logout(),!1;throw e})),x.interceptors.response.use(null,(function(e){throw e.response&&e.response.status>=500&&e.response.status<600&&(0,g.e)((function(t){t.setTag("request_id",e.response.req_id)})),e})),x.interceptors.response.use(null,(function(e){if(!l().isCancel(e))try{var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);if(t.response&&t.response.data)throw t.response.data;throw e}catch(e){var a=(0,g.Tb)(e);throw e.sentryId=a,e}})),x.interceptors.response.use((function(e){return e.errors&&e.errors.length>0?Promise.reject({detail:e.errors[0].message}):e})),x.interceptors.response.use(null,(function(e){if(e.errors&&403===e.errors[0].status)return Promise.reject({detail:e.errors[0].detail,title:"Forbidden access"});throw e}));var O=function(){return{checkAvailabilitySource:function(e){return x.post("".concat(T,"/sources/").concat(e,"/check_availability"))},updateSource:function(e,t){return x.patch("".concat(T,"/sources/").concat(e),t)},updateEndpoint:function(e,t){return x.patch("".concat(T,"/endpoints/").concat(e),t)},createEndpoint:function(e){return x.post("".concat(T,"/endpoints"),e)},updateAuthentication:function(e,t){return x.patch("".concat(T,"/authentications/").concat(e),t)},createAuthentication:function(e){return x.post("".concat(T,"/authentications"),e)},showSource:function(e){return x.get("".concat(T,"/sources/").concat(e))},listSourceEndpoints:function(e){return x.get("".concat(T,"/sources/").concat(e,"/endpoints"))},listSourceApplications:function(e){return x.get("".concat(T,"/sources/").concat(e,"/applications"))},listEndpointAuthentications:function(e){return x.get("".concat(T,"/endpoints/").concat(e,"/authentications"))},deleteSource:function(e){return x.delete("".concat(T,"/sources/").concat(e))},createApplication:function(e){return x.post("".concat(T,"/applications"),e)},postGraphQL:function(e){return x.post("".concat(T,"/graphql"),e)},listSourceTypes:function(){return x.get("".concat(T,"/source_types"))},doLoadAppTypes:function(){return x.get("".concat(T,"/application_types"))},deleteApplication:function(e){return x.delete("".concat(T,"/applications/").concat(e))},createAuthApp:function(e){return x.post("".concat(T,"/application_authentications"),e)},deleteAuthentication:function(e){return x.delete("".concat(T,"/authentications/").concat(e))},showAuthentication:function(e){return x.get("".concat(T,"/authentications/").concat(e))},updateApplication:function(e,t){return x.patch("".concat(T,"/applications/").concat(e),t)},showApplication:function(e){return x.get("".concat(T,"/applications/").concat(e))},listSourceAuthentications:function(e){return x.get("".concat(T,"/sources/").concat(e,"/authentications"))},createSource:function(e){return x.post("".concat(T,"/sources"),e)},getEndpoint:function(e){return x.get("".concat(T,"/endpoints/").concat(e))},getGoogleAccount:function(){return x.get("".concat(T,"/app_meta_data?filter[name]=gcp_service_account"))},bulkCreate:function(e){return x.post("".concat(T,"/bulk_create"),e)},pauseApplication:function(e){return x.post("".concat(T,"/applications/").concat(e,"/pause"))},unpauseApplication:function(e){return x.post("".concat(T,"/applications/").concat(e,"/unpause"))},pauseSource:function(e){return x.post("".concat(T,"/sources/").concat(e,"/pause"))},unpauseSource:function(e){return x.post("".concat(T,"/sources/").concat(e,"/unpause"))}}},A=function(){return O().doLoadAppTypes()},P=function(e){return O().deleteSource(e).catch((function(e){throw{error:{detail:e.errors[0].detail}}}))},L=function(e,t){return"limit:".concat(e,", offset:").concat((t-1)*e)},D=function(e,t){return e?"source_type_id"===e?'sort_by:{source_type:{product_name:"'.concat(t,'"}}'):"applications"===e?'sort_by:{applications:{__count:"'.concat(t,'"}}'):"sort_by:{".concat(e,':"').concat(t,'"}'):""},C="\n    id,\n    created_at,\n    source_type_id,\n    name,\n    imported,\n    availability_status,\n    source_ref,\n    last_checked_at,\n    updated_at,\n    last_available_at,\n    app_creation_workflow,\n    paused_at,\n    authentications { authtype, username, availability_status_error, availability_status }\n    applications { application_type_id, id, availability_status_error, availability_status, paused_at, authentications { id, resource_type } },\n    endpoints { id, scheme, host, port, path, receptor_node, role, certificate_authority, verify_ssl, availability_status_error, availability_status, authentications { authtype, availability_status, availability_status_error } }\n",R=function(e){var t=e.pageSize,a=e.pageNumber,n=e.sortBy,r=e.sortDirection,o=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=[];n.name&&o.push('name: { contains_i: "'.concat(n.name,'" }')),(null===(e=n.source_type_id)||void 0===e?void 0:e.length)>0&&o.push("source_type_id: { eq: [".concat(n.source_type_id.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }")),(null===(t=n.applications)||void 0===t?void 0:t.length)>0&&o.push("applications: { application_type_id: { eq: [".concat(n.applications.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }}")),r===y.JL&&o.push('source_type: { vendor: { not_eq: "Red Hat"} }'),r===y.B0&&o.push('source_type: { vendor: "Red Hat" }');var i=null===(a=n.availability_status)||void 0===a?void 0:a[0];return i&&(i===b.Rl?o.push('availability_status: { eq: "'.concat(b.Rl,'" }')):i===b.nZ&&o.push('availability_status: { eq: ["'.concat(b.L,'", "').concat(b.nZ,'"] }'))),o.length>0?"filter: { ".concat(o.join(", ")," }"):""}(e.filterValue,e.activeVendor),i=[L(t,a),D(n,r),o].join(",");return O().postGraphQL({query:"{ sources(".concat(i,")\n      { ").concat(C," },\n     sources_aggregate(").concat(o,"){aggregate{total_count}}\n    }")}).then((function(e){return e.data}))},k=function(e){return O().createApplication(e)},N=function(e,t){return O().deleteApplication(e).catch((function(e){var a=(0,o.Z)(e.errors,1)[0].detail;throw{error:{title:t,detail:a}}}))},j=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=[];n.name&&o.push("filter[name][contains_i]=".concat(n.name)),(null===(e=n.source_type_id)||void 0===e?void 0:e.length)>0&&n.source_type_id.map((function(e){return o.push("filter[source_type_id][]=".concat(e))})),(null===(t=n.applications)||void 0===t?void 0:t.length)>0&&n.applications.map((function(e){return o.push("filter[applications][application_type_id][eq][]=".concat(e))})),r===y.JL&&o.push("filter[source_type][vendor][not_eq]=Red Hat"),r===y.B0&&o.push("filter[source_type][vendor]=Red Hat");var i=null===(a=n.availability_status)||void 0===a?void 0:a[0];return i&&(i===b.Rl?o.push("filter[availability_status]=".concat(b.Rl)):i===b.nZ&&(o.push("filter[availability_status][]=".concat(b.L)),o.push("filter[availability_status][]=".concat(b.nZ)))),o.length>0?o.join("&"):""},z=function(e){return O().postGraphQL({query:"{ sources(filter: { id: { eq: ".concat(e,"}})\n            { ").concat(C," }\n        }")}).then((function(e){return e.data}))},F=function(){var e=(0,r.Z)(s().mark((function e(t,a,n){var r,o,i,c,l,u,p,g,E,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O().postGraphQL({query:"{ sources(filter: { id: { eq: ".concat(t,"}})\n          { source_type_id, applications {\n              application_type_id,\n              id,\n              availability_status_error,\n              availability_status,\n              paused_at,\n              authentications {\n                  id\n              }\n          } }\n      }")});case 2:return c=e.sent,l=[],null===(r=c.data.sources)||void 0===r||null===(o=r[0])||void 0===o||null===(i=o.applications)||void 0===i||i.forEach((function(e){l.push(O().showApplication(e.id))})),e.next=7,Promise.all(l);case 7:if(u=e.sent,p=n.find((function(e){var t,a;return e.id===(null===(t=c.data.sources)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.source_type_id)})),g=a.find((function(e){return e.name===f.f.COST_MANAGAMENT})),!u.length){e.next=18;break}E=s().mark((function e(a){var n,r,o,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u[a],r=n.extra,o=n.application_type_id,i=S({},r),o!==g.id||!I.includes(p.name)||Object.keys(r).length){e.next=7;break}return e.next=5,M(t);case 5:l=e.sent,Object.keys(w).forEach((function(e){var t=d()(l,e);t&&m()(i,w[e],t)}));case 7:c.data.sources[0].applications[a]=S(S({},c.data.sources[0].applications[a]),{},{extra:i});case 8:case"end":return e.stop()}}),e)})),h=0;case 13:if(!(h<u.length)){e.next=18;break}return e.delegateYield(E(h),"t0",15);case 15:h++,e.next=13;break;case 18:return e.abrupt("return",c.data);case 19:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},96845:(e,t,a)=>{a.d(t,{S:()=>i,Z:()=>s});var n=a(79829),r=a(27361),o=a.n(r),i=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e||(t="Undefined error"),t||"string"!=typeof e||(t=e),t||(t=o()(e,"errors[0].detail",JSON.stringify(e,null,2))),a?(0,n.Rj)().deleteSource(a).then((function(){return t})).catch((function(e){var a=o()(e,"errors[0].detail",JSON.stringify(e,null,2));return"".concat(t,". The source was not removed, try remove it later: ").concat(a)})):t};const s=i},7995:(e,t,a)=>{a.d(t,{t:()=>g,Z:()=>h});var n=a(29439),r=a(92950),o=a.n(r),i=a(86896),s=a(95995),c=a(11306),l=a(63686),u=a(64408),d=a(4585),p=insights.chrome.isBeta()?"beta/":"",m="/".concat(p,"settings/connector"),f="/".concat(p,"insights/subscriptions/rhel"),g="ins-c-sources__cloud_cards_expanded",E=function(){var e=(0,r.useState)((function(){var e=sessionStorage.getItem(g);return!e||"true"===e})),t=(0,n.Z)(e,2),a=t[0],p=t[1],E=(0,i.Z)();return(0,r.useEffect)((function(){sessionStorage.setItem(g,a)}),[a]),o().createElement(s.Card,{isExpanded:a,className:"pf-u-mb-lg pf-u-mt-md pf-u-mt-0-on-md src-c-card-info"},o().createElement(s.CardHeader,{onExpand:function(){return p(!a)}},o().createElement(s.CardTitle,null,E.formatMessage({id:"cloud.nowWhat",defaultMessage:"I connected to cloud. Now what?"}))),o().createElement(s.CardExpandableContent,null,o().createElement(s.CardBody,null,o().createElement(s.TextContent,null,o().createElement(s.Grid,{hasGutter:!0},o().createElement(s.GridItem,{md:4},o().createElement(s.Stack,null,o().createElement(s.StackItem,{className:"pf-u-mb-sm"},o().createElement(s.Text,{className:"src-c-card-info__header"},o().createElement(l.ZP,{className:"pf-u-mr-sm",color:"#0066cc"}),E.formatMessage({id:"cloud.goldImages",defaultMessage:"Use gold images"}))),o().createElement(s.StackItem,{isFilled:!0},o().createElement(s.Text,{className:"text pf-u-mb-sm"},E.formatMessage({id:"cloud.goldImages.description",defaultMessage:"Connecting to Amazon Web Services or Microsoft Azure unlocks automatic access to Red Hat gold images. View gold images in your provider console."})),o().createElement(s.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access#using-gold-images-on-aws_cloud-access",target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.goldImages.awsLink",defaultMessage:"Use Red Hat gold images on AWS"})),o().createElement("br",null),o().createElement(s.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access#using-gold-images-on-azure_cloud-access",target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.goldImages.azureLink",defaultMessage:"Use Red Hat gold images on Microsoft Azure"}))),o().createElement(s.StackItem,{className:"pf-u-mt-lg"},o().createElement(s.Text,{className:"text",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/understanding-gold-images_cloud-access",target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.goldImages.moreLink",defaultMessage:"Learn more about Red Hat gold images"}),o().createElement(c.ZP,{className:"pf-u-ml-sm"}))))),o().createElement(s.GridItem,{md:4},o().createElement(s.Stack,null,o().createElement(s.StackItem,{className:"pf-u-mb-sm"},o().createElement(s.Text,{className:"src-c-card-info__header"},o().createElement(u.ZP,{className:"pf-u-mr-sm",color:"#0066cc"}),E.formatMessage({id:"cloud.insights",defaultMessage:"Explore Red Hat Insights"}))),o().createElement(s.StackItem,{isFilled:!0},o().createElement(s.Text,{className:"text pf-u-mb-sm"},E.formatMessage({id:"cloud.insights.description",defaultMessage:"Use RHEL instances in the cloud and gain other value-add services, such as predictive analytics."})),o().createElement(s.Text,{className:"text",component:"a",href:"https://www.redhat.com/en/technologies/management/insights",target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.insights.insightsLinkt",defaultMessage:"Learn more about Red Hat Insights"}))),o().createElement(s.StackItem,{className:"pf-u-mt-lg"},o().createElement(s.Text,{className:"text",component:"a",href:m,target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.insights.moreLink",defaultMessage:"Enable additional Insights services"}),o().createElement(c.ZP,{className:"pf-u-ml-sm"}))))),o().createElement(s.GridItem,{md:4},o().createElement(s.Stack,null,o().createElement(s.StackItem,{className:"pf-u-mb-sm"},o().createElement(s.Text,{className:"src-c-card-info__header"},o().createElement(d.ZP,{className:"pf-u-mr-sm",color:"#0066cc"}),E.formatMessage({id:"cloud.subwatch",defaultMessage:"Track usage with Subscriptions"}))),o().createElement(s.StackItem,{isFilled:!0},o().createElement(s.Text,{className:"text pf-u-mb-sm"},E.formatMessage({id:"cloud.subwatch.description",defaultMessage:"Use the Subscriptions service to monitor account-level summaries of your Red Hat subscription profile."})),o().createElement(s.Text,{className:"text",component:"a",href:"https://access.redhat.com/products/subscription-central",target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.subwatch.learnMore",defaultMessage:"Learn more about Subscriptions"}))),o().createElement(s.StackItem,{className:"pf-u-mt-lg"},o().createElement(s.Text,{className:"text",component:"a",href:f,target:"_blank",rel:"noopener noreferrer"},E.formatMessage({id:"cloud.subwatch.goTo",defaultMessage:"Go to Subscriptions"}),o().createElement(c.ZP,{className:"pf-u-ml-sm"}))))))))))};const h=o().memo(E)},84731:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(92950),r=a.n(n),o=a(45697),i=a.n(o),s=a(86896),c=a(5913),l=a(95995),u=function(e){var t=e.applicationName,a=e.message,n=e.Icon,o=(0,s.Z)();return r().createElement(l.Bullseye,null,r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.small},r().createElement(l.EmptyStateIcon,{icon:n}),r().createElement(l.Title,{headingLevel:"h2",size:"lg"},o.formatMessage({id:"resourceTable.emptyStateTitle",defaultMessage:"No application resources"})),r().createElement(l.EmptyStateBody,null,o.formatMessage(a,{applicationName:t}))))};u.propTypes={applicationName:i().string.isRequired,message:i().shape({id:i().string.isRequired,defaultMessage:i().isRequired}),Icon:i().elementType},u.defaultProps={message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will appear here when created."},Icon:c.ZP};const d=u},79477:(e,t,a)=>{a.d(t,{f:()=>Z,J:()=>S});var n=a(4942),r=a(93433),o=a(96354),i=a(7081),s=a(5037),c=a(27361),l=a.n(c),u=a(64124),d=a(30411);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var t=e.schema.endpoint.fields.map((function(t){return m(m({},t),function(e,t){return l()(d.Z,[e,"endpoint",t],{})}(e.name,t.name))})),a={component:o.Z.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){var n,r=t.find((function(e){return"url"===e.name}));return m(m({},a),{},{fields:[{component:o.Z.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[m(m({},r),{},{isRequired:!1,validate:null==r||null===(n=r.validate)||void 0===n?void 0:n.filter((function(e){return e.type!==u.Z.REQUIRED}))})]},{component:o.Z.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]})}return m(m({},a),{},{fields:t})}},g=a(92950),E=a.n(g),h=a(45697),y=a.n(h),b=a(48880),v=a(95995),_=function(e){var t=e.name,a=(0,b.default)(),n=l()(a.getState().values,t),r=n.variant,o=n.title,i=n.description,s=n.customIcon;return E().createElement(v.Alert,{variant:r,isInline:!0,title:o,customIcon:s},i)};_.propTypes={name:y().string.isRequired};const T=_;var M=a(84731);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z={COST_MANAGAMENT:"/insights/platform/cost-management",CLOUD_METER:"/insights/platform/cloud-meter"},S=function(e,t,a){return[{component:o.Z.TABS,name:"app-tabs",isBox:!0,fields:(0,r.Z)(e.map((function(e){var n=a.find((function(t){return t.id===e.application_type_id})),o=function(e,t,a){var n;return[{name:"messages.".concat(a.id),component:"description",Content:T,condition:{when:function(e){return e.name},isNotEmpty:!0}}].concat((0,r.Z)((0,s.Hx)(null===(n=a.authentications)||void 0===n?void 0:n.filter((function(e){return Object.keys(e).length>1})),t,null==e?void 0:e.name,a.id)))}(n,t,e);return e.authentications.find((function(e){return"Endpoint"===e.resource_type}))&&(o=[o[0],[].concat((0,r.Z)(o[1]||[]),[f(t)])]),1===o.length?o.push({component:"description",name:"no-credentials",Content:M.Z,message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will be added here when created."},applicationName:null==n?void 0:n.display_name,Icon:i.ZP}):e.paused_at&&(o=[o[0],o[1].map((function(e){return w(w({},e),{},{isDisabled:!0})}))]),{name:null==n?void 0:n.id,title:null==n?void 0:n.display_name,fields:o}})))}]}},5037:(e,t,a)=>{a.d(t,{Hx:()=>d});var n=a(93433),r=a(4942),o=a(27361),i=a.n(o),s=(a(64124),a(30411));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=function(e,t){var a;return(null==e||null===(a=e.fields)||void 0===a?void 0:a.filter((function(e){return t&&e.stepKey===t})))||[]},d=function(e,t,a,r){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var o,c,d,p=null==t||null===(o=t.schema)||void 0===o||null===(c=o.authentication)||void 0===c?void 0:c.find((function(t){return t.type===e.authtype}));if(!p)return[];var m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return i()(s.Z,[e,"authentication",t,a,"includeStepKeyFields"],[])}(t.name,e.authtype,a),f=null===(d=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return i()(s.Z,[e,"authentication",t,a,"additionalSteps"],[])}(t.name,e.authtype,a))||void 0===d?void 0:d.map((function(e){return l(l({},e),{},{fields:[].concat((0,n.Z)(e.fields),(0,n.Z)(u(p,e.name)))})})).map((function(e){return e.fields.map((function(e){return e.name}))})).flatMap((function(e){return e}));return function(e,t,a){return e.map((function(e){var n=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name.startsWith("application")?function(e,t){return"applications.a".concat(t,".").concat(e.replace("application.",""))}(e.name,a):e.name,r=l(l({},e),{},{name:n});return"password"===r.name.split(".").pop()&&(r.component="authentication"),r}))}(p.fields.filter((function(e){return f.includes(e.name)||!f.length&&!e.stepKey||e.stepKey&&m.includes(e.stepKey)})).map((function(n){return l(l({},n),function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"generic";return i()(s.Z,[e,"authentication",t,n,a],{})}(t.name,e.authtype,n.name,a))})),e.id,r)})):[]}},98583:(e,t,a)=>{a.d(t,{aN:()=>y,zx:()=>b,Xf:()=>v,mI:()=>_,sk:()=>T,X6:()=>I});var n=a(87462),r=a(45987),o=a(92950),i=a.n(o),s=a(45697),c=a.n(s),l=a(34168),u=a(48716),d=a(39173),p=a(54213),m=a(95995),f=a(30567),g=a(86896),E=["isDeleting"],h=["row"],y=function(e){var t=e.width,a=void 0===t?"100%":t,n=e.height,r=void 0===n?"100%":n,o=e.className,s=void 0===o?"":o;return i().createElement("span",{className:"src-c-loader ".concat(s),style:{width:a,height:r}})};y.propTypes={className:c().string,width:c().oneOfType([c().string,c().number]),height:c().oneOfType([c().string,c().number])};var b=function(){var e=(0,g.Z)();return i().createElement(i().Fragment,null,i().createElement(u.Z,null,i().createElement(d.Z,{title:e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),i().createElement(p.Z,{type:"content"},i().createElement("div",{className:"src-c-fake_content pf-u-p-lg"},i().createElement(y,null))))},v=function(){return i().createElement(y,{className:"top-pagination",height:30,width:200})},_=function(){return i().createElement(m.Bullseye,{className:"src-c-bullseye__placeholder-loader"},i().createElement(m.Spinner,{size:"xl"}))},T=function(e){var t=e.row,a=t.isDeleting,o=(0,r.Z)(t,E),s=(0,r.Z)(e,h);return a?i().createElement("tr",null,i().createElement("td",{colSpan:f.W,className:"pf-u-p-md"},i().createElement(y,{height:100}))):i().createElement(l.RowWrapper,(0,n.Z)({},s,{row:o,className:"src-c-row-vertical-centered"}))};T.propTypes={row:c().object.isRequired};var M=function(e){return i().createElement(m.Card,{className:"pf-u-m-md"},i().createElement(m.CardBody,null,i().createElement(y,e)))},I=function(){return i().createElement("div",{className:"src-c-detail-page"},i().createElement(u.Z,null,i().createElement(y,{height:96})),i().createElement(m.Grid,null,i().createElement(m.GridItem,{md:"6"},i().createElement(M,{height:218})),i().createElement(m.GridItem,{md:"6"},i().createElement(M,{height:218})),i().createElement(m.GridItem,{md:"12"},i().createElement(M,{height:324}))))}},42812:(e,t,a)=>{a.d(t,{Z:()=>n});const n={type:"empty",name:"empty",fields:[]}},30411:(e,t,a)=>{a.d(t,{Z:()=>q});var n=a(4942),r=a(92950),o=a.n(r),i=a(44012),s=a(95995),c=a(96354),l=a(64124),u=a(86896),d=a(73479);const p=function(){var e=(0,u.Z)();return o().createElement(o().Fragment,null,e.formatMessage({id:"wizard.sslCertificate",defaultMessage:"SSL Certificate"}),o().createElement(s.Popover,{"aria-label":"Help text",maxWidth:"50%",bodyContent:o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription1",defaultMessage:"You can obtain your OpenShift Container Platform provider’s CA certificate for all endpoints (default, metrics, alerts) from {cmd}."},{cmd:o().createElement("b",{key:"b"},"/etc/origin/master/ca.crt")})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription2",defaultMessage:"Paste the output (a block of text starting with --BEGIN CERTIFICATE--) into the Trusted CA Certificates field."})))},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};var m=a(93433),f=a(45697),g=a.n(f),E=a(48880),h=a(72317),y="".concat(h.sK,"/html-single/adding_an_amazon_web_services_aws_source_to_cost_management/index#creating-an-aws-s3-bucket_adding-aws-sources"),b="".concat(h.sK,"/html-single/adding_an_amazon_web_services_aws_source_to_cost_management/index#enabling-aws-account-access_adding-aws-sources"),v="".concat(h.sK,"/html-single/adding_an_amazon_web_services_aws_source_to_cost_management/index#configure-tagging-next-step_next-steps-aws"),_=function(e){var t=e.appendTo,a=(0,u.Z)();return o().createElement(s.Popover,{appendTo:t,"aria-label":"Help text",position:"right",maxWidth:"40%",bodyContent:a.formatMessage({id:"cost.arn.includeAliasesPopover",defaultMessage:'If there are account aliases, they will appear and be used for filtering when reporting on AWS accounts. This will include "iam:ListAccountAliases" to the Action of the IAM Policy.'})},o().createElement(s.Button,{className:"pf-u-p-0 pf-u-m-0",variant:s.ButtonVariant.plain},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};_.propTypes={appendTo:g().instanceOf(Element).isRequired};var T=function(e){var t=e.appendTo,a=(0,u.Z)();return o().createElement(s.Popover,{appendTo:t,"aria-label":"Help text",position:"right",maxWidth:"35%",bodyContent:a.formatMessage({id:"cost.arn.includeOrgUnitsPopover",defaultMessage:'If there are organizational units, they will be used for filtering when reporting on AWS resources. This will include "organizations:List*" and "organizations:Describe*" to the Action of the IAM Policy'})},o().createElement(s.Button,{className:"pf-u-p-0 pf-u-m-0",variant:s.ButtonVariant.plain},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};T.propTypes={appendTo:g().instanceOf(Element).isRequired};var M,I=a(29439),w=a(79829),Z=function(){return w.be.get("/api/cloudigrade/v2/sysconfig/")},S=function(e){return o().createElement("b",{key:"b-".concat(e.length,"-").concat(Math.floor(1e3*Math.random()))},e)},x="https://access.redhat.com/management/api",O=a(36488),A="".concat(h.sK,"/html-single/adding_an_openshift_container_platform_source_to_cost_management"),P="".concat(h.sK,"/html-single/adding_a_microsoft_azure_source_to_cost_management/index#creating-an-azure-storage-account_adding-an-azure-source"),L="".concat(h.sK,"/html-single/adding_a_microsoft_azure_source_to_cost_management/index#configuring-azure-roles_adding-an-azure-source"),D="".concat(h.sK,"/html-single/adding_a_microsoft_azure_source_to_cost_management/index#configuring-an-azure-daily-export-schedule_adding-an-azure-source"),C=function(e){return o().createElement("b",{key:"b-".concat(e.length,"-").concat(Math.floor(1e3*Math.random()))},e)},R="".concat(h.sK,"/html-single/adding_a_google_cloud_source_to_cost_management"),k=function(){var e=(0,u.Z)();return o().createElement(s.Text,{component:s.TextVariants.p,className:"src-wizard--all-required-text"},e.formatMessage({id:"catalog.auth.allFieldsRequired",defaultMessage:"All fields are required."}))},N=a(84866),j=a(42812),z=o().createElement(i.Z,{id:"wizard.arnPattern",defaultMessage:"ARN must start with arn:aws:"}),F=o().createElement(i.Z,{id:"wizard.arnLength",defaultMessage:"ARN should have at least 10 characters"}),V={placeholder:"arn:aws:iam:123456789:role/CostManagement",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^arn:aws:.*/,message:z},{type:l.Z.MIN_LENGTH,threshold:10,message:F}]},U={placeholder:"arn:aws:iam:123456789:role/SubscriptionWatch",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^arn:aws:.*/,message:z},{type:l.Z.MIN_LENGTH,threshold:10,message:F}],label:o().createElement(i.Z,{id:"wizard.arn",defaultMessage:"ARN"})},B={isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,message:o().createElement(i.Z,{id:"catalog.urlPatternMessage",defaultMessage:"URL must start with https:// or http://"}),pattern:/^https{0,1}:\/\//},{type:l.Z.URL}],helperText:o().createElement(s.FormHelperText,{isHidden:!1},o().createElement(i.Z,{id:"catalog.hostnameHelper",defaultMessage:"For example, https://myansibleinstance.example.com/ or https://127.0.0.1/"})),label:o().createElement(i.Z,{id:"wizard.hostname",defaultMessage:"Hostname"})};const q={openshift:{authentication:{token:(0,n.Z)({generic:{"authentication.password":{isRequired:!0,validate:[{type:l.Z.REQUIRED}]},additionalFields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.token.description",defaultMessage:"An OpenShift Container Platform login token is required to communicate with the application."})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.token.collectData",defaultMessage:"To collect data from a Red Hat OpenShift Container Platform source:"})),o().createElement(s.TextList,{component:"ol"},o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.logIn",defaultMessage:"Log in to the Red Hat OpenShift Container Platform cluster with an account that has access to the namespace"})),o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.runCommand",defaultMessage:"Run the following command to obtain your login token:"})),o().createElement(s.ClipboardCopy,{className:"pf-u-mb-md",isReadOnly:!0},e.formatMessage({id:"openshift.token.comman",defaultMessage:"# oc sa get-token -n management-infra management-admin"})),o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.copyToken",defaultMessage:"Copy the token and paste it in the Token field"}))))}}]}},N.Qr,{skipSelection:!0,skipEndpoint:!0,"source.source_ref":{label:o().createElement(i.Z,{id:"wizard.clusterId",defaultMessage:"Cluster Identifier"}),isRequired:!0,component:c.Z.TEXT_FIELD,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"wizard.clusterIdPattern",defaultMessage:"Cluster ID must start with alphanumeric character and can contain underscore and hyphen"})}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.configureOperator",defaultMessage:"Install and configure operator"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.description",defaultMessage:"For Red Hat OpenShift Container Platform 4.6 and later, install the {operator} from the OpenShift Container Platform web console."},{operator:o().createElement("b",{key:"bold"},"costmanagement-metrics-operator")})),o().createElement(s.Text,null,o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:A,target:"_blank",rel:"noopener noreferrer"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.operator_configured",defaultMessage:"If you configured the operator to create a source (create_source: true), <b>STOP</b> here and <b>CANCEL</b> out of this flow."},{b:O.S})),o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.operator_not_configured",defaultMessage:"Otherwise, enter the cluster identifier below. You can find the cluster identifier in the cluster’s Help > About screen."})))}},{name:"source.source_ref"},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"token",initializeOnMount:!0}]}]})},endpoint:{url:{placeholder:"https://myopenshiftcluster.mycompany.com",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.URL,message:o().createElement(i.Z,{id:"wizard.urlPatternMessage",defaultMessage:"The URL is not formatted correctly."})}]},"endpoint.certificate_authority":{label:o().createElement(p,null),"aria-label":"SSL Certificate"},additionalFields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.endpoint.urlAndCA",defaultMessage:"Provide the OpenShift Container Platform URL and SSL certificate."})))}}]}},azure:{authentication:(M={},(0,n.Z)(M,j.Z.type,(0,n.Z)({},N.fn,{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"subwatch.azure.tokenTitle",defaultMessage:"Obtain offline token"}),nextStep:"cost-azure-playbook",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"subwatch.azure.substepTitle",defaultMessage:"Enable account access"})},fields:[{name:"azure-1",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"subwatch.azure.tokenDesc",defaultMessage:"Generate a token to authenticate the calls to APIs for Red Hat services."})),o().createElement(s.TextList,{component:s.TextListVariants.ol,className:"pf-u-ml-0"},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.azure.tokenLink",defaultMessage:"To obtain an offline token, follow the steps at {link}."},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:x},x)}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:j.Z.type,initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"subwatch.azure.playbookTitle",defaultMessage:"Run ansible playbook"}),name:"cost-azure-playbook",substepOf:"eaa",fields:[{name:"azure-2",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.azure.ansiblePlaybookDesc",defaultMessage:"Download and run the following commands against a running Azure VM."})),o().createElement(s.ClipboardCopy,{className:"pf-u-mb-lg"},"ansible-galaxy collection install redhatinsights.subscriptions"),o().createElement(s.ClipboardCopy,null,"ansible-playbook -i <AZURE_VM_HOSTNAME>, -b ~/.ansible/collections/ansible_collections/redhatinsights/subscriptions/playbooks/verify_account.yml -e rh_api_refresh_token=<OFFLINE_AUTH_TOKEN>"))}}]}]})),(0,n.Z)(M,"tenant_id_client_id_client_secret",(0,n.Z)({},N.Qr,{useApplicationAuth:!0,skipSelection:!0,"application.extra.subscription_id":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.subidPattern",defaultMessage:"Subscription ID must start with alphanumeric character and can contain underscore and hyphen"})}],isRequired:!0},"application.extra.resource_group":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.resourceGroupPattern",defaultMessage:"Resource group must start with alphanumeric character and can contain underscore and hyphen"})}]},"application.extra.storage_account":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.storageAccountPattern",defaultMessage:"Storage account must start with alphanumeric character and can contain underscore and hyphen"})}]},"authentication.password":{type:"password",validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"cost.clientSecret",defaultMessage:"Client secret"})},"authentication.username":{validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"cost.clientAppId",defaultMessage:"Client (Application) ID"})},"authentication.extra.azure.tenant_id":{label:o().createElement(i.Z,{id:"cost.tenantDirId",defaultMessage:"Tenant (Directory) ID"}),validate:[{type:l.Z.REQUIRED}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.azureSubStepId",defaultMessage:"Resource group and storage account"}),nextStep:"azure-sub-id",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"tenant_id_client_id_client_secret",initializeOnMount:!0},{name:"azure-storage-account-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Red Hat recommends creating a dedicated resource group and storage account in Azure to collect cost data and metrics for cost management. {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:P},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountAfterDescription",defaultMessage:"After configuring a resource group and storage account in the Azure portal, enter the following:"})))}},{name:"all-required",component:"description",Content:k},{name:"application.extra.resource_group",component:c.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.resourceGroupName",defaultMessage:"Resource group name"})},{name:"application.extra.storage_account",component:c.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.storageAccountName",defaultMessage:"Storage account name"})}]},{title:o().createElement(i.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"}),name:"azure-sub-id",nextStep:"configure-roles",fields:[{name:"azure-sub-id-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.subscriptionIdCommand",defaultMessage:"Run the following command in Cloud Shell to obtain your Subscription ID and enter it below:"})),o().createElement(s.ClipboardCopy,null,'az account show --query "{ subscription_id: id }"'))}},{name:"application.extra.subscription_id",component:c.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"})}]},{title:o().createElement(i.Z,{id:"wizard.configureRoles",defaultMessage:"Roles"}),name:"configure-roles",nextStep:"export-schedule",fields:[{name:"configure-service-principal",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.dedicatedCredentials",defaultMessage:"Red Hat recommends configuring dedicated credentials to grant Cost Management read-only access to Azure cost data.  {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:L},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.createContributorRole",defaultMessage:"Run the following command in Cloud Shell to create a Cost Management Storage Account Contributor role. From the output enter the values in the fields below:"})),o().createElement(s.ClipboardCopy,null,'az ad sp create-for-rbac -n "CostManagement" --role "Storage Account Contributor" --query \'{"tenant": tenant, "client_id": appId, "secret": password}\''))}},{name:"all-required",component:"description",Content:k},{name:"authentication.extra.azure.tenant_id",component:c.Z.TEXT_FIELD},{name:"authentication.username",component:c.Z.TEXT_FIELD},{name:"authentication.password",component:c.Z.TEXT_FIELD},{name:"reader-role",component:"description",Content:function(){var e=(0,E.default)().getState().values.application,t=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},t.formatMessage({id:"cost.azure.createReaderRole",defaultMessage:"Run the following command in Cloud Shell to create a Cost Management Reader role:"})),o().createElement(s.ClipboardCopy,null,'az role assignment create --role "Cost Management Reader" --assignee http://CostManagement --subscription '.concat(e.extra.subscription_id)))}}]},{title:o().createElement(i.Z,{id:"cost.createDailyExport",defaultMessage:"Daily export"}),name:"export-schedule",fields:[{name:"export-schedule-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Create a recurring task to export cost data to your Azure storage account, where Cost Management will retrieve the data.  {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:D},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.TextContent,{className:"list-align-left"},o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"From the Azure portal, add a new export."})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Provide a name for the container and directory path, and specify the below settings to create the daily export. Leave all other options as the default."})))),o().createElement(s.TextList,{className:"export-table",component:s.TextListVariants.dl},o().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},o().createElement(s.Text,{component:s.TextVariants.b},e.formatMessage({id:"cost.azure.exportType",defaultMessage:"Export type"}))),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.dailyExport",defaultMessage:"Daily export for billing-period-to-date costs"})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},o().createElement(s.Text,{component:s.TextVariants.b},e.formatMessage({id:"cost.azure.storageAccountName",defaultMessage:"Storage account name"}))),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.createdAccountName",defaultMessage:"Storage account name created earlier"}))))}}]}]})),M)},amazon:{authentication:{access_key_secret_key:{generic:{"authentication.username":{label:o().createElement(i.Z,{id:"wizard.accessKeyId",defaultMessage:"Access key ID"}),placeholder:"AKIAIOSFODNN7EXAMPLE",isRequired:!0,validate:[{type:l.Z.REQUIRED}]},"authentication.password":{label:o().createElement(i.Z,{id:"wizard.secretAccessKey",defaultMessage:"Secret access key"}),placeholder:"wJairXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",isRequired:!0,validate:[{type:l.Z.REQUIRED}],type:"password"},skipSelection:!0,onlyHiddenFields:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"wizard.configureAccountAccess",defaultMessage:"Account access"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart1",defaultMessage:"Create an access key in your AWS user account and enter the details below."})),o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart2",defaultMessage:"For sufficient access and security, Red Hat recommends using the Power user identity and access management (IAM) policy for your AWS user account. "}),o().createElement(s.Popover,{"aria-label":"Help text",position:"bottom",bodyContent:o().createElement(o().Fragment,null,o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyHelpText",defaultMessage:"The Power user policy allows the user full access to API functionality and AWS services for user administration. Create an access key in the Security Credentials area of your AWS user account. When adding your AWS account as a source, the access key ID and secret access key act as your user ID and password."})))},o().createElement(d.ZP,null))))}},{name:"authentication.username",component:c.Z.TEXT_FIELD},{name:"authentication.password",component:c.Z.TEXT_FIELD},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"access_key_secret_key",initializeOnMount:!0}]}]}},arn:(0,n.Z)({generic:{includeStepKeyFields:["arn"],"authentication.username":V}},N.Qr,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":V,"application.extra.bucket":{placeholder:"cost-usage-bucket",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.arn.s3BucketPattern",defaultMessage:"S3 bucket name must start with alphanumeric character and can contain underscore and hyphen"})}],isRequired:!0},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.arn.usageDescriptionTitle",defaultMessage:"Configure cost and usage reporting"}),nextStep:"tags",fields:[{name:"usage-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.usageDescription.usageDescription",defaultMessage:"To collect and store the information needed for cost management, you need to set up an Amazon S3 bucket for cost and usage reports. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:y,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.specifyBucker",defaultMessage:"Specify or create an Amazon S3 bucket for your account."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.addFollowingValues",defaultMessage:"Create a cost and usage report using the following values:"}),o().createElement(s.TextList,null,o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.repornName",defaultMessage:"Report name: koku"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.timeUnitHoulry",defaultMessage:"Time unit: hourly"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.includesResourceIDs",defaultMessage:"Include: Resource IDs"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.enableSuppor",defaultMessage:"Enable support for: RedShift, QuickSight and disable support for Athena"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.reportPathPrefix",defaultMessage:"Report path prefix: cost"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.compression",defaultMessage:"Compression type: GZIP"})))),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.enterNameOfCreatedBucker",defaultMessage:"Enter the name of the Amazon S3 bucket you just created below:"}))))}},{name:"application.extra.bucket",component:c.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"cost.arn.s3Label",defaultMessage:"S3 bucket name"})},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"arn",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"cost.arn.tagsStepTitle",defaultMessage:"Tags, aliases and organizational units"}),name:"tags",nextStep:"iam-policy",fields:[{name:"tags-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,o().createElement(s.Text,{component:s.TextVariants.a,rel:"noopener noreferrer",target:"_blank",href:v},e.formatMessage({id:"cost.tags.readMeLink",defaultMessage:"Learn more"}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.tags.desciption",defaultMessage:"To use tags to organize your AWS resources in the Cost Management application, activate your tags in AWS to allow them to be imported automatically."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.tags.openSection",defaultMessage:"In the AWS Billing and Cost Management console, open the Cost Allocation Tags section."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.tags.selectTags",defaultMessage:"Select the tags you want to use in the Cost Management application, and click Activate."}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.tags.aliasessOrgUnits",defaultMessage:"To use account aliases and organizational units in the display and filter of AWS resources, select the following"})))}},{name:"aws.aliases.enabled",component:"checkbox-with-icon",label:o().createElement(i.Z,{id:"cost.arn.includesAliases",defaultMessage:"Include AWS account aliases"}),Icon:_},{name:"aws.org_units.enabled",component:"checkbox-with-icon",label:o().createElement(i.Z,{id:"cost.arn.includeOrgUnits",defaultMessage:"Include AWS organizational units"}),Icon:T}]},{title:o().createElement(i.Z,{id:"cost.arn.iamPolicyTitle",defaultMessage:"Create IAM policy"}),name:"iam-policy",nextStep:"iam-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:function(){var e,t,a,n,r,i,c=(0,E.default)(),l=(0,u.Z)(),d=c.getState().values,p=null===(e=d.application)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.bucket,f=null===(a=d.aws)||void 0===a||null===(n=a.aliases)||void 0===n?void 0:n.enabled,g=null===(r=d.aws)||void 0===r||null===(i=r.org_units)||void 0===i?void 0:i.enabled;return p?o().createElement(s.TextContent,null,o().createElement(s.Text,null,l.formatMessage({id:"cost.iampolicy.grantPermissions",defaultMessage:"To grant permissions to the cost management report you just configured, create an AWS Identity and Access Management (IAM) policy. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:b,rel:"noopener noreferrer",target:"_blank"},l.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.signInIAMConsole",defaultMessage:"Sign in to the AWS Identity and Access Management (IAM) console."})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.createPolicy",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},JSON.stringify({Version:"2012-10-17",Statement:[{Sid:"VisualEditor0",Effect:"Allow",Action:["s3:Get*","s3:List*"],Resource:["arn:aws:s3:::".concat(p),"arn:aws:s3:::".concat(p,"/*")]},{Sid:"VisualEditor1",Effect:"Allow",Action:["s3:ListBucket","cur:DescribeReportDefinitions"].concat((0,m.Z)(f?["iam:ListAccountAliases"]:[]),(0,m.Z)(g?["organizations:List*","organizations:Describe*"]:[])),Resource:"*"}]},null,2)),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.completeProccess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(s.Text,{component:s.TextVariants.p},l.formatMessage({id:"cost.iampolicy.logInIam",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},l.formatMessage({id:"cost.DoNotCloseYourBrowser",defaultMessage:"Do not close your browser."}))}))):o().createElement(s.Text,null,l.formatMessage({id:"cost.iampolicy.somethingWrong",defaultMessage:"Something went wrong, you are missing bucket value."}))}}]},{title:o().createElement(i.Z,{id:"cost.arn.iamRoleStepTitle",defaultMessage:"Create IAM role"}),name:"iam-role",nextStep:"arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.iamrole.createIamRole",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.createNewRole",defaultMessage:"From the AWS Identity Access Management console, create a new role."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.enterAccountId",defaultMessage:"Select another AWS account from the list of trusted entities and paste the following value into the Account ID field:"})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},"589173575009"),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.completeProccess",defaultMessage:"Complete the process to create your new role."}))))}}]},{title:o().createElement(i.Z,{id:"cost.arn.enterArn",defaultMessage:"Enter ARN"}),name:"arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.arn.enableAccess",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.arn.selectRole",defaultMessage:"From the Roles tab, select the role you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.arn.copyArn",defaultMessage:"From the Summary screen, copy the role ARN and paste it in the ARN field:"}))))}}]}]}),"cloud-meter-arn":(0,n.Z)({generic:{includeStepKeyFields:["arn"],"authentication.username":U}},N.fn,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":U,additionalSteps:[{title:o().createElement(i.Z,{id:"cloudmeter.createIamPolicy",defaultMessage:"Create IAM policy"}),nextStep:"subs-iam-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"cloudmeter.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,r.useState)(),a=(0,I.Z)(t,2),n=a[0],i=a[1];return(0,r.useEffect)((function(){Z().then((function(e){var t;return i(null==e||null===(t=e.aws_policies)||void 0===t?void 0:t.traditional_inspection)})).catch((function(t){console.error(t),i(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.grantPermissions",defaultMessage:"To grant Red Hat access to your Amazon Web Services (AWS) subscription data, create an AWS Identity and Access Management (IAM) policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.signIn",defaultMessage:"Log in to the {link}."},{link:o().createElement("a",{key:"link",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/console.html",rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"subwatch.iampolicy.IAMconsole",defaultMessage:"AWS Identity and Management (IAM) console"}))})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.createPolicty",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},n?JSON.stringify(n,null,2):e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.completeProcess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"cloud-meter-arn",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"cloudmeter.createIamRole",defaultMessage:"Create IAM role"}),name:"subs-iam-role",nextStep:"subs-arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,r.useState)(),a=(0,I.Z)(t,2),n=a[0],i=a[1];return(0,r.useEffect)((function(){Z().then((function(e){return i(null==e?void 0:e.aws_account_id)})).catch((function(t){console.error(t),i(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iamrole.delegateAccount",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.createRole",defaultMessage:"From the AWS IAM console, create a new role."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.pasteAccountID",defaultMessage:"Select <b>Another AWS account</b> from the list of trusted entities and paste the following value into the <b>Account{space}ID</b> field:"},{b:S,space:o().createElement(o().Fragment,null," ")})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},n||e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.completeProcess",defaultMessage:"Complete the process to create your new role."}))),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}}]},{title:o().createElement(i.Z,{id:"cloudmeter.enterArn",defaultMessage:"Enter ARN"}),name:"subs-arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.arn.enableAccount",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.arn.selectRole",defaultMessage:"Navigate to the role that you just created. "})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.arn.copyArn",defaultMessage:"From the <b>Summary</b> screen, copy the role ARN and paste it in the <b>ARN field</b> below."},{b:S}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.username"}]}]})},endpoint:{}},satellite:{endpoint:{},authentication:{receptor_node:{generic:{"source.source_ref":{label:o().createElement(i.Z,{id:"satellite.satelliteId",defaultMessage:"Satellite ID"}),validate:[{type:l.Z.REQUIRED}],component:c.Z.TEXT_FIELD},"endpoint.receptor_node":{label:o().createElement(i.Z,{id:"satellite.receptorId",defaultMessage:"Receptor ID"}),validate:[{type:l.Z.REQUIRED}],component:c.Z.TEXT_FIELD},skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"satellite.credentials",defaultMessage:"Credentials"}),nextStep:"summary",fields:[{name:"all-required",component:"description",Content:k},{name:"source.source_ref"},{name:"endpoint.receptor_node"},{component:c.Z.TEXT_FIELD,name:"endpoint.role",hideField:!0,initializeOnMount:!0,initialValue:"satellite"},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initializeOnMount:!0,initialValue:"receptor_node"}]}]}}}},"ansible-tower":{authentication:{receptor_node:(0,n.Z)({generic:{skipEndpoint:!0}},N.IV,{skipEndpoint:!0}),username_password:(0,n.Z)({generic:{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.password",defaultMessage:"Password"})},url:B,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(i.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),nextStep:"ansible-tower-credentials-no-app",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:k},{component:c.Z.TEXT_FIELD,name:"authentication.username"},{component:c.Z.TEXT_FIELD,name:"authentication.password"}]},{name:"ansible-tower-credentials-no-app",title:o().createElement(i.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"endpoint.role",component:c.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:c.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:c.Z.SWITCH},{name:"endpoint.certificate_authority",component:c.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]}]}},N.IV,{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.password",defaultMessage:"Password"})},url:B,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(i.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{nextStep:"catalog-ansible-tower",title:o().createElement(i.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"ansible-tower-desc",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.endpoint.enterHostname",defaultMessage:"Enter the hostname of the Ansible Tower instance you want to connect to."})))}},{name:"endpoint.role",component:c.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:c.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:c.Z.SWITCH},{name:"endpoint.certificate_authority",component:c.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]},{title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),name:"catalog-ansible-tower",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.auth.provideTowerCredentials",defaultMessage:"Provide Ansible Tower service account user credentials to ensure optimized availability of resources to Catalog Administrators."})),o().createElement(k,null))}},{component:c.Z.TEXT_FIELD,name:"authentication.username"},{component:c.Z.TEXT_FIELD,name:"authentication.password"}]}]})},endpoint:{url:B,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthority",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1}}},google:{authentication:{project_id_service_account_json:(0,n.Z)({},N.Qr,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":{component:"text-field",label:"Project ID",isRequired:!0,validate:[{type:"required"}]},"authentication.authtype":{component:"text-field",hideField:!0,initialValue:"project_id_service_account_json"},"application.extra.dataset":{component:"text-field",label:"Dataset ID",isRequired:!0,validate:[{type:"required"}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.gcp.projectTitle",defaultMessage:"Project"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-lg"},e.formatMessage({id:"cost.gcp.projectDescription",defaultMessage:"Enter the ID of a project within your Google Cloud Platform (GCP) billing account. We’ll use this project to set up your BigQuery billing export. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:R,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.Hint,null,o().createElement(s.HintTitle,null,e.formatMessage({id:"cost.gcp.project.hintTitle",defaultMessage:"GCP Recommendation"})),o().createElement(s.HintBody,null,e.formatMessage({id:"cost.gcp.project.hintDescription",defaultMessage:"Create a cloud project to contain all your billing administration needs."}))))}},{name:"authentication.username"},{name:"authentication.authtype"}],nextStep:"cost-gcp-iam"},{title:o().createElement(i.Z,{id:"cost.gcp.iamTitle",defaultMessage:"Create IAM role"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.iamRoleDescription",defaultMessage:"To specify GCP access permissions for Red Hat, create an Identity and Access Management (IAM) role."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStep",defaultMessage:"From the GCP console, navigate to <b>IAM & Admin > Roles.</b>"},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStepB",defaultMessage:"Create a new role."},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.secondStep",defaultMessage:"Add the following permissions to your custom role:"})),o().createElement(s.TextList,null,o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.jobs.create")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.getData")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.get")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.list"))),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.thirdStep",defaultMessage:"Click <b>Create role.</b>"},{b:C}))))}}],nextStep:"cost-gcp-access",name:"cost-gcp-iam",substepOf:{name:"geaa",title:o().createElement(i.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})}},{title:o().createElement(i.Z,{id:"cost.gcp.accessTitle",defaultMessage:"Assign access"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)(),t=(0,r.useState)(),a=(0,I.Z)(t,2),n=a[0],i=a[1];return(0,r.useEffect)((function(){var t=e.formatMessage({id:"cost.gcp.noAccount",defaultMessage:"There is an error with loading of the account address. Please go back and return to this step."});(0,w.Rj)().getGoogleAccount().then((function(e){var a,n;return i((null==e||null===(a=e.data)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.payload)||t)})).catch((function(e){console.error(e),i(t)}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.assignAccessDesc",defaultMessage:"To delegate account access, add a new member to your project."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.firstStep",defaultMessage:"In your IAM & Admin console, navigate to <b>IAM</b> and click <b>Add</b> to add a new member."},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.secondStep",defaultMessage:"Paste the following value into the <b>New members</b> field:"},{b:C})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm  pf-u-ml-0",isReadOnly:!0},n||e.formatMessage({id:"cost.gcp.access.loading",defaultMessage:"Loading account address..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.thirdStep",defaultMessage:"Select the role you just created."},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:C}))))}}],name:"cost-gcp-access",nextStep:"cost-gcp-dataset",substepOf:"geaa"},{title:o().createElement(i.Z,{id:"cost.gcp.datasetTitle",defaultMessage:"Create dataset"}),fields:[{component:"description",name:"description-google",Content:function(){var e,t=(0,u.Z)(),a=null===(e=(0,(0,E.default)().getState)().values.authentication)||void 0===e?void 0:e.username;return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},t.formatMessage({id:"cost.gcp.dataset.description",defaultMessage:"To collect and store the information needed for Cost Management, create a BigQuery dataset."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.firstStep",defaultMessage:"In the BigQuery console, select your project (<b>{projectId}</b>) from the navigation menu."},{b:C,projectId:a})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.secondStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:C})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.thirdStep",defaultMessage:"In the <b>Dataset ID</b> field, enter a name for your dataset."},{b:C})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.fourthStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:C}))))}},{name:"application.extra.dataset"}],name:"cost-gcp-dataset",nextStep:"cost-gcp-billing-export"},{title:o().createElement(i.Z,{id:"cost.gcp.billingExportTitle",defaultMessage:"Billing export"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.billingExport.description",defaultMessage:"To enable detailed billing data exports to BigQuery, set up daily cost export."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStep",defaultMessage:"In the Billing console, click <b>Billing export.</b>"},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStepB",defaultMessage:"Click the <b>BigQuery export</b> tab."},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.secondStep",defaultMessage:"In the <b>Daily cost detail</b> section, click <b>Edit settings.</b>"},{b:C})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.thirdStep",defaultMessage:"Use the dropdown menus to select the correct project and dataset."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:C}))))}}],name:"cost-gcp-billing-export"}]})}}}},72317:(e,t,a)=>{a.d(t,{A6:()=>s,Z5:()=>c,sK:()=>l,Dt:()=>u});var n=a(92950),r=a.n(n),o=a(44012),i=a(84866),s=function(e){return e===i.JL?r().createElement(o.Z,{id:"wizard.wizardDescriptionCloud",defaultMessage:"Register your provider to manage your Red Hat products in the cloud."}):r().createElement(o.Z,{id:"wizard.wizardDescriptionRedhat",defaultMessage:"Configure a data source to connect to your Red Hat applications."})},c=function(e){return e===i.JL?r().createElement(o.Z,{id:"wizard.wizardTitleCloud",defaultMessage:"Add a cloud source"}):r().createElement(o.Z,{id:"wizard.wizardTitleRedhat",defaultMessage:"Add Red Hat source"})},l="https://access.redhat.com/documentation/en-us/cost_management_service/2021",u="no-application"},13458:(e,t,a)=>{a.d(t,{aI:()=>i,ei:()=>s,dD:()=>c,lN:()=>l,Q9:()=>u,BW:()=>d,aE:()=>p,Gs:()=>m,y3:()=>f});var n=a(4942);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=["LOAD_ENTITIES","CREATE_SOURCE","REMOVE_SOURCE","LOAD_SOURCE_TYPES","LOAD_APP_TYPES","REMOVE_APPLICATION","RENAME_SOURCE"].reduce((function(e,t){var a;return o(o({},e),{},(a={},(0,n.Z)(a,t,t),(0,n.Z)(a,"".concat(t,"_PENDING"),"".concat(t,"_PENDING")),(0,n.Z)(a,"".concat(t,"_FULFILLED"),"".concat(t,"_FULFILLED")),(0,n.Z)(a,"".concat(t,"_REJECTED"),"".concat(t,"_REJECTED")),a))}),{}),s="SORT_ENTITIES",c="PAGE_AND_SIZE",l="FILTER_SOURCES",u="ADD_APP_TO_SOURCE",d="SET_COUNT",p="ADD_HIDDEN_SOURCE",m="CLEAR_FILTERS",f="SET_VENDOR"},98495:(e,t,a)=>{a.d(t,{_B:()=>Z,Hz:()=>T,K5:()=>S,OU:()=>_,qJ:()=>y,il:()=>E,WP:()=>h,zm:()=>v,xz:()=>A,Yn:()=>w,Gd:()=>I,wZ:()=>M,d4:()=>x,AX:()=>P,CB:()=>O,Bb:()=>b});var n=a(4942),r=a(92950),o=a.n(r),i=a(17546),s=a(27957),c=a(83215),l=a(13458),u=a(79829),d=a(36488),p=a(96845),m=a(84569);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=function(e){return function(t,a){t({type:l.aI.LOAD_ENTITIES_PENDING,options:"function"==typeof e?e(a):e});var n=a().sources,r=n.pageSize,o=n.pageNumber,i=n.sortBy,s=n.sortDirection,c=n.filterValue,d=n.activeVendor;return(0,u.uc)({pageSize:r,pageNumber:o,sortBy:i,sortDirection:s,filterValue:c,activeVendor:d}).then((function(e){var a=e.sources,n=e.sources_aggregate;return t({type:l.aI.LOAD_ENTITIES_FULFILLED,payload:{sources:a,sources_aggregate:n}})})).catch((function(e){return t({type:l.aI.LOAD_ENTITIES_REJECTED,meta:{noError:!0},payload:{error:{detail:e.detail||e.data,title:e.title||"Fetching data failed, try refresh page"}}})}))}},h=function(){return function(e){return e({type:l.aI.LOAD_SOURCE_TYPES_PENDING}),(0,u.Rj)().listSourceTypes().then((function(e){return e.data})).then((function(t){return e({type:l.aI.LOAD_SOURCE_TYPES_FULFILLED,payload:t})})).catch((function(t){return e({type:l.aI.LOAD_SOURCE_TYPES_REJECTED,payload:{error:t},meta:{noError:!0}})}))}},y=function(){return function(e){return e({type:l.aI.LOAD_APP_TYPES_PENDING}),(0,u.M5)().then((function(t){return e({type:l.aI.LOAD_APP_TYPES_FULFILLED,payload:t.data})})).catch((function(t){return e({type:l.aI.LOAD_APP_TYPES_REJECTED,payload:{error:t},meta:{noError:!0}})}))}},b=function(e,t){return function(a){return a({type:l.ei,payload:{column:e,direction:t}}),a(E())}},v=function(e,t){return function(a){return a({type:l.dD,payload:{page:e,size:t}}),a(E({paginationClicked:!0}))}},_=function(e){return function(t){return t({type:l.lN,payload:{value:e}}),t(E())}},T=function(e){return function(t){return t({type:c.Dv,payload:g({dismissable:!0},e)})}},M=function(e,t){return function(a){return a({type:l.aI.REMOVE_SOURCE_PENDING,meta:{sourceId:e}}),(0,u.TA)(e).then((function(){return a(E({loaded:0}))})).then((function(){a({type:l.aI.REMOVE_SOURCE_FULFILLED,meta:{sourceId:e}}),a(T({title:t,variant:"success"}))})).catch((function(){return a({type:l.aI.REMOVE_SOURCE_REJECTED,meta:{sourceId:e}})}))}},I=function(e){return{type:c.Kf,payload:e}},w=function(e,t,a,n){return{type:l.aI.REMOVE_APPLICATION,payload:function(){return(0,u.rL)(e,n)},meta:{appId:e,sourceId:t,notifications:{fulfilled:{variant:"success",title:a,dismissable:!0}}}}},Z=function(e){return{type:l.aE,payload:{source:e}}},S=function(){return function(e){return e({type:l.Gs}),e(E())}},x=function(e,t,a){return function(n,r){var o,i=null===(o=r().sources.entities.find((function(t){return t.id===e})))||void 0===o?void 0:o.name;return n({type:l.aI.RENAME_SOURCE_PENDING,payload:{id:e,name:t}}),(0,u.Rj)().updateSource(e,{name:t}).catch((function(t){var r,o;return n({type:l.aI.RENAME_SOURCE_REJECTED,payload:{error:{detail:(null===(r=t.errors)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.detail)||t,title:a},id:e,name:i}})}))}},O=function(e){return function(t){return t({type:l.y3,payload:{vendor:e}}),t(E())}},A=function(e,t,a){return function(n){return(0,u.Rj)().pauseSource(e).then((function(){n(T({title:a.formatMessage({id:"source.paused.alert.title",defaultMessage:"Source paused"}),description:a.formatMessage({id:"source.paused.alert.description",defaultMessage:"Source <b>{ sourceName }</b> is now paused. Data collection for all connected applications will be disabled until the source is resumed."},{sourceName:t,b:d.S}),variant:"default",customIcon:o().createElement(i.ZP,null)})),n(E({loaded:0}))})).catch((function(e){n(T({title:a.formatMessage({id:"source.paused.alert.error",defaultMessage:"Source pause failed"}),description:(0,m.Z)(a,(0,p.Z)(e)),variant:"danger"}))}))}},P=function(e,t,a){return function(n){return(0,u.Rj)().unpauseSource(e).then((function(){n(T({title:a.formatMessage({id:"source.resumed.alert.title",defaultMessage:"Source resumed"}),description:a.formatMessage({id:"source.resumed.alert.description",defaultMessage:"Source <b>{ sourceName }</b> will recontinue data collection for connected applications."},{sourceName:t,b:d.S}),variant:"default",customIcon:o().createElement(s.ZP,null)})),n(E({loaded:0}))})).catch((function(e){n(T({title:a.formatMessage({id:"source.resume.alert.error",defaultMessage:"Source resume failed"}),description:(0,m.Z)(a,(0,p.Z)(e)),variant:"danger"}))}))}}},45199:(e,t,a)=>{a.d(t,{a:()=>i});var n=a(4942);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=["SET_WRITE_PERMISSIONS"].reduce((function(e,t){var a;return o(o({},e),{},(a={},(0,n.Z)(a,t,t),(0,n.Z)(a,"".concat(t,"_PENDING"),"".concat(t,"_PENDING")),(0,n.Z)(a,"".concat(t,"_FULFILLED"),"".concat(t,"_FULFILLED")),(0,n.Z)(a,"".concat(t,"_REJECTED"),"".concat(t,"_REJECTED")),a))}),{})},84866:(e,t,a)=>{a.d(t,{OH:()=>n,N9:()=>r,lc:()=>o,B0:()=>i,JL:()=>s,M$:()=>c,Qr:()=>l,fn:()=>u,IV:()=>d,T2:()=>p});var n="satellite",r="ansible-tower",o="azure",i="Red Hat",s="Cloud",c="/insights/platform/topological-inventory",l="/insights/platform/cost-management",u="/insights/platform/cloud-meter",d="/insights/platform/catalog",p=function(e){var t,a;return[null===(t=e.find((function(e){return e.name===u})))||void 0===t?void 0:t.id,null===(a=e.find((function(e){return e.name===l})))||void 0===a?void 0:a.id]}},36488:(e,t,a)=>{a.d(t,{S:()=>i});var n=a(92950),r=a.n(n),o=0,i=function(e){return r().createElement("b",{key:"b-".concat(e.length,"-").concat(o++,"}")},e)}},17711:(e,t,a)=>{a.d(t,{X5:()=>A});var n,r=a(93433),o=a(4942),i=a(18546),s=a(84885),c=a(83215),l=a(53894),u=a(57283),d=a.n(u),p=a(13458);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={loaded:0,pageSize:50,pageNumber:1,entities:[],numberOfEntities:0,appTypesLoaded:!1,sourceTypesLoaded:!1,filterValue:{},sortBy:"created_at",sortDirection:"desc",removingSources:[],activeVendor:a(84866).JL,appTypes:[],sourceTypes:[]},E=function(e,t){var a=t.payload,n=a.sourceId,o=a.app;return f(f({},e),{},{entities:e.entities.map((function(e){return e.id===n?f(f({},e),{},{applications:[].concat((0,r.Z)(e.applications),[o])}):e}))})},h=function(e,t){var a=t.payload,n=a.id,r=a.name;return f(f({},e),{},{entities:e.entities.map((function(e){return e.id===n?f(f({},e),{},{name:r}):e}))})};const y=(n={},(0,o.Z)(n,p.aI.LOAD_ENTITIES_PENDING,(function(e,t){var a=t.options;return f(f({},e),{},{loaded:e.loaded+1,paginationClicked:!1},a)})),(0,o.Z)(n,p.aI.LOAD_ENTITIES_FULFILLED,(function(e,t){var a,n=t.payload,r=n.sources,o=n.sources_aggregate,i=t.options;return f(f({},e),{},{loaded:Math.max(e.loaded-1,0),entities:r,numberOfEntities:null==o||null===(a=o.aggregate)||void 0===a?void 0:a.total_count},i)})),(0,o.Z)(n,p.aI.LOAD_ENTITIES_REJECTED,(function(e,t){var a=t.payload.error;return f(f({},e),{},{fetchingError:a})})),(0,o.Z)(n,p.aI.LOAD_SOURCE_TYPES_PENDING,(function(e){return f(f({},e),{},{sourceTypes:[],sourceTypesLoaded:!1})})),(0,o.Z)(n,p.aI.LOAD_SOURCE_TYPES_FULFILLED,(function(e,t){var a=t.payload;return f(f({},e),{},{sourceTypes:a,sourceTypesLoaded:!0})})),(0,o.Z)(n,p.aI.LOAD_SOURCE_TYPES_REJECTED,(function(e,t){var a=t.payload.error;return f(f({},e),{},{fetchingError:a})})),(0,o.Z)(n,p.aI.LOAD_APP_TYPES_PENDING,(function(e){return f(f({},e),{},{appTypes:[],appTypesLoaded:!1})})),(0,o.Z)(n,p.aI.LOAD_APP_TYPES_FULFILLED,(function(e,t){var a=t.payload;return f(f({},e),{},{appTypes:a,appTypesLoaded:!0})})),(0,o.Z)(n,p.aI.LOAD_APP_TYPES_REJECTED,(function(e,t){var a=t.payload.error;return f(f({},e),{},{fetchingError:a})})),(0,o.Z)(n,p.aI.REMOVE_SOURCE_PENDING,(function(e,t){var a=t.meta;return f(f({},e),{},{removingSources:[].concat((0,r.Z)(e.removingSources),[a.sourceId])})})),(0,o.Z)(n,p.aI.REMOVE_SOURCE_FULFILLED,(function(e,t){var a=t.meta;return f(f({},e),{},{removingSources:e.removingSources.filter((function(e){return e!==a.sourceId})),entities:e.entities.filter((function(e){return e.id!==a.sourceId}))})})),(0,o.Z)(n,p.aI.REMOVE_SOURCE_REJECTED,(function(e,t){var a=t.meta;return f(f({},e),{},{removingSources:e.removingSources.filter((function(e){return e!==a.sourceId}))})})),(0,o.Z)(n,p.aI.REMOVE_APPLICATION_PENDING,(function(e,t){var a=t.meta;return f(f({},e),{},{entities:e.entities.map((function(e){return e.id===a.sourceId?f(f({},e),{},{applications:e.applications.map((function(e){return e.id===a.appId?f(f({},e),{},{isDeleting:!0}):e}))}):e}))})})),(0,o.Z)(n,p.aI.REMOVE_APPLICATION_FULFILLED,(function(e,t){var a=t.meta;return f(f({},e),{},{entities:e.entities.map((function(e){return e.id===a.sourceId?f(f({},e),{},{applications:e.applications.filter((function(e){return e.id!==a.appId}))}):e}))})})),(0,o.Z)(n,p.aI.REMOVE_APPLICATION_REJECTED,(function(e,t){var a=t.meta;return f(f({},e),{},{entities:e.entities.map((function(e){return e.id===a.sourceId?f(f({},e),{},{applications:e.applications.map((function(e){return e.id===a.appId?f(f({},e),{},{isDeleting:void 0}):e}))}):e}))})})),(0,o.Z)(n,p.aI.RENAME_SOURCE_PENDING,h),(0,o.Z)(n,p.aI.RENAME_SOURCE_REJECTED,h),(0,o.Z)(n,p.ei,(function(e,t){var a=t.payload,n=a.column,r=a.direction;return f(f({},e),{},{sortBy:n,sortDirection:r})})),(0,o.Z)(n,p.dD,(function(e,t){var a=t.payload,n=a.page,r=a.size;return f(f({},e),{},{pageSize:r,pageNumber:n})})),(0,o.Z)(n,p.lN,(function(e,t){var a=t.payload.value;return f(f({},e),{},{filterValue:f(f({},e.filterValue),a),pageNumber:1})})),(0,o.Z)(n,p.Q9,E),(0,o.Z)(n,p.Q9,E),(0,o.Z)(n,p.BW,(function(e,t){var a=t.payload.count;return f(f({},e),{},{numberOfEntities:a})})),(0,o.Z)(n,p.aE,(function(e,t){var a=t.payload.source;return f(f({},e),{},{entities:[].concat((0,r.Z)(e.entities),[f(f({},a),{},{hidden:!0})])})})),(0,o.Z)(n,p.Gs,(function(e){return f(f({},e),{},{filterValue:{},pageNumber:1})})),(0,o.Z)(n,p.y3,(function(e,t){var a=t.payload.vendor;return f(f({},e),{},{filterValue:f(f({},e.filterValue),{},{source_type_id:[],applications:[]}),activeVendor:a})})),n);var b,v=a(45199);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={writePermissions:void 0},I=function(e){return T(T({},e),{},{writePermissions:void 0})};const w=(b={},(0,o.Z)(b,v.a.SET_WRITE_PERMISSIONS_PENDING,I),(0,o.Z)(b,v.a.SET_WRITE_PERMISSIONS_FULFILLED,(function(e,t){var a=t.payload;return T(T({},e),{},{writePermissions:a})})),(0,o.Z)(b,v.a.SET_WRITE_PERMISSIONS_REJECTED,I),b);var Z=a(54876);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(e){return function(t){return function(a){if(a.type===p.aI.LOAD_ENTITIES_PENDING){var n=e.getState().sources;(0,Z.rh)(x(x({},n),a.options))}t(a)}}},A=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[l.Z,(0,s.ZP)({errorTitleKey:"error.title",errorDescriptionKey:"error.detail"}),d(),O].concat((0,r.Z)(e)),n=new i.ZP({},a);return n.register({sources:(0,i.Gg)(y,x(x({},g),t.sources))}),n.register({user:(0,i.Gg)(w,x(x({},M),t.user))}),n.register({notifications:c.ee}),n.getStore()}()}},84569:(e,t,a)=>{a.d(t,{Z:()=>n});const n=function(e,t){return e.formatMessage({id:"tryAgain.text",defaultMessage:"{ error }. Please try again."},{error:t})}},54876:(e,t,a)=>{a.d(t,{rh:()=>d,uY:()=>p,mB:()=>m});var n=a(29439),r=a(4942),o=a(79829),i=a(17570),s=a(30567),c=a(84866);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e){var t=e.sortBy,a=e.sortDirection,n=e.pageNumber,r=e.pageSize,i=e.filterValue,s=e.activeVendor,l="sort_by[]=".concat(t,":").concat(a),u="limit=".concat(r,"&offset=").concat((n-1)*r,"&activeVendor=").concat(s||c.JL),d=(0,o.sd)(i),p="?".concat(l,"&").concat(u).concat(d?"&".concat(d):""),m=decodeURIComponent("".concat(window.location.pathname).concat(p));return location.href!==m?history.replaceState("","",m):null},p=function(e){var t=e||new URLSearchParams(window.location.search),a=t.getAll("application"),n=t.getAll("type");return{applications:a.length&&a,types:n.length&&n}},m=function(e){var t,a,r={},o=new URLSearchParams(window.location.search),l=o.get("sort_by[]");l&&(t=l.split(":")[0],a=l.split(":")[1],t=(0,s.E)({formatMessage:function(){return""}}).filter((function(e){return e.sortable})).map((function(e){return e.value})).includes(t)?t:"created_at",a=["desc","asc"].includes(a)?a:"desc"),t&&a&&(r={sortBy:t,sortDirection:a});var d,m=o.get("limit"),f=o.get("offset");f&&m&&(d=f/m+1,isNaN(d)&&(d=void 0)),m&&d&&(r=u(u({},r),{},{pageNumber:parseInt(d,10),pageSize:Math.min(parseInt(m,10),100)}));var g={},E=o.get("filter[name][contains_i]");E&&(g={name:E});var h=o.getAll("filter[source_type_id][]");h.length>0&&(g=u(u({},g),{},{source_type_id:h}));var y=o.getAll("filter[applications][application_type_id][eq][]");y.length>0&&(g=u(u({},g),{},{applications:y})),o.get("filter[availability_status]")?g=u(u({},g),{},{availability_status:[i.Rl]}):o.get("filter[availability_status][]")&&(g=u(u({},g),{},{availability_status:[i.nZ]}));var b=p(o),v=b.applications,_=b.types;if(v||_){var T,M,I=e().sources,w=I.appTypes,Z=I.sourceTypes,S=null===(T=v.map)||void 0===T?void 0:T.call(v,(function(e){var t;return null===(t=w.find((function(t){return t.name.includes(e)})))||void 0===t?void 0:t.id})).filter(Boolean),x=null===(M=_.map)||void 0===M?void 0:M.call(_,(function(e){var t;return null===(t=Z.find((function(t){return t.name===e})))||void 0===t?void 0:t.id})).filter(Boolean);g=u(u(u({},g),(null==S?void 0:S.length)&&{applications:S}),(null==x?void 0:x.length)&&{source_type_id:x})}Object.entries(g).map((function(e){var t=(0,n.Z)(e,2);return t[0],t[1]})).filter(Boolean).length>0&&(r=u(u({},r),{},{filterValue:g}));var O=o.get("activeVendor");return O!==c.JL&&O!==c.B0||(r=u(u({},r),{},{activeVendor:O})),r}},17570:(e,t,a)=>{a.d(t,{Rl:()=>L,c:()=>q,Bj:()=>R,L:()=>C,nZ:()=>D,Gz:()=>H,BN:()=>B,Z3:()=>W,vh:()=>O,bF:()=>Z,Fd:()=>S,Ee:()=>P,jl:()=>A,P5:()=>x});var n=a(45987),r=a(87462),o=a(93433),i=a(29439),s=a(4942),c=a(92950),l=a.n(c),u=a(45697),d=a.n(u),p=a(95995),m=a(43047),f=a(5913),g=a(17546),E=a(44012),h=a(86896),y=a(62410),b=a(86235),v=a(60076),_=a(84866);var T=["app","showStatusText"],M=["applications"];function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(e){return{http:"80",https:"443"}[e]},S=function(e){var t=Object.keys(e).reduce((function(t,a){return w(w({},t),{},(0,s.Z)({},a,e[a]||""))}),{}),a=t.scheme,n=void 0===a?"":a,r=t.host,o=void 0===r?"":r,i=t.path,c=void 0===i?"":i,l=t.port,u=void 0===l?"":l,d="".concat(n,"://").concat(o).concat(function(e,t){return t&&String(t)!==Z(e)?":".concat(t):""}(n,u)).concat(c);if("://"!==d)return d},x=function(e,t,a){var n=a.sourceTypes.find((function(t){return t.id===e}));return n&&n.product_name||e||""},O=function(e){return l().createElement("span",{className:"src-c-help-cursor"},l().createElement(y.Z,{type:"relative",date:e}))},A=function(e,t,a){var n=a.sourceTypes;return l().createElement(p.TextContent,null,l().createElement(b.Link,{to:(0,v.yS)(v._j.sourcesDetail.path,t.id)},e),l().createElement("br",{key:"".concat(t.id,"-br")}),l().createElement(p.Text,{key:t.id,component:p.TextVariants.small},function(e,t){var a=t.find((function(t){return t.id===e.source_type_id}));return a&&"openshift"===a.name}(t,n)&&function(e){return e.endpoints&&e.endpoints[0]&&S(e.endpoints[0])}(t)))},P=function(e){if(!e)return null;var t=function(e){return{cfme:l().createElement(E.Z,{id:"sources.cloudformImportTooltip",defaultMessage:"This source can be managed from your connected CloudForms application."})}[e.toLowerCase()]}(e);return t?l().createElement(p.Tooltip,{content:t},l().createElement(p.Badge,{isRead:!0,className:"src-m-help-cursor"},l().createElement(E.Z,{id:"sources.imported",defaultMessage:"imported"}))):l().createElement(p.Badge,{isRead:!0},l().createElement(E.Z,{id:"sources.imported",defaultMessage:"imported"}))},L="available",D="unavailable",C="partially_available",R="in_progress",k="paused_at",N="rhel_azure",j=function(e){var t;return(t={},(0,s.Z)(t,D,"red"),(0,s.Z)(t,L,"green"),(0,s.Z)(t,C,"orange"),(0,s.Z)(t,k,"cyan"),t)[e]||"grey"},z=function(e){var t;return(t={},(0,s.Z)(t,D,l().createElement(E.Z,{id:"sources.unavailable",defaultMessage:"Unavailable"})),(0,s.Z)(t,L,l().createElement(E.Z,{id:"sources.available",defaultMessage:"Available"})),(0,s.Z)(t,C,l().createElement(E.Z,{id:"sources.partiallyAvailable",defaultMessage:"Partially available"})),(0,s.Z)(t,R,l().createElement(E.Z,{id:"sources.inProgress",defaultMessage:"In progress"})),(0,s.Z)(t,k,l().createElement(E.Z,{id:"sources.paused",defaultMessage:"Paused"})),t)[e]||l().createElement(E.Z,{id:"sources.unknown",defaultMessage:"Unknown"})},F=function(){return l().createElement(E.Z,{id:"sources.unknownError",defaultMessage:"unavailable"})},V=function(e,t){return l().createElement(l().Fragment,null,t.source&&l().createElement(l().Fragment,null,l().createElement(E.Z,{id:"sources.sourceError",defaultMessage:"Source's status: { error }",values:{error:t.source}}),l().createElement("br",null)),t.endpoint&&l().createElement(l().Fragment,null,l().createElement(E.Z,{id:"sources.endpointError",defaultMessage:"Endpoint error: { error }",values:{error:t.endpoint}}),l().createElement("br",null)),t.authentications&&l().createElement(E.Z,{id:"sources.authErrors",defaultMessage:"Authentication {count, plural, one {status} other {statuses}} : { errors }",values:{count:t.authentications.length,errors:t.authentications.map((function(e){var t=e.error,a=e.type;return l().createElement(l().Fragment,{key:a},l().createElement(E.Z,{id:"sources.errorAuthTemplate",defaultMessage:"{ type }: { error }",values:{error:t,type:a}}),l().createElement("br",null))}))}}),t.applications&&l().createElement(E.Z,{id:"sources.appErrors",defaultMessage:"Application {count, plural, one {status} other {statutes}}: { errors }",values:{count:t.applications.length,errors:t.applications.map((function(t){var a,n=t.error,r=t.id;return l().createElement(l().Fragment,{key:r},l().createElement(E.Z,{id:"sources.errorAppTemplate",defaultMessage:"{ app }: { error }",values:{error:n,app:(null===(a=e.find((function(e){return e.id===r})))||void 0===a?void 0:a.display_name)||r}}),l().createElement("br",null))}))}}))},U=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(a={},(0,s.Z)(a,D,l().createElement(l().Fragment,null,l().createElement(E.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),l().createElement("hr",null),V(t,n))),(0,s.Z)(a,L,l().createElement(E.Z,{id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,s.Z)(a,C,l().createElement(l().Fragment,null,l().createElement(E.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),l().createElement("hr",null),V(t,n))),(0,s.Z)(a,R,l().createElement(E.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),(0,s.Z)(a,k,l().createElement(E.Z,{id:"sources.pausedStatus",defaultMessage:"Data collection is temporarily disabled. Resume source to reestablish connection."})),(0,s.Z)(a,N,l().createElement(E.Z,{id:"sources.rhelAzureStatus",defaultMessage:"This source cannot currently be monitored in Sources, and does not reflect true status or resources."})),a)[e]||l().createElement(E.Z,{id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})},B=function(e,t,a){var n=a.appTypes,s=a.sourceTypes,c=function(e){var t=e.availability_status,a=e.availability_status_error,n=e.applications,r=void 0===n?[]:n,s=e.endpoints;s=void 0===s?[]:s;var c=(0,i.Z)(s,1)[0];if(t===R)return{errors:{},status:R};var u={},d=0,p=0;return t===D?(u=w(w({},u),{},{source:a||l().createElement(F,null)}),d++,p++):t===L&&d++,r.map((function(e){e.availability_status===D?(u=w(w({},u),{},{applications:[].concat((0,o.Z)(u.applications?u.applications:[]),[{id:e.application_type_id,error:e.availability_status_error||l().createElement(F,null)}])}),d++,p++):e.availability_status===L&&d++})),(null==c?void 0:c.availability_status)===D?(u=w(w({},u),{},{endpoint:c.availability_status_error||l().createElement(F,null)}),d++,p++):(null==c?void 0:c.availability_status)===L&&d++,null!=c&&c.authentications&&c.authentications.map((function(e){e.availability_status===D?(u=w(w({},u),{},{authentications:[].concat((0,o.Z)(u.authentications?u.authentications:[]),[{type:e.authtype,error:e.availability_status_error||l().createElement(F,null)}])}),d++,p++):e.availability_status===L&&d++})),{errors:u,status:0===p?0===d?"unknown":L:p===d?D:C}}(t),u=t.paused_at?k:function(e){var t,a=e.source,n=e.sourceTypes,r=e.appTypes,o=null==n?void 0:n.find((function(e){return e.name===_.lc})),i=null==r?void 0:r.find((function(e){return e.name===_.fn}));return o&&i&&a.source_type_id===o.id&&1===(null===(t=a.applications)||void 0===t?void 0:t.length)&&a.applications[0].application_type_id===i.id}({source:t,sourceTypes:s,appTypes:n})?N:c.status;return l().createElement("span",null,l().createElement(p.Popover,{showClose:!1,"aria-label":"".concat(u," popover"),bodyContent:U(u,n,c.errors)},l().createElement(p.Label,(0,r.Z)({className:"src-m-clickable",color:j(u)},t.availability_status===R&&{icon:l().createElement(f.ZP,null)},t.paused_at&&{icon:l().createElement(g.ZP,null)}),z(u))))},q=function(e){var t=e.app,a=e.showStatusText,o=(0,n.Z)(e,T),i=(0,h.Z)(),c=function(e,t,a){var n;return(n={},(0,s.Z)(n,L,a.formatMessage({id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,s.Z)(n,D,t||a.formatMessage({id:"sources.unknownError",defaultMessage:"Unknown error"})),(0,s.Z)(n,R,l().createElement(E.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),n)[e]||a.formatMessage({id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})}(t.availability_status,t.availability_status_error,i);return l().createElement(p.Popover,(0,r.Z)({showClose:!1,key:t.display_name,"aria-label":"".concat(t.display_name," popover"),bodyContent:t.paused_at?"".concat(c," ").concat(i.formatMessage({id:"appplication.paused.additionalText",defaultMessage:"Resume this application to continue data collection."})):c},t.paused_at&&{headerContent:i.formatMessage({id:"application.paused.header",defaultMessage:"Application paused"})}),l().createElement(p.Label,(0,r.Z)({className:"src-m-clickable",color:j(t.availability_status)},t.availability_status===R&&{icon:l().createElement(f.ZP,null)},t.paused_at&&{icon:l().createElement(g.ZP,null)},o),a?z(t.availability_status):t.display_name))};q.propTypes={app:d().shape({display_name:d().string,availability_status:d().string,availability_status_error:d().string,paused_at:d().string}),showStatusText:d().bool};var G=function(e){var t=e.applications,a=(0,n.Z)(e,M),o=(0,h.Z)();return l().createElement(p.LabelGroup,(0,r.Z)({},a,{numLabels:2,collapsedText:o.formatMessage({id:"applications.showMore",defaultMessage:"{remaining} more"},{remaining:"${remaining}"})}),t.map((function(e,t){return l().createElement(q,{app:e,key:e.id||t})})))};G.propTypes={applications:d().arrayOf(d().shape({display_name:d().string,availability_status:d().string,availability_status_error:d().string,paused_at:d().string})).isRequired};var H=function(e,t,a){var n=a.appTypes,r=e.map((function(e){return function(e,t,a){var n=a.find((function(t){return t.id===e.application_type_id}));if(n){var r,o,i,s,c,l,u=e.availability_status,d=e.availability_status_error;return"Endpoint"===(null===(r=e.authentications)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.resource_type)&&(u=null===(i=t.endpoints)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.availability_status,d=null===(c=t.endpoints)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.availability_status_error),{display_name:n.display_name,paused_at:e.paused_at,availability_status:u,availability_status_error:d}}}(e,t,n)})).filter(Boolean).sort((function(e,t){return e.display_name.localeCompare(t.display_name)}));return 0===r.length?"--":l().createElement(G,{numLabels:2,collapsedText:!0,applications:r})},W=function(e,t,a){var n=a.intl,r=a.sourceType;if("account_authorization"===e){var o,i=null==r?void 0:r.schema.authentication.find((function(e){return e.is_superkey})),s=null==t||null===(o=t.authentications)||void 0===o?void 0:o.find((function(e){var t=e.authtype;return t&&t===i.type}));return l().createElement(l().Fragment,null,n.formatMessage({id:"configurationMode.trust",defaultMessage:"Account authorization"}),(null==s?void 0:s.availability_status)===D&&l().createElement(p.Tooltip,{position:"top",content:s.availability_status_error||n.formatMessage({id:"configurationMode.trustmode.defaultError",defaultMessage:"Edit credentials required."})},l().createElement("span",{className:"pf-u-ml-sm"},l().createElement(m.ZP,{fill:"#C9190B"}))),l().createElement("div",{className:"pf-u-mt-sm"},l().createElement(b.Link,{to:(0,v.yS)(v._j.sourcesDetailEditCredentials.path,t.id)},l().createElement(p.Button,{variant:"link",id:"edit-super-credentials",isInline:!0},t.paused_at?n.formatMessage({id:"sources.viewCredentials",defaultMessage:"View credentials"}):n.formatMessage({id:"sources.editCredentials",defaultMessage:"Edit credentials"})))))}return n.formatMessage({id:"configurationMode.manual",defaultMessage:"Manual configuration"})}},30567:(e,t,a)=>{a.d(t,{E:()=>r,W:()=>o});var n=a(17570),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{title:e.formatMessage({id:"sources.name",defaultMessage:"Name"}),value:"name",formatter:n.jl,sortable:!t},{title:e.formatMessage({id:"sources.type",defaultMessage:"Type"}),value:"source_type_id",formatter:n.P5,sortable:!t},{title:e.formatMessage({id:"sources.connectedApplications",defaultMessage:"Connected applications"}),value:"applications",formatter:n.Gz},{title:e.formatMessage({id:"sources.addedDate",defaultMessage:"Date added"}),value:"created_at",formatter:n.vh,sortable:!t},{hidden:!0,value:"imported",formatter:n.Ee},{title:e.formatMessage({id:"sources.status",defaultMessage:"Status"}),value:"availability_status",formatter:n.BN}]},o=r({formatMessage:function(){return""}}).length+1}}]);