"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[485],{56638:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(87462),n=a(29439),l=a(45987),c=a(96985),o=a.n(c),s=a(45697),u=a.n(s),i=a(98583),p=["src"],m=function(e){var t=e.src,a=(0,l.Z)(e,p),s=(0,c.useState)(!1),u=(0,n.Z)(s,2),m=u[0],d=u[1];return o().createElement(o().Fragment,null,!m&&o().createElement(i.aN,(0,r.Z)({height:"40px",width:"110px"},a)),o().createElement("img",(0,r.Z)({src:t,"data-testid":"ImageWithPlaceholder",onLoad:function(){return d(!0)},style:{display:m?"initial":"none"}},a)))};m.propTypes={src:u().string.isRequired};const d=m},21298:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(29439),n=a(96985),l=a.n(n),c=a(46731),o=a(36557),s=a(56638);const u=function(e){return l().createElement(c.Card,{isFlat:!0,className:"marketplace-card"},l().createElement(c.CardTitle,{className:"pf-u-pl-md pf-u-pr-md"},l().createElement(s.Z,{src:e.logo_url,className:"marketplace-card-icon"}),l().createElement("br",null),e.title,l().createElement("br",null),l().createElement(c.Label,{className:"pf-u-mt-sm marketplace-label",icon:l().createElement(o.DatabaseIcon,null)},e.primary_category.display_name)),l().createElement(c.CardBody,{className:"marketplace-card-body pf-u-mb-md pf-u-pl-md pf-u-pr-md",isFilled:!0},e.description_short),l().createElement(c.CardFooter,{className:"pf-u-pl-md pf-u-pr-md pf-u-pb-md"},l().createElement(c.Button,{variant:"link",isInline:!0,icon:l().createElement(o.ExternalLinkAltIcon,null),iconPosition:"right",component:"a",href:e.product_page_url,rel:"noopener noreferrer",target:"_blank"},"Add"," ")))};var i=a(15861),p=a(87757),m=a.n(p),d=a(48815),f="/api/marketplace-gateway/v1",g=function(){var e=(0,i.Z)(m().mark((function e(){var t,a=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{perPage:10,page:1},e.abrupt("return",d.be.get("".concat(f,"/unstable"),{params:{limit:t.perPage,offset:(t.page-1)*t.perPage}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.be.get("".concat(f,"/categories")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=a(45697),y=a.n(b),v=a(87462),h=a(4942),k=a(90111),O=a.n(k);const P=function(){return l().createElement(c.Card,{isFlat:!0,className:"marketplace-card"},l().createElement(c.CardTitle,null,l().createElement(c.Skeleton,{role:"progressbar"})),l().createElement(c.CardBody,null,l().createElement(c.Skeleton,{role:"progressbar"})),l().createElement(c.CardFooter,null,l().createElement(c.Skeleton,{role:"progressbar"})))};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,h.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){return{page:1,perPage:10,itemCount:(null==e?void 0:e.length)||0,filters:{type:["database"]},categories:null,isLoading:!0,data:e,loaded:0}},N=function(e,t){var a=t.type,r=t.payload,n=t.meta;switch(a){case"SET_PAGE":return C(C({},e),{},{page:r});case"SET_PER_PAGE":return C(C({},e),{},{page:1,perPage:r});case"LOAD_CATEGORIES":return C(C({},e),{},{categories:r,isLoading:!1});case"SET_LOADING_DATA":return C(C({},e),{},{loaded:e.loaded+1});case"LOAD_DATA":return C(C({},e),{},{loaded:Math.max(e.loaded-1,0),data:r,itemCount:n.count})}},T=function(e){return{database:"Database"}[e]||e},w=function(e){var t,a=e.data,s=e.isOpen,i=e.onClose,p=(0,n.useReducer)(N,a,A),m=(0,r.Z)(p,2),d=m[0],f=m[1],b=d.loaded>0;return(0,n.useEffect)((function(){s&&E().then((function(e){var t=e.data;return f({type:"LOAD_CATEGORIES",payload:t})}))}),[s]),(0,n.useEffect)((function(){s&&(f({type:"SET_LOADING_DATA"}),g({perPage:d.perPage,page:d.page}).then((function(e){var t=e.data,a=e.meta;return f({type:"LOAD_DATA",payload:t,meta:a})})))}),[d.page,d.perPage]),l().createElement(c.Modal,{className:"sources",onClose:i,isOpen:s,title:"Browse catalog",description:l().createElement("span",null,"A curated selection of offerings available for purchase from"," ",l().createElement("a",{href:"https://sandbox.marketplace.redhat.com",target:"_blank",rel:"noopener noreferrer"},"Red Hat Marketplace ",l().createElement(o.ExternalLinkAltIcon,null))),variant:"large"},d.isLoading&&l().createElement("div",{className:"pf-u-mb-md marketplace-flex"},l().createElement(P,null),l().createElement(P,null)),!d.isLoading&&l().createElement(l().Fragment,null,l().createElement(O(),{useMobileLayout:!0,className:"marketplace-modal-toolbar",pagination:{itemCount:d.itemCount,page:d.page,perPage:d.perPage,onSetPage:function(e,t){return f({type:"SET_PAGE",payload:t})},onPerPageSelect:function(e,t){return f({type:"SET_PER_PAGE",payload:t})},"data-testid":"pagination"},filterConfig:{items:[{label:"Type",placeholder:"Filter by product type",type:"checkbox",filterValues:{value:["database"],items:d.categories.map((function(e){return{label:e.display_name,value:e.page_name,isDisabled:!0}}))}}]},activeFiltersConfig:{showDeleteButton:!1,filters:(t=d.filters,Object.keys(t).map((function(e){var a;return t[e]&&0!==(null===(a=t[e])||void 0===a?void 0:a.length)?function(e,t){return{type:{category:"Type",chips:t.map((function(e){return{name:T(e)}}))}}[e]||{category:e,chips:t.map((function(e){return{name:e}}))}}(e,t[e]):null})).filter(Boolean))}}),l().createElement("div",{className:"pf-u-mb-md marketplace-flex"},!b&&a.map((function(e){return l().createElement(u,(0,v.Z)({key:e.id},e))})),b&&l().createElement(l().Fragment,null,l().createElement(P,null),l().createElement(P,null)))))};w.propTypes={data:y().array,isOpen:y().bool,onClose:y().func};const S=w;var D=function(e){var t=e.data,a=(0,n.useState)(!1),o=(0,r.Z)(a,2),s=o[0],u=o[1];return l().createElement(l().Fragment,null,l().createElement(S,{onClose:function(){return u(!1)},data:t,isOpen:s}),l().createElement(c.Card,{isFlat:!0,className:"marketplace-card marketplace-seemore-card"},l().createElement(c.CardBody,{isFilled:!0,className:"pf-u-pl-md pf-u-pr-md card-text"},"Not what youâ€™re looking for? Browse the catalog to see more offerings from Red Hat Marketplace."),l().createElement(c.CardFooter,{className:"pf-u-pl-md pf-u-pr-md pf-u-pb-md"},l().createElement(c.Button,{variant:"primary",onClick:function(){return u(!0)}},"See more databases"))))};D.propTypes={data:y().array};const L=D,x=function(){var e=(0,n.useState)(),t=(0,r.Z)(e,2),a=t[0],o=t[1];return(0,n.useEffect)((function(){g().then((function(e){var t=e.data;return o(t)}))}),[]),a?l().createElement("div",{className:"sources"},l().createElement(c.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-md"},"Recommended services"),l().createElement("div",{className:"pf-u-mb-md marketplace-flex"},l().createElement(u,a.find((function(e){return"mongodb-enterprise-advanced"===(null==e?void 0:e.product_page_name)}))||a[0]),l().createElement(L,{data:a}))):l().createElement("div",{className:"pf-u-mb-md marketplace-flex"},l().createElement(P,null),l().createElement(P,null))}}}]);
//# sourceMappingURL=../sourcemaps/485.7947488cc7a412b9bad91b7a2cbc0e14.js.map