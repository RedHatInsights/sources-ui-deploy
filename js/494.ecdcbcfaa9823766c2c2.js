(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[494],{91447:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o,n:()=>i});var n=a(48815),i=function(e){return(0,n.Rj)().checkAvailabilitySource(e).catch((function(){}))};const o=i},72810:(e,t,a)=>{"use strict";a.d(t,{h:()=>c});var n=a(4942),i=a(48815),o=function(e,t){return new Promise((function(a){setTimeout(a.bind(null,t),e)}))};function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"showApplication",r=arguments.length>4?arguments[4]:void 0;return new Promise((function(c,l){var u=Date.now();return function c(){return(0,i.Rj)()[n](e).then((function(e){if(Date.now()-u>=t)return r?s(s({},e),{},{availability_status:null,availability_status_error:null}):e;if("available"===e.availability_status||"unavailable"===e.availability_status){if(r&&new Date(e.last_checked_at||e.updated_at)>r)return e;if(!r)return e}return o(a).then((function(){return c()}))}))}().then((function(e){return c(e)})).catch((function(e){return l(e)}))}))}},42812:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n={type:"empty",name:"empty",fields:[]}},71820:(e,t,a)=>{"use strict";a.d(t,{Z:()=>te});var n=a(4942),i=a(92950),o=a.n(i),r=a(44012),s=a(48335),c=a(96354),l=a(64124),u=a(86896),d=a(73479);const m=function(){var e=(0,u.Z)();return o().createElement(o().Fragment,null,e.formatMessage({id:"wizard.sslCertificate",defaultMessage:"SSL Certificate"}),o().createElement(s.Popover,{"aria-label":"Help text",maxWidth:"50%",bodyContent:o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription1",defaultMessage:"You can obtain your OpenShift Container Platform provider’s CA certificate for all endpoints (default, metrics, alerts) from {cmd}."},{cmd:o().createElement("b",{key:"b"},"/etc/origin/master/ca.crt")})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription2",defaultMessage:"Paste the output (a block of text starting with --BEGIN CERTIFICATE--) into the Trusted CA Certificates field."})))},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};var p=a(93433),f=a(45697),g=a.n(f),h=a(48880),b=a(72317),y="".concat(b.sK,"/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-adding-aws-sources#creating-an-aws-s3-bucket_adding-aws-sources"),E="".concat(b.sK,"/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-adding-aws-sources#enabling-aws-account-access_adding-aws-sources"),T="".concat(b.sK,"/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-cost-management-next-steps-aws#configure-cost-models-next-step_next-steps-aws"),M=function(e){var t=e.appendTo,a=(0,u.Z)();return o().createElement(s.Popover,{appendTo:t,"aria-label":"Help text",position:"right",maxWidth:"40%",bodyContent:a.formatMessage({id:"cost.arn.includeAliasesPopover",defaultMessage:'If there are account aliases, they will appear and be used for filtering when reporting on AWS accounts. This will include "iam:ListAccountAliases" to the Action of the IAM Policy.'})},o().createElement(s.Button,{className:"pf-u-p-0 pf-u-m-0",variant:s.ButtonVariant.plain},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};M.propTypes={appendTo:g().instanceOf(Element).isRequired};var v=function(e){var t=e.appendTo,a=(0,u.Z)();return o().createElement(s.Popover,{appendTo:t,"aria-label":"Help text",position:"right",maxWidth:"35%",bodyContent:a.formatMessage({id:"cost.arn.includeOrgUnitsPopover",defaultMessage:'If there are organizational units, they will be used for filtering when reporting on AWS resources. This will include "organizations:List*" and "organizations:Describe*" to the Action of the IAM Policy'})},o().createElement(s.Button,{className:"pf-u-p-0 pf-u-m-0",variant:s.ButtonVariant.plain},o().createElement(d.ZP,{className:"pf-u-ml-sm"})))};v.propTypes={appendTo:g().instanceOf(Element).isRequired};var x=a(29439),w=a(48815),C="RH-HCC-provisioning-role",I="\nROLE_ARN=$(aws iam create-role --role-name ".concat(C,' --assume-role-policy-document \'{\n  "Version": "2012-10-17",\n  "Statement": {\n    "Effect": "Allow",\n    "Principal": {\n      "AWS": "<PROVISIONING_AWS_ACCOUNT>"\n    },\n    "Action": "sts:AssumeRole"\n  }\n}\' | jq \'.Role.Arn\')'),Z="aws iam attach-role-policy --role-name ".concat(C," --policy-arn $POLICY_ARN"),_=function(){return w.be.get("/api/cloudigrade/v2/sysconfig/")},A=function(e){return o().createElement("b",{key:"b-".concat(e.length,"-").concat(Math.floor(1e3*Math.random()))},e)},S="https://access.redhat.com/management/api",k="https://access.redhat.com/management/api",L=a(36488),R="".concat(b.sK,"/html/adding_an_openshift_container_platform_source_to_cost_management/assembly-adding-openshift-container-platform-source#installing-cost-operator_adding-an-ocp-source"),D=a(76429),z="".concat(b.sK,"/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#creating-an-azure-storage-account_adding-an-azure-source"),O="".concat(b.sK,"/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#configuring-azure-roles_adding-an-azure-source"),P="".concat(b.sK,"/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#configuring-an-azure-daily-export-schedule_adding-an-azure-source"),N=function(){var e=(0,h.default)().getState().values.authentication,t=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},t.formatMessage({id:"cost.azure.createReaderRole",defaultMessage:"Run the following command in Cloud Shell to create a Cost Management Reader role:"})),o().createElement(s.ClipboardCopy,null,'az role assignment create --assignee "'.concat(null==e?void 0:e.username,'" --role "Cost Management Reader"')))},V=function(e){return o().createElement("b",{key:"b-".concat(e.length,"-").concat(Math.floor(1e3*Math.random()))},e)},F="".concat(b.sK,"/html/adding_a_google_cloud_source_to_cost_management"),j=function(e){var t=e.fields,a=(0,u.Z)(),n=(0,h.default)().renderForm;return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},a.formatMessage({id:"cost.oci.compartmentIdStepTitle",defaultMessage:"Global compartment-id"})),o().createElement(s.Text,{component:s.TextVariants.p},a.formatMessage({id:"cost.oci.compartmentId.description",defaultMessage:"To collect and store the information needed to manage your costs, you need to first find your Global compartment-id."})),o().createElement(s.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:s.TextListVariants.ol},o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},a.formatMessage({id:"cost.oci.compartmentId.subtitle1",defaultMessage:"In the Oracle Cloud shell, copy and paste this command into the terminal to list your compartments"}),o().createElement(s.ClipboardCopy,{className:"pf-u-mt-sm"},"oci iam compartment list")),o().createElement(s.TextListItem,null,a.formatMessage({id:"cost.oci.compartmentId.subtitle2",defaultMessage:"Enter the name of your global compartment-id (tenant-id)"}),t.map((function(e){return o().createElement("div",{className:"pf-u-mt-sm",key:e.name},n([e]))})))))};j.propTypes={fields:g().array.isRequired};var q=function(e){var t,a,n,i,r=e.fields,c=(0,u.Z)(),l=(0,h.default)(),d=l.renderForm,m=(0,l.getState)().values;return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},c.formatMessage({id:"cost.oci.policyCompartmentStepTitle",defaultMessage:"Create new policy and compartment"})),o().createElement(s.Text,{component:s.TextVariants.p},c.formatMessage({id:"cost.oci.policyCompartment.description",defaultMessage:"In the Oracle Cloud shell, copy and paste these commands to create your cost and usage reports policy, and new cost compartment."})),o().createElement(s.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:s.TextListVariants.ol},o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},c.formatMessage({id:"cost.oci.policyCompartment.subtitle1",defaultMessage:"Create cost and usage reports policy using the following command"}),o().createElement(s.ClipboardCopy,{className:"pf-u-mt-sm",variant:s.ClipboardCopyVariant.expansion},"oci iam policy create --compartment-id ".concat(null==m||null===(t=m.application)||void 0===t||null===(a=t.extra)||void 0===a?void 0:a.compartment_id,' --description "test" --name "test" --statements \'["define tenancy usage-report as ocid1.tenancy.oc1..aaaaaaaaned4fkpkisbwjlr56u7cj63lf3wffbilvqknstgtvzub7vhqkggq","endorse group Administrators to read objects in tenancy usage-report"]\''))),o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},c.formatMessage({id:"cost.oci.policyCompartment.subtitle2",defaultMessage:"Create new Cost management compartment"}),o().createElement(s.ClipboardCopy,{className:"pf-u-mt-sm",variant:s.ClipboardCopyVariant.expansion},"oci iam compartment create --name cost-mgmt-compartment --compartment-id ".concat(null==m||null===(n=m.application)||void 0===n||null===(i=n.extra)||void 0===i?void 0:i.compartment_id," --description 'Cost management compartment for cost and usage data'"))),o().createElement(s.TextListItem,null,c.formatMessage({id:"cost.oci.policyCompartment.subtitle3",defaultMessage:"Enter the name of the your new compartment-id"}),r.map((function(e){return o().createElement("div",{className:"pf-u-mt-sm",key:e.name},d([e]))})))))};q.propTypes={fields:g().array.isRequired};var B=function(e){var t,a,n=e.fields,i=(0,u.Z)(),r=(0,h.default)(),c=r.renderForm,l=(0,r.getState)().values;return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},i.formatMessage({id:"cost.oci.createBucketStepTitle",defaultMessage:"Create bucket"})),o().createElement(s.Text,{component:s.TextVariants.p},i.formatMessage({id:"cost.oci.createBucket.description",defaultMessage:"Because Oracle Cloud does not allow outside access to the usage bucket, you will need to create a new bucket to copy the necessary data into."})),o().createElement(s.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:s.TextListVariants.ol},o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},i.formatMessage({id:"cost.oci.createBucket.subtitle1",defaultMessage:"Create a new bucket for cost and usage data with the following command"}),o().createElement(s.ClipboardCopy,{className:"pf-u-mt-sm",variant:s.ClipboardCopyVariant.expansion},"oci os bucket create --name cost-management --compartment-id ".concat(null==l||null===(t=l.application)||void 0===t||null===(a=t.extra)||void 0===a?void 0:a.policy_compartment))),o().createElement(s.TextListItem,null,i.formatMessage({id:"cost.oci.createBucket.subtitle2",defaultMessage:"Enter the name, namespace, and region of your new data bucket"}),n.map((function(e){return o().createElement("div",{className:"pf-u-mt-sm",key:e.name},c([e]))})))))};B.propTypes={fields:g().array.isRequired};var H=function(){var e,t,a=(0,u.Z)(),n=(0,(0,h.default)().getState)().values;return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},a.formatMessage({id:"cost.oci.populateBucketStepTitle",defaultMessage:"Populate bucket"})),o().createElement(s.Text,{component:s.TextVariants.p},a.formatMessage({id:"cost.oci.populateBucket.description",defaultMessage:"Because Oracle Cloud does not have automation scripts, you will need to create a VM to run a script that copies the necessary data to your new cost-management bucket and grant read access to Red Hat."})),o().createElement(s.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:s.TextListVariants.ol},o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},a.formatMessage({id:"cost.oci.populateBucket.subtitle1",defaultMessage:"In your Oracle Cloud account, create a VM and run a script similar to the one from this github repository:"}),o().createElement("a",{className:"pf-u-mt-md pf-u-display-block",href:"https://github.com/project-koku/koku/blob/main/dev/scripts/oci_replication_func.py",target:"_blank",rel:"noreferrer"},"https://github.com/project-koku/koku/blob/main/dev/scripts/oci_replication_func.py",o().createElement("i",{className:"pf-u-ml-xs fas fa-external-link-alt pf-u-font-size-xs"}))),o().createElement(s.TextListItem,{className:"pf-u-mb-lg"},a.formatMessage({id:"cost.oci.populateBucket.subtitle2",defaultMessage:"In your Oracle Cloud shell, create this read policy for the new bucket"}),o().createElement(s.ClipboardCopy,{className:"pf-u-mt-sm",variant:s.ClipboardCopyVariant.expansion},"oci iam policy create --compartment-id ".concat(null==n||null===(e=n.application)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.compartment_id,' --description \'Grant cost management bucket read access\' --name Cost-managment-bucket-read --statements \'["Define tenancy SourceTenancy as ocid1.tenancy.oc1..aaaaaaaa7bmeqn34urxue57x75fg4nlzh4w6ttjxckhaue2itbefeen2gdma","Define group StorageAdmins as ocid1.group.oc1..aaaaaaaamwx3swyherxtnvtq3vjmcflmteojw6lxf5i6bgwjygq642a2ejpa","Admit group StorageAdmins of tenancy SourceTenancy to read objects in tenancy"]\'')))))};H.propTypes={fields:g().array.isRequired};var W,U=function(){var e=(0,u.Z)();return o().createElement(s.Text,{component:s.TextVariants.p,className:"src-wizard--all-required-text"},e.formatMessage({id:"catalog.auth.allFieldsRequired",defaultMessage:"All fields are required."}))},G=a(84866),K=a(42812),Q=o().createElement(r.Z,{id:"wizard.arnPattern",defaultMessage:"ARN must start with arn:aws:"}),X=o().createElement(r.Z,{id:"wizard.arnLength",defaultMessage:"ARN should have at least 10 characters"}),Y={placeholder:"arn:aws:iam:123456789:role/CostManagement",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^arn:aws:.*/,message:Q},{type:l.Z.MIN_LENGTH,threshold:10,message:X}]},$={placeholder:"arn:aws:iam:123456789:role/Provisioning",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^arn:aws:.*/,message:Q},{type:l.Z.MIN_LENGTH,threshold:10,message:X}]},J={placeholder:"arn:aws:iam:123456789:role/SubscriptionWatch",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^arn:aws:.*/,message:Q},{type:l.Z.MIN_LENGTH,threshold:10,message:X}],label:o().createElement(r.Z,{id:"wizard.arn",defaultMessage:"ARN"})},ee={isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,message:o().createElement(r.Z,{id:"catalog.urlPatternMessage",defaultMessage:"URL must start with https:// or http://"}),pattern:/^https{0,1}:\/\//},{type:l.Z.URL}],helperText:o().createElement(s.FormHelperText,{isHidden:!1},o().createElement(r.Z,{id:"catalog.hostnameHelper",defaultMessage:"For example, https://myansibleinstance.example.com/ or https://127.0.0.1/"})),label:o().createElement(r.Z,{id:"wizard.hostname",defaultMessage:"Hostname"})};const te={ibm:{authentication:{api_token_account_id:(0,n.Z)({generic:{skipEndpoint:!0}},G.Qr,{skipSelection:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"cost.ibm.enterpriseIdTitle",defaultMessage:"Add enterprise ID"}),showTitle:!1,fields:[{name:"authentication.authtype",component:"text-field",hideField:!0,initialValue:"api_token_account_id",initializeOnMount:!0},{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},e.formatMessage({id:"cost.ibm.enterpriseIdStepTitle",defaultMessage:"Add the account's enterprise ID"})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.ibm.enterpriseIdDescription",defaultMessage:"Login to the IBM Cloud Shell and run the following command. Paste the output string into the form field below."})),o().createElement(s.ClipboardCopy,null,"ibmcloud enterprise show --output JSON | jq -r .id"))}},{name:"application.extra.enterprise_id",label:"Enterprise ID",validate:[{type:"required"}],component:"text-field",isRequired:!0}],nextStep:"ibm-cm-account-id",substepOf:{name:"ibm-cm-substep",title:o().createElement(r.Z,{id:"cost.ibm.substepTitle",defaultMessage:"Enter account IDs"})}},{title:o().createElement(r.Z,{id:"cost.ibm.accountIdTitle",defaultMessage:"Add account ID"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Title,{headingLevel:"h1"},e.formatMessage({id:"cost.ibm.accountIdStepTitle",defaultMessage:"Add the account ID"})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.ibm.accountIdDescription",defaultMessage:"In the IBM Cloud Shell, run the following command. Paste the output string into the form fields below."})),o().createElement(s.ClipboardCopy,null,"ibmcloud account show --output JSON | jq -r .account_id"))}},{name:"authentication.username",label:"Account ID",component:"text-field",validate:[{type:"required"}],isRequired:!0}],nextStep:"ibm-cm-service-id",substepOf:"ibm-cm-substep",name:"ibm-cm-account-id"},{title:o().createElement(r.Z,{id:"cost.ibm.serviceIdTitle",defaultMessage:"Create a service ID"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.ibm.serviceIdDescription",defaultMessage:"Create a service ID, which Cost Management will use to get billing and usage information from your account. In the IBM Cloud Shell, run the following command. Paste the output string into the form field below."})),o().createElement(s.ClipboardCopy,{variant:"expansion"},'ibmcloud iam service-id-create "Cost Management" -d "Service ID for cloud.redhat.com Cost Management" | jq -r .id'))}},{name:"cost.service_id",component:"text-field",label:"Service ID",validate:[{type:"required"}],isRequired:!0}],nextStep:"ibm-cm-configure-access",name:"ibm-cm-service-id"},{title:o().createElement(r.Z,{id:"cost.ibm.accessId",defaultMessage:"Configure service ID access"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)(),t=(0,h.default)().getState().values.cost.service_id,a='ibmcloud iam service-policy-create "'.concat(t,'" --service-name billing  --roles Viewer\nibmcloud iam service-policy-create "').concat(t,'" --account-management --roles Viewer\nibmcloud iam service-policy-create "').concat(t,'" --service-name enterprise --roles "Usage Report Viewer"\nibmcloud iam service-policy-create "').concat(t,'" --service-name globalcatalog  --roles Viewer');return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.ibm.accessDescription",defaultMessage:"Assign policies to the service ID you just created so that Cost Management will have access to account management, billing and usage service APIs.  In the IBM Cloud Shell, run the following command:"})),o().createElement(s.InputGroup,null,o().createElement(s.TextArea,{rows:6,value:a,name:"service-id-commands",id:"service-id-commands","aria-label":e.formatMessage({id:"ibm.cost.textarea",defaultMessage:"Commands to create policies."}),spellCheck:"false",autoCorrect:"off"}),o().createElement(s.ClipboardCopyButton,{onClick:function(e){return(0,s.clipboardCopyFunc)(e,a)},id:"copy-service-id-commands","aria-label":e.formatMessage({id:"ibm.cost.copy",defaultMessage:"Copy to clipboard"})},e.formatMessage({id:"ibm.cost.copy",defaultMessage:"Copy to clipboard"}))))}}],nextStep:"ibm-cm-api-key",name:"ibm-cm-configure-access"},{title:o().createElement(r.Z,{id:"cost.ibm.apiKeyTitle",defaultMessage:"Create an API key"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)(),t=(0,h.default)().getState().values.cost.service_id;return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.ibm.apiKeyDescription",defaultMessage:"In the IBM Cloud Shell, run the following command. Paste the output string into the form field below."})),o().createElement(s.ClipboardCopy,{variant:"expansion"},'ibmcloud iam service-api-key-create "Cost Management API Key" "'.concat(t,'" -d "Cost Management Service ID API Key" --output JSON | jq -r .apikey')))}},{name:"authentication.password",label:"API Key",validate:[{type:"required"}],component:"text-field",isRequired:!0,type:"password"}],name:"ibm-cm-api-key"}]})}},openshift:{authentication:{token:(0,n.Z)({generic:{"authentication.password":{isRequired:!0,validate:[{type:l.Z.REQUIRED}]},additionalFields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.token.description",defaultMessage:"An OpenShift Container Platform login token is required to communicate with the application."})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.token.collectData",defaultMessage:"To collect data from a Red Hat OpenShift Container Platform source:"})),o().createElement(s.TextList,{component:"ol"},o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.logIn",defaultMessage:"Log in to the Red Hat OpenShift Container Platform cluster with an account that has access to the namespace"})),o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.runCommand",defaultMessage:"Run the following command to obtain your login token:"})),o().createElement(s.ClipboardCopy,{className:"pf-u-mb-md",isReadOnly:!0},e.formatMessage({id:"openshift.token.comman",defaultMessage:"# oc sa get-token -n management-infra management-admin"})),o().createElement(s.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.copyToken",defaultMessage:"Copy the token and paste it in the Token field"}))))}}]}},G.Qr,{skipSelection:!0,skipEndpoint:!0,"source.source_ref":{label:o().createElement(r.Z,{id:"wizard.clusterId",defaultMessage:"Cluster Identifier"}),isRequired:!0,component:c.Z.TEXT_FIELD,validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(r.Z,{id:"wizard.clusterIdPattern",defaultMessage:"Cluster ID must start with alphanumeric character and can contain underscore and hyphen"})}]},additionalSteps:[{title:o().createElement(r.Z,{id:"cost.configureOperator",defaultMessage:"Install and configure operator"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.description",defaultMessage:"For Red Hat OpenShift Container Platform 4.6 and later, install the {operator} from the OpenShift Container Platform web console."},{operator:o().createElement("b",{key:"bold"},"costmanagement-metrics-operator")})),o().createElement(s.Text,null,o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:R,target:"_blank",rel:"noopener noreferrer"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.operator_configured",defaultMessage:"If you configured the operator to create a source (create_source: true), <b>STOP</b> here and <b>CANCEL</b> out of this flow."},{b:L.S})),o().createElement(s.Text,null,e.formatMessage({id:"cost.openshift.operator_not_configured",defaultMessage:"Otherwise, enter the cluster identifier below. You can find the cluster identifier in the cluster’s Help > About screen."})))}},{name:"source.source_ref"},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"token",initializeOnMount:!0}]}]})},endpoint:{url:{placeholder:"https://myopenshiftcluster.mycompany.com",isRequired:!0,validate:[{type:l.Z.REQUIRED},{type:l.Z.URL,message:o().createElement(r.Z,{id:"wizard.urlPatternMessage",defaultMessage:"The URL is not formatted correctly."})}]},"endpoint.certificate_authority":{label:o().createElement(m,null),"aria-label":"SSL Certificate"},additionalFields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"openshift.endpoint.urlAndCA",defaultMessage:"Provide the OpenShift Container Platform URL and SSL certificate."})))}}]}},azure:{authentication:{username_password_tenant_id:{generic:{"authentication.extra.azure.tenant_id":{type:"password",isRequired:!0,validate:[{type:l.Z.REQUIRED}]},"authentication.username":{label:o().createElement(r.Z,{id:"azure.generic.username",defaultMessage:"App ID"}),isRequired:!0,validate:[{type:l.Z.REQUIRED}]},"authentication.password":{isRequired:!0,validate:[{type:l.Z.REQUIRED}]}}},lighthouse_subscription_id_legacy:(0,n.Z)({},G.fn,{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"subwatch.azure.tokenTitle",defaultMessage:"Obtain offline token"}),nextStep:"cost-azure-playbook",substepOf:{name:"eaa",title:o().createElement(r.Z,{id:"subwatch.azure.substepTitle",defaultMessage:"Enable account access"})},fields:[{name:"azure-1",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"subwatch.azure.tokenDesc",defaultMessage:"Generate a token to authenticate the calls to APIs for Red Hat services."})),o().createElement(s.TextList,{component:s.TextListVariants.ol,className:"pf-u-ml-0"},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.azure.tokenLink",defaultMessage:"To obtain an offline token, follow the steps at {link}."},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:S},S)}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:K.Z.type,initializeOnMount:!0}]},{title:o().createElement(r.Z,{id:"subwatch.azure.playbookTitle",defaultMessage:"Run Ansible playbook"}),name:"cost-azure-playbook",substepOf:"eaa",fields:[{name:"azure-2",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.azure.ansiblePlaybookDesc",defaultMessage:"Download and run the following commands against a running Azure VM."})),o().createElement(s.ClipboardCopy,{className:"pf-u-mb-lg"},"ansible-galaxy collection install redhatinsights.subscriptions"),o().createElement(s.ClipboardCopy,null,"ansible-playbook -i <AZURE_VM_HOSTNAME>, -b ~/.ansible/collections/ansible_collections/redhatinsights/subscriptions/playbooks/verify_account.yml -e rh_api_refresh_token=<OFFLINE_AUTH_TOKEN>"))}}]}]}),lighthouse_subscription_id:(0,n.Z)({},G.fn,{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"subwatch.lighthouse.title",defaultMessage:"Configure Azure Lighthouse"}),nextStep:"subwatch-lighthouse-sub-id",fields:[{name:"azure-1",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,i.useState)(),a=(0,x.Z)(t,2),n=a[0],r=a[1],c=(0,i.useState)(null),l=(0,x.Z)(c,2),d=l[0],m=l[1],p=(0,h.default)();return(0,i.useEffect)((function(){(0,w.Rj)().getLighthouseLink().then((function(e){var t,a=e.data;return r(null==a||null===(t=a[0])||void 0===t?void 0:t.payload)})).catch((function(t){console.error(t),m(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"subwatch.lighthouse.desc",defaultMessage:"Complete configuration steps in Azure Lighthouse according to Microsoft instructions. When you're finished, return to this wizard to finish creating this Azure source."})),o().createElement(s.Button,{component:"a",target:"_blank",rel:"noopener noreferrer",href:n,isLoading:!n,isDisabled:!n,onClick:function(){p.change("lighthouse-clicked",!0)},isBlock:!0},e.formatMessage({id:"subwatch.lighthouse.button",defaultMessage:"Take me to Lighthouse"})),d)}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"lighthouse_subscription_id",initializeOnMount:!0},{component:c.Z.TEXT_FIELD,name:"lighthouse-clicked",hideField:!0,validate:[{type:"required"}]}]},{title:o().createElement(r.Z,{id:"subwatch.lighthouse.subscriptionId",defaultMessage:"Set subscription ID"}),name:"subwatch-lighthouse-sub-id",fields:[{name:"azure-2",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"subwatch.subscriptionId.desc",defaultMessage:"Log in to your Azure account and navigate to your subscriptions. Copy the subscription ID you wish to use and paste it into the field below."})))}},{component:"text-field",name:"authentication.username",label:"Subscription ID",isRequired:!0,placeholder:"291bba3f-e0a5-47bc-a099-3bdcb2a50a05",validate:[{type:"required"}]}]}]}),tenant_id_client_id_client_secret:(0,n.Z)({},G.Qr,{useApplicationAuth:!0,skipSelection:!0,"application.extra.subscription_id":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(r.Z,{id:"cost.subidPattern",defaultMessage:"Subscription ID must start with alphanumeric character and can contain underscore and hyphen"})}],isRequired:!0},"application.extra.resource_group":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(r.Z,{id:"cost.resourceGroupPattern",defaultMessage:"Resource group must start with alphanumeric character and can contain underscore and hyphen"})}]},"application.extra.storage_account":{placeholder:"",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(r.Z,{id:"cost.storageAccountPattern",defaultMessage:"Storage account must start with alphanumeric character and can contain underscore and hyphen"})}]},"authentication.password":{type:"password",validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"cost.clientSecret",defaultMessage:"Client secret"})},"authentication.username":{validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"cost.clientAppId",defaultMessage:"Client (Application) ID"})},"authentication.extra.azure.tenant_id":{label:o().createElement(r.Z,{id:"cost.tenantDirId",defaultMessage:"Tenant (Directory) ID"}),validate:[{type:l.Z.REQUIRED}]},additionalSteps:[{title:o().createElement(r.Z,{id:"cost.azureSubStepId",defaultMessage:"Resource group and storage account"}),nextStep:"azure-sub-id",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"tenant_id_client_id_client_secret",initializeOnMount:!0},{name:"azure-storage-account-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Red Hat recommends creating a dedicated resource group and storage account in Azure to collect cost data and metrics for cost management. {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:z},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountAfterDescription",defaultMessage:"After configuring a resource group and storage account in the Azure portal, enter the following:"})))}},{name:"all-required",component:"description",Content:U},{name:"application.extra.resource_group",component:c.Z.TEXT_FIELD,label:o().createElement(r.Z,{id:"wizard.resourceGroupName",defaultMessage:"Resource group name"})},{name:"application.extra.storage_account",component:c.Z.TEXT_FIELD,label:o().createElement(r.Z,{id:"wizard.storageAccountName",defaultMessage:"Storage account name"})}]},{title:o().createElement(r.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"}),name:"azure-sub-id",nextStep:"configure-roles",fields:[{name:"azure-sub-id-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.subscriptionIdCommand",defaultMessage:"Run the following command in Cloud Shell to obtain your Subscription ID and enter it below:"})),o().createElement(s.ClipboardCopy,null,'az account show --query "{ subscription_id: id }"'))}},{name:"application.extra.subscription_id",component:c.Z.TEXT_FIELD,label:o().createElement(r.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"})}]},{title:o().createElement(r.Z,{id:"wizard.configureRoles",defaultMessage:"Roles"}),name:"configure-roles",nextStep:"export-schedule",fields:[{name:"configure-service-principal",component:"description",Content:function(){var e,t,a,n,i=(0,u.Z)(),r=(0,(0,h.default)().getState)().values;return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},i.formatMessage({id:"cost.azure.dedicatedCredentials",defaultMessage:"Red Hat recommends configuring dedicated credentials to grant Cost Management read-only access to Azure cost data.  {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:O},i.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.Text,{component:s.TextVariants.p},i.formatMessage({id:"cost.azure.createContributorRole",defaultMessage:"Run the following command in Cloud Shell to create a Cost Management Storage Account Contributor role. From the output enter the values in the fields below:"})),o().createElement(s.ClipboardCopy,null,'az ad sp create-for-rbac -n "CostManagement" --role "Storage Account Contributor"  --scope /subscriptions/'.concat(null==r||null===(e=r.application)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.subscription_id,"/resourceGroups/").concat(null==r||null===(a=r.application)||void 0===a||null===(n=a.extra)||void 0===n?void 0:n.resource_group,' --query \'{"tenant": tenant, "client_id": appId, "secret": password}\'')))}},{name:"all-required",component:"description",Content:U},{name:"authentication.extra.azure.tenant_id",component:c.Z.TEXT_FIELD},{name:"authentication.username",component:c.Z.TEXT_FIELD},{name:"authentication.password",component:c.Z.TEXT_FIELD},{name:"reader-role",component:"description",Content:function(){return o().createElement(D.Z,{subscription:{values:!0}},(function(){return o().createElement(N,null)}))}}]},{title:o().createElement(r.Z,{id:"cost.createDailyExport",defaultMessage:"Daily export"}),name:"export-schedule",fields:[{name:"export-schedule-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Create a recurring task to export cost data to your Azure storage account, where Cost Management will retrieve the data.  {link}"},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:P},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(s.TextContent,{className:"list-align-left"},o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"From the Azure portal, add a new export."})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Provide a name for the container and directory path, and specify the below settings to create the daily export. Leave all other options as the default."})))),o().createElement(s.TextList,{className:"export-table",component:s.TextListVariants.dl},o().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},o().createElement(s.Text,{component:s.TextVariants.b},e.formatMessage({id:"cost.azure.exportType",defaultMessage:"Export type"}))),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.dailyExport",defaultMessage:"Daily export for billing-period-to-date costs"})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},o().createElement(s.Text,{component:s.TextVariants.b},e.formatMessage({id:"cost.azure.storageAccountName",defaultMessage:"Storage account name"}))),o().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.createdAccountName",defaultMessage:"Storage account name created earlier"}))))}}]}]})}},amazon:{authentication:{access_key_secret_key:{generic:{"authentication.username":{label:o().createElement(r.Z,{id:"wizard.accessKeyId",defaultMessage:"Access key ID"}),placeholder:"AKIAIOSFODNN7EXAMPLE",isRequired:!0,validate:[{type:l.Z.REQUIRED}]},"authentication.password":{label:o().createElement(r.Z,{id:"wizard.secretAccessKey",defaultMessage:"Secret access key"}),placeholder:"wJairXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",isRequired:!0,validate:[{type:l.Z.REQUIRED}],type:"password"},skipSelection:!0,onlyHiddenFields:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"wizard.configureAccountAccess",defaultMessage:"Account access"}),fields:[{component:"description",name:"description-summary",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart1",defaultMessage:"Create an access key in your AWS user account and enter the details below."})),o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart2",defaultMessage:"For sufficient access and security, Red Hat recommends using the Power user identity and access management (IAM) policy for your AWS user account. "}),o().createElement(s.Popover,{"aria-label":"Help text",position:"bottom",bodyContent:o().createElement(o().Fragment,null,o().createElement(s.Text,null,e.formatMessage({id:"wizard.createAccesKeyHelpText",defaultMessage:"The Power user policy allows the user full access to API functionality and AWS services for user administration. Create an access key in the Security Credentials area of your AWS user account. When adding your AWS account as a source, the access key ID and secret access key act as your user ID and password."})))},o().createElement(d.ZP,null))))}},{name:"authentication.username",component:c.Z.TEXT_FIELD},{name:"authentication.password",component:c.Z.TEXT_FIELD},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"access_key_secret_key",initializeOnMount:!0}]}]}},arn:(0,n.Z)({generic:{includeStepKeyFields:["arn"],"authentication.username":Y}},G.Qr,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":Y,"application.extra.bucket":{placeholder:"cost-usage-bucket",validate:[{type:l.Z.REQUIRED},{type:l.Z.PATTERN,pattern:/(?!(^((2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})$|^xn--|-s3alias$))^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$/,message:o().createElement(r.Z,{id:"cost.arn.s3BucketPattern",defaultMessage:"S3 bucket name must start with alphanumeric character and can contain lowercase letters, numbers, dots, and hyphens"})}],isRequired:!0},additionalSteps:[{title:o().createElement(r.Z,{id:"cost.arn.usageDescriptionTitle",defaultMessage:"Configure cost and usage reporting"}),nextStep:"tags",fields:[{name:"usage-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.usageDescription.usageDescription",defaultMessage:"To collect and store the information needed for cost management, you need to set up an Amazon S3 bucket for cost and usage reports. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:y,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.specifyBucker",defaultMessage:"Specify or create an Amazon S3 bucket for your account."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.addFollowingValues",defaultMessage:"Create a cost and usage report using the following values:"}),o().createElement(s.TextList,null,o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.repornName",defaultMessage:"Report name: koku"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.timeUnitHoulry",defaultMessage:"Time unit: hourly"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.includesResourceIDs",defaultMessage:"Include: Resource IDs"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.enableSuppor",defaultMessage:"Enable support for: RedShift, QuickSight and disable support for Athena"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.reportPathPrefix",defaultMessage:"Report path prefix: cost"})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.compression",defaultMessage:"Compression type: GZIP"})))),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.usageDescription.enterNameOfCreatedBucker",defaultMessage:"Enter the name of the Amazon S3 bucket you just created below:"}))))}},{name:"application.extra.bucket",component:c.Z.TEXT_FIELD,label:o().createElement(r.Z,{id:"cost.arn.s3Label",defaultMessage:"S3 bucket name"})},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"arn",initializeOnMount:!0}]},{title:o().createElement(r.Z,{id:"cost.arn.tagsStepTitle",defaultMessage:"Tags, aliases and organizational units"}),name:"tags",nextStep:"iam-policy",fields:[{name:"tags-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,o().createElement(s.Text,{component:s.TextVariants.a,rel:"noopener noreferrer",target:"_blank",href:T},e.formatMessage({id:"cost.tags.readMeLink",defaultMessage:"Learn more"}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.tags.desciption",defaultMessage:"To use tags to organize your AWS resources in the Cost Management application, activate your tags in AWS to allow them to be imported automatically."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.tags.openSection",defaultMessage:"In the AWS Billing and Cost Management console, open the Cost Allocation Tags section."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.tags.selectTags",defaultMessage:"Select the tags you want to use in the Cost Management application, and click Activate."}))),o().createElement(s.Text,null,e.formatMessage({id:"cost.tags.aliasessOrgUnits",defaultMessage:"To use account aliases and organizational units in the display and filter of AWS resources, select the following"})))}},{name:"aws.aliases.enabled",component:"checkbox-with-icon",label:o().createElement(r.Z,{id:"cost.arn.includesAliases",defaultMessage:"Include AWS account aliases"}),Icon:M},{name:"aws.org_units.enabled",component:"checkbox-with-icon",label:o().createElement(r.Z,{id:"cost.arn.includeOrgUnits",defaultMessage:"Include AWS organizational units"}),Icon:v}]},{title:o().createElement(r.Z,{id:"cost.arn.iamPolicyTitle",defaultMessage:"Create IAM policy"}),name:"iam-policy",nextStep:"iam-role",substepOf:{name:"eaa",title:o().createElement(r.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:function(){var e,t,a,n,i,r,c=(0,h.default)(),l=(0,u.Z)(),d=c.getState().values,m=null===(e=d.application)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.bucket,f=null===(a=d.aws)||void 0===a||null===(n=a.aliases)||void 0===n?void 0:n.enabled,g=null===(i=d.aws)||void 0===i||null===(r=i.org_units)||void 0===r?void 0:r.enabled;return m?o().createElement(s.TextContent,null,o().createElement(s.Text,null,l.formatMessage({id:"cost.iampolicy.grantPermissions",defaultMessage:"To grant permissions to the cost management report you just configured, create an AWS Identity and Access Management (IAM) policy. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:E,rel:"noopener noreferrer",target:"_blank"},l.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.signInIAMConsole",defaultMessage:"Sign in to the AWS Identity and Access Management (IAM) console."})),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.createPolicy",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},JSON.stringify({Version:"2012-10-17",Statement:[{Sid:"VisualEditor0",Effect:"Allow",Action:["s3:Get*","s3:List*"],Resource:["arn:aws:s3:::".concat(m),"arn:aws:s3:::".concat(m,"/*")]},{Sid:"VisualEditor1",Effect:"Allow",Action:["s3:ListBucket","cur:DescribeReportDefinitions"].concat((0,p.Z)(f?["iam:ListAccountAliases"]:[]),(0,p.Z)(g?["organizations:List*","organizations:Describe*"]:[])),Resource:"*"}]},null,2)),o().createElement(s.TextListItem,{component:s.TextListItemVariants.li},l.formatMessage({id:"cost.iampolicy.completeProccess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(s.Text,{component:s.TextVariants.p},l.formatMessage({id:"cost.iampolicy.logInIam",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},l.formatMessage({id:"cost.DoNotCloseYourBrowser",defaultMessage:"Do not close your browser."}))}))):o().createElement(s.Text,null,l.formatMessage({id:"cost.iampolicy.somethingWrong",defaultMessage:"Something went wrong, you are missing bucket value."}))}}]},{title:o().createElement(r.Z,{id:"cost.arn.iamRoleStepTitle",defaultMessage:"Create IAM role"}),name:"iam-role",nextStep:"arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.iamrole.createIamRole",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.createNewRole",defaultMessage:"From the AWS Identity Access Management console, create a new role."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.enterAccountId",defaultMessage:"Select another AWS account from the list of trusted entities and paste the following value into the Account ID field:"})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},"589173575009"),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.iamrole.completeProccess",defaultMessage:"Complete the process to create your new role."}))))}}]},{title:o().createElement(r.Z,{id:"cost.arn.enterArn",defaultMessage:"Enter ARN"}),name:"arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"cost.arn.enableAccess",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.arn.selectRole",defaultMessage:"From the Roles tab, select the role you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.arn.copyArn",defaultMessage:"From the Summary screen, copy the role ARN and paste it in the ARN field:"}))))}}]}]}),"cloud-meter-arn":(0,n.Z)({generic:{includeStepKeyFields:["arn"],"authentication.username":J}},G.fn,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":J,additionalSteps:[{title:o().createElement(r.Z,{id:"cloudmeter.createIamPolicy",defaultMessage:"Create IAM policy"}),nextStep:"subs-iam-role",substepOf:{name:"eaa",title:o().createElement(r.Z,{id:"cloudmeter.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,i.useState)(),a=(0,x.Z)(t,2),n=a[0],r=a[1];return(0,i.useEffect)((function(){_().then((function(e){var t;return r(null==e||null===(t=e.aws_policies)||void 0===t?void 0:t.traditional_inspection)})).catch((function(t){console.error(t),r(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.grantPermissions",defaultMessage:"To grant Red Hat access to your Amazon Web Services (AWS) subscription data, create an AWS Identity and Access Management (IAM) policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.signIn",defaultMessage:"Log in to the {link}."},{link:o().createElement("a",{key:"link",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/console.html",rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"subwatch.iampolicy.IAMconsole",defaultMessage:"AWS Identity and Management (IAM) console"}))})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.createPolicty",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},n?JSON.stringify(n,null,2):e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.completeProcess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"cloud-meter-arn",initializeOnMount:!0}]},{title:o().createElement(r.Z,{id:"cloudmeter.createIamRole",defaultMessage:"Create IAM role"}),name:"subs-iam-role",nextStep:"subs-arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,i.useState)(),a=(0,x.Z)(t,2),n=a[0],r=a[1];return(0,i.useEffect)((function(){_().then((function(e){return r(null==e?void 0:e.aws_account_id)})).catch((function(t){console.error(t),r(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iamrole.delegateAccount",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.createRole",defaultMessage:"From the AWS IAM console, create a new role."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.pasteAccountID",defaultMessage:"Select <b>Another AWS account</b> from the list of trusted entities and paste the following value into the <b>Account{space}ID</b> field:"},{b:A,space:o().createElement(o().Fragment,null," ")})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},n||e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.completeProcess",defaultMessage:"Complete the process to create your new role."}))),o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}}]},{title:o().createElement(r.Z,{id:"cloudmeter.enterArn",defaultMessage:"Enter ARN"}),name:"subs-arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.arn.enableAccount",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.arn.selectRole",defaultMessage:"Navigate to the role that you just created. "})),o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.arn.copyArn",defaultMessage:"From the <b>Summary</b> screen, copy the role ARN and paste it in the <b>ARN field</b> below."},{b:A}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.username"}]}]}),"provisioning-arn":(0,n.Z)({generic:{includeStepKeyFields:["provisioning-arn"],"authentication.username":$}},G._m,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":$,additionalSteps:[{title:o().createElement(r.Z,{id:"provisioning.createIamPolicy",defaultMessage:"Create IAM policy"}),nextStep:"prov-iam-role",substepOf:{name:"eaa",title:o().createElement(r.Z,{id:"provisioning.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"provisioning.iam.grantPermissions",defaultMessage:"Create the following AWS Identity and Access Management (IAM) policy to grant Red Hat permissions to run instances on your Amazon Web Services (AWS) Elastic Cloud (EC2)."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.signIn",defaultMessage:"Log in to AWS CLI by running: {awsCliCommand}."},{awsCliCommand:o().createElement("b",null,e.formatMessage({id:"provisioning.iam.signInCommand",defaultMessage:"aws configure"}))})),o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.createPolicty",defaultMessage:"Create a new policy and store its ARN by running following command in your terminal."}))),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},'\nPOLICY_ARN=$(aws iam create-policy --policy-name RH-HCC-provisioning-policy --policy-document \'{\n"Version": "2012-10-17",\n"Statement": [\n  {\n    "Sid": "RedHatProvisioning",\n    "Effect": "Allow",\n    "Action": [\n      "iam:GetPolicyVersion",\n      "iam:GetPolicy",\n      "iam:ListAttachedRolePolicies",\n      "iam:GetRolePolicy",\n      "ec2:CreateKeyPair",\n      "ec2:CreateLaunchTemplate",\n      "ec2:CreateLaunchTemplateVersion",\n      "ec2:CreateTags",\n      "ec2:DeleteKeyPair",\n      "ec2:DeleteTags",\n      "ec2:DescribeAvailabilityZones",\n      "ec2:DescribeImages",\n      "ec2:DescribeInstanceTypes",\n      "ec2:DescribeInstances",\n      "ec2:DescribeKeyPairs",\n      "ec2:DescribeLaunchTemplates",\n      "ec2:DescribeLaunchTemplateVersions",\n      "ec2:DescribeRegions",\n      "ec2:DescribeSecurityGroups",\n      "ec2:DescribeSnapshotAttribute",\n      "ec2:DescribeTags",\n      "ec2:ImportKeyPair",\n      "ec2:RunInstances",\n      "ec2:StartInstances"\n    ],\n    "Resource": "*"\n  }\n]\n}\' | jq \'.Policy.Arn\')'))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"provisioning-arn",initializeOnMount:!0}]},{title:o().createElement(r.Z,{id:"provisioning.createIamRole",defaultMessage:"Create IAM role"}),name:"prov-iam-role",nextStep:"prov-arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:function(){var e=(0,u.Z)(),t=(0,i.useState)(),a=(0,x.Z)(t,2),n=a[0],r=a[1],c=(0,i.useState)(null),l=(0,x.Z)(c,2),d=l[0],m=l[1],p=(0,i.useState)(null),f=(0,x.Z)(p,2),g=f[0],h=f[1];return(0,i.useEffect)((function(){(0,w.Rj)().getProvAppType().then((function(e){var t,a;return r((null==e||null===(t=e.data)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.id)||null)})).catch((function(e){h(!0)}))}),[]),(0,i.useEffect)((function(){n&&(0,w.Rj)().getProvMetadata(n).then((function(e){var t,a,n=null==e||null===(t=e.data)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.payload;n?m(n):h(!0)})).catch((function(e){h(!0)}))}),[n]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"provisioning.iam.delegateAccount",defaultMessage:"To delegate account access, create an IAM role and associate it with your IAM policy."})),null===d&&null===g&&o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"provisioning.iam.loading",defaultMessage:"Loading configuration..."})),g&&o().createElement(s.Alert,{variant:"warning",title:e.formatMessage({id:"provisioning.iam.fetchError",defaultMessage:"There was an error while loading the commands. Please go back and return to this step to try again."})}),null!==d&&o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.createRole",defaultMessage:"Create a new role and add the Red Hat account as a trusted entity and fetch the role ARN:"}),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},I.replace("<PROVISIONING_AWS_ACCOUNT>",d))),o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(s.ClipboardCopy,{isCode:!0,variant:s.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},Z)))}}]},{title:o().createElement(r.Z,{id:"provisioning.enterArn",defaultMessage:"Enter ARN"}),name:"prov-arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"provisioning.iam.enableAccount",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.getRoleArn",defaultMessage:"Run {command} in your terminal to print the role ARN"},{command:o().createElement("b",null,"echo $ROLE_ARN")})),o().createElement(s.TextListItem,null,e.formatMessage({id:"provisioning.iam.copyArn",defaultMessage:"Copy it to the ARN field below."}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.username"}]}]})},endpoint:{}},satellite:{endpoint:{},authentication:{receptor_node:{generic:{"source.source_ref":{label:o().createElement(r.Z,{id:"satellite.satelliteId",defaultMessage:"Satellite ID"}),validate:[{type:l.Z.REQUIRED}],component:c.Z.TEXT_FIELD},"endpoint.receptor_node":{label:o().createElement(r.Z,{id:"satellite.receptorId",defaultMessage:"Receptor ID"}),validate:[{type:l.Z.REQUIRED}],component:c.Z.TEXT_FIELD},skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"satellite.credentials",defaultMessage:"Credentials"}),nextStep:"summary",fields:[{name:"all-required",component:"description",Content:U},{name:"source.source_ref"},{name:"endpoint.receptor_node"},{component:c.Z.TEXT_FIELD,name:"endpoint.role",hideField:!0,initializeOnMount:!0,initialValue:"satellite"},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initializeOnMount:!0,initialValue:"receptor_node"}]}]}}}},"ansible-tower":{authentication:{receptor_node:(0,n.Z)({generic:{skipEndpoint:!0}},G.IV,{skipEndpoint:!0}),username_password:(0,n.Z)({generic:{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"wizard.password",defaultMessage:"Password"})},url:ee,"endpoint.certificate_authority":{label:o().createElement(r.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(r.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{title:o().createElement(r.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),nextStep:"ansible-tower-credentials-no-app",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:U},{component:c.Z.TEXT_FIELD,name:"authentication.username"},{component:c.Z.TEXT_FIELD,name:"authentication.password"}]},{name:"ansible-tower-credentials-no-app",title:o().createElement(r.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"endpoint.role",component:c.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:c.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:c.Z.SWITCH},{name:"endpoint.certificate_authority",component:c.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]}]}},G.IV,{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:l.Z.REQUIRED}],label:o().createElement(r.Z,{id:"wizard.password",defaultMessage:"Password"})},url:ee,"endpoint.certificate_authority":{label:o().createElement(r.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(r.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{nextStep:"catalog-ansible-tower",title:o().createElement(r.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"ansible-tower-desc",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.endpoint.enterHostname",defaultMessage:"Enter the hostname of the Ansible Tower instance you want to connect to."})))}},{name:"endpoint.role",component:c.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:c.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:c.Z.SWITCH},{name:"endpoint.certificate_authority",component:c.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]},{title:o().createElement(r.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),name:"catalog-ansible-tower",fields:[{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.auth.provideTowerCredentials",defaultMessage:"Provide Ansible Tower service account user credentials to ensure optimized availability of resources to Catalog Administrators."})),o().createElement(U,null))}},{component:c.Z.TEXT_FIELD,name:"authentication.username"},{component:c.Z.TEXT_FIELD,name:"authentication.password"}]}]})},endpoint:{url:ee,"endpoint.certificate_authority":{label:o().createElement(r.Z,{id:"wizard.certificateAuthority",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1}}},google:{authentication:(W={},(0,n.Z)(W,K.Z.type,(0,n.Z)({},G.fn,{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"subwatch.azure.tokenTitle",defaultMessage:"Obtain offline token"}),nextStep:"cost-google-playbook",substepOf:{name:"eaa",title:o().createElement(r.Z,{id:"subwatch.azure.substepTitle",defaultMessage:"Enable account access"})},fields:[{name:"azure-1",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,null,e.formatMessage({id:"subwatch.google.tokenDesc",defaultMessage:"Generate a token to authenticate the calls to APIs for Red Hat services."})),o().createElement(s.TextList,{component:s.TextListVariants.ol,className:"pf-u-ml-0"},o().createElement(s.TextListItem,null,e.formatMessage({id:"subwatch.google.tokenLink",defaultMessage:"To obtain an offline token, follow the steps at {link}."},{link:o().createElement(s.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:s.TextVariants.a,href:k},k)}))))}},{component:c.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:K.Z.type,initializeOnMount:!0}]},{title:o().createElement(r.Z,{id:"subwatch.azure.playbookTitle",defaultMessage:"Run Ansible playbook"}),name:"cost-google-playbook",substepOf:"eaa",fields:[{name:"azure-2",component:"description",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"subwatch.google.ansiblePlaybookDesc",defaultMessage:"Download and run the following commands against a running Google Cloud VM."})),o().createElement(s.ClipboardCopy,{className:"pf-u-mb-lg"},"ansible-galaxy collection install redhatinsights.subscriptions"),o().createElement(s.ClipboardCopy,{variant:"expansion"},"ansible-playbook -i <GCE_VM_HOSTNAME>, -b ~/.ansible/collections/ansible_collections/redhatinsights/subscriptions/playbooks/verify_account.yml -e rh_api_refresh_token=<OFFLINE_AUTH_TOKEN>"))}}]}]})),(0,n.Z)(W,"project_id_service_account_json",(0,n.Z)({},G.Qr,{useApplicationAuth:!0,skipSelection:!0,"authentication.username":{component:"text-field",label:"Project ID",isRequired:!0,validate:[{type:"required"}]},"authentication.authtype":{component:"text-field",hideField:!0,initialValue:"project_id_service_account_json"},"application.extra.dataset":{component:"text-field",label:"Dataset ID",isRequired:!0,validate:[{type:"required"}]},additionalSteps:[{title:o().createElement(r.Z,{id:"cost.gcp.projectTitle",defaultMessage:"Project"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p,className:"pf-u-mb-lg"},e.formatMessage({id:"cost.gcp.projectDescription",defaultMessage:"Enter the ID of a project within your Google Cloud Platform (GCP) billing account. We’ll use this project to set up your BigQuery billing export. {link}"},{link:o().createElement(s.Text,{key:"link",component:s.TextVariants.a,href:F,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(s.Hint,null,o().createElement(s.HintTitle,null,e.formatMessage({id:"cost.gcp.project.hintTitle",defaultMessage:"GCP Recommendation"})),o().createElement(s.HintBody,null,e.formatMessage({id:"cost.gcp.project.hintDescription",defaultMessage:"Create a cloud project to contain all your billing administration needs."}))))}},{name:"authentication.username"},{name:"authentication.authtype"}],nextStep:"cost-gcp-iam"},{title:o().createElement(r.Z,{id:"cost.gcp.iamTitle",defaultMessage:"Create IAM role"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.iamRoleDescription",defaultMessage:"To specify GCP access permissions for Red Hat, create an Identity and Access Management (IAM) role."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStep",defaultMessage:"From the GCP console, navigate to <b>IAM & Admin > Roles.</b>"},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStepB",defaultMessage:"Create a new role."},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.secondStep",defaultMessage:"Add the following permissions to your custom role:"})),o().createElement(s.TextList,null,o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.jobs.create")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.getData")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.get")),o().createElement(s.TextListItem,null,o().createElement("b",null,"bigquery.tables.list"))),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.thirdStep",defaultMessage:"Click <b>Create role.</b>"},{b:V}))))}}],nextStep:"cost-gcp-access",name:"cost-gcp-iam",substepOf:{name:"geaa",title:o().createElement(r.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})}},{title:o().createElement(r.Z,{id:"cost.gcp.accessTitle",defaultMessage:"Assign access"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)(),t=(0,i.useState)(),a=(0,x.Z)(t,2),n=a[0],r=a[1];return(0,i.useEffect)((function(){var t=e.formatMessage({id:"cost.gcp.noAccount",defaultMessage:"There is an error with loading of the account address. Please go back and return to this step."});(0,w.Rj)().getGoogleAccount().then((function(e){var a,n;return r((null==e||null===(a=e.data)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.payload)||t)})).catch((function(e){console.error(e),r(t)}))}),[]),o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.assignAccessDesc",defaultMessage:"To delegate account access, add a new member to your project."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.firstStep",defaultMessage:"In your IAM & Admin console, navigate to <b>IAM</b> and click <b>Add</b> to add a new member."},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.secondStep",defaultMessage:"Paste the following value into the <b>New members</b> field:"},{b:V})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm  pf-u-ml-0",isReadOnly:!0},n||e.formatMessage({id:"cost.gcp.access.loading",defaultMessage:"Loading account address..."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.thirdStep",defaultMessage:"Select the role you just created."},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.access.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:V}))))}}],name:"cost-gcp-access",nextStep:"cost-gcp-dataset",substepOf:"geaa"},{title:o().createElement(r.Z,{id:"cost.gcp.datasetTitle",defaultMessage:"Create dataset"}),fields:[{component:"description",name:"description-google",Content:function(){var e,t=(0,u.Z)(),a=null===(e=(0,(0,h.default)().getState)().values.authentication)||void 0===e?void 0:e.username;return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},t.formatMessage({id:"cost.gcp.dataset.description",defaultMessage:"To collect and store the information needed for Cost Management, create a BigQuery dataset."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.firstStep",defaultMessage:"In the BigQuery console, select your project (<b>{projectId}</b>) from the navigation menu."},{b:V,projectId:a})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.secondStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:V})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.thirdStep",defaultMessage:"In the <b>Dataset ID</b> field, enter a name for your dataset."},{b:V})),o().createElement(s.TextListItem,null,t.formatMessage({id:"cost.gcp.dataset.fourthStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:V}))))}},{name:"application.extra.dataset"}],name:"cost-gcp-dataset",nextStep:"cost-gcp-billing-export"},{title:o().createElement(r.Z,{id:"cost.gcp.billingExportTitle",defaultMessage:"Billing export"}),fields:[{component:"description",name:"description-google",Content:function(){var e=(0,u.Z)();return o().createElement(s.TextContent,null,o().createElement(s.Text,{component:s.TextVariants.p},e.formatMessage({id:"cost.gcp.billingExport.description",defaultMessage:"To enable detailed billing data exports to BigQuery, set up daily cost export."})),o().createElement(s.TextList,{component:s.TextListVariants.ol},o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStep",defaultMessage:"In the Billing console, click <b>Billing export.</b>"},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStepB",defaultMessage:"Click the <b>BigQuery export</b> tab."},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.secondStep",defaultMessage:"In the <b>Detailed usage cost</b> section, click <b>Edit settings.</b>"},{b:V})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.thirdStep",defaultMessage:"Use the dropdown menus to select the correct project and dataset."})),o().createElement(s.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:V}))))}}],name:"cost-gcp-billing-export"}]})),W)},"oracle-cloud-infrastructure":{authentication:{ocid:(0,n.Z)({generic:{skipEndpoint:!0}},G.Qr,{skipSelection:!0,additionalSteps:[{title:o().createElement(r.Z,{id:"wizard.globalCompartmentId",defaultMessage:"Global compartment-id"}),showTitle:!1,fields:[{name:"authentication.authtype",component:"text-field",hideField:!0,initialValue:"ocid",initializeOnMount:!0},{name:"authentication.username",component:"text-field",hideField:!0,initialValue:"ocid.uuid",initializeOnMount:!0},{component:"description",name:"description-summary",Content:j,fields:[{name:"application.extra.compartment_id",label:"Global compartment-id (tenant-id)",validate:[{type:"required"}],component:"text-field",placeholder:"compartment-id",isRequired:!0}]}],nextStep:"oci-cm-policy-compartment"},{title:o().createElement(r.Z,{id:"wizard.policyCompartment",defaultMessage:"New policy and compartment"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:q,fields:[{name:"application.extra.policy_compartment",label:"New compartment-id",validate:[{type:"required"}],component:"text-field",placeholder:"New compartment-id",isRequired:!0}]}],name:"oci-cm-policy-compartment",nextStep:"oci-cm-create-bucket"},{title:o().createElement(r.Z,{id:"wizard.createBucket",defaultMessage:"Create bucket"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:B,fields:[{name:"application.extra.bucket",label:"New data bucket name",validate:[{type:"required"}],component:"text-field",placeholder:"cost-management",isRequired:!0},{name:"application.extra.bucket_namespace",label:"New data bucket namespace",validate:[{type:"required"}],component:"text-field",placeholder:"yyhddfgeeu",isRequired:!0},{name:"application.extra.bucket_region",label:"New bucket region",validate:[{type:"required"}],component:"text-field",placeholder:"uk-london-1",isRequired:!0}]}],name:"oci-cm-create-bucket",nextStep:"oci-cm-populate-bucket"},{title:o().createElement(r.Z,{id:"wizard.reviewDetails",defaultMessage:"Populate bucket"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:H}],name:"oci-cm-populate-bucket"}],customSteps:!0})}}}},32600:(e,t,a)=>{"use strict";a.d(t,{G$:()=>v,GN:()=>I,Ow:()=>_,QW:()=>M,TC:()=>k,YD:()=>S,YV:()=>L,Z$:()=>E,dD:()=>D,gF:()=>x,i7:()=>A,pD:()=>T,sM:()=>Z,zi:()=>C});var n=a(93433),i=a(4942),o=a(45987),r=a(92950),s=a.n(r),c=a(44012),l=a(96354),u=a(64124),d=a(71820),m=a(27361),p=a.n(m),f=a(42812),g=["stepKey"];function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e,t,a){return p()(d.Z,[e,"authentication",t,a],void 0)},E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic",n=arguments.length>3?arguments[3]:void 0;return p()(d.Z,[e,"authentication","lighthouse_subscription_id"!==t||n?t:"lighthouse_subscription_id_legacy",a,"additionalSteps"],[])},T=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"skipSelection"],!1)},M=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"skipEndpoint"],!1)},v=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"customSteps"],!1)},x=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"includeStepKeyFields"],[])},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"onlyHiddenFields"],!1)},C=function(e,t){return e.filter((function(e){return e.stepKey===t})).map((function(e){return e.stepKey,(0,o.Z)(e,g)}))},I=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"useApplicationAuth"],!1)},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return!e.stepKey||t.includes(e.stepKey)}))},_=function(e,t,a,n){return e.map((function(e){var i=p()(d.Z,[t,"authentication",a,n]),o=i?p()(i,e.name):p()(d.Z,[t,"authentication",a,"generic",e.name]),r=o?b(b({},e),o):e;return"authentication.password"===r.name&&(r.component="authentication"),r}))},A=function(e,t){return e.map((function(e){var a=p()(d.Z,[t,"endpoint",e.name]);return a?b(b({},e),a):e}))},S=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return p()(d.Z,[e,"authentication",t,a,"additionalFields"],[])},k=function(e,t){return b(b({},e),{},{fields:[].concat((0,n.Z)((a=t,p()(d.Z,[a,"endpoint","additionalFields"],[]))),(0,n.Z)(A(e.fields,t))),name:"".concat(t,"-endpoint"),nextStep:"summary"});var a},L=function(e,t,a,i,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"generic";return e.map((function(e){var s=e.name||"".concat(t,"-").concat(a,"-").concat(r,"-additional-step"),c=M(t,a,r),l=v(t,a,r);return b(b({name:s,nextStep:!i||c||l?"summary":"".concat(t,"-endpoint")},e),{},{fields:[].concat((0,n.Z)(_(e.fields,t,a,r)),(0,n.Z)(_(C(o,s),t,a,r)))})}))},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"generic",id:"generic"},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,d="generic"===t.name,m=e.schema.authentication,p=d?m.map((function(e){return e.type})):t.supported_authentication_types[e.name]||[f.Z.type],g=p.length>1,h={},A=(0,n.Z)(a);if(g)return A=[],m.filter((function(e){var t=e.type;return p.includes(t)})).forEach((function(s){var c,d=y(e.name,s.type,t.name)?t.name:"generic",m=M(e.name,s.type,d),f=v(e.name,s.type,d),g=w(e.name,s.type,d),b=x(e.name,s.type,d),T=g?s.fields.filter((function(e){return e.hideField})):s.fields;c=E(e.name,s.type,d,r).length>0?"".concat(e.name,"-").concat(s.type,"-").concat(d,"-additional-step"):0!==a.length||m||f||!o?"summary":"".concat(e.name,"-endpoint"),A.push({component:"auth-select",name:"auth_select",label:s.name,authName:s.type,validate:[{type:u.Z.REQUIRED}],supportedAuthTypes:p,disableAuthType:i}),A.push({component:l.Z.SUB_FORM,name:"".concat(s.type,"-subform"),className:"pf-u-pl-md",fields:[].concat((0,n.Z)(I(e.name,s.type,d)?[]:a),(0,n.Z)(S(e.name,s.type,d)),(0,n.Z)(_(Z(T,b),e.name,s.type,d))),condition:{when:"auth_select",is:s.type},hideField:g}),h[s.type]=c})),{name:"".concat(e.name,"-").concat(t.id),title:s().createElement(c.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),fields:A,nextStep:{when:"auth_select",stepMapper:h}};var k,L=d?m[0]:[f.Z].concat((0,n.Z)(m)).find((function(e){var t=e.type;return p.includes(t)})),R=y(e.name,L.type,t.name),D=R?t.name:"generic",z="".concat(e.name,"-").concat(L.type,"-").concat(D,"-additional-step"),O=M(e.name,L.type,D),P=v(e.name,L.type,D),N=T(e.name,L.type,D),V=x(e.name,L.type,D);I(e.name,L.type,D)&&(A=[]),k=E(e.name,L.type,D,r).length>0?z:0===a.length&&!O&&o?"".concat(e.name,"-endpoint"):"summary";var F={};if(N){var j=E(e.name,L.type,D,r).find((function(e){return!e.name})),q=C(L.fields,z);k=j.nextStep?j.nextStep:0!==a.length||O||P||!o?"summary":"".concat(e.name,"-endpoint"),F=b(b({},j),{},{fields:[].concat((0,n.Z)(A),(0,n.Z)(_([].concat((0,n.Z)(j.fields),(0,n.Z)(q)),e.name,L.type,D)))})}return b({name:"".concat(e.name,"-").concat(t.id),title:s().createElement(c.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),fields:[].concat((0,n.Z)(A),(0,n.Z)(S(e.name,L.type,D)),(0,n.Z)(_(Z(L.fields,V),e.name,L.type,D))),nextStep:k},F)},D=function(e,t,a,i){var o=[];return e.forEach((function(e){var r,s=null!==(r=e.schema.endpoint)&&void 0!==r&&r.hidden?e.schema.endpoint.fields:[],c=e.schema.endpoint&&0===s.length;o.push(R(e,void 0,s,a,c)),t.forEach((function(t){t.supported_source_types.includes(e.name)&&o.push(R(e,t,s,a,c,i))}));var l=e.schema.authentication;(function(e,t){return t.some((function(t){var a=t.supported_source_types,n=t.supported_authentication_types;return a.includes(e.name)&&(!n[e.name]||0===!n[e.name].length)}))})(e,t)&&l.push(f.Z),l.forEach((function(a){var r=E(e.name,a.type,void 0,i);r.length>0&&o.push.apply(o,(0,n.Z)(L(r,e.name,a.type,c,a.fields))),t.forEach((function(t){var r=E(e.name,a.type,t.name,i);r.length>0&&o.push.apply(o,(0,n.Z)(L(r,e.name,a.type,c,a.fields,t.name)))}))})),c&&o.push(k(e.schema.endpoint,e.name))})),o}},72317:(e,t,a)=>{"use strict";a.d(t,{A6:()=>s,Dt:()=>u,Z5:()=>c,sK:()=>l});var n=a(92950),i=a.n(n),o=a(44012),r=a(84866),s=function(e){return e===r.JL?i().createElement(o.Z,{id:"wizard.wizardDescriptionCloud",defaultMessage:"Register your provider to manage your Red Hat products in the cloud."}):i().createElement(o.Z,{id:"wizard.wizardDescriptionRedhat",defaultMessage:"Configure a data source to connect to your Red Hat applications."})},c=function(e){return e===r.JL?i().createElement(o.Z,{id:"wizard.wizardTitleCloud",defaultMessage:"Add a cloud source"}):i().createElement(o.Z,{id:"wizard.wizardTitleRedhat",defaultMessage:"Add Red Hat source"})},l="https://access.redhat.com/documentation/en-us/cost_management_service/2022",u="no-application"},79433:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(92950),i=a.n(n),o=a(45697),r=a.n(o),s=a(44012),c=a(48335),l=a(43047),u=function(e){var t=e.onClose,a=e.returnButtonTitle,n=e.message,o=e.title,r=e.customText,s=e.primaryAction,u=e.secondaryActions,d=e.Component;return i().createElement(c.Bullseye,null,i().createElement(c.EmptyState,{variant:c.EmptyStateVariant.full,className:"pf-u-mt-4xl"},i().createElement(c.EmptyStateIcon,{icon:l.ZP,color:"var(--pf-global--danger-color--100)",className:"pf-u-mb-0"}),i().createElement(c.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},o),i().createElement(c.EmptyStateBody,{className:"src-c-wizard--step-text"},n||r),i().createElement(d,{variant:"primary",onClick:s||t},a),u&&i().createElement(c.EmptyStateSecondaryActions,{className:"pf-u-mt-sm"},u)))};u.propTypes={onClose:r().func.isRequired,returnButtonTitle:r().node,message:r().node,title:r().node,customText:r().node,primaryAction:r().func,secondaryActions:r().node,Component:r().elementType},u.defaultProps={title:i().createElement(s.Z,{id:"wizard.unsuccConfiguration",defaultMessage:"Something went wrong"}),customText:i().createElement(s.Z,{id:"wizard.errorText",defaultMessage:"There was a problem while trying to add your source. Please try again. If the error persists, open a support case."}),Component:c.Button};const d=u},52893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(92950),i=a.n(n),o=a(45697),r=a.n(o),s=a(44012),c=a(48335),l=function(e){var t=e.onClose,a=e.customText,n=e.cancelTitle,o=e.description;return i().createElement(c.Bullseye,null,i().createElement(c.EmptyState,{variant:c.EmptyStateVariant.full,className:"pf-u-mt-4xl"},i().createElement(c.EmptyStateIcon,{icon:c.Spinner,className:"pf-u-mb-0"}),i().createElement(c.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},a),o&&i().createElement(c.EmptyStateBody,{className:"src-c-wizard--step-text"},o),t&&i().createElement(c.EmptyStateSecondaryActions,{className:"pf-u-mt-xl"},i().createElement(c.Button,{variant:"link",onClick:t},n))))};l.propTypes={onClose:r().func,customText:r().node,cancelTitle:r().node,description:r().node},l.defaultProps={customText:i().createElement(s.Z,{id:"wizard.loadingText",defaultMessage:"Loading, please wait."}),cancelTitle:i().createElement(s.Z,{id:"wizard.cancelText",defaultMessage:"Cancel"})};const u=l},90280:(e,t,a)=>{"use strict";a.d(t,{Z:()=>oe});var n=a(87462),i=a(4942),o=a(45987),r=a(92950),s=a.n(r),c=a(45697),l=a.n(c),u=a(93025),d=a(67850),m=a(58676),p=a(29439),f=a(27361),g=a.n(f),h=a(48335),b=a(65412),y=a(48880),E=a(64124),T=a(36680);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=a(93433),w=a(44012),C=a(86896),I=function(e){var t=e.label,a=e.value,n=(0,C.Z)();return s().createElement(h.Popover,{headerContent:t,bodyContent:a,position:"top",maxWidth:"80%"},s().createElement(h.Button,{variant:"link",isInline:!0,className:"src-c-wizard__summary-buttons"},n.formatMessage({id:"wizard.showMore",defaultMessage:"Show more"})))};I.propTypes={label:l().node,value:l().node};const Z=I;var _=a(71820),A=a(94688),S=a(84866),k=a(72317),L=a(32600),R=a(49288),D=["term","description"],z=function(e){var t=e.term,a=e.description,n=(0,o.Z)(e,D);return s().createElement(h.DescriptionListGroup,n,s().createElement(h.DescriptionListTerm,null,t),s().createElement(h.DescriptionListDescription,null,a))};z.propTypes={term:l().node,description:l().node};var O=function(e){var t,a,n,i,o,r,c,l,u,d,m,p,f,b,E,T,M,v=e.sourceTypes,I=e.applicationTypes,D=e.showApp,O=e.showAuthType,P=(0,y.default)(),N=(0,C.Z)(),V=(0,R.useFlag)("sources.wizard.lighthouse"),F=P.getState().values,j=v.find((function(e){return e.name===F.source_type||e.id===F.source.source_type_id})),q=F.authentication&&F.authentication.authtype?F.authentication.authtype:F.auth_select,B=[];q&&(T=j.schema.authentication.find((function(e){return e.type===q})),B=T&&T.fields?T.fields:[]),F.source.app_creation_workflow===A.b&&(M=F.applications.map((function(e){var t;return null===(t=I.find((function(t){return t.id===e})))||void 0===t?void 0:t.display_name})));var H=F.application?I.find((function(e){return e.id===F.application.application_type_id})):void 0,W=H||{},U=W.display_name,G=void 0===U?N.formatMessage({id:"wizard.notSelected",defaultMessage:"Not selected"}):U,K=W.name,Q=W.id,X=(0,L.QW)(j.name,q,K),Y=(null===(t=j.schema.endpoint)||void 0===t?void 0:t.fields)||[];X&&(Y=[],B=B.filter((function(e){return!e.name.includes("authentication.")})));var $=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic",n=arguments.length>3?arguments[3]:void 0;return[].concat((0,x.Z)(g()(_.Z,[e,"authentication",t,a,"includeStepKeyFields"],[])),(0,x.Z)(g()(_.Z,[e,"authentication",t,a,"additionalSteps"],[]).map((function(e){return e.name}))),["".concat(e,"-").concat(t,"-").concat(a,"-additional-step"),"".concat(e,"-").concat(t,"-additional-step"),n?"".concat(e,"-").concat(n):void 0]).filter(Boolean)}(j.name,q,K,Q),J=(0,L.Z$)(j.name,q,K,V),ee=g()(_.Z,[j.name,"authentication",q,K,"customSteps"],!1);J.length>0&&(B=J.map((function(e){return[].concat((0,x.Z)(e.fields),(0,x.Z)(B.filter((function(t){var a=t.stepKey;return a&&e.name===a}))))})).flatMap((function(e){return e})).filter((function(e){var t=e.name;return t.startsWith("application.extra")||B.find((function(e){return e.name===t}))||ee&&Y.find((function(e){return e.name===t}))}))),ee&&(Y=[]),B=(0,L.Ow)(B,j.name,q,K||"generic"),Y=(0,L.i7)(Y,j.name);var te=function(e,t,a){return e.map((function(e){return function(e,t,a){var n=g()(t,e.name);if((!e.stepKey||a.includes(e.stepKey))&&!(e.condition&&g()(t,e.condition.when)!==e.condition.is||e.hideField))return n&&"password"===e.type&&(n="●●●●●●●●●●●●"),"boolean"==typeof n&&(n=n?s().createElement(h.Label,{color:"green"},s().createElement(w.Z,{id:"wizard.enabled",defaultMessage:"Enabled"})):s().createElement(h.Label,{color:"gray"},s().createElement(w.Z,{id:"wizard.disabled",defaultMessage:"Disabled"}))),!n&&"authentication.password"===e.name&&g()(t,"authentication.id")&&(n="●●●●●●●●●●●●"),{label:e["aria-label"]||e.label,value:n||"-"}}(e,t,a)})).filter(Boolean)}([].concat((0,x.Z)(B),(0,x.Z)(Y)),F,$).map((function(e){var t=e.label,a=e.value;return s().createElement(z,{key:"".concat(t,"--").concat(a),term:t,description:a.toString().length>150?s().createElement(Z,{label:t,value:a}):a})}));return s().createElement(s().Fragment,null,s().createElement(h.DescriptionList,{isHorizontal:!0,className:"src-c-wizard__summary-description-list"},s().createElement(z,{term:N.formatMessage({id:"wizard.name",defaultMessage:"Name"}),description:F.source.name}),s().createElement(z,{term:N.formatMessage({id:"wizard.sourceType",defaultMessage:"Source type"}),description:j.product_name}),D&&F.source.app_creation_workflow&&s().createElement(z,{term:N.formatMessage({id:"wizard.configurationMode",defaultMessage:"Configuration mode"}),description:F.source.app_creation_workflow===A.b?N.formatMessage({id:"wizard.accountAuth",defaultMessage:"Account authorization"}):N.formatMessage({id:"wizard.manualConfig",defaultMessage:"Manual configuration"})}),D&&F.source.app_creation_workflow===A.b&&s().createElement(z,{term:N.formatMessage({id:"wizard.applications",defaultMessage:"Applications"}),description:M.length?M.map((function(e){return s().createElement("div",{key:e},e)})):N.formatMessage({id:"none",defaultMessage:"None"})}),D&&F.source.app_creation_workflow!==A.b&&s().createElement(z,{term:N.formatMessage({id:"wizard.application",defaultMessage:"Application"}),description:G}),D&&"oracle-cloud-infrastructure"===F.source_type&&(null===(a=F.application)||void 0===a||null===(n=a.extra)||void 0===n?void 0:n.bucket)&&s().createElement(z,{term:N.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket"}),description:null===(i=F.application)||void 0===i||null===(o=i.extra)||void 0===o?void 0:o.bucket}),D&&(null===(r=F.application)||void 0===r||null===(c=r.extra)||void 0===c?void 0:c.bucket_namespace)&&s().createElement(z,{term:N.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket namespace"}),description:null===(l=F.application)||void 0===l||null===(u=l.extra)||void 0===u?void 0:u.bucket_namespace}),D&&(null===(d=F.application)||void 0===d||null===(m=d.extra)||void 0===m?void 0:m.bucket_region)&&s().createElement(z,{term:N.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket region"}),description:null===(p=F.application)||void 0===p||null===(f=p.extra)||void 0===f?void 0:f.bucket_region}),!X&&T&&O&&F.source.app_creation_workflow!==A.b&&(!(null!==(b=F.application)&&void 0!==b&&b.application_type_id)||(null===(E=F.application)||void 0===E?void 0:E.application_type_id)===k.Dt)&&s().createElement(z,{term:N.formatMessage({id:"wizard.authenticationType",defaultMessage:"Authentication type"}),description:T.name}),te),function(e,t,a){return e===S.Qr&&"google"!==t?s().createElement(h.Alert,{variant:"info",isInline:!0,title:a.formatMessage({id:"cost.rbacWarningTitle",defaultMessage:"Manage permissions in User Access"})},a.formatMessage({id:"cost.rbacWarningDescription",defaultMessage:"Make sure to manage permissions for this source in custom roles that contain permissions for Cost Management."})):e===S.fn&&["google"].includes(t)?s().createElement(h.Alert,{variant:"info",isInline:!0,title:a.formatMessage({id:"azure.rhelWarningTitle",defaultMessage:"This source will not be monitored in Sources"})},a.formatMessage({id:"azure.rhelWarningDescription",defaultMessage:"This source will be represented in the Sources list, but will not reflect true status or resources."})):null}(K,j.name,N))};O.propTypes={sourceTypes:l().arrayOf(l().shape({id:l().string.isRequired,name:l().string.isRequired,product_name:l().string.isRequired,schema:l().shape({authentication:l().array,endpoint:l().object})})).isRequired,applicationTypes:l().arrayOf(l().shape({id:l().string.isRequired,name:l().string.isRequired,display_name:l().string.isRequired})).isRequired,showApp:l().bool,showAuthType:l().bool},O.defaultProps={showApp:!0,showAuthType:!0};const P=O;var N=["Content"],V=function(e){var t=e.Content,a=(0,o.Z)(e,N);return s().createElement(t,a)};V.propTypes={Content:l().oneOfType([l().element,l().func]).isRequired};const F=V;var j=a(41693),q=["isRequired","label","helperText","hideLabel","meta","input","options","mutator","DefaultIcon","iconMapper"],B=function(e){var t=(0,j.Z)(e),a=t.isRequired,i=t.label,c=t.helperText,l=t.hideLabel,u=t.meta,d=t.input,m=t.options,f=t.mutator,g=t.DefaultIcon,b=t.iconMapper,E=(0,o.Z)(t,q),T=(0,y.default)(),M=(0,r.useState)((function(){var e={};return m.forEach((function(t){var a=t.value;return e[a]=b(a,g)})),e})),v=(0,p.Z)(M,1)[0],w=E.isMulti||E.multi,C=E.isDisabled||E.isReadOnly,I=d.value||[],Z=function(e){C||(function(e){w?function(e){d.onChange(I.includes(e)?I.filter((function(t){return t!==e})):[].concat((0,x.Z)(I),[e]))}(e):function(e){d.onChange(I===e?void 0:e)}(e)}(e),d.onBlur())},_=u.error,A=u.touched&&_;return s().createElement(h.FormGroup,{isRequired:a,label:!l&&i,fieldId:d.name,helperText:c,helperTextInvalid:_,validated:A?"error":"default"},s().createElement(h.Grid,{hasGutter:!0,className:"pf-u-mb-md"},m.map((function(e){return f(e,T)})).map((function(e){var t=e.value,a=e.label,i=e.isDisabled||C;if(t){var o=v[t];return s().createElement(h.GridItem,{sm:6,md:4,key:t},s().createElement(h.Tile,(0,n.Z)({className:"src-c-wizard__tile".concat(i?" disabled":""),onClick:function(){return Z(t)},tabIndex:i?-1:0,onKeyPress:function(e){return function(e,t,a){32===e.charCode&&(e.preventDefault(),a(t))}(e,t,Z)},isDisabled:i,title:a,isStacked:!0,isSelected:I.includes(t)},o&&{icon:s().createElement(o,null)})))}}))))};B.propTypes={multi:l().bool,isMulti:l().bool,label:l().node,isRequired:l().bool,helperText:l().node,description:l().node,hideLabel:l().bool,name:l().string.isRequired,mutator:l().func,options:l().array,DefaultIcon:l().oneOfType([l().node,l().func,l().element]),iconMapper:l().func,isDisabled:l().bool,isReadOnly:l().bool},B.defaultProps={options:[],iconMapper:function(e,t){return t},mutator:function(e){return e}};const H=B;var W=function(e){var t=(0,j.Z)(e),a=t.label,n=t.input,i=t.authName,o=t.supportedAuthTypes,r=t.disableAuthType,c=n.value===i;return n.value&&o&&!o.includes(n.value)&&n.onChange(void 0),s().createElement(h.Radio,{value:i,isChecked:c,name:n.name,onChange:function(){return n.onChange(i)},label:a,id:"".concat(n.name,"-").concat(i),isDisabled:r})};W.propTypes={label:l().string,authName:l().string.isRequired,disableAuthType:l().bool,supportedAuthTypes:l().arrayOf(l().string)},W.defaultProps={disableAuthType:!1};const U=W;var G=a(41626),K=["options","mutator"],Q=function(e){var t=e.options,a=e.mutator,i=(0,o.Z)(e,K),c=(0,y.default)(),l=c.getState().values,u=l.source_type,d=g()(l,i.name),m=t.map((function(e){return a(e,c)})).filter(Boolean);return"oracle-cloud-infrastructure"===u&&(m=m.filter((function(e){return e.value&&e.value!==k.Dt}))),(0,r.useEffect)((function(){!u||d&&m.map((function(e){return e.value})).includes(d)||1!==m.filter((function(e){return e.value&&e.value!==k.Dt})).length?m.map((function(e){return e.value})).includes(d)||c.change(i.name,k.Dt):c.change(i.name,m[0].value),"oracle-cloud-infrastructure"===u&&m.filter((function(e){return e.value&&e.value!==k.Dt}))&&c.change(i.name,m[0].value)}),[u]),s().createElement(G.Z,(0,n.Z)({},i,{options:m,FormGroupProps:{className:"src-c-wizard__radio"}}))};Q.propTypes={mutator:l().func.isRequired,options:l().array,name:l().string};const X=Q;var Y=a(69385),$=["Icon"],J=function(e){var t=e.Icon,a=(0,o.Z)(e,$),i=(0,r.useRef)();return s().createElement("div",{className:"src-c-checkbox-with-icon"},s().createElement(Y.Z,(0,n.Z)({},a,{type:"checkbox"})),s().createElement("span",{ref:i},s().createElement(t,{appendTo:i.current})))};J.propTypes={Icon:l().elementType.isRequired};var ee=["componentMapper"];function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne={"auth-select":U,description:F,"card-select":H,summary:P,"enhanced-radio":X,"switch-group":function(e){var t=(0,j.Z)(e),a=t.label,n=t.input,i=t.options,o=t.applicationTypes,c=(0,(0,y.default)().getState)().values.source_type,l=o.filter((function(e){return e.supported_source_types.includes(c)})).map((function(e){return e.id})),u=i.filter((function(e){var t=e.value;return l.includes(t)}));return(0,r.useEffect)((function(){n.value||n.onChange(u.map((function(e){return e.value})).filter(Boolean))}),[]),s().createElement(h.FormGroup,{label:a,fieldId:n.name},s().createElement(h.Stack,{hasGutter:!0},u.map((function(e){return s().createElement(h.StackItem,{key:e.value},s().createElement(h.Switch,{label:e.label,onChange:function(t){return function(e,t){return e?n.onChange([].concat((0,x.Z)(n.value),[t])):n.onChange(n.value.filter((function(e){return e!==t})))}(t,e.value)},isChecked:n.value.includes(e.value),id:e.value}),e.description&&s().createElement("div",{className:"pf-c-switch pf-u-mt-sm"},s().createElement("span",{className:"pf-c-switch__toggle src-m-wizard-hide-me"}),s().createElement("div",{className:"pf-c-switch__label src-c-wizard--switch-description"},e.description)))}))))},authentication:function(e){var t,a,i=(0,y.default)(),o=i.getState().values,c=(null==e||null===(t=e.name)||void 0===t?void 0:t.match(/\d+/))||[],l=(0,p.Z)(c,1)[0]||(null===(a=o.authentication)||void 0===a?void 0:a.id),u=g()(o,e.name),d=(0,r.useState)(!l||u),m=(0,p.Z)(d,2),f=m[0],M=m[1],x=(0,r.useRef)(!0),w=(0,r.useRef)(!1);(0,r.useEffect)((function(){w.current&&(!x.current&&i.getState().pristine&&(M(!1),x.current=!0),f&&(x.current=!1))})),(0,r.useEffect)((function(){w.current=!0}),[]);var C=e.validate&&e.validate.filter((function(e){return e.type!==E.Z.REQUIRED})),I=v(v({},e),l?{validate:C,resolveProps:T.Z}:{});return e.isDisabled?s().createElement(h.FormGroup,{helperText:I.helperText,label:I.label,isRequired:!0},s().createElement(h.TextInput,{"aria-label":"Filled password",value:"•••••••••••••",isDisabled:!0})):!f&&l?s().createElement(h.FormGroup,{helperText:I.helperText,label:I.label,onFocus:function(){return M(!0)},isRequired:!0},s().createElement(h.TextInput,{"aria-label":"Filled password",value:"•••••••••••••"})):s().createElement(b.Z,(0,n.Z)({},I,{autoFocus:!0}))},"checkbox-with-icon":J},ie=function(e){var t=e.componentMapper,a=(0,o.Z)(e,ee);return s().createElement(u.Z,(0,n.Z)({FormTemplate:d.ZP,componentMapper:ae(ae(ae({},m.ZP),ne),t)},a))};ie.propTypes={componentMapper:l().object};const oe=ie},45587:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(94688);const i=function(e){return(null==e?void 0:e.app_creation_workflow)===n.b}},36680:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(92950),i=a.n(n),o=a(45697),r=a.n(o),s=a(86896),c=a(48335),l=a(76429),u=function(e){var t=e.validating,a=(0,s.Z)();return i().createElement(c.FormHelperText,{isHidden:!t},i().createElement(c.Spinner,{size:"md",className:"pf-u-mr-md"}),a.formatMessage({id:"wizard.validating",defaultMessage:"Validating"}))};u.propTypes={validating:r().bool.isRequired};const d=function(e,t){var a=t.meta;return a.validating?{helperText:i().createElement(l.Z,null,(function(e){var t=e.validating;return i().createElement(u,{validating:t})}))}:a.valid?{validated:"success",FormGroupProps:{validated:"success"}}:{}}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{},45467:()=>{},81754:()=>{},70347:()=>{},11452:()=>{},34946:()=>{},10497:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},10108:()=>{},54476:()=>{},28992:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},90479:()=>{},78752:()=>{},74282:()=>{},98379:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},43390:()=>{},22143:()=>{},314:()=>{},49854:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},72816:()=>{},11177:()=>{}}]);