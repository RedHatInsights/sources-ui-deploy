"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[8420,8815],{95957:(e,t,a)=>{function n(){this.cache=Object.create(null)}n.prototype.get=function(e){return this.cache[e]},n.prototype.set=function(e,t){this.cache[e]=t}},82644:(e,t,a)=>{a.d(t,{Z0:()=>n}),a(95957);var n={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){}}},60076:(e,t,a)=>{a.d(t,{_j:()=>n,yS:()=>r}),a(92950),a(86235),a(98583);var n={sources:{path:"/sources"},sourcesNew:{path:"/sources/new",writeAccess:!0},sourcesRemove:{path:"/sources/remove/:id",redirectNoId:!0,writeAccess:!0},sourcesDetail:{path:"/sources/detail/:id",redirectNoId:!0},sourcesDetailRename:{path:"/sources/detail/:id/rename",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemove:{path:"/sources/detail/:id/remove",redirectNoId:!0,writeAccess:!0},sourcesDetailAddApp:{path:"/sources/detail/:id/add_app/:app_type_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailRemoveApp:{path:"/sources/detail/:id/remove_app/:app_id",redirectNoId:!0,writeAccess:!0,noPaused:!0},sourcesDetailEditCredentials:{path:"/sources/detail/:id/edit_credentials",redirectNoId:!0,writeAccess:!0}},r=function(e,t){return e.replace(":id",t)}},48815:(e,t,a)=>{a.d(t,{be:()=>h,Cu:()=>Z,rL:()=>k,ye:()=>M,uc:()=>O,oI:()=>P,TA:()=>b,Rj:()=>g});var n=a(29439),r=a(9069),o=a.n(r),i=a(4942),c=a(15861),s=a(87757),l=a.n(s),u=a(80729);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(){return(d=(0,c.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=a(84866),f=a(17570),v=a(34155),y="".concat(v.env.BASE_PATH||"/api","/sources/v3.1"),h=o().create();h.interceptors.request.use((function(e){return d.apply(this,arguments)})),h.interceptors.response.use((function(e){return e.data?e.data:e})),h.interceptors.response.use(null,(function(e){if(e.response&&401===e.response.status)return window.insights.chrome.auth.logout(),!1;throw e})),h.interceptors.response.use(null,(function(e){throw e.response&&e.response.status>=500&&e.response.status<600&&(0,u.e)((function(t){t.setTag("request_id",e.response.req_id)})),e})),h.interceptors.response.use(null,(function(e){if(!o().isCancel(e))try{var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);if(t.response&&t.response.data)throw t.response.data;throw e}catch(e){var a=(0,u.Tb)(e);throw e.sentryId=a,e}})),h.interceptors.response.use((function(e){return e.errors&&e.errors.length>0?Promise.reject({detail:e.errors[0].message}):e})),h.interceptors.response.use(null,(function(e){if(e.errors&&403===e.errors[0].status)return Promise.reject({detail:e.errors[0].detail,title:"Forbidden access"});throw e}));var g=function(){return{checkAvailabilitySource:function(e){return h.post("".concat(y,"/sources/").concat(e,"/check_availability"))},updateSource:function(e,t){return h.patch("".concat(y,"/sources/").concat(e),t)},updateEndpoint:function(e,t){return h.patch("".concat(y,"/endpoints/").concat(e),t)},createEndpoint:function(e){return h.post("".concat(y,"/endpoints"),e)},updateAuthentication:function(e,t){return h.patch("".concat(y,"/authentications/").concat(e),t)},createAuthentication:function(e){return h.post("".concat(y,"/authentications"),e)},showSource:function(e){return h.get("".concat(y,"/sources/").concat(e))},listSourceEndpoints:function(e){return h.get("".concat(y,"/sources/").concat(e,"/endpoints"))},listSourceApplications:function(e){return h.get("".concat(y,"/sources/").concat(e,"/applications"))},listEndpointAuthentications:function(e){return h.get("".concat(y,"/endpoints/").concat(e,"/authentications"))},deleteSource:function(e){return h.delete("".concat(y,"/sources/").concat(e))},createApplication:function(e){return h.post("".concat(y,"/applications"),e)},postGraphQL:function(e){return h.post("".concat(y,"/graphql"),e)},listSourceTypes:function(){return h.get("".concat(y,"/source_types"))},doLoadAppTypes:function(){return h.get("".concat(y,"/application_types"))},deleteApplication:function(e){return h.delete("".concat(y,"/applications/").concat(e))},createAuthApp:function(e){return h.post("".concat(y,"/application_authentications"),e)},deleteAuthentication:function(e){return h.delete("".concat(y,"/authentications/").concat(e))},showAuthentication:function(e){return h.get("".concat(y,"/authentications/").concat(e))},updateApplication:function(e,t){return h.patch("".concat(y,"/applications/").concat(e),t)},showApplication:function(e){return h.get("".concat(y,"/applications/").concat(e))},listSourceAuthentications:function(e){return h.get("".concat(y,"/sources/").concat(e,"/authentications"))},createSource:function(e){return h.post("".concat(y,"/sources"),e)},getEndpoint:function(e){return h.get("".concat(y,"/endpoints/").concat(e))},getGoogleAccount:function(){return h.get("".concat(y,"/app_meta_data?filter[name]=gcp_service_account"))},bulkCreate:function(e){return h.post("".concat(y,"/bulk_create"),e)},pauseApplication:function(e){return h.post("".concat(y,"/applications/").concat(e,"/pause"))},unpauseApplication:function(e){return h.post("".concat(y,"/applications/").concat(e,"/unpause"))},pauseSource:function(e){return h.post("".concat(y,"/sources/").concat(e,"/pause"))},unpauseSource:function(e){return h.post("".concat(y,"/sources/").concat(e,"/unpause"))}}},b=function(e){return g().deleteSource(e).catch((function(e){throw{error:{detail:e.errors[0].detail}}}))},_=function(e,t){return"limit:".concat(e,", offset:").concat((t-1)*e)},E=function(e,t){return e?"source_type_id"===e?'sort_by: { name: "source_type.product_name", direction: '.concat(t," }"):"applications"===e?'sort_by: { name: "applications", direction: '.concat(t," }"):'sort_by: { name: "'.concat(e,'", direction: ').concat(t," }"):""},w="\n    id,\n    created_at,\n    source_type_id,\n    name,\n    imported,\n    availability_status,\n    source_ref,\n    last_checked_at,\n    updated_at,\n    last_available_at,\n    app_creation_workflow,\n    paused_at,\n    authentications { authtype, username, availability_status_error, availability_status }\n    applications { application_type_id, id, availability_status_error, availability_status, paused_at, authentications { id, resource_type } },\n    endpoints { id, scheme, host, port, path, receptor_node, role, certificate_authority, verify_ssl, availability_status_error, availability_status, authentications { authtype, availability_status, availability_status_error } }\n",O=function(e){var t=e.pageSize,a=e.pageNumber,n=e.sortBy,r=e.sortDirection,o=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=[];n.name&&o.push('{ name: "name", operation: "contains_i", value: "'.concat(n.name,'" }')),(null===(e=n.source_type_id)||void 0===e?void 0:e.length)>0&&o.push('{ name: "source_type_id", operation: "eq", value: ['.concat(n.source_type_id.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }")),(null===(t=n.applications)||void 0===t?void 0:t.length)>0&&o.push('{ name: "applications.application_type_id", operation: "eq", value: ['.concat(n.applications.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }")),r===m.JL&&o.push('{ name: "source_type.vendor", operation: "not_eq", value: "Red Hat" }'),r===m.B0&&o.push('{ name: "source_type.vendor", operation: "eq", value: "Red Hat" }');var i=null===(a=n.availability_status)||void 0===a?void 0:a[0];return i&&(i===f.Rl?o.push('{ name: "availability_status", operation: "eq", value: "'.concat(f.Rl,'" }')):i===f.nZ&&o.push('{ name: "availability_status", operation: "eq", value: ["'.concat(f.L,'", "').concat(f.nZ,'"] }'))),o.length>0?"filter: [ ".concat(o.join(", ")," ]"):""}(e.filterValue,e.activeVendor),i=[_(t,a),E(n,r),o].join(",");return g().postGraphQL({query:"{ sources(".concat(i,")\n      { ").concat(w," },\n     meta{count}\n    }")}).then((function(e){return e.data}))},Z=function(e){return g().createApplication(e)},k=function(e,t){return g().deleteApplication(e).catch((function(e){var a=(0,n.Z)(e.errors,1)[0].detail;throw{error:{title:t,detail:a}}}))},P=function(e){return g().postGraphQL({query:'{ sources(filter: { name: "id", operation: "eq", value: "'.concat(e,'" })\n            { ').concat(w," }\n        }")}).then((function(e){return e.data}))},M=function(e){return g().postGraphQL({query:'{ sources(filter: { name: "id", operation: "eq", value: "'.concat(e,'" })\n          { applications {\n              application_type_id,\n              id,\n              availability_status_error,\n              availability_status,\n              paused_at,\n              extra,\n              authentications {\n                  id\n              }\n          } }\n      }')}).then((function(e){return e.data}))}},98583:(e,t,a)=>{a.d(t,{X6:()=>_,Xf:()=>y,aN:()=>v,mI:()=>h,sk:()=>g});var n=a(87462),r=a(45987),o=a(92950),i=a.n(o),c=a(45697),s=a.n(c),l=a(1936),u=a(80123),p=a(17316),d=a(30567),m=["isDeleting"],f=["row"],v=function(e){var t=e.width,a=void 0===t?"100%":t,n=e.height,r=void 0===n?"100%":n,o=e.className,c=void 0===o?"":o;return i().createElement("span",{className:"src-c-loader ".concat(c),style:{width:a,height:r},role:"progressbar"})};v.propTypes={className:s().string,width:s().oneOfType([s().string,s().number]),height:s().oneOfType([s().string,s().number])};var y=function(){return i().createElement(v,{className:"top-pagination",height:30,width:200})},h=function(){return i().createElement(p.Bullseye,{className:"src-c-bullseye__placeholder-loader","data-testid":"placeholder-table"},i().createElement(p.Spinner,{size:"xl"}))},g=function(e){var t=e.row,a=t.isDeleting,o=(0,r.Z)(t,m),c=(0,r.Z)(e,f);return a?i().createElement("tr",null,i().createElement("td",{colSpan:d.W,className:"pf-u-p-md","data-testid":"removing-row"},i().createElement(v,{height:100}))):i().createElement(l.RowWrapper,(0,n.Z)({},c,{row:o,className:"src-c-row-vertical-centered","data-testid":"row"}))};g.propTypes={row:s().object.isRequired};var b=function(e){return i().createElement(p.Card,{className:"pf-u-m-md"},i().createElement(p.CardBody,null,i().createElement(v,e)))},_=function(){return i().createElement("div",{className:"src-c-detail-page"},i().createElement(u.Z,null,i().createElement(v,{height:96})),i().createElement(p.Grid,null,i().createElement(p.GridItem,{md:"6"},i().createElement(b,{height:218})),i().createElement(p.GridItem,{md:"6"},i().createElement(b,{height:218})),i().createElement(p.GridItem,{md:"12"},i().createElement(b,{height:324}))))}},56638:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(87462),r=a(29439),o=a(45987),i=a(92950),c=a.n(i),s=a(45697),l=a.n(s),u=a(98583),p=["src"],d=function(e){var t=e.src,a=(0,o.Z)(e,p),s=(0,i.useState)(!1),l=(0,r.Z)(s,2),d=l[0],m=l[1];return c().createElement(c().Fragment,null,!d&&c().createElement(u.aN,(0,n.Z)({height:"40px",width:"110px"},a)),c().createElement("img",(0,n.Z)({src:t,"data-testid":"ImageWithPlaceholder",onLoad:function(){return m(!0)},style:{display:d?"initial":"none"}},a)))};d.propTypes={src:l().string.isRequired};const m=d},21298:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(29439),r=a(92950),o=a.n(r),i=a(17316),c=a(36557),s=a(56638);const l=function(e){return o().createElement(i.Card,{isFlat:!0,className:"marketplace-card"},o().createElement(i.CardTitle,{className:"pf-u-pl-md pf-u-pr-md"},o().createElement(s.Z,{src:e.logo_url,className:"marketplace-card-icon"}),o().createElement("br",null),e.title,o().createElement("br",null),o().createElement(i.Label,{className:"pf-u-mt-sm marketplace-label",icon:o().createElement(c.DatabaseIcon,null)},e.primary_category.display_name)),o().createElement(i.CardBody,{className:"marketplace-card-body pf-u-mb-md pf-u-pl-md pf-u-pr-md",isFilled:!0},e.description_short),o().createElement(i.CardFooter,{className:"pf-u-pl-md pf-u-pr-md pf-u-pb-md"},o().createElement(i.Button,{variant:"link",isInline:!0,icon:o().createElement(c.ExternalLinkAltIcon,null),iconPosition:"right",component:"a",href:e.product_page_url,rel:"noopener noreferrer",target:"_blank"},"Add"," ")))};var u=a(15861),p=a(87757),d=a.n(p),m=a(48815),f="/api/marketplace-gateway/v1",v=function(){var e=(0,u.Z)(d().mark((function e(){var t,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{perPage:10,page:1},e.abrupt("return",m.be.get("".concat(f,"/unstable"),{params:{limit:t.perPage,offset:(t.page-1)*t.perPage}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,u.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.be.get("".concat(f,"/categories")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=a(45697),g=a.n(h),b=a(87462),_=a(4942),E=a(90111),w=a.n(E);const O=function(){return o().createElement(i.Card,{isFlat:!0,className:"marketplace-card"},o().createElement(i.CardTitle,null,o().createElement(i.Skeleton,{role:"progressbar"})),o().createElement(i.CardBody,null,o().createElement(i.Skeleton,{role:"progressbar"})),o().createElement(i.CardFooter,null,o().createElement(i.Skeleton,{role:"progressbar"})))};function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){(0,_.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=function(e){return{page:1,perPage:10,itemCount:(null==e?void 0:e.length)||0,filters:{type:["database"]},categories:null,isLoading:!0,data:e,loaded:0}},M=function(e,t){var a=t.type,n=t.payload,r=t.meta;switch(a){case"SET_PAGE":return k(k({},e),{},{page:n});case"SET_PER_PAGE":return k(k({},e),{},{page:1,perPage:n});case"LOAD_CATEGORIES":return k(k({},e),{},{categories:n,isLoading:!1});case"SET_LOADING_DATA":return k(k({},e),{},{loaded:e.loaded+1});case"LOAD_DATA":return k(k({},e),{},{loaded:Math.max(e.loaded-1,0),data:n,itemCount:r.count})}},S=function(e){return{database:"Database"}[e]||e},A=function(e){var t,a=e.data,s=e.isOpen,u=e.onClose,p=(0,r.useReducer)(M,a,P),d=(0,n.Z)(p,2),m=d[0],f=d[1],h=m.loaded>0;return(0,r.useEffect)((function(){s&&y().then((function(e){var t=e.data;return f({type:"LOAD_CATEGORIES",payload:t})}))}),[s]),(0,r.useEffect)((function(){s&&(f({type:"SET_LOADING_DATA"}),v({perPage:m.perPage,page:m.page}).then((function(e){var t=e.data,a=e.meta;return f({type:"LOAD_DATA",payload:t,meta:a})})))}),[m.page,m.perPage]),o().createElement(i.Modal,{className:"sources",onClose:u,isOpen:s,title:"Browse catalog",description:o().createElement("span",null,"A curated selection of offerings available for purchase from"," ",o().createElement("a",{href:"https://sandbox.marketplace.redhat.com",target:"_blank",rel:"noopener noreferrer"},"Red Hat Marketplace ",o().createElement(c.ExternalLinkAltIcon,null))),variant:"large"},m.isLoading&&o().createElement("div",{className:"pf-u-mb-md marketplace-flex"},o().createElement(O,null),o().createElement(O,null)),!m.isLoading&&o().createElement(o().Fragment,null,o().createElement(w(),{useMobileLayout:!0,className:"marketplace-modal-toolbar",pagination:{itemCount:m.itemCount,page:m.page,perPage:m.perPage,onSetPage:function(e,t){return f({type:"SET_PAGE",payload:t})},onPerPageSelect:function(e,t){return f({type:"SET_PER_PAGE",payload:t})},"data-testid":"pagination"},filterConfig:{items:[{label:"Type",placeholder:"Filter by product type",type:"checkbox",filterValues:{value:["database"],items:m.categories.map((function(e){return{label:e.display_name,value:e.page_name,isDisabled:!0}}))}}]},activeFiltersConfig:{showDeleteButton:!1,filters:(t=m.filters,Object.keys(t).map((function(e){var a;return t[e]&&0!==(null===(a=t[e])||void 0===a?void 0:a.length)?function(e,t){return{type:{category:"Type",chips:t.map((function(e){return{name:S(e)}}))}}[e]||{category:e,chips:t.map((function(e){return{name:e}}))}}(e,t[e]):null})).filter(Boolean))}}),o().createElement("div",{className:"pf-u-mb-md marketplace-flex"},!h&&a.map((function(e){return o().createElement(l,(0,b.Z)({key:e.id},e))})),h&&o().createElement(o().Fragment,null,o().createElement(O,null),o().createElement(O,null)))))};A.propTypes={data:g().array,isOpen:g().bool,onClose:g().func};const j=A;var T=function(e){var t=e.data,a=(0,r.useState)(!1),c=(0,n.Z)(a,2),s=c[0],l=c[1];return o().createElement(o().Fragment,null,o().createElement(j,{onClose:function(){return l(!1)},data:t,isOpen:s}),o().createElement(i.Card,{isFlat:!0,className:"marketplace-card marketplace-seemore-card"},o().createElement(i.CardBody,{isFilled:!0,className:"pf-u-pl-md pf-u-pr-md card-text"},"Not what you’re looking for? Browse the catalog to see more offerings from Red Hat Marketplace."),o().createElement(i.CardFooter,{className:"pf-u-pl-md pf-u-pr-md pf-u-pb-md"},o().createElement(i.Button,{variant:"primary",onClick:function(){return l(!0)}},"See more databases"))))};T.propTypes={data:g().array};const C=T,N=function(){var e=(0,r.useState)(),t=(0,n.Z)(e,2),a=t[0],c=t[1];return(0,r.useEffect)((function(){v().then((function(e){var t=e.data;return c(t)}))}),[]),a?o().createElement("div",{className:"sources"},o().createElement(i.Title,{headingLevel:"h4",size:"xl",className:"pf-u-mb-md"},"Recommended services"),o().createElement("div",{className:"pf-u-mb-md marketplace-flex"},o().createElement(l,a.find((function(e){return"mongodb-enterprise-advanced"===(null==e?void 0:e.product_page_name)}))||a[0]),o().createElement(C,{data:a}))):o().createElement("div",{className:"pf-u-mb-md marketplace-flex"},o().createElement(O,null),o().createElement(O,null))}},84866:(e,t,a)=>{a.d(t,{B0:()=>c,IV:()=>d,JL:()=>s,M$:()=>l,N9:()=>r,OH:()=>n,Qr:()=>u,T2:()=>m,fn:()=>p,lJ:()=>i,lc:()=>o});var n="satellite",r="ansible-tower",o="azure",i="google",c="Red Hat",s="Cloud",l="/insights/platform/topological-inventory",u="/insights/platform/cost-management",p="/insights/platform/cloud-meter",d="/insights/platform/catalog",m=function(e){var t,a;return[null===(t=e.find((function(e){return e.name===p})))||void 0===t?void 0:t.id,null===(a=e.find((function(e){return e.name===u})))||void 0===a?void 0:a.id]}},17570:(e,t,a)=>{a.d(t,{Rl:()=>C,c:()=>W,Bj:()=>x,L:()=>D,nZ:()=>N,Gz:()=>U,BN:()=>z,Z3:()=>V,vh:()=>A,bF:()=>P,Fd:()=>M,Ee:()=>T,jl:()=>j,P5:()=>S});var n=a(45987),r=a(87462),o=a(93433),i=a(29439),c=a(4942),s=a(92950),l=a.n(s),u=a(45697),p=a.n(u),d=a(17316),m=a(43047),f=a(5913),v=a(17546),y=a(44012),h=a(86896),g=a(62410),b=a(86235),_=a(60076),E=a(84866);var w=["app","showStatusText"],O=["applications"];function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){(0,c.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=function(e){return{http:"80",https:"443"}[e]},M=function(e){var t=Object.keys(e).reduce((function(t,a){return k(k({},t),{},(0,c.Z)({},a,e[a]||""))}),{}),a=t.scheme,n=void 0===a?"":a,r=t.host,o=void 0===r?"":r,i=t.path,s=void 0===i?"":i,l=t.port,u=void 0===l?"":l,p="".concat(n,"://").concat(o).concat(function(e,t){return t&&String(t)!==P(e)?":".concat(t):""}(n,u)).concat(s);if("://"!==p)return p},S=function(e,t,a){var n=a.sourceTypes.find((function(t){return t.id===e}));return n&&n.product_name||e||""},A=function(e){return l().createElement("span",{className:"src-c-help-cursor"},l().createElement(g.Z,{type:"relative",date:e}))},j=function(e,t,a){var n=a.sourceTypes;return l().createElement(d.TextContent,null,l().createElement(b.Link,{to:(0,_.yS)(_._j.sourcesDetail.path,t.id)},e),l().createElement("br",{key:"".concat(t.id,"-br")}),l().createElement(d.Text,{key:t.id,component:d.TextVariants.small},function(e,t){var a=t.find((function(t){return t.id===e.source_type_id}));return a&&"openshift"===a.name}(t,n)&&function(e){return e.endpoints&&e.endpoints[0]&&M(e.endpoints[0])}(t)))},T=function(e){if(!e)return null;var t=function(e){return{cfme:l().createElement(y.Z,{id:"sources.cloudformImportTooltip",defaultMessage:"This source can be managed from your connected CloudForms application."})}[e.toLowerCase()]}(e);return t?l().createElement(d.Tooltip,{content:t},l().createElement(d.Badge,{isRead:!0,className:"src-m-help-cursor"},l().createElement(y.Z,{id:"sources.imported",defaultMessage:"imported"}))):l().createElement(d.Badge,{isRead:!0},l().createElement(y.Z,{id:"sources.imported",defaultMessage:"imported"}))},C="available",N="unavailable",D="partially_available",x="in_progress",L="paused_at",I="rhel_azure",F=function(e){var t;return(t={},(0,c.Z)(t,N,"red"),(0,c.Z)(t,C,"green"),(0,c.Z)(t,D,"orange"),(0,c.Z)(t,L,"cyan"),t)[e]||"grey"},R=function(e){var t;return(t={},(0,c.Z)(t,N,l().createElement(y.Z,{id:"sources.unavailable",defaultMessage:"Unavailable"})),(0,c.Z)(t,C,l().createElement(y.Z,{id:"sources.available",defaultMessage:"Available"})),(0,c.Z)(t,D,l().createElement(y.Z,{id:"sources.partiallyAvailable",defaultMessage:"Partially available"})),(0,c.Z)(t,x,l().createElement(y.Z,{id:"sources.inProgress",defaultMessage:"In progress"})),(0,c.Z)(t,L,l().createElement(y.Z,{id:"sources.paused",defaultMessage:"Paused"})),t)[e]||l().createElement(y.Z,{id:"sources.unknown",defaultMessage:"Unknown"})},B=function(){return l().createElement(y.Z,{id:"sources.unknownError",defaultMessage:"unavailable"})},G=function(e,t){return l().createElement(l().Fragment,null,t.source&&l().createElement(l().Fragment,null,l().createElement(y.Z,{id:"sources.sourceError",defaultMessage:"Source's status: { error }",values:{error:t.source}}),l().createElement("br",null)),t.endpoint&&l().createElement(l().Fragment,null,l().createElement(y.Z,{id:"sources.endpointError",defaultMessage:"Endpoint error: { error }",values:{error:t.endpoint}}),l().createElement("br",null)),t.authentications&&l().createElement(y.Z,{id:"sources.authErrors",defaultMessage:"Authentication {count, plural, one {status} other {statuses}} : { errors }",values:{count:t.authentications.length,errors:t.authentications.map((function(e){var t=e.error,a=e.type;return l().createElement(l().Fragment,{key:a},l().createElement(y.Z,{id:"sources.errorAuthTemplate",defaultMessage:"{ type }: { error }",values:{error:t,type:a}}),l().createElement("br",null))}))}}),t.applications&&l().createElement(y.Z,{id:"sources.appErrors",defaultMessage:"Application {count, plural, one {status} other {statutes}}: { errors }",values:{count:t.applications.length,errors:t.applications.map((function(t){var a,n=t.error,r=t.id;return l().createElement(l().Fragment,{key:r},l().createElement(y.Z,{id:"sources.errorAppTemplate",defaultMessage:"{ app }: { error }",values:{error:n,app:(null===(a=e.find((function(e){return e.id===r})))||void 0===a?void 0:a.display_name)||r}}),l().createElement("br",null))}))}}))},q=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(a={},(0,c.Z)(a,N,l().createElement(l().Fragment,null,l().createElement(y.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),l().createElement("hr",null),G(t,n))),(0,c.Z)(a,C,l().createElement(y.Z,{id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,c.Z)(a,D,l().createElement(l().Fragment,null,l().createElement(y.Z,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(n).length}}),l().createElement("hr",null),G(t,n))),(0,c.Z)(a,x,l().createElement(y.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),(0,c.Z)(a,L,l().createElement(y.Z,{id:"sources.pausedStatus",defaultMessage:"Data collection is temporarily disabled. Resume source to reestablish connection."})),(0,c.Z)(a,I,l().createElement(y.Z,{id:"sources.rhelAzureStatus",defaultMessage:"This source cannot currently be monitored in Sources, and does not reflect true status or resources."})),a)[e]||l().createElement(y.Z,{id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})},z=function(e,t,a){var n=a.appTypes,c=a.sourceTypes,s=function(e){var t=e.availability_status,a=e.availability_status_error,n=e.applications,r=void 0===n?[]:n,c=e.endpoints;c=void 0===c?[]:c;var s=(0,i.Z)(c,1)[0];if(t===x)return{errors:{},status:x};var u={},p=0,d=0;return t===N?(u=k(k({},u),{},{source:a||l().createElement(B,null)}),p++,d++):t===C&&p++,r.map((function(e){e.availability_status===N?(u=k(k({},u),{},{applications:[].concat((0,o.Z)(u.applications?u.applications:[]),[{id:e.application_type_id,error:e.availability_status_error||l().createElement(B,null)}])}),p++,d++):e.availability_status===C&&p++})),(null==s?void 0:s.availability_status)===N?(u=k(k({},u),{},{endpoint:s.availability_status_error||l().createElement(B,null)}),p++,d++):(null==s?void 0:s.availability_status)===C&&p++,null!=s&&s.authentications&&s.authentications.map((function(e){e.availability_status===N?(u=k(k({},u),{},{authentications:[].concat((0,o.Z)(u.authentications?u.authentications:[]),[{type:e.authtype,error:e.availability_status_error||l().createElement(B,null)}])}),p++,d++):e.availability_status===C&&p++})),{errors:u,status:0===d?0===p?"unknown":C:d===p?N:D}}(t),u=t.paused_at?L:function(e){var t,a=e.source,n=e.sourceTypes,r=e.appTypes,o=null==n?void 0:n.find((function(e){return e.name===E.lc})),i=null==n?void 0:n.find((function(e){return e.name===E.lJ})),c=null==r?void 0:r.find((function(e){return e.name===E.fn}));return o&&c&&(a.source_type_id===(null==o?void 0:o.id)||a.source_type_id===(null==i?void 0:i.id))&&1===(null===(t=a.applications)||void 0===t?void 0:t.length)&&a.applications[0].application_type_id===(null==c?void 0:c.id)}({source:t,sourceTypes:c,appTypes:n})?I:s.status;return l().createElement("span",null,l().createElement(d.Popover,{showClose:!1,"aria-label":"".concat(u," popover"),bodyContent:q(u,n,s.errors)},l().createElement(d.Label,(0,r.Z)({className:"src-m-clickable",color:F(u)},t.availability_status===x&&{icon:l().createElement(f.ZP,null)},t.paused_at&&{icon:l().createElement(v.ZP,null)}),R(u))))},W=function(e){var t=e.app,a=e.showStatusText,o=(0,n.Z)(e,w),i=(0,h.Z)(),s=function(e,t,a){var n;return(n={},(0,c.Z)(n,C,a.formatMessage({id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),(0,c.Z)(n,N,t||a.formatMessage({id:"sources.unknownError",defaultMessage:"Unknown error"})),(0,c.Z)(n,x,l().createElement(y.Z,{id:"sources.inProgressStatus",defaultMessage:"We are still working to validate credentials. Check back for status updates."})),n)[e]||a.formatMessage({id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})}(t.availability_status,t.availability_status_error,i);return l().createElement(d.Popover,(0,r.Z)({showClose:!1,key:t.display_name,"aria-label":"".concat(t.display_name," popover"),bodyContent:t.paused_at?"".concat(s," ").concat(i.formatMessage({id:"appplication.paused.additionalText",defaultMessage:"Resume this application to continue data collection."})):s},t.paused_at&&{headerContent:i.formatMessage({id:"application.paused.header",defaultMessage:"Application paused"})}),l().createElement(d.Label,(0,r.Z)({className:"src-m-clickable",color:F(t.availability_status)},t.availability_status===x&&{icon:l().createElement(f.ZP,null)},t.paused_at&&{icon:l().createElement(v.ZP,null)},o),a?R(t.availability_status):t.display_name))};W.propTypes={app:p().shape({display_name:p().string,availability_status:p().string,availability_status_error:p().string,paused_at:p().string}),showStatusText:p().bool};var H=function(e){var t=e.applications,a=(0,n.Z)(e,O),o=(0,h.Z)();return l().createElement(d.LabelGroup,(0,r.Z)({},a,{numLabels:2,collapsedText:o.formatMessage({id:"applications.showMore",defaultMessage:"{remaining} more"},{remaining:"${remaining}"})}),t.map((function(e,t){return l().createElement(W,{app:e,key:e.id||t})})))};H.propTypes={applications:p().arrayOf(p().shape({display_name:p().string,availability_status:p().string,availability_status_error:p().string,paused_at:p().string})).isRequired};var U=function(e,t,a){var n=a.appTypes,r=e.map((function(e){return function(e,t,a){var n=a.find((function(t){return t.id===e.application_type_id}));if(n){var r,o,i,c,s,l,u=e.availability_status,p=e.availability_status_error;return"Endpoint"===(null===(r=e.authentications)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.resource_type)&&(u=null===(i=t.endpoints)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.availability_status,p=null===(s=t.endpoints)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.availability_status_error),{display_name:n.display_name,paused_at:e.paused_at,availability_status:u,availability_status_error:p}}}(e,t,n)})).filter(Boolean).sort((function(e,t){return e.display_name.localeCompare(t.display_name)}));return 0===r.length?"--":l().createElement(H,{numLabels:2,collapsedText:!0,applications:r})},V=function(e,t,a){var n=a.intl,r=a.sourceType;if("account_authorization"===e){var o,i=null==r?void 0:r.schema.authentication.find((function(e){return e.is_superkey})),c=null==t||null===(o=t.authentications)||void 0===o?void 0:o.find((function(e){var t=e.authtype;return t&&t===i.type}));return l().createElement(l().Fragment,null,n.formatMessage({id:"configurationMode.trust",defaultMessage:"Account authorization"}),(null==c?void 0:c.availability_status)===N&&l().createElement(d.Tooltip,{position:"top",content:c.availability_status_error||n.formatMessage({id:"configurationMode.trustmode.defaultError",defaultMessage:"Edit credentials required."})},l().createElement("span",{className:"pf-u-ml-sm"},l().createElement(m.ZP,{fill:"#C9190B"}))),l().createElement("div",{className:"pf-u-mt-sm"},l().createElement(b.Link,{to:(0,_.yS)(_._j.sourcesDetailEditCredentials.path,t.id)},l().createElement(d.Button,{variant:"link",id:"edit-super-credentials",isInline:!0},t.paused_at?n.formatMessage({id:"sources.viewCredentials",defaultMessage:"View credentials"}):n.formatMessage({id:"sources.editCredentials",defaultMessage:"Edit credentials"})))))}return n.formatMessage({id:"configurationMode.manual",defaultMessage:"Manual configuration"})}},30567:(e,t,a)=>{a.d(t,{E:()=>r,W:()=>o});var n=a(17570),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{title:e.formatMessage({id:"sources.name",defaultMessage:"Name"}),value:"name",formatter:n.jl,sortable:!t},{title:e.formatMessage({id:"sources.type",defaultMessage:"Type"}),value:"source_type_id",formatter:n.P5,sortable:!t},{title:e.formatMessage({id:"sources.connectedApplications",defaultMessage:"Connected applications"}),value:"applications",formatter:n.Gz},{title:e.formatMessage({id:"sources.addedDate",defaultMessage:"Date added"}),value:"created_at",formatter:n.vh,sortable:!t},{hidden:!0,value:"imported",formatter:n.Ee},{title:e.formatMessage({id:"sources.status",defaultMessage:"Status"}),value:"availability_status",formatter:n.BN}]},o=r({formatMessage:function(){return""}}).length+1},74806:(e,t,a)=>{a.d(t,{_y:()=>o});var n=a(92950);a(8679);var r=n.createContext(null),o=(r.Consumer,r.Provider,r)},680:(e,t,a)=>{a.d(t,{lq:()=>c,wU:()=>s});var n=a(70655),r=a(92950),o=a(25687),i=a(82644);function c(e){(0,o.kG)(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}function s(e,t){if(e===t)return!0;if(!e||!t)return!1;var a=Object.keys(e),n=Object.keys(t),r=a.length;if(n.length!==r)return!1;for(var o=0;o<r;o++){var i=a[o];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}(0,n.pi)((0,n.pi)({},i.Z0),{textComponent:r.Fragment})},70655:(e,t,a)=>{a.d(t,{Jh:()=>i,_T:()=>r,fl:()=>s,mG:()=>o,pi:()=>n});var n=function(){return n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function r(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}function o(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))}function i(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function c(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}Object.create,Object.create}}]);
//# sourceMappingURL=../sourcemaps/8420.eccbce3f067854a791227ef7539564ca.js.map