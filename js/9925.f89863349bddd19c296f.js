(self.webpackChunksources=self.webpackChunksources||[]).push([[9925,5467],{58647:(e,t,a)=>{"use strict";a.d(t,{j:()=>o});var n=a(90573);const o=()=>(0,n.i$)().listAwsRegions().then((e=>e.data)).catch((e=>(console.error(e),[])))},33646:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n={type:"empty",name:"empty",fields:[]}},81025:(e,t,a)=>{"use strict";a.d(t,{I6:()=>A,J0:()=>S,Jc:()=>I,Tp:()=>Z,aZ:()=>_,c$:()=>z,hO:()=>L,tN:()=>k,w4:()=>R,wT:()=>v});var n=a(28416),o=a.n(n),i=a(45697),s=a.n(i),r=a(86896),l=a(28721),c=a(11454),m=a(24503),u=a(82404),d=a(35843),p=a(64129),g=a(78956),f=a(89052),h=a.n(f),E=a(35318),b=a.n(E),y=a(48880),T=a(18111),M=a(75614);const x=`${T.sK}/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-adding-aws-sources#creating-an-aws-s3-bucket_adding-aws-sources`,w=`${T.sK}/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-adding-aws-sources#enabling-aws-account-access_adding-aws-sources`,C=`${T.sK}/html/adding_an_amazon_web_services_aws_source_to_cost_management/assembly-cost-management-next-steps-aws#configure-cost-models-next-step_next-steps-aws`,I="https://github.com/project-koku/koku-data-selector/blob/main/docs/aws/aws.rst",v=({showHCS:e})=>{const t=(0,r.Z)();return o().createElement(p.TextContent,null,o().createElement(p.Text,null,t.formatMessage({id:"cost.storageDescription.storageDescription",defaultMessage:"To store the cost and usage reports needed for cost management, you need to create an Amazon S3 bucket. {link}"},{link:e?null:o().createElement(n.Fragment,null,o().createElement("br",null),o().createElement(p.Text,{key:"link",component:p.TextVariants.a,href:e?"":x,rel:"noopener noreferrer",target:"_blank"},t.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"})))})),o().createElement(p.TextList,{className:"pf-u-ml-0",component:p.TextListVariants.ol},o().createElement(p.TextListItem,null,t.formatMessage({id:"cost.storageDescription.specifyBucker",defaultMessage:"On AWS, specify or create an Amazon S3 bucket for your account and enter it's name below."}))))};v.propTypes={showHCS:s().bool};const _=({showHCS:e})=>{const t=(0,r.Z)(),a=e?M.X0:"Cost Management";return o().createElement(p.TextContent,null,o().createElement(p.Text,null,t.formatMessage({id:"cost.usageDescription.usageDescription",defaultMessage:"The information {application} would need is your AWS account's cost and usage report (CUR). If there is a need to further customize the CUR you want to send to {application}, select the manually customize option and follow the special instructions on how to."},{application:a})))};_.propTypes={showHCS:s().bool};const A=()=>{const e=(0,r.Z)();return(0,y.default)().getState().values.application.extra.storage_only?o().createElement(u.EmptyState,{variant:u.EmptyStateVariant.small},o().createElement(u.EmptyStateIcon,{style:{color:"var(--pf-global--info-color--100)"},icon:h()}),o().createElement(g.Title,{size:"lg",headingLevel:"h4"},e.formatMessage({id:"cost.usageDescription.manualTitleCUR",defaultMessage:"Skip this step and proceed to next step"})),o().createElement(u.EmptyStateBody,null,e.formatMessage({id:"cost.usageDescription.manualDescriptionCUR",defaultMessage:"Since you have chosen to manually customize the CUR you want to send to Cost Management, you do not need to create at this point and time."})),o().createElement(u.EmptyStateActions,null,o().createElement(p.Text,{variant:"link",component:p.TextVariants.a,href:I},e.formatMessage({id:"cost.usageDescription.additionalStepsCUR",defaultMessage:"Additional configuration steps"})))):o().createElement(p.TextContent,null,o().createElement(p.TextList,{className:"pf-u-ml-0",component:p.TextListVariants.ol},o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.addFollowingValues",defaultMessage:"Create a cost and usage report using the following values:"}),o().createElement(p.TextList,null,o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.repornName",defaultMessage:"Report name: koku"})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.timeUnitHoulry",defaultMessage:"Time unit: hourly"})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.includesResourceIDs",defaultMessage:"Include: Resource IDs"})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.enableSuppor",defaultMessage:"Enable support for: RedShift, QuickSight and disable support for Athena"})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.reportPathPrefix",defaultMessage:"Report path prefix: cost"})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.usageDescription.compression",defaultMessage:"Compression type: GZIP"}))))))},S=()=>{const e=(0,r.Z)(),t=(0,n.useMemo)((()=>(0,l.Z)()),[]),a=(0,y.default)(),{authentication:i={}}=a.getState().values;return(0,n.useEffect)((()=>{a.change("authentication",{...i,extra:{...i?.extra||{},external_id:t}})}),[t]),o().createElement(p.TextContent,null,o().createElement(p.Text,null,e.formatMessage({id:"cost.iamrole.createIamRole",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(p.TextList,{component:p.TextListVariants.ol},o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.iamrole.createNewRole",defaultMessage:"From the AWS Identity Access Management console, create a new role."})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.iamrole.enterAccountId",defaultMessage:"Select another AWS account from the list of trusted entities and paste the following value into the Account ID field:"})),o().createElement(m.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},"589173575009"),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.iamrole.enterExternalId",defaultMessage:"Paste the following value in the External ID field:"})),o().createElement(m.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},t),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.iamrole.completeProccess",defaultMessage:"Complete the process to create your new role."}))))},k=({showHCS:e})=>{const t=(0,y.default)(),a=(0,r.Z)(),n=t.getState().values,i=n.application?.extra?.bucket,s=n.aws?.aliases?.enabled,l=n.aws?.org_units?.enabled;return i?o().createElement(p.TextContent,null,o().createElement(p.Text,null,a.formatMessage({id:"cost.iampolicy.grantPermissions",defaultMessage:"To grant permissions to the cost management report you just configured, create an AWS Identity and Access Management (IAM) policy. {link}"},{link:e?null:o().createElement(p.Text,{key:"link",component:p.TextVariants.a,href:e?"":w,rel:"noopener noreferrer",target:"_blank"},a.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(p.TextList,{component:p.TextListVariants.ol},o().createElement(p.TextListItem,{component:p.TextListItemVariants.li},a.formatMessage({id:"cost.iampolicy.signInIAMConsole",defaultMessage:"Sign in to the AWS Identity and Access Management (IAM) console."})),o().createElement(p.TextListItem,{component:p.TextListItemVariants.li},a.formatMessage({id:"cost.iampolicy.createPolicy",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(m.ClipboardCopy,{isCode:!0,variant:m.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},JSON.stringify({Version:"2012-10-17",Statement:[{Sid:"VisualEditor0",Effect:"Allow",Action:["s3:Get*","s3:List*"],Resource:[`arn:aws:s3:::${i}`,`arn:aws:s3:::${i}/*`]},{Sid:"VisualEditor1",Effect:"Allow",Action:["s3:ListBucket","cur:DescribeReportDefinitions",...s?["iam:ListAccountAliases"]:[],...l?["organizations:List*","organizations:Describe*"]:[]],Resource:"*"}]},null,2)),o().createElement(p.TextListItem,{component:p.TextListItemVariants.li},a.formatMessage({id:"cost.iampolicy.completeProccess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(p.Text,{component:p.TextVariants.p},a.formatMessage({id:"cost.iampolicy.logInIam",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},a.formatMessage({id:"cost.DoNotCloseYourBrowser",defaultMessage:"Do not close your browser."}))}))):o().createElement(p.Text,null,a.formatMessage({id:"cost.iampolicy.somethingWrong",defaultMessage:"Something went wrong, you are missing bucket value."}))};k.propTypes={showHCS:s().bool};const Z=({showHCS:e})=>{const t=(0,r.Z)(),a=e?M.X0:"Cost Management";return o().createElement(p.TextContent,null,e?null:o().createElement(p.Text,null,o().createElement(p.Text,{component:p.TextVariants.a,rel:"noopener noreferrer",target:"_blank",href:e?"":C},t.formatMessage({id:"cost.tags.readMeLink",defaultMessage:"Learn more"}))),o().createElement(p.Text,null,t.formatMessage({id:"cost.tags.desciption",defaultMessage:"To use tags to organize your AWS resources in the {application} application, activate your tags in AWS to allow them to be imported automatically."},{application:a})),o().createElement(p.TextList,{component:p.TextListVariants.ol},o().createElement(p.TextListItem,null,t.formatMessage({id:"cost.tags.openSection",defaultMessage:"In the AWS Billing and Cost Management console, open the Cost Allocation Tags section."})),o().createElement(p.TextListItem,null,t.formatMessage({id:"cost.tags.selectTags",defaultMessage:"Select the tags you want to use in the {application} application, and click Activate."},{application:a}))),o().createElement(p.Text,null,t.formatMessage({id:"cost.tags.aliasessOrgUnits",defaultMessage:"To use account aliases and organizational units in the display and filter of AWS resources, select the following"})))};Z.propTypes={showHCS:s().bool};const R=()=>{const e=(0,r.Z)();return o().createElement(p.TextContent,null,o().createElement(p.Text,null,e.formatMessage({id:"cost.arn.enableAccess",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(p.TextList,{component:p.TextListVariants.ol},o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.arn.selectRole",defaultMessage:"From the Roles tab, select the role you just created."})),o().createElement(p.TextListItem,null,e.formatMessage({id:"cost.arn.copyArn",defaultMessage:"From the Summary screen, copy the role ARN and paste it in the ARN field:"}))))},L=({appendTo:e})=>{const t=(0,r.Z)();return o().createElement(d.Popover,{appendTo:e,"aria-label":"Help text",position:"right",maxWidth:"40%",bodyContent:t.formatMessage({id:"cost.arn.includeAliasesPopover",defaultMessage:'If there are account aliases, they will appear and be used for filtering when reporting on AWS accounts. This will include "iam:ListAccountAliases" to the Action of the IAM Policy.'})},o().createElement(c.Button,{className:"pf-u-p-0 pf-u-m-0",variant:c.ButtonVariant.plain},o().createElement(b(),{className:"pf-u-ml-sm"})))};L.propTypes={appendTo:s().instanceOf(Element).isRequired};const z=({appendTo:e})=>{const t=(0,r.Z)();return o().createElement(d.Popover,{appendTo:e,"aria-label":"Help text",position:"right",maxWidth:"35%",bodyContent:t.formatMessage({id:"cost.arn.includeOrgUnitsPopover",defaultMessage:'If there are organizational units, they will be used for filtering when reporting on AWS resources. This will include "organizations:List*" and "organizations:Describe*" to the Action of the IAM Policy'})},o().createElement(c.Button,{className:"pf-u-p-0 pf-u-m-0",variant:c.ButtonVariant.plain},o().createElement(b(),{className:"pf-u-ml-sm"})))};z.propTypes={appendTo:s().instanceOf(Element).isRequired}},38283:(e,t,a)=>{"use strict";a.d(t,{Au:()=>Z,F9:()=>_,Jc:()=>v,Lj:()=>A,O:()=>V,X7:()=>S,iF:()=>D,po:()=>R});var n=a(28416),o=a.n(n),i=a(86896),s=a(45697),r=a.n(s),l=a(24503),c=a(82404),m=a(64129),u=a(78956),d=a(46361),p=a(47189),g=a(27730),f=a(18111),h=a(48880),E=a(76429),b=a(86706),y=a(75614),T=a(89052),M=a.n(T);const x=`${f.sK}/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#creating-an-azure-storage-account_adding-an-azure-source`,w=`${f.sK}/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#configuring-azure-roles_adding-an-azure-source`,C=`${f.sK}/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#configuring-azure-roles_adding-an-azure-source`,I=`${f.sK}/html/adding_a_microsoft_azure_source_to_cost_management/assembly-adding-azure-sources#configuring-an-azure-daily-export-schedule_adding-an-azure-source`,v="https://github.com/project-koku/koku-data-selector/blob/main/docs/azure/azure.rst",_=()=>{const e=(0,i.Z)(),t=(0,b.v9)((({sources:e})=>e.hcsEnrolled),b.wU);return o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Red Hat recommends creating a dedicated resource group and storage account in Azure to collect cost data and metrics for cost management. {link}"},{link:t?null:o().createElement(m.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:m.TextVariants.a,href:t?"":x},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountAfterDescription",defaultMessage:"After configuring a resource group and storage account in the Azure portal, enter the following:"})))},A=()=>{const e=(0,i.Z)();return o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.subscriptionIdCommand",defaultMessage:"Run the following command in Cloud Shell to obtain the Subscription ID where the cost export is being stored and enter it below:"})),o().createElement(l.ClipboardCopy,null,"az account show --query \"{ id: id }\" | jq '.id' | tr -d '\"'"))},S=()=>{const e=(0,i.Z)(),t=(0,b.v9)((({sources:e})=>e.hcsEnrolled),b.wU),a=t?y.X0:"Cost Management",{getState:n}=(0,h.default)(),s=n().values;return o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.dedicatedCredentials",defaultMessage:"Red Hat recommends configuring dedicated credentials to grant {application} read-only access to Azure cost data.  {link}"},{link:t?null:o().createElement(m.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:m.TextVariants.a,href:t?"":w},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"})),application:a})),o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.createContributorRole",defaultMessage:"Run the following command in Cloud Shell to create a service principal with Cost Management Storage Account Contributor role. From the output enter the values in the fields below:"})),o().createElement(l.ClipboardCopy,null,`az ad sp create-for-rbac -n "CostManagement" --role "Storage Account Contributor"  --scope /subscriptions/${s?.application?.extra?.subscription_id}/resourceGroups/${s?.application?.extra?.resource_group} --query '{"tenant": tenant, "client_id": appId, "secret": password}'`))},k=()=>{const e=(0,h.default)(),{values:{authentication:t,application:a}}=e.getState(),n=(0,i.Z)();let s=a?.extra?.scope||`/subscriptions/${a?.extra?.subscription_id}`;return s.includes("billingAccounts")?o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},n.formatMessage(s.includes("enrollmentAccounts")?{id:"cost.azure.setupEAReaderRole",defaultMessage:"Launch the Azure Enterprise Portal and give the service principal created above Administrator role on the associated account.  {link}"}:{id:"cost.azure.setupMCAReaderRole",defaultMessage:`Launch the Azure Portal and give the service principal created above ${s.includes("invoiceSections")?"Invoice section reader":`Billing ${s.includes("billingProfiles")?"profile":"account"} reader`} role.  {link}`},{link:o().createElement(m.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:m.TextVariants.a,href:C},n.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))}))):a.extra.storage_only?null:o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},n.formatMessage({id:"cost.azure.createReaderRole",defaultMessage:"Run the following command in Cloud Shell to create a Cost Management Reader role:"})),o().createElement(l.ClipboardCopy,null,'az role assignment create --assignee "',t?.username,'" --role "Cost Management Reader" --scope "',s,'"'))},Z=()=>o().createElement(E.Z,{subscription:{values:!0}},(()=>o().createElement(k,null))),R=()=>{const e=(0,i.Z)(),t=(0,h.default)(),a=(0,b.v9)((({sources:e})=>e.hcsEnrolled),b.wU),s=t.getState().values.application;return o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Create a recurring task to export cost data to your Azure storage account, where Cost Management will retrieve the data.  {link}"},{link:a?null:o().createElement(m.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:m.TextVariants.a,href:a?"":I},e.formatMessage({id:"wizard.learnMore defaultMessage=Learn more",defaultMessage:"Learn more"}))})),o().createElement(m.TextContent,{className:"list-align-left"},o().createElement(m.TextList,{component:m.TextListVariants.ol},o().createElement(m.TextListItem,{component:m.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageExportDescription",defaultMessage:"From the Azure portal, add a new cost export."})),o().createElement(m.TextListItem,{component:m.TextListItemVariants.li},e.formatMessage({id:"cost.azure.storageAccountDescription",defaultMessage:"Provide a name for the container and directory path, and specify the below settings to create the daily export. Leave all other options as the default."})))),o().createElement(m.TextList,{className:"export-table",component:m.TextListVariants.dl},o().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},o().createElement(m.Text,{component:m.TextVariants.b},e.formatMessage({id:"cost.azure.exportType",defaultMessage:"Export type"}))),o().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.dailyExport",defaultMessage:"Daily export of month-to-date costs"})),o().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},o().createElement(m.Text,{component:m.TextVariants.b},e.formatMessage({id:"cost.azure.storageAccountName",defaultMessage:"Storage account name"}))),o().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.createdAccountName",defaultMessage:"Created storage account name or existing storage account name"})),o().createElement(m.TextListItem,{component:m.TextListItemVariants.dt},o().createElement(m.Text,{component:m.TextVariants.b},e.formatMessage({id:"cost.azure.resourceGroupName",defaultMessage:"Resource group name"}))),o().createElement(m.TextListItem,{component:m.TextListItemVariants.dd},e.formatMessage({id:"cost.azure.createdResourceGroupName",defaultMessage:"Resource group for the storage account"}))),s.extra.storage_only?null:o().createElement(n.Fragment,null,o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.exportNameFollowup",defaultMessage:"After configuring the daily export, enter the following:"}))))},L=({handleSelect:e})=>{const[t,a]=o().useState(!1),[n,i]=o().useState("Subscription");return o().createElement(d.P,{variant:p.TM.single,"aria-label":"Select Input",onToggle:e=>a(e),onSelect:(t,n,o)=>{o?(i(null),a(!1)):(i(n),a(!1),e(n))},selections:n,isOpen:t},o().createElement(g.$,{key:"subscription",value:"Subscription"}),o().createElement(g.$,{key:"resourceGroup",value:"Resource Group"}),o().createElement(g.$,{key:"management",value:"Management Group"}),o().createElement(g.$,{key:"billingAccount",value:"Billing Account"}),o().createElement(g.$,{key:"billingProfile",value:"Billing Profile"}),o().createElement(g.$,{key:"invoiceSection",value:"Invoice Section"}),o().createElement(g.$,{key:"enrollment",value:"Enrollment Account"}))};L.propTypes={handleSelect:r().func.isRequired};const z=({selection:e})=>{const t=(0,i.Z)(),a={Subscription:o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.subscription",defaultMessage:"Run the following command from the Cloud Shell to obtain the Subscription ID associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,"az account show --query \"{ id: id }\" | jq '.id' | tr -d '\"' | awk '{print \"/subscriptions/\"$0}'"),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Resource Group":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.resourceGroup",defaultMessage:"Run the following command from the Cloud Shell, providing the Resource Group name, to obtain the Resource Group scope associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,"az group show --name {ResourceGroupName} | jq .id | tr -d '\"'"),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Billing Account":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.billingAccount",defaultMessage:"Run the following command from the Cloud Shell, providing the Billing Account name, to obtain the Billing Account scope associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,"az billing account show --name \"{billingAccountName}\" | jq '.id' | tr -d '\"'"),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Enrollment Account":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.enrollment",defaultMessage:"enrollment."})),o().createElement(l.ClipboardCopy,null,"az billing enrollment-account show --name \"{enrollmentAccountName}\" | jq '.id' | tr -d '\"'"),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Management Group":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.management",defaultMessage:"Run the following command from the Cloud Shell, providing the Management Group name, to obtain the Management Group scope associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,"az account management-group show --name \"{GroupName}\" | jq '.id' | tr -d '\"'"),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Billing Profile":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.billingProfile",defaultMessage:"Run the following command from the Cloud Shell, providing the Billing Account name and the Billig Profile name, to obtain the Billing Profile scope associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,'az billing profile show --account-name "{billingAccountName}" --name "{billingProfileName}" | jq \'.id\' | tr -d \'"\''),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.costExportInput",defaultMessage:"After running the command, enter the output in the following field:"}))),"Invoice Section":o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.invoiceSection",defaultMessage:"Run the following command from the Cloud Shell, providing the Billing Account name, Billing Profile name, and Invoice Section name, to obtain the Invoice Section scope associated with the generated cost export."})),o().createElement(l.ClipboardCopy,null,'az billing invoice section show --account-name "{billingAccountName}" --profile-name "{billingProfileName}" --name "{invoiceSectionName}" | jq \'.id\' | tr -d \'"\''),o().createElement("br",null),o().createElement(m.Text,{component:m.TextVariants.p},t.formatMessage({id:"cost.azure.invoiceSectionInput",defaultMessage:"After running the command, enter the output in the following field:"})))};return e?a[e]:a.Subscription},D=()=>{const e=(0,i.Z)();return o().createElement(m.TextContent,null,o().createElement(m.Text,{component:m.TextVariants.p},e.formatMessage({id:"cost.azure.costExportScopeDescrption",defaultMessage:"From the Azure portal, select the scope for the new cost export. If there is a need to further customize the data you want to send to Red Hat, select the manually customize option to follow the special instructions on how to. {link}"},{link:o().createElement(n.Fragment,null,o().createElement("br",null),o().createElement(m.Text,{key:"link",component:m.TextVariants.a,href:v,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"})))})))},V=()=>{const e=(0,i.Z)(),t=(0,h.default)().getState().values.application,[a,s]=(0,n.useState)("");return t.extra.storage_only?o().createElement(c.EmptyState,{variant:c.EmptyStateVariant.small},o().createElement(c.EmptyStateIcon,{style:{color:"var(--pf-global--info-color--100)"},icon:M()}),o().createElement(u.Title,{size:"lg",headingLevel:"h4"},e.formatMessage({id:"cost.manualTitleCUR",defaultMessage:"Skip this step and proceed to next step"})),o().createElement(c.EmptyStateBody,null,e.formatMessage({id:"cost.manualDescriptionCUR",defaultMessage:"Since you have chosen to manually customize the data set you want to send to Cost Management, you do not need to specify an export scope at this point and time."}))):o().createElement("div",null,o().createElement("div",null,o().createElement(u.Title,{headingLevel:"h6"},"Scope"),o().createElement(L,{handleSelect:(e="Subscription")=>s(e)})),o().createElement("br",null),o().createElement("div",null,o().createElement(z,{selection:a})))}},45410:(e,t,a)=>{"use strict";a.d(t,{AY:()=>b,IK:()=>h,Jc:()=>f,UR:()=>x,Wn:()=>M,c5:()=>E,jF:()=>T,qz:()=>y});var n=a(28416),o=a.n(n),i=a(86896),s=a(24503),r=a(64129),l=a(18111),c=a(48880),m=a(90573),u=a(86706),d=a(75614);const p=e=>o().createElement("b",{key:`b-${e.length}-${Math.floor(1e3*Math.random())}`},e),g=`${l.sK}/html/adding_a_google_cloud_source_to_cost_management`,f="https://github.com/project-koku/koku-data-selector/blob/main/docs/gcp/gcp.rst",h=()=>{const e=(0,i.Z)(),t=(0,u.v9)((({sources:e})=>e.hcsEnrolled),u.wU);return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p,className:"pf-u-mb-lg"},e.formatMessage({id:"cost.gcp.projectDescription",defaultMessage:"Google Cloud Platform (GCP) recommends that you create a cloud project to contain all your billing administration needs. We’ll use this project to set up your BigQuery billing export. {link}"},{link:t?null:o().createElement(r.Text,{key:"link",component:r.TextVariants.a,href:t?"":g,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))})),o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.projectDescription2",defaultMessage:"Enter the ID of a project within your GCP billing account."})))},E=()=>{const e=(0,i.Z)();return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.cloudStorageBucket",defaultMessage:"You will need to create a cloud storage bucket that will contain the customized billing reports. {link}"},{link:o().createElement(n.Fragment,null,o().createElement(r.Text,{key:"link",component:r.TextVariants.a,href:f,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"})))})),o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.csb.name",defaultMessage:"After creating the cloud storage bucket, enter its name in the following:"})))},b=()=>{const e=(0,i.Z)(),{getState:t}=(0,c.default)();return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.iamRoleDescription",defaultMessage:"To specify GCP access permissions for Red Hat, create an Identity and Access Management (IAM) role."})),o().createElement(r.TextList,{component:r.TextListVariants.ol},o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStep",defaultMessage:"From the GCP console, navigate to <b>IAM & Admin > Roles.</b>"},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.firstStepB",defaultMessage:"Create a new role."},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.secondStep",defaultMessage:"Add the following permissions to your custom role:"})),o().createElement(r.TextList,null,o().createElement(r.TextListItem,null,o().createElement("b",null,t().values?.application?.extra?.storage_only?"storage.buckets.get":"bigquery.jobs.create")),o().createElement(r.TextListItem,null,o().createElement("b",null,t().values?.application?.extra?.storage_only?"storage.objects.get":"bigquery.tables.getData")),o().createElement(r.TextListItem,null,o().createElement("b",null,t().values?.application?.extra?.storage_only?"storage.objects.list":"bigquery.tables.get")),!t().values?.application?.extra?.storage_only&&o().createElement(r.TextListItem,null,o().createElement("b",null,"bigquery.tables.list"))),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.iam.thirdStep",defaultMessage:"Click <b>Create role.</b>"},{b:p}))))},y=()=>{const e=(0,i.Z)(),{getState:t}=(0,c.default)(),a=(0,u.v9)((({sources:e})=>e.hcsEnrolled),u.wU),n=t().values.authentication?.username;return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.dataset.description",defaultMessage:"To collect and store the information needed for {application}, create a BigQuery dataset."},{application:a?d.X0:"Cost Management"})),o().createElement(r.TextList,{component:r.TextListVariants.ol},o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.dataset.firstStep",defaultMessage:"In the BigQuery console, select your project (<b>{projectId}</b>) from the navigation menu."},{b:p,projectId:n})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.dataset.secondStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.dataset.thirdStep",defaultMessage:"In the <b>Dataset ID</b> field, enter a name for your dataset."},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.dataset.fourthStep",defaultMessage:"Click <b>Create dataset.</b>"},{b:p}))))},T=()=>{const e=(0,i.Z)(),[t,a]=(0,n.useState)();return(0,n.useEffect)((()=>{const t=e.formatMessage({id:"cost.gcp.noAccount",defaultMessage:"There is an error with loading of the account address. Please go back and return to this step."});(0,m.Rj)().getGoogleAccount().then((e=>a(e?.data?.[0]?.payload||t))).catch((e=>{console.error(e),a(t)}))}),[]),o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.assignAccessDesc",defaultMessage:"To delegate account access, add a new member to your project."})),o().createElement(r.TextList,{component:r.TextListVariants.ol},o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.access.firstStep",defaultMessage:"In your IAM & Admin console, navigate to <b>IAM</b> and click <b>Add</b> to add a new member."},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.access.secondStep",defaultMessage:"Paste the following value into the <b>New members</b> field:"},{b:p})),o().createElement(s.ClipboardCopy,{className:"pf-u-m-sm  pf-u-ml-0",isReadOnly:!0},t||e.formatMessage({id:"cost.gcp.access.loading",defaultMessage:"Loading account address..."})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.access.thirdStep",defaultMessage:"Select the role you just created."},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.access.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:p}))))},M=()=>{const e=(0,i.Z)();return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.costProjectDescrption",defaultMessage:"If there is a need to further customize the data you want to send to Cost Management, select the manually customize option to follow the special instructions on how to. {link}"},{link:o().createElement(n.Fragment,null,o().createElement(r.Text,{key:"link",component:r.TextVariants.a,href:f,rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"cost.learnMore",defaultMessage:"Learn more"})))})))},x=()=>{const e=(0,i.Z)();return o().createElement(r.TextContent,null,o().createElement(r.Text,{component:r.TextVariants.p},e.formatMessage({id:"cost.gcp.billingExport.description",defaultMessage:"To enable detailed billing data exports to BigQuery, set up daily cost export."})),o().createElement(r.TextList,{component:r.TextListVariants.ol},o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStep",defaultMessage:"In the Billing console, click <b>Billing export.</b>"},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.firstStepB",defaultMessage:"Click the <b>BigQuery export</b> tab."},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.secondStep",defaultMessage:"In the <b>Detailed usage cost</b> section, click <b>Edit settings.</b>"},{b:p})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.thirdStep",defaultMessage:"Use the dropdown menus to select the correct project and dataset."})),o().createElement(r.TextListItem,null,e.formatMessage({id:"cost.gcp.billingExport.fourthStep",defaultMessage:"Click <b>Save.</b>"},{b:p}))))}},50142:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ae});var n=a(28416),o=a.n(n),i=a(44012),s=a(11454),r=a(92092),l=a(35843),c=a(35318),m=a.n(c),u=a(96354),d=a(64124),p=a(86896),g=a(64129);var f=a(24503),h=a(81025),E=a(4440),b=a(90573);const y="RH-HCC-provisioning-role",T=`\nROLE_ARN=$(aws iam create-role --role-name ${y} --assume-role-policy-document '{\n  "Version": "2012-10-17",\n  "Statement": {\n    "Effect": "Allow",\n    "Principal": {\n      "AWS": "<PROVISIONING_AWS_ACCOUNT>"\n    },\n    "Action": "sts:AssumeRole"\n  }\n}' | jq -r '.Role.Arn')`,M=`aws iam attach-role-policy --role-name ${y} --policy-arn $POLICY_ARN`;var x=a(48880),w=a(6468);const C="RH_HCC_provisioning_role",I=`ROLE_NAME=$(gcloud iam roles create ${C} --project=<PROJECT_ID> --title=${C} --permissions=compute.disks.create,compute.images.useReadOnly,compute.instanceTemplates.create,compute.instanceTemplates.list,compute.instanceTemplates.useReadOnly,compute.instances.create,compute.instances.get,compute.instances.list,compute.instances.setLabels,compute.instances.setMetadata,compute.instances.setServiceAccount,compute.networks.useExternalIp,compute.subnetworks.use,compute.subnetworks.useExternalIp,iam.roles.get,iam.serviceAccounts.actAs,iam.serviceAccounts.getIamPolicy,resourcemanager.projects.getIamPolicy,serviceusage.services.use,compute.instances.setTags,compute.regions.list | grep -oP 'name:\\s+\\K.+')`,v=()=>b.be.get("/api/cloudigrade/v2/sysconfig/"),_=e=>o().createElement("b",{key:`b-${e.length}-${Math.floor(1e3*Math.random())}`},e),A="https://access.redhat.com/management/api",S="https://access.redhat.com/management/api";var k=a(18111),Z=a(32321);const R=`${k.sK}/html/adding_an_openshift_container_platform_source_to_cost_management/assembly-adding-openshift-container-platform-source#installing-cost-operator_adding-an-ocp-source`;var L=a(38283),z=a(45410),D=a(69983),V=a(52095),N=a(78956),P=a(45697),F=a.n(P);const O=({fields:e})=>{const t=(0,p.Z)(),{renderForm:a}=(0,x.default)();return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},t.formatMessage({id:"cost.oci.compartmentIdStepTitle",defaultMessage:"Global compartment-id"})),o().createElement(g.Text,{component:g.TextVariants.p},t.formatMessage({id:"cost.oci.compartmentId.description",defaultMessage:"To collect and store the information needed to manage your costs, you need to first find your Global compartment-id."})),o().createElement(g.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:g.TextListVariants.ol},o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},t.formatMessage({id:"cost.oci.compartmentId.subtitle1",defaultMessage:"In the Oracle Cloud shell, copy and paste this command into the terminal to list your compartments"}),o().createElement(f.ClipboardCopy,{className:"pf-u-mt-sm"},"oci iam compartment list")),o().createElement(g.TextListItem,null,t.formatMessage({id:"cost.oci.compartmentId.subtitle2",defaultMessage:"Enter the name of your global compartment-id (tenant-id)"}),e.map((e=>o().createElement("div",{className:"pf-u-mt-sm",key:e.name},a([e])))))))};O.propTypes={fields:F().array.isRequired};const q=({fields:e})=>{const t=(0,p.Z)(),{renderForm:a,getState:n}=(0,x.default)(),i=n().values;return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},t.formatMessage({id:"cost.oci.policyCompartmentStepTitle",defaultMessage:"Create new policy and compartment"})),o().createElement(g.Text,{component:g.TextVariants.p},t.formatMessage({id:"cost.oci.policyCompartment.description",defaultMessage:"In the Oracle Cloud shell, copy and paste these commands to create your cost and usage reports policy, and new cost compartment."})),o().createElement(g.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:g.TextListVariants.ol},o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},t.formatMessage({id:"cost.oci.policyCompartment.subtitle1",defaultMessage:"Create cost and usage reports policy using the following command"}),o().createElement(f.ClipboardCopy,{className:"pf-u-mt-sm",variant:f.ClipboardCopyVariant.expansion},`oci iam policy create --compartment-id ${i?.application?.extra?.compartment_id} --description "test" --name "test" --statements '["define tenancy usage-report as ocid1.tenancy.oc1..aaaaaaaaned4fkpkisbwjlr56u7cj63lf3wffbilvqknstgtvzub7vhqkggq","endorse group Administrators to read objects in tenancy usage-report"]'`)),o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},t.formatMessage({id:"cost.oci.policyCompartment.subtitle2",defaultMessage:"Create new Cost management compartment"}),o().createElement(f.ClipboardCopy,{className:"pf-u-mt-sm",variant:f.ClipboardCopyVariant.expansion},`oci iam compartment create --name cost-mgmt-compartment --compartment-id ${i?.application?.extra?.compartment_id} --description 'Cost management compartment for cost and usage data'`)),o().createElement(g.TextListItem,null,t.formatMessage({id:"cost.oci.policyCompartment.subtitle3",defaultMessage:"Enter the name of the your new compartment-id"}),e.map((e=>o().createElement("div",{className:"pf-u-mt-sm",key:e.name},a([e])))))))};q.propTypes={fields:F().array.isRequired};const $=({fields:e})=>{const t=(0,p.Z)(),{renderForm:a,getState:n}=(0,x.default)(),i=n().values;return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},t.formatMessage({id:"cost.oci.createBucketStepTitle",defaultMessage:"Create bucket"})),o().createElement(g.Text,{component:g.TextVariants.p},t.formatMessage({id:"cost.oci.createBucket.description",defaultMessage:"Because Oracle Cloud does not allow outside access to the usage bucket, you will need to create a new bucket to copy the necessary data into."})),o().createElement(g.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:g.TextListVariants.ol},o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},t.formatMessage({id:"cost.oci.createBucket.subtitle1",defaultMessage:"Create a new bucket for cost and usage data with the following command"}),o().createElement(f.ClipboardCopy,{className:"pf-u-mt-sm",variant:f.ClipboardCopyVariant.expansion},`oci os bucket create --name cost-management --compartment-id ${i?.application?.extra?.policy_compartment}`)),o().createElement(g.TextListItem,null,t.formatMessage({id:"cost.oci.createBucket.subtitle2",defaultMessage:"Enter the name, namespace, and region of your new data bucket"}),e.map((e=>o().createElement("div",{className:"pf-u-mt-sm",key:e.name},a([e])))))))};$.propTypes={fields:F().array.isRequired};const j=()=>{const e=(0,p.Z)(),{getState:t}=(0,x.default)(),a=t().values;return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},e.formatMessage({id:"cost.oci.populateBucketStepTitle",defaultMessage:"Populate bucket"})),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.oci.populateBucket.description",defaultMessage:"Because Oracle Cloud does not have automation scripts, you will need to create a VM to run a script that copies the necessary data to your new cost-management bucket and grant read access to Red Hat."})),o().createElement(g.TextList,{className:"pf-u-ml-0 pf-u-pl-md",component:g.TextListVariants.ol},o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},e.formatMessage({id:"cost.oci.populateBucket.subtitle1",defaultMessage:"In your Oracle Cloud account, create a VM and run a script similar to the one from this github repository:"}),o().createElement("a",{className:"pf-u-mt-md pf-u-display-block",href:"https://github.com/project-koku/koku/blob/main/dev/scripts/oci_replication_func.py",target:"_blank",rel:"noreferrer"},"https://github.com/project-koku/koku/blob/main/dev/scripts/oci_replication_func.py",o().createElement("i",{className:"pf-u-ml-xs fas fa-external-link-alt pf-u-font-size-xs"}))),o().createElement(g.TextListItem,{className:"pf-u-mb-lg"},e.formatMessage({id:"cost.oci.populateBucket.subtitle2",defaultMessage:"In your Oracle Cloud shell, create this read policy for the new bucket"}),o().createElement(f.ClipboardCopy,{className:"pf-u-mt-sm",variant:f.ClipboardCopyVariant.expansion},`oci iam policy create --compartment-id ${a?.application?.extra?.compartment_id} --description 'Grant cost management bucket read access' --name Cost-managment-bucket-read --statements '["Define tenancy SourceTenancy as ocid1.tenancy.oc1..aaaaaaaa7bmeqn34urxue57x75fg4nlzh4w6ttjxckhaue2itbefeen2gdma","Define group StorageAdmins as ocid1.group.oc1..aaaaaaaamwx3swyherxtnvtq3vjmcflmteojw6lxf5i6bgwjygq642a2ejpa","Admit group StorageAdmins of tenancy SourceTenancy to read objects in tenancy"]'`))))};j.propTypes={fields:F().array.isRequired};const U=()=>{const e=(0,p.Z)();return o().createElement(g.Text,{component:g.TextVariants.p,className:"src-wizard--all-required-text"},e.formatMessage({id:"catalog.auth.allFieldsRequired",defaultMessage:"All fields are required."}))};var B=a(75614),H=a(33646),G=a(58647);const W=o().createElement(i.Z,{id:"wizard.arnPattern",defaultMessage:"ARN must start with arn:aws:"}),X=o().createElement(i.Z,{id:"wizard.arnLength",defaultMessage:"ARN should have at least 10 characters"}),K={placeholder:"arn:aws:iam:123456789:role/CostManagement",isRequired:!0,validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^arn:aws:.*/,message:W},{type:d.Z.MIN_LENGTH,threshold:10,message:X}]},Q={placeholder:"arn:aws:iam:123456789:role/Provisioning",isRequired:!0,validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^arn:aws:.*/,message:W},{type:d.Z.MIN_LENGTH,threshold:10,message:X}]},J={...K,placeholder:"arn:aws:iam:123456789:role/HybridCommittedSpend"},Y=(e,t)=>({useApplicationAuth:!0,skipSelection:!0,"authentication.username":e,"application.extra.bucket":{placeholder:"cost-usage-bucket",validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/(?!(^((2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})$|^xn--|-s3alias$))^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$/,message:o().createElement(i.Z,{id:"cost.arn.s3BucketPattern",defaultMessage:"S3 bucket name must start with alphanumeric character and can contain lowercase letters, numbers, dots, and hyphens"})}],isRequired:!0},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.arn.storageTitle",defaultMessage:"Create storage"}),nextStep:"usage",fields:[{name:"usage-description",component:"description",Content:()=>o().createElement(h.wT,{showHCS:t})},{name:"application.extra.bucket",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"cost.arn.s3Label",defaultMessage:"S3 bucket name"})},{name:"application.extra.bucket_region",component:u.Z.SELECT,loadOptions:()=>(0,G.j)().then((e=>e.map((e=>({value:e,label:e}))))),label:o().createElement(i.Z,{id:"cost.arn.awsRegion",defaultMessage:"AWS region"}),placeholder:"Select a region",validate:[{type:d.Z.REQUIRED}],isRequired:!0}]},{title:o().createElement(i.Z,{id:"cost.arn.usageDescriptionTitle",defaultMessage:"Create cost and usage report"}),name:"usage",nextStep:"tags",fields:[{name:"usage-description",component:"description",Content:()=>o().createElement(h.aZ,{showHCS:t})},{name:"application.extra.storage_only",component:"enhanced-radio",className:"src-c-wizard__conditional-radio",options:[{label:o().createElement(i.Z,{id:"cost.arn.sendDefaultCUR",defaultMessage:"I am OK with sending the default CUR to Cost Management"}),value:!1},{label:o().createElement("span",null,o().createElement(i.Z,{id:"cost.arn.customizeCUR",defaultMessage:"I wish to manually customize the CUR sent to Cost Management"})," ",o().createElement(l.Popover,{"aria-label":"Help text",position:"right",maxWidth:"5%",bodyContent:o().createElement(i.Z,{id:"cost.arn.helpCustomizeCUR",defaultMessage:"There will be a set of instructions at the end of this wizard that will guide you on how to complete the customize configuration that will be completed in the AWS console."})},o().createElement(s.Button,{className:"pf-u-p-0 pf-u-m-0",variant:s.ButtonVariant.plain},o().createElement(m(),{className:"pf-u-ml-sm"})))),value:!0}],mutator:e=>e,initialValue:!1,initializeOnMount:!0,hideInReview:!0},{name:"usage-description",component:"description",Content:()=>o().createElement(h.I6,null)},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"arn",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"cost.arn.tagsStepTitle",defaultMessage:"Tags, aliases and organizational units"}),name:"tags",nextStep:"iam-policy",fields:[{name:"tags-description",component:"description",Content:()=>o().createElement(h.Tp,{showHCS:t})},{name:"aws.aliases.enabled",component:"checkbox-with-icon",label:o().createElement(i.Z,{id:"cost.arn.includesAliases",defaultMessage:"Include AWS account aliases"}),Icon:h.hO},{name:"aws.org_units.enabled",component:"checkbox-with-icon",label:o().createElement(i.Z,{id:"cost.arn.includeOrgUnits",defaultMessage:"Include AWS organizational units"}),Icon:h.c$}]},{title:o().createElement(i.Z,{id:"cost.arn.iamPolicyTitle",defaultMessage:"Create IAM policy"}),name:"iam-policy",nextStep:"iam-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:()=>o().createElement(h.tN,{showHCS:t})}]},{title:o().createElement(i.Z,{id:"cost.arn.iamRoleStepTitle",defaultMessage:"Create IAM role"}),name:"iam-role",nextStep:"arn",substepOf:"eaa",fields:[{name:"authentication.extra.external_id",component:u.Z.TEXT_FIELD,hideField:!0,initializeOnMount:!0},{name:"iam-role-description",component:"description",Content:h.J0}]},{title:o().createElement(i.Z,{id:"cost.arn.enterArn",defaultMessage:"Enter ARN"}),name:"arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:h.w4}]}]}),ee={placeholder:"arn:aws:iam:123456789:role/SubscriptionWatch",isRequired:!0,validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^arn:aws:.*/,message:W},{type:d.Z.MIN_LENGTH,threshold:10,message:X}],label:o().createElement(i.Z,{id:"wizard.arn",defaultMessage:"ARN"})},te={isRequired:!0,validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,message:o().createElement(i.Z,{id:"catalog.urlPatternMessage",defaultMessage:"URL must start with https:// or http://"}),pattern:/^https{0,1}:\/\//},{type:d.Z.URL}],helperText:o().createElement(r.FormHelperText,{isHidden:!1},o().createElement(i.Z,{id:"catalog.hostnameHelper",defaultMessage:"For example, https://myansibleinstance.example.com/ or https://127.0.0.1/"})),label:o().createElement(i.Z,{id:"wizard.hostname",defaultMessage:"Hostname"})},ae={ibm:{authentication:{api_token_account_id:{generic:{skipEndpoint:!0},[B.Qr]:{skipSelection:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"cost.ibm.enterpriseIdTitle",defaultMessage:"Add enterprise ID"}),showTitle:!1,fields:[{name:"authentication.authtype",component:"text-field",hideField:!0,initialValue:"api_token_account_id",initializeOnMount:!0},{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},e.formatMessage({id:"cost.ibm.enterpriseIdStepTitle",defaultMessage:"Add the account's enterprise ID"})),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.ibm.enterpriseIdDescription",defaultMessage:"Login to the IBM Cloud Shell and run the following command. Paste the output string into the form field below."})),o().createElement(f.ClipboardCopy,null,"ibmcloud enterprise show --output JSON | jq -r .id"))}},{name:"application.extra.enterprise_id",label:"Enterprise ID",validate:[{type:"required"}],component:"text-field",isRequired:!0}],nextStep:"ibm-cm-account-id",substepOf:{name:"ibm-cm-substep",title:o().createElement(i.Z,{id:"cost.ibm.substepTitle",defaultMessage:"Enter account IDs"})}},{title:o().createElement(i.Z,{id:"cost.ibm.accountIdTitle",defaultMessage:"Add account ID"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(N.Title,{headingLevel:"h1"},e.formatMessage({id:"cost.ibm.accountIdStepTitle",defaultMessage:"Add the account ID"})),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.ibm.accountIdDescription",defaultMessage:"In the IBM Cloud Shell, run the following command. Paste the output string into the form fields below."})),o().createElement(f.ClipboardCopy,null,"ibmcloud account show --output JSON | jq -r .account_id"))}},{name:"authentication.username",label:"Account ID",component:"text-field",validate:[{type:"required"}],isRequired:!0}],nextStep:"ibm-cm-service-id",substepOf:"ibm-cm-substep",name:"ibm-cm-account-id"},{title:o().createElement(i.Z,{id:"cost.ibm.serviceIdTitle",defaultMessage:"Create a service ID"}),fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.ibm.serviceIdDescription",defaultMessage:"Create a service ID, which Cost Management will use to get billing and usage information from your account. In the IBM Cloud Shell, run the following command. Paste the output string into the form field below."})),o().createElement(f.ClipboardCopy,{variant:"expansion"},'ibmcloud iam service-id-create "Cost Management" -d "Service ID for cloud.redhat.com Cost Management" | jq -r .id'))}},{name:"cost.service_id",component:"text-field",label:"Service ID",validate:[{type:"required"}],isRequired:!0}],nextStep:"ibm-cm-configure-access",name:"ibm-cm-service-id"},{title:o().createElement(i.Z,{id:"cost.ibm.accessId",defaultMessage:"Configure service ID access"}),fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)(),t=(0,x.default)().getState().values.cost.service_id,a=`ibmcloud iam service-policy-create "${t}" --service-name billing  --roles Viewer\nibmcloud iam service-policy-create "${t}" --account-management --roles Viewer\nibmcloud iam service-policy-create "${t}" --service-name enterprise --roles "Usage Report Viewer"\nibmcloud iam service-policy-create "${t}" --service-name globalcatalog  --roles Viewer`;return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.ibm.accessDescription",defaultMessage:"Assign policies to the service ID you just created so that Cost Management will have access to account management, billing and usage service APIs.  In the IBM Cloud Shell, run the following command:"})),o().createElement(D.InputGroup,null,o().createElement(V.TextArea,{rows:6,value:a,name:"service-id-commands",id:"service-id-commands","aria-label":e.formatMessage({id:"ibm.cost.textarea",defaultMessage:"Commands to create policies."}),spellCheck:"false",autoCorrect:"off"}),o().createElement(f.ClipboardCopyButton,{onClick:e=>(0,f.clipboardCopyFunc)(e,a),id:"copy-service-id-commands","aria-label":e.formatMessage({id:"ibm.cost.copy",defaultMessage:"Copy to clipboard"})},e.formatMessage({id:"ibm.cost.copy",defaultMessage:"Copy to clipboard"}))))}}],nextStep:"ibm-cm-api-key",name:"ibm-cm-configure-access"},{title:o().createElement(i.Z,{id:"cost.ibm.apiKeyTitle",defaultMessage:"Create an API key"}),fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)(),t=(0,x.default)().getState().values.cost.service_id;return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"cost.ibm.apiKeyDescription",defaultMessage:"In the IBM Cloud Shell, run the following command. Paste the output string into the form field below."})),o().createElement(f.ClipboardCopy,{variant:"expansion"},`ibmcloud iam service-api-key-create "Cost Management API Key" "${t}" -d "Cost Management Service ID API Key" --output JSON | jq -r .apikey`))}},{name:"authentication.password",label:"API Key",validate:[{type:"required"}],component:"text-field",isRequired:!0,type:"password"}],name:"ibm-cm-api-key"}]}}}},openshift:{authentication:{token:{generic:{"authentication.password":{isRequired:!0,validate:[{type:d.Z.REQUIRED}]},additionalFields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"openshift.token.description",defaultMessage:"An OpenShift Container Platform login token is required to communicate with the application."})),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"openshift.token.collectData",defaultMessage:"To collect data from a Red Hat OpenShift Container Platform source:"})),o().createElement(g.TextList,{component:"ol"},o().createElement(g.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.logIn",defaultMessage:"Log in to the Red Hat OpenShift Container Platform cluster with an account that has access to the namespace"})),o().createElement(g.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.runCommand",defaultMessage:"Run the following command to obtain your login token:"})),o().createElement(f.ClipboardCopy,{className:"pf-u-mb-md",isReadOnly:!0},e.formatMessage({id:"openshift.token.comman",defaultMessage:"# oc sa get-token -n management-infra management-admin"})),o().createElement(g.TextListItem,{component:"li"},e.formatMessage({id:"openshift.token.copyToken",defaultMessage:"Copy the token and paste it in the Token field"}))))}}]},[B.Qr]:{skipSelection:!0,skipEndpoint:!0,"source.source_ref":{label:o().createElement(i.Z,{id:"wizard.clusterId",defaultMessage:"Cluster Identifier"}),isRequired:!0,component:u.Z.TEXT_FIELD,validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"wizard.clusterIdPattern",defaultMessage:"Cluster ID must start with alphanumeric character and can contain underscore and hyphen"})}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.configureOperator",defaultMessage:"Install and configure operator"}),fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"cost.openshift.description",defaultMessage:"For Red Hat OpenShift Container Platform 4.6 and later, install the {operator} from the OpenShift Container Platform web console."},{operator:o().createElement("b",{key:"bold"},"costmanagement-metrics-operator")})),o().createElement(g.Text,null,o().createElement(g.Text,{key:"link",component:g.TextVariants.a,href:R,target:"_blank",rel:"noopener noreferrer"},e.formatMessage({id:"wizard.learnMore",defaultMessage:"Learn more"}))),o().createElement(g.Text,null,e.formatMessage({id:"cost.openshift.operator_configured",defaultMessage:"If you configured the operator to create a source (create_source: true), <b>STOP</b> here and <b>CANCEL</b> out of this flow."},{b:Z.S})),o().createElement(g.Text,null,e.formatMessage({id:"cost.openshift.operator_not_configured",defaultMessage:"Otherwise, enter the cluster identifier below. You can find the cluster identifier in the cluster’s Help > About screen."})))}},{name:"source.source_ref"},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"token",initializeOnMount:!0}]}]}}},endpoint:{url:{placeholder:"https://myopenshiftcluster.mycompany.com",isRequired:!0,validate:[{type:d.Z.REQUIRED},{type:d.Z.URL,message:o().createElement(i.Z,{id:"wizard.urlPatternMessage",defaultMessage:"The URL is not formatted correctly."})}]},"endpoint.certificate_authority":{label:o().createElement((()=>{const e=(0,p.Z)();return o().createElement(o().Fragment,null,e.formatMessage({id:"wizard.sslCertificate",defaultMessage:"SSL Certificate"}),o().createElement(l.Popover,{"aria-label":"Help text",maxWidth:"50%",bodyContent:o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription1",defaultMessage:"You can obtain your OpenShift Container Platform provider’s CA certificate for all endpoints (default, metrics, alerts) from {cmd}."},{cmd:o().createElement("b",{key:"b"},"/etc/origin/master/ca.crt")})),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"wizard.openshiftCADescription2",defaultMessage:"Paste the output (a block of text starting with --BEGIN CERTIFICATE--) into the Trusted CA Certificates field."})))},o().createElement(m(),{className:"pf-u-ml-sm"})))}),null),"aria-label":"SSL Certificate"},additionalFields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"openshift.endpoint.urlAndCA",defaultMessage:"Provide the OpenShift Container Platform URL and SSL certificate."})))}}]}},azure:{authentication:{username_password_tenant_id:{generic:{"authentication.extra.azure.tenant_id":{type:"password",isRequired:!0,validate:[{type:d.Z.REQUIRED}]},"authentication.username":{label:o().createElement(i.Z,{id:"azure.generic.username",defaultMessage:"App ID"}),isRequired:!0,validate:[{type:d.Z.REQUIRED}]},"authentication.password":{isRequired:!0,validate:[{type:d.Z.REQUIRED}]}}},lighthouse_subscription_id_legacy:{[B.fn]:{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"subwatch.azure.tokenTitle",defaultMessage:"Obtain offline token"}),nextStep:"cost-azure-playbook",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"subwatch.azure.substepTitle",defaultMessage:"Enable account access"})},fields:[{name:"azure-1",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"subwatch.azure.tokenDesc",defaultMessage:"Generate a token to authenticate the calls to APIs for Red Hat services."})),o().createElement(g.TextList,{component:g.TextListVariants.ol,className:"pf-u-ml-0"},o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.azure.tokenLink",defaultMessage:"To obtain an offline token, follow the steps at {link}."},{link:o().createElement(g.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:g.TextVariants.a,href:A},A)}))))}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:H.Z.type,initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"subwatch.azure.playbookTitle",defaultMessage:"Run Ansible playbook"}),name:"cost-azure-playbook",substepOf:"eaa",fields:[{name:"azure-2",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.azure.ansiblePlaybookDesc",defaultMessage:"Download and run the following commands against a running Azure VM."})),o().createElement(f.ClipboardCopy,{className:"pf-u-mb-lg"},"ansible-galaxy collection install redhatinsights.subscriptions"),o().createElement(f.ClipboardCopy,null,"ansible-playbook -i <AZURE_VM_HOSTNAME>, -b ~/.ansible/collections/ansible_collections/redhatinsights/subscriptions/playbooks/verify_account.yml -e rh_api_refresh_token=<OFFLINE_AUTH_TOKEN>"))}}]}]}},lighthouse_subscription_id:{[B.fn]:{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"subwatch.lighthouse.title",defaultMessage:"Configure Azure Lighthouse"}),nextStep:"subwatch-lighthouse-sub-id",fields:[{name:"azure-1",component:"description",Content:()=>{const e=(0,p.Z)(),[t,a]=(0,n.useState)(),[i,r]=(0,n.useState)(null),l=(0,x.default)();return(0,n.useEffect)((()=>{(0,b.Rj)().getLighthouseLink().then((({data:e})=>a(e?.[0]?.payload))).catch((t=>{console.error(t),r(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"subwatch.lighthouse.desc",defaultMessage:"Complete configuration steps in Azure Lighthouse according to Microsoft instructions. When you're finished, return to this wizard to finish creating this Azure source."})),o().createElement(s.Button,{component:"a",target:"_blank",rel:"noopener noreferrer",href:t,isLoading:!t,isDisabled:!t,onClick:()=>{l.change("lighthouse-clicked",!0)},isBlock:!0},e.formatMessage({id:"subwatch.lighthouse.button",defaultMessage:"Take me to Lighthouse"})),i)}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"lighthouse_subscription_id",initializeOnMount:!0},{component:u.Z.TEXT_FIELD,name:"lighthouse-clicked",hideField:!0,validate:[{type:"required"}]}]},{title:o().createElement(i.Z,{id:"subwatch.lighthouse.subscriptionId",defaultMessage:"Set subscription ID"}),name:"subwatch-lighthouse-sub-id",fields:[{name:"azure-2",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"subwatch.subscriptionId.desc",defaultMessage:"Log in to your Azure account and navigate to your subscriptions. Copy the subscription ID you wish to use and paste it into the field below."})))}},{component:"text-field",name:"authentication.username",label:"Subscription ID",isRequired:!0,placeholder:"291bba3f-e0a5-47bc-a099-3bdcb2a50a05",validate:[{type:"required"}]}]}]}},tenant_id_client_id_client_secret:{[B.Qr]:{useApplicationAuth:!0,skipSelection:!0,"application.extra.subscription_id":{placeholder:"",validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.subidPattern",defaultMessage:"Subscription ID must start with alphanumeric character and can contain underscore and hyphen"})}],isRequired:!0},"application.extra.resource_group":{placeholder:"",validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.resourceGroupPattern",defaultMessage:"Resource group must start with alphanumeric character and can contain underscore and hyphen"})}]},"application.extra.storage_account":{placeholder:"",validate:[{type:d.Z.REQUIRED},{type:d.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.storageAccountPattern",defaultMessage:"Storage account must start with alphanumeric character and can contain underscore and hyphen"})}]},"application.extra.scope":{placeholder:"",validate:[{type:d.Z.PATTERN,pattern:/^[\/A-Za-z0-9]+[\.\/\:A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.scopePattern",defaultMessage:"Cost export scope must start with alphanumeric character and can contain underscore, hyphen, and foward slash"})}]},"application.extra.export_name":{placeholder:"",validate:[{type:d.Z.PATTERN,pattern:/^[A-Za-z0-9]+[A-Za-z0-9_-]*$/,message:o().createElement(i.Z,{id:"cost.exportNamePattern",defaultMessage:"Cost export name must start with alphanumeric character and can contain underscore and hyphen"})}]},"authentication.password":{type:"password",validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"cost.clientSecret",defaultMessage:"Client secret"})},"authentication.username":{validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"cost.clientAppId",defaultMessage:"Client (Application) ID"})},"authentication.extra.azure.tenant_id":{label:o().createElement(i.Z,{id:"cost.tenantDirId",defaultMessage:"Tenant (Directory) ID"}),validate:[{type:d.Z.REQUIRED}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.createDailyExport",defaultMessage:"Specify cost export scope"}),nextStep:"azure-rg-and-sa",fields:[{name:"cost-export-scope-description",component:"description",Content:L.iF},{name:"application.extra.storage_only",component:"enhanced-radio",className:"src-c-wizard__conditional-radio",options:[{label:o().createElement(i.Z,{id:"cost.sendDefaultCUR",defaultMessage:"I am OK with sending the default CUR to Cost Management"}),value:!1},{label:o().createElement(i.Z,{id:"cost.customizeCUR",defaultMessage:"I wish to manually customize the CUR sent to Cost Management"}),value:!0}],mutator:e=>e,initialValue:!1,hideInReview:!0},{name:"cost-export-scope",component:"description",Content:L.O},{name:"application.extra.scope",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.costExportScope",defaultMessage:"Cost export scope"}),condition:{when:"application.extra.storage_only",is:!1}}]},{title:o().createElement(i.Z,{id:"cost.createDailyExport",defaultMessage:"Daily export"}),name:"daily-export",nextStep:"azure-sub-id",fields:[{name:"export-schedule-description",component:"description",Content:L.po},{name:"application.extra.export_name",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.costExportName",defaultMessage:"Cost export name"}),condition:{when:"application.extra.storage_only",is:!1}}]},{title:o().createElement(i.Z,{id:"cost.azureSubStepId",defaultMessage:"Resource group and storage account"}),name:"azure-rg-and-sa",nextStep:"daily-export",fields:[{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"tenant_id_client_id_client_secret",initializeOnMount:!0},{name:"azure-storage-account-description",component:"description",Content:L.F9},{name:"all-required",component:"description",Content:U},{name:"application.extra.resource_group",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.resourceGroupName",defaultMessage:"Resource group name"})},{name:"application.extra.storage_account",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.storageAccountName",defaultMessage:"Storage account name"})}]},{title:o().createElement(i.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"}),name:"azure-sub-id",nextStep:"configure-roles",fields:[{name:"azure-sub-id-description",component:"description",Content:L.Lj},{name:"application.extra.subscription_id",component:u.Z.TEXT_FIELD,label:o().createElement(i.Z,{id:"wizard.subscriptionId",defaultMessage:"Subscription ID"})}]},{title:o().createElement(i.Z,{id:"wizard.configureRoles",defaultMessage:"Roles"}),name:"configure-roles",fields:[{name:"configure-service-principal",component:"description",Content:L.X7},{name:"all-required",component:"description",Content:U},{name:"authentication.extra.azure.tenant_id",component:u.Z.TEXT_FIELD},{name:"authentication.username",component:u.Z.TEXT_FIELD},{name:"authentication.password",component:u.Z.TEXT_FIELD},{name:"reader-role",component:"description",Content:L.Au}]}]}},provisioning_lighthouse_subscription_id:{[B._m]:{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"provisioning.lighthouse.title",defaultMessage:"Configure Azure Lighthouse"}),nextStep:"provisioning-lighthouse-sub-id",fields:[{name:"azure-1",component:"description",Content:()=>{const e=(0,p.Z)(),t=(0,x.default)(),a=`https://portal.azure.com/#create/Microsoft.Template/uri/${encodeURIComponent("https://provisioning-public-assets.s3.amazonaws.com/AzureLighthouse/offering_template.json")}`;return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"provisioning.lighthouse.desc",defaultMessage:"Complete configuration steps in Azure Lighthouse according to Microsoft instructions. When you're finished, return to this wizard to finish creating this Azure source."})),o().createElement(s.Button,{component:"a",target:"_blank",rel:"noopener noreferrer",href:a,onClick:()=>{t.change("lighthouse-clicked",!0)},isBlock:!0},e.formatMessage({id:"provisioning.lighthouse.button",defaultMessage:"Take me to Lighthouse"})))}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"provisioning_lighthouse_subscription_id",initializeOnMount:!0},{component:u.Z.TEXT_FIELD,name:"lighthouse-clicked",hideField:!0,validate:[{type:"required"}]}]},{title:o().createElement(i.Z,{id:"provisioning.lighthouse.subscriptionId",defaultMessage:"Set subscription ID"}),name:"provisioning-lighthouse-sub-id",fields:[{name:"azure-2",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"provisioning.subscriptionId.desc",defaultMessage:"Log in to your Azure account and navigate to your subscriptions. Copy the subscription ID you have connected through Lighthouse."})))}},{component:"text-field",name:"authentication.username",label:"Subscription ID",isRequired:!0,placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",validate:[{type:"required"}]}]}]}}}},amazon:{authentication:{access_key_secret_key:{generic:{"authentication.username":{label:o().createElement(i.Z,{id:"wizard.accessKeyId",defaultMessage:"Access key ID"}),placeholder:"AKIAIOSFODNN7EXAMPLE",isRequired:!0,validate:[{type:d.Z.REQUIRED}]},"authentication.password":{label:o().createElement(i.Z,{id:"wizard.secretAccessKey",defaultMessage:"Secret access key"}),placeholder:"wJairXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",isRequired:!0,validate:[{type:d.Z.REQUIRED}],type:"password"},skipSelection:!0,onlyHiddenFields:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"wizard.configureAccountAccess",defaultMessage:"Account access"}),fields:[{component:"description",name:"description-summary",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart1",defaultMessage:"Create an access key in your AWS user account and enter the details below."})),o().createElement(g.Text,null,e.formatMessage({id:"wizard.createAccesKeyPart2",defaultMessage:"For sufficient access and security, Red Hat recommends using the Power user identity and access management (IAM) policy for your AWS user account. "}),o().createElement(l.Popover,{"aria-label":"Help text",position:"bottom",bodyContent:o().createElement(o().Fragment,null,o().createElement(g.Text,null,e.formatMessage({id:"wizard.createAccesKeyHelpText",defaultMessage:"The Power user policy allows the user full access to API functionality and AWS services for user administration. Create an access key in the Security Credentials area of your AWS user account. When adding your AWS account as a source, the access key ID and secret access key act as your user ID and password."})))},o().createElement(m(),null))))}},{name:"authentication.username",component:u.Z.TEXT_FIELD},{name:"authentication.password",component:u.Z.TEXT_FIELD},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"access_key_secret_key",initializeOnMount:!0}]}]}},arn:{generic:{includeStepKeyFields:["arn"],"authentication.username":K},[B.Qr]:Y(K,!1),[B.mr]:Y(J,!0)},"cloud-meter-arn":{generic:{includeStepKeyFields:["arn"],"authentication.username":ee},[B.fn]:{useApplicationAuth:!0,skipSelection:!0,"authentication.username":ee,additionalSteps:[{title:o().createElement(i.Z,{id:"cloudmeter.createIamPolicy",defaultMessage:"Create IAM policy"}),nextStep:"subs-iam-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"cloudmeter.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:()=>{const e=(0,p.Z)(),[t,a]=(0,n.useState)();return(0,n.useEffect)((()=>{v().then((e=>a(e?.aws_policies?.traditional_inspection))).catch((t=>{console.error(t),a(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.grantPermissions",defaultMessage:"To grant Red Hat access to your Amazon Web Services (AWS) subscription data, create an AWS Identity and Access Management (IAM) policy."})),o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.signIn",defaultMessage:"Log in to the {link}."},{link:o().createElement("a",{key:"link",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/console.html",rel:"noopener noreferrer",target:"_blank"},e.formatMessage({id:"subwatch.iampolicy.IAMconsole",defaultMessage:"AWS Identity and Management (IAM) console"}))})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.createPolicty",defaultMessage:"Create a new policy, pasting the following content into the JSON text box."})),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},t?JSON.stringify(t,null,2):e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iampolicy.completeProcess",defaultMessage:"Complete the process to create your new policy."}))),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"cloud-meter-arn",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"cloudmeter.createIamRole",defaultMessage:"Create IAM role"}),name:"subs-iam-role",nextStep:"subs-arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:()=>{const e=(0,p.Z)(),[t,a]=(0,n.useState)();return(0,n.useEffect)((()=>{v().then((e=>a(e?.aws_account_id))).catch((t=>{console.error(t),a(e.formatMessage({id:"subwatch.iampolicy.subWatchConfigError",defaultMessage:"There is an error with loading of the configuration. Please go back and return to this step."}))}))}),[]),o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.iamrole.delegateAccount",defaultMessage:"To delegate account access, create an IAM role to associate with your IAM policy."})),o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.createRole",defaultMessage:"From the AWS IAM console, create a new role."})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.pasteAccountID",defaultMessage:"Select <b>Another AWS account</b> from the list of trusted entities and paste the following value into the <b>Account{space}ID</b> field:"},{b:_,space:o().createElement(o().Fragment,null," ")})),o().createElement(f.ClipboardCopy,{className:"pf-u-m-sm-on-sm",isReadOnly:!0},t||e.formatMessage({id:"subwatch.iampolicy.loading",defaultMessage:"Loading configuration..."})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.iamrole.completeProcess",defaultMessage:"Complete the process to create your new role."}))),o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.iampolicy.BDoNotCloseYourBrowserBYouWillNeedToBeLoggedInToTheIamConsoleToComputeTheNextStep",defaultMessage:"{bold} You will need to be logged in to the IAM console to complete the next step."},{bold:o().createElement("b",{key:"bold"},e.formatMessage({id:"subwatch.iampolicy.dontCloseBrowser",defaultMessage:"Do not close your browser."}))})))}}]},{title:o().createElement(i.Z,{id:"cloudmeter.enterArn",defaultMessage:"Enter ARN"}),name:"subs-arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.arn.enableAccount",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.arn.selectRole",defaultMessage:"Navigate to the role that you just created. "})),o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.arn.copyArn",defaultMessage:"From the <b>Summary</b> screen, copy the role ARN and paste it in the <b>ARN field</b> below."},{b:_}))))}},{component:u.Z.TEXT_FIELD,name:"authentication.username"}]}]}},"provisioning-arn":{generic:{includeStepKeyFields:["provisioning-arn"],"authentication.username":Q},[B._m]:{useApplicationAuth:!0,skipSelection:!0,"authentication.username":Q,additionalSteps:[{title:o().createElement(i.Z,{id:"provisioning.createIamPolicy",defaultMessage:"Create IAM policy"}),nextStep:"prov-iam-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"provisioning.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"iam-policy-description",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"provisioning.iam.grantPermissions",defaultMessage:"Create the following AWS Identity and Access Management (IAM) policy to grant Red Hat permissions to run instances on your Amazon Web Services (AWS) Elastic Cloud (EC2)."})),o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.signIn",defaultMessage:"Log in to AWS CLI by running: {awsCliCommand}."},{awsCliCommand:o().createElement("b",null,e.formatMessage({id:"provisioning.iam.signInCommand",defaultMessage:"aws configure"}))})),o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.createPolicty",defaultMessage:"Create a new policy and store its ARN by running following command in your terminal."}))),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},'\nPOLICY_ARN=$(aws iam create-policy --policy-name RH-HCC-provisioning-policy --policy-document \'{\n"Version": "2012-10-17",\n"Statement": [\n  {\n    "Sid": "RedHatProvisioning",\n    "Effect": "Allow",\n    "Action": [\n      "iam:GetPolicyVersion",\n      "iam:GetPolicy",\n      "iam:ListAttachedRolePolicies",\n      "iam:GetRolePolicy",\n      "ec2:CreateKeyPair",\n      "ec2:CreateLaunchTemplate",\n      "ec2:CreateLaunchTemplateVersion",\n      "ec2:CreateTags",\n      "ec2:DeleteKeyPair",\n      "ec2:DeleteTags",\n      "ec2:DescribeAvailabilityZones",\n      "ec2:DescribeImages",\n      "ec2:DescribeInstanceTypes",\n      "ec2:DescribeInstances",\n      "ec2:DescribeKeyPairs",\n      "ec2:DescribeLaunchTemplates",\n      "ec2:DescribeLaunchTemplateVersions",\n      "ec2:DescribeRegions",\n      "ec2:DescribeSecurityGroups",\n      "ec2:DescribeSnapshotAttribute",\n      "ec2:DescribeTags",\n      "ec2:ImportKeyPair",\n      "ec2:RunInstances",\n      "ec2:StartInstances",\n      "iam:ListRolePolicies"\n    ],\n    "Resource": "*"\n  }\n]\n}\' | jq -r \'.Policy.Arn\')'))}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"provisioning-arn",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"provisioning.createIamRole",defaultMessage:"Create IAM role"}),name:"prov-iam-role",nextStep:"prov-arn",substepOf:"eaa",fields:[{name:"iam-role-description",component:"description",Content:()=>{const e=(0,p.Z)(),[t,a]=(0,n.useState)(),[i,s]=(0,n.useState)(null),[r,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(0,b.Rj)().getProvAppType().then((e=>a(e?.data?.[0]?.id||null))).catch((e=>{l(!0)}))}),[]),(0,n.useEffect)((()=>{t&&(0,b.Rj)().getProvMetadata(t).then((e=>{const t=e?.data?.[0]?.payload;t?s(t):l(!0)})).catch((e=>{l(!0)}))}),[t]),o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"provisioning.iam.delegateAccount",defaultMessage:"To delegate account access, create an IAM role and associate it with your IAM policy."})),null===i&&null===r&&o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"provisioning.iam.loading",defaultMessage:"Loading configuration..."})),r&&o().createElement(E.Alert,{variant:"warning",title:e.formatMessage({id:"provisioning.iam.fetchError",defaultMessage:"There was an error while loading the commands. Please go back and return to this step to try again."})}),null!==i&&o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.createRole",defaultMessage:"Create a new role and add the Red Hat account as a trusted entity and fetch the role ARN:"}),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},T.replace("<PROVISIONING_AWS_ACCOUNT>",i))),o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.attachPolicy",defaultMessage:"Attach the permissions policy that you just created."})),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},M)))}}]},{title:o().createElement(i.Z,{id:"provisioning.enterArn",defaultMessage:"Enter ARN"}),name:"prov-arn",substepOf:"eaa",fields:[{name:"arn-description",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"provisioning.iam.enableAccount",defaultMessage:"To enable account access, capture the ARN associated with the role you just created."})),o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.getRoleArn",defaultMessage:"Run {command} in your terminal to print the role ARN"},{command:o().createElement("b",null,"echo $ROLE_ARN")})),o().createElement(g.TextListItem,null,e.formatMessage({id:"provisioning.iam.copyArn",defaultMessage:"Copy it to the ARN field below."}))))}},{component:u.Z.TEXT_FIELD,name:"authentication.username"}]}]}}},endpoint:{}},satellite:{endpoint:{},authentication:{receptor_node:{generic:{"source.source_ref":{label:o().createElement(i.Z,{id:"satellite.satelliteId",defaultMessage:"Satellite ID"}),validate:[{type:d.Z.REQUIRED}],component:u.Z.TEXT_FIELD},"endpoint.receptor_node":{label:o().createElement(i.Z,{id:"satellite.receptorId",defaultMessage:"Receptor ID"}),validate:[{type:d.Z.REQUIRED}],component:u.Z.TEXT_FIELD},skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"satellite.credentials",defaultMessage:"Credentials"}),nextStep:"summary",fields:[{name:"all-required",component:"description",Content:U},{name:"source.source_ref"},{name:"endpoint.receptor_node"},{component:u.Z.TEXT_FIELD,name:"endpoint.role",hideField:!0,initializeOnMount:!0,initialValue:"satellite"},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initializeOnMount:!0,initialValue:"receptor_node"}]}]}}}},"ansible-tower":{authentication:{receptor_node:{generic:{skipEndpoint:!0},[B.IV]:{skipEndpoint:!0}},username_password:{generic:{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.password",defaultMessage:"Password"})},url:te,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(i.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),nextStep:"ansible-tower-credentials-no-app",fields:[{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:U},{component:u.Z.TEXT_FIELD,name:"authentication.username"},{component:u.Z.TEXT_FIELD,name:"authentication.password"}]},{name:"ansible-tower-credentials-no-app",title:o().createElement(i.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"endpoint.role",component:u.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:u.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:u.Z.SWITCH},{name:"endpoint.certificate_authority",component:u.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]}]},[B.IV]:{skipSelection:!0,onlyHiddenFields:!0,customSteps:!0,"authentication.username":{isRequired:!1,validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.username",defaultMessage:"Username"})},"authentication.password":{type:"password",isRequired:!1,validate:[{type:d.Z.REQUIRED}],label:o().createElement(i.Z,{id:"wizard.password",defaultMessage:"Password"})},url:te,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthoriy",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1,label:o().createElement(i.Z,{id:"wizard.verifySsl",defaultMessage:"Verify SSL"})},additionalSteps:[{nextStep:"catalog-ansible-tower",title:o().createElement(i.Z,{id:"catalog.ansibleTowerEndpoint",defaultMessage:"Ansible Tower endpoint"}),fields:[{name:"ansible-tower-desc",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.endpoint.enterHostname",defaultMessage:"Enter the hostname of the Ansible Tower instance you want to connect to."})))}},{name:"endpoint.role",component:u.Z.TEXT_FIELD,hideField:!0,initialValue:"ansible",initializeOnMount:!0},{name:"url",component:u.Z.TEXT_FIELD},{name:"endpoint.verify_ssl",component:u.Z.SWITCH},{name:"endpoint.certificate_authority",component:u.Z.TEXT_FIELD,condition:{is:!0,when:"endpoint.verify_ssl"}}]},{title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),name:"catalog-ansible-tower",fields:[{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"username_password",initializeOnMount:!0},{name:"required-desc",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p,className:"pf-u-mb-l"},e.formatMessage({id:"catalog.auth.provideTowerCredentials",defaultMessage:"Provide Ansible Tower service account user credentials to ensure optimized availability of resources to Catalog Administrators."})),o().createElement(U,null))}},{component:u.Z.TEXT_FIELD,name:"authentication.username"},{component:u.Z.TEXT_FIELD,name:"authentication.password"}]}]}}},endpoint:{url:te,"endpoint.certificate_authority":{label:o().createElement(i.Z,{id:"wizard.certificateAuthority",defaultMessage:"Certificate authority"})},"endpoint.verify_ssl":{initialValue:!1}}},google:{authentication:{[H.Z.type]:{[B.fn]:{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"subwatch.azure.tokenTitle",defaultMessage:"Obtain offline token"}),nextStep:"cost-google-playbook",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"subwatch.azure.substepTitle",defaultMessage:"Enable account access"})},fields:[{name:"azure-1",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"subwatch.google.tokenDesc",defaultMessage:"Generate a token to authenticate the calls to APIs for Red Hat services."})),o().createElement(g.TextList,{component:g.TextListVariants.ol,className:"pf-u-ml-0"},o().createElement(g.TextListItem,null,e.formatMessage({id:"subwatch.google.tokenLink",defaultMessage:"To obtain an offline token, follow the steps at {link}."},{link:o().createElement(g.Text,{key:"link",rel:"noopener noreferrer",target:"_blank",component:g.TextVariants.a,href:S},S)}))))}},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:H.Z.type,initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"subwatch.azure.playbookTitle",defaultMessage:"Run Ansible playbook"}),name:"cost-google-playbook",substepOf:"eaa",fields:[{name:"azure-2",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},e.formatMessage({id:"subwatch.google.ansiblePlaybookDesc",defaultMessage:"Download and run the following commands against a running Google Cloud VM."})),o().createElement(f.ClipboardCopy,{className:"pf-u-mb-lg"},"ansible-galaxy collection install redhatinsights.subscriptions"),o().createElement(f.ClipboardCopy,{variant:"expansion"},"ansible-playbook -i <GCE_VM_HOSTNAME>, -b ~/.ansible/collections/ansible_collections/redhatinsights/subscriptions/playbooks/verify_account.yml -e rh_api_refresh_token=<OFFLINE_AUTH_TOKEN>"))}}]}]}},provisioning_project_id:{generic:{includeStepKeyFields:["provisioning_project_id"]},[B._m]:{skipSelection:!0,useApplicationAuth:!0,customSteps:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"provisioning.enterProjectID",defaultMessage:"Enter Project ID"}),nextStep:"prov-custom-role",substepOf:{name:"eaa",title:o().createElement(i.Z,{id:"provisioning.enableAccountAccess",defaultMessage:"Enable account access"})},fields:[{name:"add-project-id",component:"description",Content:()=>{const e=(0,p.Z)();return o().createElement(g.TextContent,null,o().createElement(g.Text,null,e.formatMessage({id:"provisioning.project-id.desc",defaultMessage:"Login to Google Cloud Plattform and Copy your project ID"})))}},{component:u.Z.TEXT_FIELD,name:"authentication.username",isRequired:!0,label:"Project ID",placeholder:"project_id",validate:[{type:"required"}]},{component:u.Z.TEXT_FIELD,name:"authentication.authtype",hideField:!0,initialValue:"provisioning_project_id",initializeOnMount:!0}]},{title:o().createElement(i.Z,{id:"provisioning.createRole",defaultMessage:"Create custom role"}),name:"prov-custom-role",substepOf:"eaa",fields:[{name:"custom-role-description",component:"description",Content:()=>{const e=(0,w.XQ)().getState().values.authentication.username,t=(0,p.Z)(),[a,i]=(0,n.useState)(),[s,r]=(0,n.useState)(),[l,c]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(0,b.Rj)().getProvAppType().then((e=>i(e?.data?.[0]?.id||null))).catch((e=>{c(!0)}))}),[]),(0,n.useEffect)((()=>{a&&(0,b.Rj)().getProvisioningServiceAccount(a).then((e=>{const t=e?.data?.[0]?.payload;t?r("serviceAccount:"+t):c(!0)})).catch((e=>{c(!0)}))}),[a]),o().createElement(g.TextContent,null,o().createElement(g.Text,{component:g.TextVariants.p},t.formatMessage({id:"provisioning.gcp.delegateAccount",defaultMessage:"To delegate account access, create a custom role and grant it to Red Hat service account."})),void 0===s&&null===l&&o().createElement(g.Text,{component:g.TextVariants.p},t.formatMessage({id:"provisioning.gcp.loading",defaultMessage:"Loading configuration..."})),l&&o().createElement(E.Alert,{variant:"warning",title:t.formatMessage({id:"provisioning.gcp.fetchError",defaultMessage:"There was an error while loading the commands. Please go back and return to this step to try again."})}),null!==s&&o().createElement(g.TextList,{component:g.TextListVariants.ol},o().createElement(g.TextListItem,null,t.formatMessage({id:"provisioning.gcp.createRole",defaultMessage:"Create a new custom role and fetch the role name:"}),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},I.replace("<PROJECT_ID>",e))),o().createElement(g.TextListItem,null,t.formatMessage({id:"provisioning.gcp.attachRole",defaultMessage:"Attach the role that you just created to Red Hat service account to grant permissions."})),o().createElement(f.ClipboardCopy,{isCode:!0,variant:f.ClipboardCopyVariant.expansion,className:"pf-u-m-sm-on-sm",isReadOnly:!0},"gcloud projects add-iam-policy-binding <PROJECT_ID> --member=<PROVISIONING_SERVICE_ACCOUNT> --role=$ROLE_NAME".replace("<PROVISIONING_SERVICE_ACCOUNT>",s).replace("<PROJECT_ID>",e))))}}]}]}},project_id_service_account_json:{[B.Qr]:{useApplicationAuth:!0,skipSelection:!0,"authentication.username":{component:"text-field",label:"Project ID",placeholder:"0123456789",isRequired:!0,validate:[{type:"required"}]},"authentication.authtype":{component:"text-field",hideField:!0,initialValue:"project_id_service_account_json"},"application.extra.dataset":{component:"text-field",label:"Dataset ID",isRequired:!0,validate:[{type:"required"}]},additionalSteps:[{title:o().createElement(i.Z,{id:"cost.gcp.projectTitle",defaultMessage:"Project"}),fields:[{component:"description",name:"description-google",Content:z.IK},{name:"authentication.username"},{name:"authentication.authtype"},{component:"description",name:"description-google",Content:z.Wn},{name:"application.extra.storage_only",component:"enhanced-radio",className:"src-c-wizard__conditional-radio",options:[{label:o().createElement(i.Z,{id:"cost.gcp.sendDefaultCUR",defaultMessage:"I am OK with sending the default dataset to Cost Management"}),value:!1},{label:o().createElement("span",null,o().createElement(i.Z,{id:"cost.gcp.customizeCUR",defaultMessage:"I wish to manually customize the dataset sent to Cost Management"})),value:!0}],mutator:e=>e,initialValue:!1,initializeOnMount:!0,hideInReview:!0}],nextStep:({values:{application:{extra:e}}})=>e?.storage_only?"cost-gcp-cs":"cost-gcp-iam"},{title:o().createElement(i.Z,{id:"cost.gcp.cloudStorage",defaultMessage:"Create cloud storage bucket"}),fields:[{component:"description",name:"description-google",Content:z.c5},{component:u.Z.TEXT_FIELD,name:"application.extra.bucket",label:"Cloud storage bucket name",validate:[{type:d.Z.REQUIRED}],isRequired:!0}],name:"cost-gcp-cs",nextStep:"cost-gcp-iam"},{title:o().createElement(i.Z,{id:"cost.gcp.iamTitle",defaultMessage:"Create IAM role"}),fields:[{component:"description",name:"description-google",Content:z.AY}],nextStep:"cost-gcp-access",name:"cost-gcp-iam",substepOf:{name:"geaa",title:o().createElement(i.Z,{id:"cost.arn.enableAccountAccess",defaultMessage:"Enable account access"})}},{title:o().createElement(i.Z,{id:"cost.gcp.accessTitle",defaultMessage:"Assign access"}),fields:[{component:"description",name:"description-google",Content:z.jF}],name:"cost-gcp-access",nextStep:"cost-gcp-dataset",substepOf:"geaa"},{title:o().createElement(i.Z,{id:"cost.gcp.datasetTitle",defaultMessage:"Create dataset"}),fields:[{component:"description",name:"description-google",Content:z.qz},{name:"application.extra.dataset",condition:{when:"application.extra.storage_only",is:!1}}],name:"cost-gcp-dataset",nextStep:"cost-gcp-billing-export"},{title:o().createElement(i.Z,{id:"cost.gcp.billingExportTitle",defaultMessage:"Billing export"}),fields:[{component:"description",name:"description-google",Content:z.UR}],name:"cost-gcp-billing-export"}]}}}},"oracle-cloud-infrastructure":{authentication:{ocid:{generic:{skipEndpoint:!0},[B.Qr]:{skipSelection:!0,additionalSteps:[{title:o().createElement(i.Z,{id:"wizard.globalCompartmentId",defaultMessage:"Global compartment-id"}),showTitle:!1,fields:[{name:"authentication.authtype",component:"text-field",hideField:!0,initialValue:"ocid",initializeOnMount:!0},{name:"authentication.username",component:"text-field",hideField:!0,initialValue:"ocid.uuid",initializeOnMount:!0},{component:"description",name:"description-summary",Content:O,fields:[{name:"application.extra.compartment_id",label:"Global compartment-id (tenant-id)",validate:[{type:"required"}],component:"text-field",placeholder:"compartment-id",isRequired:!0}]}],nextStep:"oci-cm-policy-compartment"},{title:o().createElement(i.Z,{id:"wizard.policyCompartment",defaultMessage:"New policy and compartment"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:q,fields:[{name:"application.extra.policy_compartment",label:"New compartment-id",validate:[{type:"required"}],component:"text-field",placeholder:"New compartment-id",isRequired:!0}]}],name:"oci-cm-policy-compartment",nextStep:"oci-cm-create-bucket"},{title:o().createElement(i.Z,{id:"wizard.createBucket",defaultMessage:"Create bucket"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:$,fields:[{name:"application.extra.bucket",label:"New data bucket name",validate:[{type:"required"}],component:"text-field",placeholder:"cost-management",isRequired:!0},{name:"application.extra.bucket_namespace",label:"New data bucket namespace",validate:[{type:"required"}],component:"text-field",placeholder:"yyhddfgeeu",isRequired:!0},{name:"application.extra.bucket_region",label:"New bucket region",validate:[{type:"required"}],component:"text-field",placeholder:"uk-london-1",isRequired:!0}]}],name:"oci-cm-create-bucket",nextStep:"oci-cm-populate-bucket"},{title:o().createElement(i.Z,{id:"wizard.reviewDetails",defaultMessage:"Populate bucket"}),showTitle:!1,fields:[{component:"description",name:"description-summary",Content:j}],name:"oci-cm-populate-bucket"}],customSteps:!0}}}}}},58104:(e,t,a)=>{"use strict";a.d(t,{G$:()=>E,GN:()=>T,Ow:()=>x,QW:()=>h,TC:()=>I,YD:()=>C,YV:()=>v,Z$:()=>g,dD:()=>A,gF:()=>b,i7:()=>w,pD:()=>f,sM:()=>M,zi:()=>y});var n=a(28416),o=a.n(n),i=a(44012),s=a(96354),r=a(64124),l=a(50142),c=a(27361),m=a.n(c),u=a(33646),d=a(75614);const p=(e,t,a)=>m()(l.Z,[e,"authentication",t,a],void 0),g=(e,t,a="generic",n,o)=>{const i="amazon"===e&&o&&a===d.Qr?d.mr:a;return m()(l.Z,[e,"authentication","lighthouse_subscription_id"!==t||n?t:"lighthouse_subscription_id_legacy",i,"additionalSteps"],[])},f=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"skipSelection"],!1),h=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"skipEndpoint"],!1),E=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"customSteps"],!1),b=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"includeStepKeyFields"],[]),y=(e,t)=>e.filter((e=>e.stepKey===t)).map((({stepKey:e,...t})=>t)),T=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"useApplicationAuth"],!1),M=(e,t=[])=>e.filter((e=>!e.stepKey||t.includes(e.stepKey))),x=(e,t,a,n,o)=>e.map((e=>{const i=o&&"amazon"===t&&"arn"===a&&n===d.Qr?d.mr:n,s=m()(l.Z,[t,"authentication",a,i]),r=s?m()(s,e.name):m()(l.Z,[t,"authentication",a,"generic",e.name]),c=r?{...e,...r}:e;return"authentication.password"===c.name&&(c.component="authentication"),c})),w=(e,t)=>e.map((e=>{const a=m()(l.Z,[t,"endpoint",e.name]);return a?{...e,...a}:e})),C=(e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"additionalFields"],[]),I=(e,t)=>{return{...e,fields:[...(a=t,m()(l.Z,[a,"endpoint","additionalFields"],[])),...w(e.fields,t)],name:`${t}-endpoint`,nextStep:"summary"};var a},v=(e,t,a,n,o,i="generic",s)=>e.map((e=>{const r=e.name||`${t}-${a}-${i}-additional-step`,l=h(t,a,i),c=E(t,a,i);return{name:r,nextStep:!n||l||c?"summary":`${t}-endpoint`,...e,fields:[...x(e.fields,t,a,i),...x(y(o,r),t,a,i,s)]}})),_=(e,t={name:"generic",id:"generic"},a,n,c,d,w)=>{const I="generic"===t.name,v=e.schema.authentication,_=I?v.map((({type:e})=>e)):t.supported_authentication_types[e.name]||[u.Z.type],A=_.length>1,S={};let k=[...a];if(A)return k=[],v.filter((({type:e})=>_.includes(e))).forEach((o=>{const i=p(e.name,o.type,t.name)?t.name:"generic",u=h(e.name,o.type,i),f=E(e.name,o.type,i),y=((e,t,a="generic")=>m()(l.Z,[e,"authentication",t,a,"onlyHiddenFields"],!1))(e.name,o.type,i),w=b(e.name,o.type,i),I=y?o.fields.filter((({hideField:e})=>e)):o.fields;let v;v=g(e.name,o.type,i,d).length>0?`${e.name}-${o.type}-${i}-additional-step`:0!==a.length||u||f||!c?"summary":`${e.name}-endpoint`,k.push({component:"auth-select",name:"auth_select",label:o.name,authName:o.type,validate:[{type:r.Z.REQUIRED}],supportedAuthTypes:_,disableAuthType:n}),k.push({component:s.Z.SUB_FORM,name:`${o.type}-subform`,className:"pf-u-pl-md",fields:[...T(e.name,o.type,i)?[]:a,...C(e.name,o.type,i),...x(M(I,w),e.name,o.type,i)],condition:{when:"auth_select",is:o.type},hideField:y}),S[o.type]=v})),{name:`${e.name}-${t.id}`,title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),fields:k,nextStep:{when:"auth_select",stepMapper:S}};{const n=I?v[0]:[u.Z,...v].find((({type:e})=>_.includes(e))),s=p(e.name,n.type,t.name)?t.name:"generic",r=`${e.name}-${n.type}-${s}-additional-step`,l=h(e.name,n.type,s),m=E(e.name,n.type,s),A=f(e.name,n.type,s),S=b(e.name,n.type,s);let Z;T(e.name,n.type,s)&&(k=[]),Z=g(e.name,n.type,s,d).length>0?r:0===a.length&&!l&&c?`${e.name}-endpoint`:"summary";let R={};if(A){const t=g(e.name,n.type,s,d,w).find((({name:e})=>!e)),o=y(n.fields,r);Z=t.nextStep?t.nextStep:0!==a.length||l||m||!c?"summary":`${e.name}-endpoint`,R={...t,fields:[...k,...x([...t.fields,...o],e.name,n.type,s)]}}return{name:`${e.name}-${t.id}`,title:o().createElement(i.Z,{id:"wizard.credentials",defaultMessage:"Credentials"}),fields:[...k,...C(e.name,n.type,s),...x(M(n.fields,S),e.name,n.type,s)],nextStep:Z,...R}}},A=(e,t,a,n,o)=>{const i=[];return e.forEach((e=>{const s=e.schema.endpoint?.hidden?e.schema.endpoint.fields:[],r=e.schema.endpoint&&0===s.length;i.push(_(e,void 0,s,a,r,n,o)),t.forEach((t=>{t.supported_source_types.includes(e.name)&&i.push(_(e,t,s,a,r,n,o))}));const l=e.schema.authentication;((e,t)=>t.some((({supported_source_types:t,supported_authentication_types:a})=>t.includes(e.name)&&(!a[e.name]||0===!a[e.name].length))))(e,t)&&l.push(u.Z),l.forEach((a=>{const s=g(e.name,a.type,void 0,n,o);s.length>0&&i.push(...v(s,e.name,a.type,r,a.fields,void 0,o)),t.forEach((t=>{const s=g(e.name,a.type,t.name,n,o);s.length>0&&i.push(...v(s,e.name,a.type,r,a.fields,t.name,o))}))})),r&&i.push(I(e.schema.endpoint,e.name))})),i}},18111:(e,t,a)=>{"use strict";a.d(t,{A6:()=>r,Dt:()=>m,Z5:()=>l,sK:()=>c});var n=a(28416),o=a.n(n),i=a(44012),s=a(75614);const r=e=>e===s.JL?o().createElement(i.Z,{id:"wizard.wizardDescriptionCloud",defaultMessage:"Register your provider to manage your Red Hat products in the cloud."}):o().createElement(i.Z,{id:"wizard.wizardDescriptionRedhat",defaultMessage:"Configure a data source to connect to your Red Hat applications."}),l=e=>e===s.JL?o().createElement(i.Z,{id:"wizard.wizardTitleCloud",defaultMessage:"Add a cloud source"}):o().createElement(i.Z,{id:"wizard.wizardTitleRedhat",defaultMessage:"Add Red Hat source"}),c="https://access.redhat.com/documentation/en-us/cost_management_service/2023",m="no-application"},85017:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ce});var n=a(28416),o=a.n(n),i=a(45697),s=a.n(i),r=a(79442),l=a(67850),c=a(99473),m=a(27361),u=a.n(m),d=a(92092),p=a(99389),g=a(65412),f=a(48880),h=a(64124),E=a(13119);var b=a(86706),y=a(86896),T=a(44012),M=a(4440),x=a(76541),w=a(41868),C=a(64129),I=a(49288),v=a(11454),_=a(35843);const A=({label:e,value:t})=>{const a=(0,y.Z)();return o().createElement(_.Popover,{headerContent:e,bodyContent:t,position:"top",maxWidth:"80%"},o().createElement(v.Button,{variant:"link",isInline:!0,className:"src-c-wizard__summary-buttons"},a.formatMessage({id:"wizard.showMore",defaultMessage:"Show more"})))};A.propTypes={label:s().node,value:s().node};const S=A;var k=a(50142),Z=a(64072),R=a(75614),L=a(81025),z=a(38283),D=a(45410),V=a(18111),N=a(58104);const P=e=>({amazon:L.Jc,azure:z.Jc,google:D.Jc}?.[e]),F=({appName:e,sourceType:t,hcsEnrolled:a})=>{const i=(0,y.Z)(),s=(0,f.default)(),r=(0,b.v9)((({sources:e})=>e.sourceTypes),b.wU),l=s.getState().values.application?.extra?.storage_only,c=r.find((e=>e.name===t))?.product_name;return e===R.Qr?o().createElement(n.Fragment,null,["azure","amazon","google"].includes(t)&&l?o().createElement(M.Alert,{variant:"info",isInline:!0,title:i.formatMessage({id:"cost.warningTitleCUR",defaultMessage:"Don't forget additional configuration steps!"}),actionLinks:o().createElement(C.Text,{component:C.TextVariants.a,href:P(t)},i.formatMessage({id:"cost.customizingReportCUR",defaultMessage:"Customizing your {application} cost and usage report"},{application:c}))},i.formatMessage({id:"cost.warningDescriptionCUR",defaultMessage:"You will need to perform more configuration steps after creating the source. To find more information, click on the link below."})):null,a?null:o().createElement(M.Alert,{variant:"default",isInline:!0,title:i.formatMessage({id:"cost.rbacWarningTitle",defaultMessage:"Manage permissions in User Access"})},i.formatMessage({id:"cost.rbacWarningDescription",defaultMessage:"Make sure to manage permissions for this source in custom roles that contain permissions for Cost Management."}))):e===R.fn&&["google"].includes(t)?o().createElement(M.Alert,{variant:"info",isInline:!0,title:i.formatMessage({id:"azure.rhelWarningTitle",defaultMessage:"This source will not be monitored in Sources"})},i.formatMessage({id:"azure.rhelWarningDescription",defaultMessage:"This source will be represented in the Sources list, but will not reflect true status or resources."})):null};F.propTypes={appName:s().string,sourceType:s().string,hcsEnrolled:s().bool};const O=({term:e,description:t,...a})=>o().createElement(x.DescriptionListGroup,{...a},o().createElement(x.DescriptionListTerm,null,e),o().createElement(x.DescriptionListDescription,null,t));O.propTypes={term:s().node,description:s().node};const q=({sourceTypes:e,applicationTypes:t,showApp:a,showAuthType:n})=>{const i=(0,f.default)(),s=(0,y.Z)(),r=(0,I.useFlag)("sources.wizard.lighthouse"),l=i.getState().values,c=e.find((e=>e.name===l.source_type||e.id===l.source.source_type_id)),m=(0,b.v9)((({sources:e})=>e.hcsEnrolled),b.wU),d=l.authentication&&l.authentication.authtype?l.authentication.authtype:l.auth_select;let p,g,h=[];d&&(p=c.schema.authentication.find((({type:e})=>e===d)),h=p&&p.fields?p.fields:[]),l.source.app_creation_workflow===Z.b&&(g=l.applications.map((e=>e===R.sC&&m?R.X0:t.find((t=>t.id===e))?.display_name)));const E=l.application?t.find((e=>e.id===l.application.application_type_id)):void 0,{display_name:M=s.formatMessage({id:"wizard.notSelected",defaultMessage:"Not selected"}),name:C,id:v}=E||{},_=(0,N.QW)(c.name,d,C);let A=c.schema.endpoint?.fields||[];_&&(A=[],h=h.filter((({name:e})=>!e.includes("authentication."))));const L=((e,t,a="generic",n)=>[...u()(k.Z,[e,"authentication",t,a,"includeStepKeyFields"],[]),...u()(k.Z,[e,"authentication",t,a,"additionalSteps"],[]).map((({name:e})=>e)),`${e}-${t}-${a}-additional-step`,`${e}-${t}-additional-step`,n?`${e}-${n}`:void 0].filter(Boolean))(c.name,d,C,v),z=(0,N.Z$)(c.name,d,C,r,m),D=u()(k.Z,[c.name,"authentication",d,C,"customSteps"],!1);z.length>0&&(h=z.map((e=>[...e.fields,...h.filter((({stepKey:t})=>t&&e.name===t))])).flatMap((e=>e)).filter((({name:e})=>e.startsWith("application.extra")||h.find((t=>t.name===e))||D&&A.find((t=>t.name===e))))),D&&(A=[]),h=(0,N.Ow)(h,c.name,d,C||"generic",m),A=(0,N.i7)(A,c.name);const P=((e,t,a)=>e.map((e=>((e,t,a)=>{let n=u()(t,e.name);if((!e.stepKey||a.includes(e.stepKey))&&!(e.condition&&u()(t,e.condition.when)!==e.condition.is||e.hideField||e.hideInReview))return n&&"password"===e.type&&(n="●●●●●●●●●●●●"),"boolean"==typeof n&&(n=n?o().createElement(w.Label,{color:"green"},o().createElement(T.Z,{id:"wizard.enabled",defaultMessage:"Enabled"})):o().createElement(w.Label,{color:"gray"},o().createElement(T.Z,{id:"wizard.disabled",defaultMessage:"Disabled"}))),!n&&"authentication.password"===e.name&&u()(t,"authentication.id")&&(n="●●●●●●●●●●●●"),{label:e["aria-label"]||e.label,value:n||"-"}})(e,t,a))).filter(Boolean))([...h,...A],l,L).map((({label:e,value:t})=>o().createElement(O,{key:`${e}--${t}`,term:e,description:t.toString().length>150?o().createElement(S,{label:e,value:t}):t})));return o().createElement(o().Fragment,null,o().createElement(x.DescriptionList,{isHorizontal:!0,className:"src-c-wizard__summary-description-list"},o().createElement(O,{term:s.formatMessage({id:"wizard.name",defaultMessage:"Name"}),description:l.source.name}),o().createElement(O,{term:s.formatMessage({id:"wizard.sourceType",defaultMessage:"Source type"}),description:c.product_name}),a&&l.source.app_creation_workflow&&o().createElement(O,{term:s.formatMessage({id:"wizard.configurationMode",defaultMessage:"Configuration mode"}),description:l.source.app_creation_workflow===Z.b?s.formatMessage({id:"wizard.accountAuth",defaultMessage:"Account authorization"}):s.formatMessage({id:"wizard.manualConfig",defaultMessage:"Manual configuration"})}),a&&l.source.app_creation_workflow===Z.b&&o().createElement(O,{term:s.formatMessage({id:"wizard.applications",defaultMessage:"Applications"}),description:g.length?g.map((e=>o().createElement("div",{key:e},e))):s.formatMessage({id:"none",defaultMessage:"None"})}),a&&l.source.app_creation_workflow!==Z.b&&o().createElement(O,{term:s.formatMessage({id:"wizard.application",defaultMessage:"Application"}),description:l.application?.application_type_id===R.sC&&m?R.X0:M}),a&&"oracle-cloud-infrastructure"===l.source_type&&l.application?.extra?.bucket&&o().createElement(O,{term:s.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket"}),description:l.application?.extra?.bucket}),a&&l.application?.extra?.bucket_namespace&&o().createElement(O,{term:s.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket namespace"}),description:l.application?.extra?.bucket_namespace}),a&&"oracle-cloud-infrastructure"===l.source_type&&l.application?.extra?.bucket_region&&o().createElement(O,{term:s.formatMessage({id:"wizard.bucket",defaultMessage:"Bucket region"}),description:l.application?.extra?.bucket_region}),!_&&p&&n&&l.source.app_creation_workflow!==Z.b&&(!l.application?.application_type_id||l.application?.application_type_id===V.Dt)&&o().createElement(O,{term:s.formatMessage({id:"wizard.authenticationType",defaultMessage:"Authentication type"}),description:p.name}),P),o().createElement(F,{appName:C,sourceType:c.name,hcsEnrolled:m}))};q.propTypes={sourceTypes:s().arrayOf(s().shape({id:s().string.isRequired,name:s().string.isRequired,product_name:s().string.isRequired,schema:s().shape({authentication:s().array,endpoint:s().object})})).isRequired,applicationTypes:s().arrayOf(s().shape({id:s().string.isRequired,name:s().string.isRequired,display_name:s().string.isRequired})).isRequired,showApp:s().bool,showAuthType:s().bool},q.defaultProps={showApp:!0,showAuthType:!0};const $=q,j=({Content:e,...t})=>o().createElement(e,{...t});j.propTypes={Content:s().oneOfType([s().element,s().func]).isRequired};const U=j;var B=a(53721),H=a(55795),G=a(28625),W=a(99875);const X=e=>{const{isRequired:t,label:a,helperText:i,hideLabel:s,meta:r,input:l,options:c,mutator:m,DefaultIcon:u,iconMapper:p,...g}=(0,W.Z)(e),h=(0,f.default)(),[E]=(0,n.useState)((()=>{const e={};return c.forEach((({value:t})=>e[t]=p(t,u))),e})),b=g.isMulti||g.multi,y=g.isDisabled||g.isReadOnly,T=l.value||[],M=e=>{y||((e=>{b?(e=>{l.onChange(T.includes(e)?T.filter((t=>t!==e)):[...T,e])})(e):(e=>{l.onChange(T===e?void 0:e)})(e)})(e),l.onBlur())},{error:x,touched:w}=r,C=w&&x;return o().createElement(d.FormGroup,{isRequired:t,label:!s&&a,fieldId:l.name,helperText:i,helperTextInvalid:x,validated:C?"error":"default"},o().createElement(B.Grid,{hasGutter:!0,className:"pf-u-mb-md"},c.map((e=>m(e,h))).map((({value:e,label:t,isDisabled:a})=>{const n=a||y;if(!e)return;const i=E[e];return o().createElement(B.GridItem,{sm:6,md:4,key:e},o().createElement(G.Tile,{className:"src-c-wizard__tile"+(n?" disabled":""),onClick:()=>M(e),tabIndex:n?-1:0,onKeyPress:t=>((e,t,a)=>{32===e.charCode&&(e.preventDefault(),a(t))})(t,e,M),isDisabled:n,title:t,isStacked:!0,isSelected:T.includes(e),...i&&{icon:o().createElement(i,null)}}))}))),o().createElement(d.FormHelperText,null,o().createElement(H.HelperText,null,o().createElement(H.HelperTextItem,{variant:C?"error":"default"},C?x:i))))};X.propTypes={multi:s().bool,isMulti:s().bool,label:s().node,isRequired:s().bool,helperText:s().node,description:s().node,hideLabel:s().bool,name:s().string.isRequired,mutator:s().func,options:s().array,DefaultIcon:s().oneOfType([s().node,s().func,s().element]),iconMapper:s().func,isDisabled:s().bool,isReadOnly:s().bool},X.defaultProps={options:[],iconMapper:(e,t)=>t,mutator:e=>e};const K=X;var Q=a(78411);const J=e=>{const{label:t,input:a,authName:n,supportedAuthTypes:i,disableAuthType:s}=(0,W.Z)(e),r=a.value===n;return a.value&&i&&!i.includes(a.value)&&a.onChange(void 0),o().createElement(Q.Radio,{value:n,isChecked:r,name:a.name,onChange:()=>a.onChange(n),label:t,id:`${a.name}-${n}`,isDisabled:s})};J.propTypes={label:s().string,authName:s().string.isRequired,disableAuthType:s().bool,supportedAuthTypes:s().arrayOf(s().string)},J.defaultProps={disableAuthType:!1};const Y=J;var ee=a(41626);const te=({options:e,mutator:t,className:a,...i})=>{const s=(0,f.default)(),r=s.getState().values,l=r.source_type,c=u()(r,i.name);let m=e.map((e=>t(e,s))).filter(Boolean);return"oracle-cloud-infrastructure"===l&&(m=m.filter((e=>e.value&&e.value!==V.Dt))),(0,n.useEffect)((()=>{!l||c&&m.map((({value:e})=>e)).includes(c)||1!==m.filter((e=>e.value&&e.value!==V.Dt)).length?m.map((({value:e})=>e)).includes(c)||s.change(i.name,V.Dt):s.change(i.name,m[0].value),"oracle-cloud-infrastructure"===l&&m.filter((e=>e.value&&e.value!==V.Dt))&&s.change(i.name,m[0].value)}),[l]),o().createElement(ee.Z,{...i,options:m,FormGroupProps:{className:a??"src-c-wizard__radio"}})};te.propTypes={mutator:s().func.isRequired,options:s().array,name:s().string,className:s().string};const ae=te;var ne=a(8746),oe=a(8618);var ie=a(69385);const se=({Icon:e,...t})=>{const a=(0,n.useRef)();return o().createElement("div",{className:"src-c-checkbox-with-icon"},o().createElement(ie.Z,{...t,type:"checkbox"}),o().createElement("span",{ref:a},o().createElement(e,{appendTo:a.current})))};se.propTypes={Icon:s().elementType.isRequired};const re={"auth-select":Y,description:U,"card-select":K,summary:$,"enhanced-radio":ae,"switch-group":e=>{const{label:t,input:a,options:i,applicationTypes:s}=(0,W.Z)(e),{getState:r}=(0,f.default)(),l=r().values.source_type,c=s.filter((({supported_source_types:e})=>e.includes(l))).map((({id:e})=>e)),m=i.filter((({value:e})=>c.includes(e)));return(0,n.useEffect)((()=>{a.value||a.onChange(m.map((({value:e})=>e)).filter(Boolean))}),[]),o().createElement(d.FormGroup,{label:t,fieldId:a.name},o().createElement(ne.Stack,{hasGutter:!0},m.map((e=>o().createElement(ne.StackItem,{key:e.value},o().createElement(oe.Switch,{label:e.label,onChange:(t,n)=>((e,t)=>e?a.onChange([...a.value,t]):a.onChange(a.value.filter((e=>e!==t))))(n,e.value),isChecked:a.value.includes(e.value),id:e.value}),e.description&&o().createElement("div",{className:"pf-v5-c-switch pf-u-mt-sm"},o().createElement("span",{className:"pf-v5-c-switch__toggle src-m-wizard-hide-me"}),o().createElement("div",{className:"pf-v5-c-switch__label src-c-wizard--switch-description"},e.description)))))))},authentication:e=>{const t=(0,f.default)(),a=t.getState().values,[i]=e?.name?.match(/\d+/)||[],s=i||a.authentication?.id;let r=u()(a,e.name);const[l,c]=(0,n.useState)(!s||r),m=(0,n.useRef)(!0),b=(0,n.useRef)(!1);(0,n.useEffect)((()=>{b.current&&(!m.current&&t.getState().pristine&&(c(!1),m.current=!0),l&&(m.current=!1))})),(0,n.useEffect)((()=>{b.current=!0}),[]);const y=e.validate&&e.validate.filter((({type:e})=>e!==h.Z.REQUIRED)),T={...e,...s?{validate:y,resolveProps:E.Z}:{}};return e.isDisabled?o().createElement(d.FormGroup,{helperText:T.helperText,label:T.label,isRequired:!0},o().createElement(p.TextInput,{"aria-label":"Filled password",value:"•••••••••••••",isDisabled:!0})):!l&&s?o().createElement(d.FormGroup,{helperText:T.helperText,label:T.label,onFocus:()=>c(!0),isRequired:!0},o().createElement(p.TextInput,{"aria-label":"Filled password",value:"•••••••••••••"})):o().createElement(g.Z,{...T,autoFocus:!0})},"checkbox-with-icon":se},le=({componentMapper:e,...t})=>o().createElement(r.Z,{FormTemplate:l.ZP,componentMapper:{...c.ZP,...re,...e},...t});le.propTypes={componentMapper:s().object};const ce=le},13119:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(28416),o=a.n(n),i=a(45697),s=a.n(i),r=a(86896),l=a(92092),c=a(62693),m=a(76429);const u=({validating:e})=>{const t=(0,r.Z)();return o().createElement(l.FormHelperText,{isHidden:!e},o().createElement(c.Spinner,{size:"md",className:"pf-u-mr-md"}),t.formatMessage({id:"wizard.validating",defaultMessage:"Validating"}))};u.propTypes={validating:s().bool.isRequired};const d=(e,{meta:t})=>t.validating?{helperText:o().createElement(m.Z,null,(({validating:e})=>o().createElement(u,{validating:e})))}:t.valid?{validated:"success",FormGroupProps:{validated:"success"}}:{}},82472:()=>{},97890:()=>{},17657:()=>{},22972:()=>{},43389:()=>{},45467:()=>{},32857:()=>{},1580:()=>{},94498:()=>{},28992:()=>{},30187:()=>{},90479:()=>{},78752:()=>{},36974:()=>{},49854:()=>{}}]);
//# sourceMappingURL=../sourcemaps/9925.7660a52dacf84bba0531ea5ec4d8d2ca.js.map