!function(e){function t(t){for(var r,a,o=t[0],i=t[1],c=t[2],s=0,u=[];s<o.length;s++)a=o[s],Object.prototype.hasOwnProperty.call(D,a)&&D[a]&&u.push(D[a][0]),D[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(x&&x(t);u.length;)u.shift()();return M.push.apply(M,c||[]),n()}function n(){for(var e,t=0;t<M.length;t++){for(var n=M[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==D[o]&&(r=!1)}r&&(M.splice(t--,1),e=A(A.s=n[0]))}return e}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!E[e]||!O[e])return;for(var n in O[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0==--h&&0===g&&T()}(e,t),r&&r(e,t)};var a,o=!0,i="aa15a6bfe7b4725f7340",c={},s=[],u=[];function l(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:a!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:_,apply:P,status:function(e){if(!e)return d;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:c[e]};return a=void 0,t}var p=[],d="idle";function f(e){d=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var m,y,b,h=0,g=0,v={},O={},E={};function j(e){return+e+""===e?+e:e}function _(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return o=e,f("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=A.p+""+i+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return f("idle"),null;O={},v={},E=e.c,b=e.h,f("prepare");var t=new Promise((function(e,t){m={resolve:e,reject:t}}));for(var n in y={},D)w(n);return"prepare"===d&&0===g&&0===h&&T(),t}));var t}function w(e){E[e]?(O[e]=!0,h++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=A.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):v[e]=!0}function T(){f("ready");var e=m;if(m=null,e)if(o)Promise.resolve().then((function(){return P(o)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(j(n));e.resolve(t)}}function P(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var n,r,a,o,u;function l(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var a=r.pop(),i=a.id,c=a.chain;if((o=S[i])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(o.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var s=0;s<o.parents.length;s++){var u=o.parents[s],l=S[u];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(l.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),p(n[u],[i])):(delete n[u],t.push(u),r.push({chain:c.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var m={},h=[],g={},v=function(){console.warn("[HMR] unexpected require("+_.moduleId+") to disposed module")};for(var O in y)if(Object.prototype.hasOwnProperty.call(y,O)){var _;u=j(O);var w=!1,T=!1,P=!1,M="";switch((_=y[O]?l(u):{type:"disposed",moduleId:O}).chain&&(M="\nUpdate propagation: "+_.chain.join(" -> ")),_.type){case"self-declined":t.onDeclined&&t.onDeclined(_),t.ignoreDeclined||(w=new Error("Aborted because of self decline: "+_.moduleId+M));break;case"declined":t.onDeclined&&t.onDeclined(_),t.ignoreDeclined||(w=new Error("Aborted because of declined dependency: "+_.moduleId+" in "+_.parentId+M));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(_),t.ignoreUnaccepted||(w=new Error("Aborted because "+u+" is not accepted"+M));break;case"accepted":t.onAccepted&&t.onAccepted(_),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(_),P=!0;break;default:throw new Error("Unexception type "+_.type)}if(w)return f("abort"),Promise.reject(w);if(T)for(u in g[u]=y[u],p(h,_.outdatedModules),_.outdatedDependencies)Object.prototype.hasOwnProperty.call(_.outdatedDependencies,u)&&(m[u]||(m[u]=[]),p(m[u],_.outdatedDependencies[u]));P&&(p(h,[_.moduleId]),g[u]=v)}var I,C=[];for(r=0;r<h.length;r++)u=h[r],S[u]&&S[u].hot._selfAccepted&&g[u]!==v&&C.push({module:u,errorHandler:S[u].hot._selfAccepted});f("dispose"),Object.keys(E).forEach((function(e){!1===E[e]&&function(e){delete D[e]}(e)}));for(var k,x,R=h.slice();R.length>0;)if(u=R.pop(),o=S[u]){var N={},L=o.hot._disposeHandlers;for(a=0;a<L.length;a++)(n=L[a])(N);for(c[u]=N,o.hot.active=!1,delete S[u],delete m[u],a=0;a<o.children.length;a++){var F=S[o.children[a]];F&&((I=F.parents.indexOf(u))>=0&&F.parents.splice(I,1))}}for(u in m)if(Object.prototype.hasOwnProperty.call(m,u)&&(o=S[u]))for(x=m[u],a=0;a<x.length;a++)k=x[a],(I=o.children.indexOf(k))>=0&&o.children.splice(I,1);for(u in f("apply"),i=b,g)Object.prototype.hasOwnProperty.call(g,u)&&(e[u]=g[u]);var V=null;for(u in m)if(Object.prototype.hasOwnProperty.call(m,u)&&(o=S[u])){x=m[u];var B=[];for(r=0;r<x.length;r++)if(k=x[r],n=o.hot._acceptedDependencies[k]){if(-1!==B.indexOf(n))continue;B.push(n)}for(r=0;r<B.length;r++){n=B[r];try{n(x)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:x[r],error:e}),t.ignoreErrored||V||(V=e)}}}for(r=0;r<C.length;r++){var q=C[r];u=q.module,s=[u];try{A(u)}catch(e){if("function"==typeof q.errorHandler)try{q.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||V||(V=n),V||(V=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||V||(V=e)}}return V?(f("fail"),Promise.reject(V)):(f("idle"),new Promise((function(e){e(h)})))}var S={},D={0:0},M=[];function A(t){if(S[t])return S[t].exports;var n=S[t]={i:t,l:!1,exports:{},hot:l(t),parents:(u=s,s=[],u),children:[]};return e[t].call(n.exports,n,n.exports,function(e){var t=S[e];if(!t)return A;var n=function(n){return t.hot.active?(S[n]?-1===S[n].parents.indexOf(e)&&S[n].parents.push(e):(s=[e],a=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),s=[]),A(n)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return A[e]},set:function(t){A[e]=t}}};for(var o in A)Object.prototype.hasOwnProperty.call(A,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(n,o,r(o));return n.e=function(e){return"ready"===d&&f("prepare"),g++,A.e(e).then(t,(function(e){throw t(),e}));function t(){g--,"prepare"===d&&(v[e]||w(e),0===g&&0===h&&T())}},n.t=function(e,t){return 1&t&&(e=n(e)),A.t(e,-2&t)},n}(t)),n.l=!0,n.exports}A.m=e,A.c=S,A.d=function(e,t,n){A.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(e,t){if(1&t&&(e=A(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(A.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)A.d(n,r,function(t){return e[t]}.bind(null,r));return n},A.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},A.p="/beta/apps/sources/",A.h=function(){return i};var I=window.webpackJsonp=window.webpackJsonp||[],C=I.push.bind(I);I.push=t,I=I.slice();for(var k=0;k<I.length;k++)t(I[k]);var x=C;M.push([654,1]),n()}({10:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(346),a=n.n(r),o=n(0),i=n.n(o),c=n(58),s=n(167),u=Object(o.lazy)((function(){return Promise.resolve().then((function(){return a()(n(653))}))})),l=function(){return i.a.createElement(s.a,null,i.a.createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"70",height:"70"}),i.a.createElement("rect",{x:"80",y:"17",rx:"4",ry:"4",width:"300",height:"13"}),i.a.createElement("rect",{x:"80",y:"40",rx:"3",ry:"3",width:"250",height:"10"}))},p={sources:{path:"/sources"},sourcesNew:{path:"/sources/new",writeAccess:!0},sourcesEdit:{path:"/sources/edit/:id",writeAccess:!0},sourcesRemove:{path:"/sources/remove/:id",redirectNoId:!0,writeAccess:!0},sourceManageApps:{path:"/sources/manage_apps/:id",redirectNoId:!0,writeAccess:!0}},d=function(e,t){return e.replace(":id",t)};t.a=function(){return i.a.createElement(o.Suspense,{fallback:i.a.createElement(l,null)},i.a.createElement(c.b,{component:u}))}},110:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return d}));var r=n(17),a=n.n(r),o=n(3),i=n.n(o),c=n(14),s=n(49);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.sortBy,n=e.sortDirection,r=e.pageNumber,a=e.pageSize,o=e.filterValue,i="sort_by[]=".concat(t,":").concat(n),s="limit=".concat(a,"&offset=").concat((r-1)*a),u=Object(c.j)(o),l="?".concat(i,"&").concat(s).concat(u?"&".concat(u):""),p=decodeURIComponent("".concat(window.location.pathname).concat(l));return location.href!==p?history.replaceState("","",p):null},d=function(){var e,t,n={},r=new URLSearchParams(window.location.search),o=r.get("sort_by[]");o&&(e=o.split(":")[0],t=o.split(":")[1],e=Object(s.b)({formatMessage:function(){return""}}).filter((function(e){return e.sortable})).map((function(e){return e.value})).includes(e)?e:"created_at",t=["desc","asc"].includes(t)?t:"desc"),e&&t&&(n={sortBy:e,sortDirection:t});var i,c=r.get("limit"),u=r.get("offset");u&&c&&(i=u/c+1,isNaN(i)&&(i=void 0)),c&&i&&(n=l({},n,{pageNumber:parseInt(i,10),pageSize:parseInt(c,10)}));var p={},d=r.get("filter[name][contains_i]");d&&(p={name:d});var f=r.getAll("filter[source_type_id][]");return f.length>0&&(p=l({},p,{source_type_id:f})),Object.entries(p).map((function(e){var t=a()(e,2);t[0];return t[1]})).filter(Boolean).length>0&&(n=l({},n,{filterValue:p})),n}},14:function(e,t,n){"use strict";n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return E})),n.d(t,"g",(function(){return j}));var r=n(17),a=n.n(r),o=n(94),i=n.n(o);n.d(t,"a",(function(){return i.a}));var c,s=n(347),u=n(70);i.a.interceptors.response.use((function(e){return e.errors&&e.errors.length>0?Promise.reject({detail:e.errors[0].message}):e}));var l=function(){return c||(c=new s.DefaultApi(void 0,u.b,i.a))},p=function(){return i.a.get("".concat(u.b,"/application_types"))},d=function(e){return l().deleteSource(e).catch((function(e){throw{error:{detail:e.errors[0].detail}}}))},f=function(e,t){return"limit:".concat(e,", offset:").concat((t-1)*e)},m=function(e,t){return e?', sort_by:"'.concat(e,":").concat(t,'"'):""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.name&&t.push('name: { contains_i: "'.concat(e.name,'" }')),e.source_type_id&&e.source_type_id.length>0&&t.push("source_type_id: { eq: [".concat(e.source_type_id.map((function(e){return'"'.concat(e,'"')})).join(", "),"] }")),t.length>0?", filter: { ".concat(t.join(", ")," }"):""},b="\n    id,\n    created_at,\n    source_type_id,\n    name,\n    tenant,\n    uid,\n    updated_at,\n    imported,\n    availability_status,\n    source_ref,\n    applications { application_type_id, id, availability_status_error, availability_status },\n    endpoints { id, scheme, host, port, path, receptor_node, role, certificate_authority, verify_ssl, availability_status_error, availability_status, authentications { authtype, availability_status, availability_status_error } }\n",h=function(e){var t=e.pageSize,n=e.pageNumber,r=e.sortBy,a=e.sortDirection,o=e.filterValue;return l().postGraphQL({query:"{ sources(".concat(f(t,n)).concat(m(r,a)).concat(y(o),")\n        { ").concat(b," }\n    }")}).then((function(e){return e.data}))},g=function(e,t){return l().createApplication({source_id:e,application_type_id:t})},v=function(e,t){return l().deleteApplication(e).catch((function(e){var n=a()(e.errors,1)[0].detail;throw{error:{title:t,detail:n}}}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.name&&t.push("filter[name][contains_i]=".concat(e.name)),e.source_type_id&&e.source_type_id.length>0&&e.source_type_id.map((function(e){return t.push("filter[source_type_id][]=".concat(e))})),t.length>0?t.join("&"):""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.a.get("".concat(u.b,"/sources?").concat(O(e)))},j=function(e){return l().postGraphQL({query:"{ sources(filter: { id: { eq: ".concat(e,"}})\n            { ").concat(b," }\n        }")}).then((function(e){return e.data}))}},169:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(65),i=n(14),c=n(70);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var l=function(e){return e.url||null===e.url?function(e){if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{var t=new URL(e),n=t.protocol.replace(/:$/,"");return{scheme:n,host:t.hostname,port:""===t.port?Object(o.a)(n):t.port,path:t.pathname}}catch(e){return{}}}(e.url):e.endpoint?e.endpoint:e},p=function(e,t,n){var r,a,o=[];if(t.source&&o.push(Object(i.i)().updateSource(e.source.id,t.source).catch((function(e){throw{error:{title:n.source,detail:e.errors[0].detail}}}))),t.endpoint||t.url||null===t.url){var s=l(t),p=s.scheme,d=s.host,f=s.port,m=s.path,y=null===f?null:parseInt(f,10),b=u({scheme:p,host:d,path:m,port:null===y?null:isNaN(y)?void 0:y},t.endpoint);o.push(Object(i.i)().updateEndpoint(e.endpoints[0].id,b).catch((function(e){throw{error:{title:n.endpoint,detail:e.errors[0].detail}}})))}if(t.authentications&&Object.keys(t.authentications).forEach((function(e){var r=e.replace("a","");o.push(Object(i.i)().updateAuthentication(r,t.authentications[e]).catch((function(e){throw{error:{title:n.authentication,detail:e.errors[0].detail}}})))})),t.billing_source||t.credentials){var h={};t.credentials&&(h={authentication:{credentials:t.credentials}}),t.billing_source&&(h=u({},h,{billing_source:t.billing_source})),o.push((r=e.source.id,a=h,i.a.patch("".concat(c.a,"/sources/").concat(r,"/"),a)).catch((function(e){throw{error:{title:n.costManagement,detail:e.errors[0].detail}}})))}return Promise.all(o)}},249:function(e,t,n){(t=e.exports=n(8)(!1)).i(n(649),""),t.i(n(650),""),t.i(n(651),""),t.push([e.i,"button:focus{outline:none}.pf-l-gallery{padding-bottom:20px}.pf-c-backdrop>.pf-l-bullseye>.pf-l-bullseye{flex:1}.ins-c-sources__sources-placeholder-loader{margin:0px;padding:0px;min-height:500px}.ins-c-sources__dialog--warning .ins-c-source__delete-icon{color:var(--pf-global--warning-color--100)}.ins-c-sources__dialog--spinnerContainer{min-height:64px;text-align:center}.ins-c-sources__row-vertical-centered td{vertical-align:middle !important}.ins-c-sources__help-cursor:hover{cursor:help}.ins-c-sources__edit-field-group{min-height:36px;display:table;top:0;left:0;height:100%;width:100%}.ins-c-sources__edit-field-group .ins-c-sources__edit-field-group-text-content{display:table-cell;vertical-align:middle;color:var(--pf-global--disabled-color--100)}.ins-c-sources__edit-field-group .ins-c-sources__edit-field-group-text-content.clickable:hover{color:var(--pf-global--Color--100)}.ins-c-sources__edit-field-value{display:inline-block;max-width:calc(100% - 24px);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;vertical-align:middle}.ins-c-sources__availability-ok{color:var(--pf-global--success-color--100)}.ins-c-sources__availability-partially{color:var(--pf-global--warning-color--100)}.ins-c-sources__availability-not-ok{color:var(--pf-global--danger-color--100)}.ins-c-sources__availability-unknown{color:var(--pf-global--icon--Color--light)}.clickable{cursor:pointer}.ins-c-sources__pagination-loader-wrapper{width:200px}.ins-c-sources__icon{min-width:32px;min-height:32px;width:32px;height:32px}\n",""])},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{title:e.formatMessage({id:"sources.name",defaultMessage:"Name"}),value:"name",formatter:"nameFormatter",sortable:!t},{hidden:!0,value:"source_type_id",formatter:"sourceTypeIconFormatter"},{title:e.formatMessage({id:"sources.type",defaultMessage:"Type"}),value:"source_type_id",formatter:"sourceTypeFormatter"},{title:e.formatMessage({id:"sources.application",defaultMessage:"Application"}),value:"applications",formatter:"applicationFormatter"},{title:e.formatMessage({id:"sources.addedDate",defaultMessage:"Date added"}),value:"created_at",formatter:"dateFormatter",sortable:!t},{hidden:!0,value:"imported",formatter:"importedFormatter"},{title:e.formatMessage({id:"sources.status",defaultMessage:"Status"}),value:"availability_status",formatter:"availabilityFormatter"}]},a=r({formatMessage:function(){return""}}).length+1},648:function(e,t,n){var r=n(249);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0},o=n(11)(r,a);r.locals&&(e.exports=r.locals),e.hot.accept(249,(function(){var t=n(249);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,r=0;for(n in e){if(!t||e[n]!==t[n])return!1;r++}for(n in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},65:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return V}));var r=n(23),a=n.n(r),o=n(3),i=n.n(o),c=n(0),s=n.n(c),u=n(5),l=n(20),p=n(34),d=n(158),f=n(253),m=n(105),y=n(24),b=n(348),h=n(77),g=n.n(h),v=n(85),O=n.n(v),E=n(252),j=n.n(E),_=n(106),w=n.n(_);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){return{http:"80",https:"443"}[e]},D=function(e){var t=Object.keys(e).reduce((function(t,n){return P({},t,i()({},n,e[n]||""))}),{}),n=t.scheme,r=void 0===n?"":n,a=t.host,o=void 0===a?"":a,c=t.path,s=void 0===c?"":c,u=t.port,l=void 0===u?"":u,p="".concat(r,"://").concat(o).concat(function(e,t){return t&&String(t)!==S(e)?":".concat(t):""}(r,l)).concat(s);if("://"!==p)return p},M=function(e,t,n){var r=n.appTypes,a=e.map((function(e){var t=r.find((function(t){return t.id===e.application_type_id}));if(t)return t.display_name})).filter((function(e){return void 0!==e}));return s.a.createElement(l.TextContent,null,a.length>0?a.sort((function(e,t){return e.localeCompare(t)})).map((function(e,t){return s.a.createElement(u.Text,{key:e,className:"pf-u-mb-0-on-sm"},e,t<a.length-1&&s.a.createElement("br",{key:t}))})):"--")},A=function(e,t,n){var r=n.sourceTypes.find((function(t){return t.id===e}));return r&&r.product_name||e||""},I=function(e){return s.a.createElement(u.Text,{style:{marginBottom:0},component:u.TextVariants.p,className:"ins-c-sources__help-cursor"},s.a.createElement(b.DateFormat,{type:"relative",date:e}))},C=function(e,t,n){var r=n.sourceTypes;return s.a.createElement(l.TextContent,null,e,s.a.createElement("br",{key:"".concat(t.id,"-br")}),s.a.createElement(u.Text,{key:t.id,component:u.TextVariants.small},function(e,t){var n=t.find((function(t){return t.id===e.source_type_id}));return n&&"openshift"===n.name}(t,r)&&function(e){return e.endpoints&&e.endpoints[0]&&D(e.endpoints[0])}(t)))},k=function(e){if(!e)return null;var t=function(e){return{cfme:s.a.createElement(y.a,{id:"sources.cloudformImportTooltip",defaultMessage:"This source can be managed from your connected CloudForms application."})}[e.toLowerCase()]}(e);return t?s.a.createElement(m.Tooltip,{content:t},s.a.createElement(d.Badge,{isRead:!0,className:"ins-c-sources__help-cursor"},s.a.createElement(y.a,{id:"sources.imported",defaultMessage:"imported"}))):s.a.createElement(d.Badge,{isRead:!0},s.a.createElement(y.a,{id:"sources.imported",defaultMessage:"imported"}))},x=function(){return s.a.createElement(y.a,{id:"sources.unknownError",defaultMessage:"unavailable"})},R=function(e,t){return s.a.createElement(s.a.Fragment,null,t.source&&s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{id:"sources.sourceError",defaultMessage:"Source's status: { error }",values:{error:t.source}}),s.a.createElement("br",null)),t.endpoint&&s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{id:"sources.endpointError",defaultMessage:"Endpoint error: { error }",values:{error:t.endpoint}}),s.a.createElement("br",null)),t.authentications&&s.a.createElement(y.a,{id:"sources.authErrors",defaultMessage:"Authentication {count, plural, one {status} other {statuses}} : { errors }",values:{count:t.authentications.length,errors:t.authentications.map((function(e){var t=e.error,n=e.type;return s.a.createElement(s.a.Fragment,{key:n},s.a.createElement(y.a,{id:"sources.errorAuthTemplate",defaultMessage:"{ type }: { error }",values:{error:t,type:n}}),s.a.createElement("br",null))}))}}),t.applications&&s.a.createElement(y.a,{id:"sources.appErrors",defaultMessage:"Application {count, plural, one {status} other {statutes}}: { errors }",values:{count:t.applications.length,errors:t.applications.map((function(t){var n,r=t.error,a=t.id;return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement(y.a,{id:"sources.errorAppTemplate",defaultMessage:"{ app }: { error }",values:{error:r,app:(null===(n=e.find((function(e){return e.id===a})))||void 0===n?void 0:n.display_name)||a}}),s.a.createElement("br",null))}))}}))},N=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(n={},i()(n,"unavailable",s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(r).length}}),s.a.createElement("hr",null),R(t,r))),i()(n,"available",s.a.createElement(y.a,{id:"sources.appStatusOK",defaultMessage:"Everything works fine."})),i()(n,"partially_available",s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{id:"sources.appStatusPartiallyOK",defaultMessage:"We found {count, plural, one {this error} other {these errors}}.",values:{count:Object.keys(r).length}}),s.a.createElement("hr",null),R(t,r))),n)[e]||s.a.createElement(y.a,{id:"sources.appStatusUnknown",defaultMessage:"Status has not been verified."})},L=function(e,t,n){var r,o,c,p,d,m,b,h,v,E,_=n.appTypes,T=(o=(r=t).availability_status,c=r.availability_status_error,p=r.applications,d=void 0===p?[]:p,m=r.endpoint,b=void 0===m?{authentications:[]}:m,h={},v=0,E=0,"unavailable"===o?(h=P({},h,{source:c||s.a.createElement(x,null)}),v++,E++):"available"===o&&v++,d.map((function(e){"unavailable"===e.availability_status?(h=P({},h,{applications:[].concat(a()(h.applications?h.applications:[]),[{id:e.application_type_id,error:e.availability_status_error||s.a.createElement(x,null)}])}),v++,E++):"available"===e.availability_status&&v++})),"unavailable"===b.availability_status?(h=P({},h,{endpoint:b.availability_status_error||s.a.createElement(x,null)}),v++,E++):"available"===b.availability_status&&v++,b.authentications&&b.authentications.map((function(e){"unavailable"===e.availability_status?(h=P({},h,{authentications:[].concat(a()(h.authentications?h.authentications:[]),[{type:e.authtype,error:e.availability_status_error||s.a.createElement(x,null)}])}),v++,E++):"available"===e.availability_status&&v++})),{errors:h,status:0===E?0===v?"unknown":"available":E===v?"unavailable":"partially_available"}),S=T.status;return s.a.createElement(l.TextContent,{className:"clickable"},s.a.createElement(u.Text,{key:S,component:u.TextVariants.p},s.a.createElement(f.Popover,{"aria-label":"".concat(S," popover"),bodyContent:s.a.createElement("h1",null,N(S,_,T.errors))},s.a.createElement("span",null,function(e){var t;return(t={},i()(t,"unavailable",s.a.createElement(w.a,{className:"ins-c-sources__availability-not-ok"})),i()(t,"available",s.a.createElement(O.a,{className:"ins-c-sources__availability-ok"})),i()(t,"partially_available",s.a.createElement(g.a,{className:"ins-c-sources__availability-partially"})),t)[e]||s.a.createElement(j.a,{className:"ins-c-sources__availability-unknown"})}(S)," ",function(e){var t;return(t={},i()(t,"unavailable",s.a.createElement(y.a,{id:"sources.unavailable",defaultMessage:"Unavailable"})),i()(t,"available",s.a.createElement(y.a,{id:"sources.ok",defaultMessage:"OK"})),i()(t,"partially_available",s.a.createElement(y.a,{id:"sources.partiallyAvailable",defaultMessage:"Partially available"})),t)[e]||s.a.createElement(y.a,{id:"sources.unknown",defaultMessage:"Unknown"})}(S)))))},F=function(e,t,n){var r=n.sourceTypes.find((function(t){return t.id===e}));return r&&r.icon_url?s.a.createElement(p.Bullseye,null,s.a.createElement("img",{src:r.icon_url,alt:r.product_name,className:"ins-c-sources__icon"})):null},V=function(e){return{nameFormatter:C,dateFormatter:I,applicationFormatter:M,sourceTypeFormatter:A,importedFormatter:k,availabilityFormatter:L,sourceTypeIconFormatter:F}[e]||function(e){return function(t){return"undefined ".concat(e," formatter of value: ").concat(t)}}(e)}},653:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(17),i=n.n(o),c=n(0),s=n.n(c),u=n(4),l=n(58),p=n(27),d=n(9),f=n(13),m=n(659),y=n(24),b=n(22),h=n(266),g=n(267),v=n(355),O=n(23),E=n.n(O),j=n(307),_=n(40),w=n(343),T=n(342),P=n(65),S=n(67),D=n.n(S),M=n(39),A=n.n(M),I=n(1),C=n.n(I),k=n(148),x=n(160),R=n(49),N=n(258),L=n(147),F=function(){return s.a.createElement(L.Bullseye,{className:"ins-c-sources__sources-placeholder-loader"},s.a.createElement(N.Spinner,{size:"xl"}))},V=function(e){var t=e.row,n=t.isDeleting,r=A()(t,["isDeleting"]),a=A()(e,["row"]);return n?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:R.a},s.a.createElement(x.RowLoader,null))):s.a.createElement(k.a,D()({},a,{row:r,className:"ins-c-sources__row-vertical-centered"}))};V.propTypes={row:C.a.object.isRequired};var B=n(31),q=n(54),U=n(47),G=n(34),z=n(30),H=n(259),Y=n.n(H),J=function(){var e=Object(u.useDispatch)();return s.a.createElement(G.Bullseye,null,s.a.createElement(B.EmptyState,{variant:B.EmptyStateVariant.small},s.a.createElement(q.EmptyStateIcon,{icon:Y.a}),s.a.createElement(z.Title,{headingLevel:"h2",size:"lg"},s.a.createElement(y.a,{defaultMessage:"No sources found",id:"sources.noResultsFoundTitle"})),s.a.createElement(U.EmptyStateBody,null,s.a.createElement(y.a,{defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources.",id:"sources.noResultsFoundDescription"})),s.a.createElement(f.Button,{variant:"link",onClick:function(){return e(Object(d.d)())}},s.a.createElement(y.a,{defaultMessage:"Clear all filters",id:"sources.clearAllFilters"}))))},W=function(){return Object(u.useSelector)((function(e){return e.sources.loaded}))<=0},K=function(){return Object(u.useSelector)((function(e){return e.user.isOrgAdmin}))},Q=n(10);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(e,t,n,r){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?Object(P.c)(t.formatter)(e[t.value],e,{sourceTypes:n,appTypes:r}):e[t.value]||""}}))},ee=function(e,t,n,r){return e.filter((function(e){return!e.hidden})).reduce((function(e,a){return[].concat(E()(e),[Z({},a,{isOpen:!!a.expanded,cells:$(a,t,n,r),disableActions:!!a.isDeleting})])}),[])},te=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return Z({title:e.title||"",value:e.value},e.sortable&&{transforms:[j.a]})}))},ne=function(e,t){return Z({},e,{},t)},re=function(e,t){return function(n){var r=[{title:e.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),onClick:function(e,n,r){var a=r.id;return t(Object(Q.b)(Q.c.sourceManageApps.path,a))}},{style:{color:"var(--pf-global--danger-color--100)"},title:e.formatMessage({id:"sources.delete",defaultMessage:"Delete"}),onClick:function(e,n,r){var a=r.id;return t(Object(Q.b)(Q.c.sourcesRemove.path,a))}}];return!n.imported&&function(e,t,n){e.splice(1,0,{title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,r){var a=r.id;return n(Object(Q.b)(Q.c.sourcesEdit.path,a))}})}(r,e,t),r}},ae=function(){var e,t=Object(l.f)().push,n=Object(m.a)(),r=W(),a=K(),o=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),p=o.appTypes,f=o.entities,y=o.sourceTypes,b=o.sourceTypesLoaded,h=o.appTypesLoaded,g=o.sortBy,v=o.sortDirection,O=o.numberOfEntities,E=Object(u.useDispatch)(),j=0===O||!r,P=Object(c.useReducer)(ne,(e=Object(R.b)(n,j),{rows:[],sortBy:{},isLoaded:!1,cells:te(e)})),S=i()(P,2),D=S[0],M=S[1],A=function(){var e=Object(R.b)(n,j);return M({rows:ee(f,e,y,p),cells:te(e)})};Object(c.useEffect)((function(){r&&b&&h?(M({isLoaded:!0}),A()):(M({isLoaded:!1}),function(){var e=Object(R.b)(n,j);M({cells:te(e)})}())}),[r,b,h]),Object(c.useEffect)((function(){D.isLoaded&&A()}),[f]);var I=D.rows;return 0===O&&D.isLoaded?I=[{heightAuto:!0,cells:[{props:{colSpan:R.a},title:s.a.createElement(J,null)}]}]:r&&h&&b||(I=[{heightAuto:!0,cells:[{props:{colSpan:R.a,className:"sources-placeholder-row"},title:s.a.createElement(F,null)}]}]),s.a.createElement(_.b,{gridBreakPoint:"grid-lg","aria-label":n.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,n){return E(Object(d.m)(D.cells[t].value,n))},sortBy:{index:D.cells.map((function(e){return e.value})).indexOf(g),direction:v},rows:I,cells:D.cells,actionResolver:r&&a&&O>0?re(n,t):void 0,rowWrapper:V},s.a.createElement(w.a,null),s.a.createElement(T.a,null))},oe=n(138),ie=n(139),ce=n(351),se=n.n(ce),ue=function(e){var t=e.title,n=e.body,r=K();return s.a.createElement(oe.Card,null,s.a.createElement(ie.CardBody,null,s.a.createElement(G.Bullseye,null,s.a.createElement(B.EmptyState,null,s.a.createElement(q.EmptyStateIcon,{icon:se.a}),s.a.createElement(z.Title,{headingLevel:"h5",size:"lg"},t||s.a.createElement(y.a,{id:"sources.emptyStateTitle",defaultMessage:"No sources"})),s.a.createElement(U.EmptyStateBody,null,n||r&&s.a.createElement(y.a,{id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!r&&s.a.createElement(y.a,{id:"sources.emptyStateBodyNotAdmin",defaultMessage:"To define a source, you have to be an organisation admin."})),r&&s.a.createElement(p.b,{to:Q.c.sourcesNew.path},s.a.createElement(f.Button,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary"},s.a.createElement(y.a,{id:"sources.emptyStateButton",defaultMessage:"Add a source"})))))))};ue.propTypes={title:C.a.node,body:C.a.node};var le=ue,pe=n(164),de=n(90),fe=n(79),me=n(21),ye=n.n(me),be=n(352),he=n.n(be),ge=n(20),ve=n(145),Oe=function(e){var t=e.isRequired,n=e.label,r=e.helperText,a=e.hideLabel,o=e.meta,i=e.input,c=e.type,u=e.setEdit,l=o.error,p=o.touched&&l,d=i.value;"boolean"==typeof d&&(d=d?"True":"False");var f="password"===c||i.name.includes("password")?"Click to edit":"Click to add";return s.a.createElement(ve.FormGroup,{isRequired:t,label:!a&&n,fieldId:i.name,isValid:!p,helperText:r,helperTextInvalid:l,onClick:u?function(){return u(i.name)}:void 0,tabIndex:0,onKeyPress:function(e){32===e.charCode&&u&&(e.preventDefault(),u(i.name))}},s.a.createElement("div",{className:"pf-c-form__horizontal-group ins-c-sources__edit-field-group ".concat(u?"clickable":"")},s.a.createElement(ge.TextContent,{className:"ins-c-sources__edit-field-group-text-content ".concat(u?"clickable":"")},s.a.createElement("span",{className:"ins-c-sources__edit-field-value pf-u-mr-sm"},d||(u?f:"")),u&&s.a.createElement(he.a,null))))};Oe.propTypes={label:C.a.string,isRequired:C.a.bool,helperText:C.a.string,meta:C.a.object.isRequired,FieldProvider:C.a.oneOfType([C.a.node,C.a.func]),input:C.a.shape({value:C.a.any,name:C.a.string.isRequired}).isRequired,hideLabel:C.a.bool,setEdit:C.a.func,type:C.a.string};var Ee=function(e){var t=e.FieldProvider,n=A()(e,["FieldProvider"]);return s.a.createElement(t,n,(function(e){return s.a.createElement(Oe,e)}))};Ee.propTypes={FieldProvider:C.a.oneOfType([C.a.node,C.a.func]).isRequired};var je=Ee;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e){return s.a.createElement(ye.a,D()({layoutMapper:de.layoutMapper,formFieldsMapper:we({},de.formFieldsMapper,{},b.mapperExtension,{"edit-field":je})},e))},Pe=function(e,t,n){return[{name:"source.name",label:s.a.createElement(y.a,{id:"sources.sourceName",defaultMessage:"Source name"}),component:e["source.name"]?me.componentTypes.TEXT_FIELD:"edit-field",setEdit:e["source.name"]?void 0:t,validate:[function(e){return Object(b.asyncValidator)(e,n)}],isRequired:!0},{name:"source_type",label:s.a.createElement(y.a,{id:"sources.sourceType",defaultMessage:"Source type"}),isReadOnly:!0,component:"edit-field"}]},Se=n(32),De=n.n(Se),Me=n(5);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e,t,n,r){return e.map((function(e){var a=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name,o=n[a],i=Ie({},e,{name:a,component:o?e.component:"edit-field"});return o||(i.setEdit=r),"password"===i.name.split(".").pop()&&(i.helperText=s.a.createElement(y.a,{id:"sources.passwordResetHelperText",defaultMessage:"Changing this resets your current { label }.",values:{label:i.label}}),i.isRequired=!1,i.validate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.type!==me.validatorTypes.REQUIRED}))}(i.validate)),i}))},ke=function(e,t,n,r){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var a,o=t.schema.authentication.find((function(t){return t.type===e.authtype}));if(!o)return a=e.authtype,{component:"description",name:"".concat(a,"-unsupported"),Content:function(){return s.a.createElement(ge.TextContent,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.unsupportedAuthType",defaultMessage:"Authentication type of { type } is no longer supported.",values:{type:a}})))}};var i=function(e,t){return De()(b.hardcodedSchemas,[e,"authentication",t,"generic","includeStepKeyFields"],[])}(t.name,e.authtype),c=o.fields.filter((function(e){return!e.stepKey||i.includes(e.stepKey)})).map((function(n){return Ie({},n,{},function(e,t,n){return De()(b.hardcodedSchemas,[e,"authentication",t,"generic",n],{})}(t.name,e.authtype,n.name))}));return{component:me.componentTypes.SUB_FORM,title:o.name,name:o.name,fields:[Ce(c,e.id,n,r)]}})):[]};function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Re=[me.componentTypes.CHECKBOX,me.componentTypes.SWITCH],Ne=function(e,t,n){return e.map((function(e){var r=t[e.name],o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{component:r||Re.includes(e.component)?e.component:"edit-field"});return r||Re.includes(e.component)||(o.setEdit=n),o}))};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fe=function(e,t,n){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var r=e.schema.endpoint.fields.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},function(e,t){return De()(b.hardcodedSchemas,[e,"endpoint",t],{})}(e.name,t.name))}));return{component:me.componentTypes.SUB_FORM,title:s.a.createElement(y.a,{id:"sources.endpoint",defaultMessage:"Endpoint"}),name:"endpoint",fields:Ne(r,t,n)}}};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe="/insights/platform/cost-management",Ue=["billing_source","credentials"],Ge=function(e){var t=e.name;return Ue.some((function(e){return t.startsWith(e)}))},ze=function(e){return Object.keys(e).map((function(t){return e[t].fields.filter(Ge)})).flatMap((function(e){return e}))},He=function(e,t,n){var r=void 0;return n.forEach((function(n){var a=r?{}:De()(b.hardcodedSchemas,[e,"authentication",n],{});Object.keys(a).find((function(a){var o=De()(b.hardcodedSchemas,[e,"authentication",n,a,t],void 0);if(o)return r=o,!0}))})),r||{}},Ye=function(e,t,n){return"openshift"===n.name?[{name:"source.source_ref",label:s.a.createElement(y.a,{id:"sources.clusterIdentifier",defaultMessage:"Cluster identifier"}),isRequired:!0,setEdit:e["source.source_ref"]?void 0:t,validate:[{type:me.validatorTypes.REQUIRED}],component:e["source.source_ref"]?me.componentTypes.TEXT_FIELD:"edit-field"}]:[]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=a.find((function(e){return e.name===qe}));if(i){var c=e.find((function(e){return e.application_type_id===i.id}));if(c){var s=ze(t.schema.authentication),u=o.authentications?o.authentications.map((function(e){return e.authtype})):[],l=s.map((function(e){return Be({},e,{},He(t.name,e.name,u))}));return{component:me.componentTypes.SUB_FORM,title:i.display_name,name:i.display_name,fields:[].concat(E()(Ne(l,n,r)),E()(Ye(n,r,t)))}}}},We=function(e,t,n,r,a,o){return[Je(e,t,n,r,a,o)]},Ke=function(e,t,n,r,a){return{fields:[].concat(E()(Pe(t,n,e.source.id)),E()(ke(e.authentications,r,t,n)),E()(We(e.applications,r,t,n,a,e)),[!!(e.endpoints&&e.endpoints.length>0)&&Fe(r,t,n)]).filter(Boolean)}},Qe=n(14),Xe=n(70);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=n(256),tt=function(e){var t=e.children,n=A()(e,["children"]);return s.a.createElement(et.Form,D()({},n,{isHorizontal:!0}),t)};tt.propTypes={children:C.a.node};var nt=tt,rt=n(86),at=n(66),ot=function(){return s.a.createElement(rt.Grid,null,s.a.createElement(at.GridItem,{xs:12},s.a.createElement(z.Title,{headingLevel:z.TitleLevel.h1,size:"3xl"},s.a.createElement(y.a,{id:"sources.editSource",defaultMessage:"Edit a source"}))),s.a.createElement(at.GridItem,{xs:12},s.a.createElement(y.a,{id:"sources.editSourceDescription",defaultMessage:"You are editing a source."})))},it=n(353),ct=n.n(it);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ut=function(e,t){var n,r,o=e.endpoints,i=e.authentications,c=A()(e,["endpoints","authentications"]),s={};return i&&i.length>0&&i.forEach((function(e){s["a".concat(e.id)]=e})),o&&o.length>0&&(n=o[0]),n&&(r=n.scheme||n.host||n.path||n.port?Object(P.b)(n):void 0),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source_type:t,endpoint:n,authentications:s,url:r},c)},lt=function(e,t,n,r,a,o){return n(Object(d.o)(r,function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){ct()(n,t,De()(e,t))})),n}(e,t),a.formatMessage({id:"sources.modifiedNotificationTitle",defaultMessage:'"{ name }" was modified successfully.'},{name:r.source.name}),a.formatMessage({id:"sources.modifiedNotificationDescription",defaultMessage:"The source was successfully modified."}),{authentication:a.formatMessage({id:"sources.sourceEditAuthFailure",defaultMessage:"Authentication update failure."}),source:a.formatMessage({id:"sources.sourceEditFailure",defaultMessage:"Source update failure."}),endpoint:a.formatMessage({id:"sources.sourceEditEndpointFailure",defaultMessage:"Endpoint update failure."}),costManagement:a.formatMessage({id:"sources.sourceCostmanagementFailure",defaultMessage:"Cost Management update failure."})})).then((function(){o(Q.c.sources.path),n(Object(d.g)())}))};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={loading:!0,editing:{},source:void 0,initialValues:{},sourceType:void 0,schema:void 0},mt=function(e,t){return dt({},e,{},t)},yt=function(){var e=Object(c.useReducer)(mt,ft),t=i()(e,2),n=t[0],r=t[1],o=Object(l.h)().id,p=Object(l.f)(),f=n.loading,y=n.editing,b=n.source,h=n.initialValues,g=n.sourceType,v=n.schema,O=Object(m.a)(),E=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),j=E.sourceTypes,_=E.appTypes,w=E.sourceTypesLoaded,T=E.appTypesLoaded,P=Object(u.useDispatch)();Object(c.useEffect)((function(){(function(e){return Promise.all([Object(Qe.i)().showSource(e),Object(Qe.i)().listSourceEndpoints(e),Object(Qe.i)().listSourceApplications(e),(t=e,Qe.a.get("".concat(Xe.a,"/sources/").concat(t,"/"))).catch((function(){}))]).then((function(e){var t=i()(e,4),n=t[0],r=t[1],a=t[2],o=t[3],c=r&&r.data&&r.data[0],s={source:n,applications:a.data};return o&&(s=$e({},s,{billing_source:o.billing_source,credentials:o.authentication.credentials})),c?Object(Qe.i)().listEndpointAuthentications(c.id).then((function(e){return $e({},s,{endpoints:r.data,authentications:e.data})})):s}));var t})(o).then((function(e){e.source.imported&&function(e,t,n,r){e(Object(d.b)(t.formatMessage({id:"sources.importSourceCannotEdited",defaultMessage:"Source { name } is imported."},{name:r}),"danger",t.formatMessage({id:"sources.importedSourcesCannotEdited",defaultMessage:"Imported sources cannot be edited."}))),n.push(Q.c.sources.path)}(P,O,p,e.source.name),r({source:e})}))}),[]);var S=function(e){return r({editing:dt({},y,a()({},e,!y[e]))})};Object(c.useEffect)((function(){if(b&&T&&w){var e=j.find((function(e){return e.id===b.source.source_type_id}));r({sourceType:e,initialValues:ut(b,e.product_name),schema:Ke(b,y,S,e,_),loading:!1})}}),[T,b,w]),Object(c.useEffect)((function(){b&&!f&&r({schema:Ke(b,y,S,g,_)})}),[y]);var D=function(){return p.push(Q.c.sources.path)};return!T||!w||f?s.a.createElement(fe.Modal,{title:O.formatMessage({id:"sources.editSource",defaultMessage:"Edit a source."}),header:s.a.createElement(ot,null),isOpen:!0,isLarge:!0,onClose:D},s.a.createElement("div",{className:"ins-c-sources__dialog--spinnerContainer"},s.a.createElement(pe.Spinner,null))):s.a.createElement(fe.Modal,{title:O.formatMessage({id:"sources.editSource",defaultMessage:"Edit a source."}),header:s.a.createElement(ot,null),isOpen:!0,isLarge:!0,onClose:D},s.a.createElement(Te,{onCancel:D,schema:v,onSubmit:function(e,t){return lt(e,t.getState().dirtyFields,P,b,O,p.push)},layoutMapper:dt({},de.layoutMapper,{FormWrapper:nt}),clearedValue:null,canReset:!0,disableSubmit:["submitting"],onReset:function(){return r({editing:{}})},initialValues:h,buttonsLabels:{submitLabel:O.formatMessage({id:"sources.save",defaultMessage:"Save"})}}))},bt=n(108),ht=n(80),gt=n(165),vt=n(146),Ot=n(255),Et=n(159),jt=n(77),_t=n.n(jt),wt=function(){var e=Object(l.h)().id;return Object(u.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))},Tt=function(e){var t=e.setApplicationToRemove,n=e.breakpoints,r=e.namePrefix,a=Object(u.useSelector)((function(e){return e.sources.appTypes})),o=wt(),i=o.applications.map((function(e){var t=e.application_type_id,n=a.find((function(e){return e.id===t}));return n?n.display_name:void 0}));return o.applications.filter((function(e){return!e.isDeleting})).map((function(e){var t=a.find((function(t){return t.id===e.application_type_id}));if(t)return{display_name:t.display_name,id:e.id,dependent_applications:t.dependent_applications}})).sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){var a=e.display_name,o=e.id,c=e.dependent_applications;return s.a.createElement(ge.TextContent,{key:o},s.a.createElement(rt.Grid,null,s.a.createElement(at.GridItem,{md:n.display_name||4},s.a.createElement(Me.Text,{component:Me.TextVariants.p,style:{marginBottom:0}},r,a)),s.a.createElement(at.GridItem,{md:n.remove||8,className:"ins-c-sources__remove-app"},s.a.createElement(f.Button,{variant:f.ButtonVariant.link,isInline:!0,onClick:function(){return t({id:o,display_name:a,dependent_applications:c,sourceAppsNames:i})}},s.a.createElement(y.a,{id:"sources.remove",defaultMessage:"Remove"})))))}))};Tt.propTypes={setApplicationToRemove:C.a.func.isRequired,breakpoints:C.a.shape({display_name:C.a.number,remove:C.a.number}),namePrefix:C.a.node},Tt.defaultProps={breakpoints:{}};var Pt=Tt,St=function(e){var t=e.app,n=e.onCancel,r=Object(m.a)(),a=Object(u.useSelector)((function(e){return e.sources.appTypes})),o=wt(),i=Object(u.useDispatch)(),c=t.dependent_applications.map((function(e){var n=a.find((function(t){return t.name===e}));return n&&t.sourceAppsNames.includes(n.display_name)?n.display_name:void 0})).filter((function(e){return e}));return s.a.createElement(fe.Modal,{className:"ins-c-sources__dialog--warning",title:"Remove ".concat(t.display_name," application"),isOpen:!0,isSmall:!0,onClose:n,isFooterLeftAligned:!0,actions:[s.a.createElement(f.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){var e=r.formatMessage({id:"sources.removeAppWarning",defaultMessage:"{ name } was removed from this source."},{name:t.display_name}),a=r.formatMessage({id:"sources.removeAppError",defaultMessage:"Removing of { name } application from this source was unsuccessful."},{name:t.display_name});return n(),i(Object(d.j)(t.id,o.id,e,a))}},s.a.createElement(y.a,{id:"sources.remove",defaultMessage:"Remove"})),s.a.createElement(f.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:n},s.a.createElement(y.a,{id:"sources.cancel",defaultMessage:"Cancel"}))]},s.a.createElement(bt.Split,{gutter:"md"},s.a.createElement(ht.SplitItem,null,s.a.createElement(_t.a,{size:"xl",className:"ins-m-alert ins-c-source__delete-icon"})),s.a.createElement(ht.SplitItem,{isFilled:!0},s.a.createElement(gt.Stack,{gutter:"md"},s.a.createElement(ge.TextContent,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.deleteAppWarning",defaultMessage:"Are you sure to remove { appName } from this source?",values:{appName:t.display_name}})),c.length>0&&s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.deleteAppDetails",defaultMessage:"This change will affect these applications: { apps }.",values:{apps:c}})))))))};St.propTypes={app:C.a.shape({id:C.a.string.isRequired,display_name:C.a.string.isRequired,dependent_applications:C.a.arrayOf(C.a.string),sourceAppsNames:C.a.arrayOf(C.a.string)}).isRequired,onCancel:C.a.func.isRequired};var Dt=St,Mt=function(){var e=Object(l.f)().push,t=Object(c.useState)(!1),n=i()(t,2),r=n[0],a=n[1],o=Object(c.useState)({}),p=i()(o,2),b=p[0],h=p[1],g=Object(m.a)(),v=wt(),O=Object(u.useDispatch)(),E=function(){return e(Q.c.sources.path)},j=v.applications.some((function(e){return!e.isDeleting})),_=v.applications.length>0?[s.a.createElement(f.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:E},s.a.createElement(y.a,{id:"sources.close",defaultMessage:"Close"}))]:[s.a.createElement(f.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){E(),O(Object(d.l)(v.id,g.formatMessage({id:"sources.notificationDeleteMessage",defaultMessage:"{title} was deleted successfully."},{title:v.name})))},isDisabled:!r},s.a.createElement(y.a,{id:"sources.deleteConfirm",defaultMessage:"Delete this source and its data"})),s.a.createElement(f.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:E},s.a.createElement(y.a,{id:"sources.deleteCancel",defaultMessage:"Do not delete this source"}))],w=v.applications.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.deleteTextBodyWithApp",defaultMessage:"This action cannot be enacted until all assigned applications have been removed from this source."})),s.a.createElement(f.Button,{variant:"link",isInline:!0,onClick:function(t){return e(Object(Q.b)(Q.c.sourceManageApps.path,v.id))}},s.a.createElement(Me.Text,{component:Me.TextVariants.p,style:{marginBottom:0}},s.a.createElement(y.a,{id:"sources.connectedApps",defaultMessage:"Connected applications:"}))),j?s.a.createElement(Pt,{breakpoints:{display_name:8,remove:4},setApplicationToRemove:h,namePrefix:"- "}):s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.connectedApps",defaultMessage:"Connected applications are being removed."}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.deleteTextBody",defaultMessage:'Are you sure that you want to delete "{ name }"?',values:{name:v.name}})),s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.delete-text-body-2",defaultMessage:"Deleting this source will permanently delete:"})),s.a.createElement(Ot.TextList,null,s.a.createElement(Et.TextListItem,null,s.a.createElement(y.a,{id:"sources.deleteTextBody3",defaultMessage:"All data collected"})),s.a.createElement(Et.TextListItem,null,s.a.createElement(y.a,{id:"sources.deleteTextBody4",defaultMessage:"Any and all historical data"}))),s.a.createElement(vt.Checkbox,{label:g.formatMessage({id:"sources.deleteCheckboxTitle",defaultMessage:"I acknowledge that this action cannot be undone."}),onChange:function(){return a((function(e){return!e}))},"aria-label":g.formatMessage({id:"sources.deleteCheckboxTitle",defaultMessage:"I acknowledge that this action cannot be undone."}),id:"acknowledgeDelete",name:"acknowledgeDelete",isChecked:r}));return s.a.createElement(fe.Modal,{className:"ins-c-sources__dialog--warning",title:g.formatMessage({id:"sources.deleteTitle",defaultMessage:"Delete {title}"},{title:v.name}),isOpen:!0,isSmall:!0,onClose:E,actions:_,isFooterLeftAligned:!0},b.id&&s.a.createElement(Dt,{app:b,onCancel:function(){return h({})}}),s.a.createElement(bt.Split,{gutter:"md"},s.a.createElement(ht.SplitItem,null,s.a.createElement(_t.a,{size:"xl",className:"ins-m-alert ins-c-source__delete-icon"})),s.a.createElement(ht.SplitItem,{isFilled:!0},s.a.createElement(gt.Stack,{gutter:"md"},s.a.createElement(ge.TextContent,null,w)))))},At=n(96),It=n.n(At),Ct=n(166),kt=n.n(Ct),xt=n(71),Rt=n.n(xt),Nt=n(72),Lt=n.n(Nt),Ft=n(59),Vt=function(){var e=Object(c.useState)({}),t=i()(e,2),n=t[0],r=t[1],a=Object(u.useSelector)((function(e){return e.sources.sourceTypes})),o=wt(),l=a.find((function(e){return e.id===o.source_type_id})),p=o.applications.filter((function(e){return!e.isDeleting}));return s.a.createElement(s.a.Fragment,null,n.id&&s.a.createElement(Dt,{app:n,onCancel:function(){return r({})}}),s.a.createElement(ge.TextContent,null,s.a.createElement(Ft.Grid,{gutter:"md"},s.a.createElement(Ft.GridItem,{md:2},s.a.createElement(Me.Text,{component:Me.TextVariants.h4},s.a.createElement(y.a,{id:"sources.sourceName",defaultMessage:"Source name"}))),s.a.createElement(Ft.GridItem,{md:2},s.a.createElement(Me.Text,{component:Me.TextVariants.h4},s.a.createElement(y.a,{id:"sources.type",defaultMessage:"Type"}))),s.a.createElement(Ft.GridItem,{md:8},s.a.createElement(Me.Text,{component:Me.TextVariants.h4},s.a.createElement(y.a,{id:"sources.apps",defaultMessage:"Applications"}))),s.a.createElement(Ft.GridItem,{md:2},s.a.createElement(Me.Text,{component:Me.TextVariants.p},o.name)),s.a.createElement(Ft.GridItem,{md:2},s.a.createElement(Me.Text,{component:Me.TextVariants.p},l?l.product_name:s.a.createElement(y.a,{id:"sources.typeNotFound",defaultMessage:"Type not found"}))),s.a.createElement(Ft.GridItem,{md:8},p.length>0?s.a.createElement(Pt,{setApplicationToRemove:r}):s.a.createElement(y.a,{id:"sources.noApps",defaultMessage:"No applications"})))))},Bt=function(e){var t=e.formOptions,n=e.authenticationValues,r=e.modifiedValues,a=Object(c.useState)((function(){return function(t){return e!==t&&(e=t,!0)};var e})),o=i()(a,1)[0],s=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),l=s.appTypes;return function(e){var t=e.sourceTypes,n=e.source,r=e.appTypes,a=e.formOptions,o=e.checkAuthType,i=e.authenticationValues,c=e.modifiedValues,s=t.find((function(e){return e.id===n.source_type_id})),u=a.getState(),l=r.find((function(e){return e.id===De()(u,"values.application.application_type_id",void 0)})),p=De()(l,"supported_authentication_types[".concat(s.name,"][0]"),"");if(o(p)){a.change("supported_auth_type",p);var d=i.find((function(e){return e.authtype===p}));if(d)if(c&&c.authentication){var f=Rt()(Lt()(d),c.authentication);a.change("authentication",f)}else a.change("authentication",d);else c&&c.authentication?a.change("authentication",c.authentication):a.change("authentication",void 0)}}({sourceTypes:s.sourceTypes,checkAuthType:o,formOptions:t,authenticationValues:n,appTypes:l,source:wt(),modifiedValues:r}),null};Bt.propTypes={formOptions:C.a.shape({getState:C.a.func.isRequired,change:C.a.func.isRequired}).isRequired,authenticationValues:C.a.arrayOf(C.a.object),modifiedValues:C.a.object};var qt=function(){return s.a.createElement(ge.TextContent,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.allApplicationsAssigned",defaultMessage:"All available applications have already been added to this source or there is no available application for this source type."})))},Ut=function(){return s.a.createElement(ge.TextContent,null,s.a.createElement(Me.Text,{component:Me.TextVariants.p},s.a.createElement(y.a,{id:"sources.reviewAddAppSummary",defaultMessage:"Review the information below and click Finish to add the application to your source."})," ",s.a.createElement("br",null),s.a.createElement(y.a,{id:"sources.backGuide",defaultMessage:"Use the Back button to make changes."})))},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.find((function(e){return e.authtype===De()(t,"supported_authentication_types.".concat(n,"[0]"))}))},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,c=e.length>0,s=c?"summary":void 0,u=[];if(!o.imported&&c){var l=n.find((function(e){return e.id===o.source_type_id})),p=l.schema.endpoint.hidden?l.schema.endpoint.fields:[],d=0===p.length;r.forEach((function(e){if(e.supported_source_types.includes(l.name)){var t=Gt(a,e,l.name);u.push(b.schemaBuilder.createSpecificAuthTypeSelection(l,e,p,!1,t))}})),l.schema.authentication.forEach((function(e){r.forEach((function(t){if(t.supported_source_types.includes(l.name)){var n=b.schemaBuilder.getAdditionalSteps(l.name,e.type,t.name);if(n.length>0){var r=Gt(a,t,l.name);u.push.apply(u,E()(b.schemaBuilder.createAdditionalSteps(n,l.name,e.type,d,e.fields,t.name,r)))}}}))})),d&&u.push(b.schemaBuilder.createEndpointStep(l.schema.endpoint,l.name)),s=function(e){var t=e.values.application,n=t||{},r=n.application_type_id?n.application_type_id:"";return"".concat(l.name,"-").concat(r)}}var f=c?{component:"card-select",name:"application.application_type_id",options:e,label:t.formatMessage({id:"sources.chooseAppToAdd",defaultMessage:"Choose an application to add"}),DefaultIcon:null,isRequired:!0,validate:[{type:me.validatorTypes.REQUIRED}]}:{component:"description",name:"description-no-options",validate:[{type:me.validatorTypes.REQUIRED}],Content:qt};return{fields:[{component:me.componentTypes.WIZARD,name:"wizard",title:t.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),inModal:!0,predictSteps:!0,showTitles:!0,crossroads:["application.application_type_id"],description:t.formatMessage({id:"sources.addAppDescription",defaultMessage:"You are managing applications of this source."}),buttonLabels:{submit:t.formatMessage({id:"sources.finish",defaultMessage:"Finish"}),cancel:t.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}),back:t.formatMessage({id:"sources.back",defaultMessage:"Back"})},fields:[{nextStep:s,title:t.formatMessage({id:"sources.selectApp",defaultMessage:"Select application"}),stepKey:1,name:"selectAppStep",fields:[{component:"description",name:"description",Content:Vt},f,{component:"description",name:"authtypesetter",Content:Bt,authenticationValues:a,hideField:!0,modifiedValues:i}]},{title:t.formatMessage({id:"sources.review",defaultMessage:"Review"}),stepKey:"summary",name:"summary",fields:[{component:"description",name:"description-summary",Content:Ut},{component:"summary",name:"summary",sourceTypes:n,applicationTypes:r}]}].concat(u)}]}},Ht=n(78),Yt=function(e){var t=e.onClose,n=e.customText;return s.a.createElement(G.Bullseye,null,s.a.createElement(B.EmptyState,{variant:B.EmptyStateVariant.full},s.a.createElement("div",null,s.a.createElement(pe.Spinner,null)),s.a.createElement(U.EmptyStateBody,null,n),t&&s.a.createElement(Ht.EmptyStateSecondaryActions,null,s.a.createElement(f.Button,{variant:"link",onClick:t},s.a.createElement(y.a,{id:"sources.cancel",defaultMessage:"Cancel"})))))};Yt.propTypes={onClose:C.a.func,customText:C.a.node},Yt.defaultProps={customText:s.a.createElement(y.a,{id:"sources.loading",defaultMessage:"Loading, please wait."})};var Jt=Yt,Wt=n(254),Kt=n.n(Wt),Qt=function(e){var t=e.onClose,n=e.onRetry,r=e.message,a=e.title;return s.a.createElement(G.Bullseye,null,s.a.createElement(B.EmptyState,{variant:B.EmptyStateVariant.full},s.a.createElement(q.EmptyStateIcon,{icon:Kt.a,color:"var(--pf-global--danger-color--100)"}),s.a.createElement(z.Title,{headingLevel:"h5",size:"lg"},a),s.a.createElement(U.EmptyStateBody,null,r),s.a.createElement(f.Button,{variant:"primary",onClick:t},s.a.createElement(y.a,{id:"sources.backToSources",defaultMessage:"Back to Sources"})),n&&s.a.createElement(Ht.EmptyStateSecondaryActions,null,s.a.createElement(f.Button,{variant:"link",onClick:n},s.a.createElement(y.a,{id:"sources.retry",defaultMessage:"Retry"})))))};Qt.propTypes={onClose:C.a.func.isRequired,message:C.a.node.isRequired,title:C.a.node.isRequired,onRetry:C.a.func};var Xt=Qt,Zt=function(e){var t=e.setState,n=e.goToSources,r=e.error;return s.a.createElement(Xt,{onClose:n,message:s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{id:"sources.successAddApp",defaultMessage:"Your application has not been successfully added:"}),s.a.createElement("br",null),s.a.createElement(ge.TextContent,null,s.a.createElement(Me.Text,{component:Me.TextVariants.h6},r))),title:s.a.createElement(y.a,{id:"sources.configurationSuccessful",defaultMessage:"Configuration unsuccessful"}),onRetry:function(){return t({state:"wizard"})}})};Zt.propTypes={setState:I.PropTypes.func.isRequired,goToSources:I.PropTypes.func.isRequired,error:I.PropTypes.string.isRequired};var $t=Zt,en=n(85),tn=n.n(en),nn=function(e){var t=e.onClose,n=e.title,r=e.successfulMessage,a=e.secondaryActions;return s.a.createElement(G.Bullseye,null,s.a.createElement(B.EmptyState,{variant:B.EmptyStateVariant.full},s.a.createElement(q.EmptyStateIcon,{icon:tn.a,color:"var(--pf-global--success-color--100)"}),s.a.createElement(z.Title,{headingLevel:"h5",size:"lg"},n),s.a.createElement(U.EmptyStateBody,null,r),s.a.createElement(f.Button,{variant:"primary",onClick:t},s.a.createElement(y.a,{id:"sources.backToSources",defaultMessage:"Back to Sources"})),a&&s.a.createElement(Ht.EmptyStateSecondaryActions,null,a)))};nn.propTypes={onClose:C.a.func.isRequired,successfulMessage:C.a.node.isRequired,title:C.a.node.isRequired,secondaryActions:C.a.node};var rn=nn,an=function(e){var t=e.setState,n=e.goToSources;return s.a.createElement(rn,{onClose:n,successfulMessage:s.a.createElement(y.a,{id:"sources.successAddApp",defaultMessage:"Your application has been successfully added."}),title:s.a.createElement(y.a,{id:"sources.configurationSuccessful",defaultMessage:"Configuration successful"}),secondaryActions:s.a.createElement(f.Button,{variant:"link",onClick:function(){return t({state:"wizard"})}},s.a.createElement(y.a,{id:"sources.continueManageApp",defaultMessage:"Continue managing applications"}))})};an.propTypes={setState:I.PropTypes.func.isRequired,goToSources:I.PropTypes.func.isRequired};var on=an,cn=n(257),sn=function(e){var t=e.step,n=e.goToSources,r=Object(m.a)();return s.a.createElement(cn.Wizard,{isOpen:!0,onClose:n,title:r.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),description:r.formatMessage({id:"sources.addAppDescription",defaultMessage:"You are managing applications of this source."}),steps:[{name:"Finish",component:t,isFinishedStep:!0}]})};sn.propTypes={step:I.PropTypes.node.isRequired,goToSources:I.PropTypes.func.isRequired};var un=sn,ln=n(144),pn=n.n(ln),dn=n(112),fn=n(73),mn=n.n(fn),yn=n(169);function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gn=function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"===pn()(t[n])?mn()(t[n])?delete t[n]:e(t[n]):void 0===t[n]&&delete t[n]})),t},vn=function(){var e=kt()(It.a.mark((function e(t,n,r,a){var o,i,c,s,u,l,p,d,f,m,y,h,g,v,O,E,j,_,w,T,P,S,D,M,I,C,k,x,R;return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.getState(),i=o.values,c=i.authentication?i.authentication.id:void 0,s=c?r.find((function(e){return e.id===c})):void 0,u=t.authentication,l=A()(t,["authentication"]),p=Object(dn.addedDiff)(a,l),d=Object(dn.updatedDiff)(a,l),f=Object(dn.addedDiff)(s,u),m=Object(dn.updatedDiff)(s,u),y=gn(hn({},Rt()(Lt()(p),d),{authentication:hn({},Rt()(Lt()(f),m))})),e.prev=10,i.source&&i.source.id){e.next=13;break}throw"Missing source id";case 13:if(h=i.source.id,g=i.endpoint?i.endpoint.id:void 0,v=[],y.source&&!mn()(y.source)&&v.push(Object(Qe.i)().updateSource(h,y.source)),O=y.endpoint&&!mn()(y.endpoint),E=y.url&&!mn()(y.url),!O&&!E){e.next=32;break}if(j=Object(yn.b)(y),_=j.scheme,w=j.host,T=j.port,P=j.path,S=parseInt(T,10),D=gn(hn({},y.endpoint,{scheme:_,host:w,port:isNaN(S)?void 0:S,path:P})),!g){e.next=27;break}v.push(Object(Qe.i)().updateEndpoint(g,D)),e.next=32;break;case 27:return M=hn({},D,{default:!0,source_id:h}),e.next=30,Object(Qe.i)().createEndpoint(M);case 30:I=e.sent,g=I.id;case 32:return y.authentication&&!mn()(y.authentication)&&(c?v.push(Object(Qe.i)().updateAuthentication(c,y.authentication)):g&&(C=hn({},y.authentication,{resource_id:g,resource_type:"Endpoint"}),v.push(Object(Qe.i)().createAuthentication(C)))),y.application&&y.application.application_type_id&&v.push(Object(Qe.b)(h,y.application.application_type_id)),e.next=36,Promise.all(v);case 36:if(!(y.credentials||y.billing_source)){e.next=44;break}return k=y.credentials,x=y.billing_source,R={},R=k?{authentication:{credentials:k}}:{},R=x?hn({},R,{billing_source:x}):R,e.next=44,Object(b.patchSource)(hn({id:h},R));case 44:e.next=52;break;case 46:return e.prev=46,e.t0=e.catch(10),e.next=50,Object(b.handleError)(e.t0);case 50:throw e.sent;case 52:case"end":return e.stop()}}),e,null,[[10,46]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),On=function(e){var t=e.messageId,n=e.values,r=e.path,a=Object(l.f)(),o=Object(u.useDispatch)(),i=Object(u.useSelector)((function(e){return e.notifications}));return s.a.createElement(f.Button,{variant:"link",isInline:!0,onClick:function(){var e=i.find((function(e){return e.customId===t}));e&&o(Object(d.k)(e.id)),o(Object(d.n)(n)),a.location.pathname===r?function(e){e.push(Q.c.sources.path),e.goBack()}(a):a.push(r)}},s.a.createElement(y.a,{id:"sources.undo",defaultMessage:"Undo"}))};On.propTypes={messageId:C.a.number.isRequired,values:C.a.object.isRequired,path:C.a.string},On.defaultProps={path:Q.c.sourcesNew.path};var En=On;function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _n=void 0,wn=function(e){var t=e.values.application;return _n=t},Tn={state:"loading",error:"",values:{},authenticationsValues:[],sourceAppsLength:0,initialValues:{}},Pn=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)},Sn=function(){var e=Object(m.a)(),t=Object(l.f)(),n=W(),r=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),a=r.appTypes,o=r.sourceTypesLoaded,p=r.appTypesLoaded,f=r.sourceTypes,b=r.undoValues,h=wt(),g=Object(u.useDispatch)(),v=Object(c.useReducer)(Pn,Tn),O=i()(v,2),j=O[0],_=O[1];Object(c.useEffect)((function(){_n=void 0}),[]),Object(c.useEffect)((function(){if(h){var e=j.sourceAppsLength>=h.applications.length&&j.sourceAppsLength>0;_({sourceAppsLength:h.applications.length}),e||(h.endpoints&&h.endpoints[0]?Object(Qe.i)().listEndpointAuthentications(h.endpoints[0].id).then((function(e){var t=e.data;return _({authenticationsValues:t,initialValues:{source:h,endpoint:h.endpoints[0],url:Object(P.b)(h.endpoints[0]),application:_n,values:{}}})})).then((function(){"loading"===j.state&&_({state:"wizard"})})):(_({initialValues:{source:h,application:_n},values:{}}),"loading"===j.state&&_({state:"wizard"})))}}),[h]);var w=function(){return t.push(Q.c.sources.path)};if(!p||!o||!n)return s.a.createElement(un,{goToSources:w,step:s.a.createElement(Jt,null)});if("loading"===j.state||"submitting"===j.state)return s.a.createElement(un,{goToSources:w,step:s.a.createElement(Jt,null)});if("wizard"!==j.state){var T="finished"===j.state?s.a.createElement(on,{setState:_,goToSources:w}):s.a.createElement($t,{setState:_,goToSources:w,error:j.error});return s.a.createElement(un,{goToSources:w,step:T})}var S=h.applications.filter((function(e){return!e.isDeleting})).reduce((function(e,t){return[].concat(E()(e),[t.application_type_id])}),[]),D=f.find((function(e){return e.id===h.source_type_id})),M=D&&D.name,A=a.filter((function(e){return!S.includes(e.id)&&e.supported_source_types.includes(M)})),I=A.map((function(t){var n=h.applications.find((function(e){return e.application_type_id===t.id})),r="".concat(t.display_name," ").concat(n?"(".concat(e.formatMessage({id:"sources.currentlyRemoving",defaultMessage:"Currently removing"}),")"):"");return{value:t.id,label:r,isDisabled:!!n}})),C=Rt()(Lt()(b),j.values),k=zt(I,e,f,a,j.authenticationsValues,h,C),x=A.length>0?function(e,t){return function(e,t,n,r,a,o){return a({state:"submitting"}),vn(e,t,n,o).then(kt()(It.a.mark((function e(){return It.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Object(d.g)());case 2:return _n=void 0,e.abrupt("return",a({state:"finished"}));case 4:case"end":return e.stop()}}),e)})))).catch((function(t){return a({state:"errored",error:t,values:e})}))}(e,t,j.authenticationsValues,g,_,j.initialValues)}:w,R=Rt()(Lt()(j.initialValues),C);return s.a.createElement(Te,{schema:k,showFormControls:!1,onSubmit:x,onCancel:function(n){return function(e){var t=e.values,n=e.dispatch,r=e.history,a=e.intl,o=e.sourceId;if(t&&t.application){var i=Date.now();n(Object(d.b)(a.formatMessage({id:"sources.addApplicationCanceled",defaultMessage:"Adding an application was cancelled"}),"success",s.a.createElement(y.a,{id:"sources.undoMistake",defaultMessage:"{undo} if this was a mistake.",values:{undo:s.a.createElement(En,{messageId:i,values:t,path:Object(Q.b)(Q.c.sourceManageApps.path,o)})}}),i))}n(Object(d.c)()),r.push(Q.c.sources.path)}({values:n,dispatch:g,intl:e,sourceId:h.id,history:t})},initialValues:R,subscription:{values:!0},onStateUpdate:wn,clearedValue:null})},Dn=n(366);function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In=Object(Dn.a)((function(e){return e()}),500),Cn={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},kn=function(e,t){var n;n=t.id,Object(Qe.i)().checkAvailabilitySource(n).catch((function(){})),e(Object(d.c)()),e(Object(d.g)(Cn))},xn=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},Rn=function(e,t,n){return n(Object(d.e)(a()({},e,t)))},Nn=function(e,t){return Object.keys(e).map((function(n){return e[n]&&e[n].length>0?function(e,t,n){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(n,e,t)():void 0})).filter(Boolean)},Ln=function(e,t){return t&&e.length>0?e:void 0},Fn=n(167),Vn=function(){return s.a.createElement("div",{className:"ins-c-sources__pagination-loader-wrapper"},s.a.createElement(Fn.a,{height:30,width:200,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},s.a.createElement("rect",{x:"0",y:"0",rx:"6",ry:"6",width:"200",height:"30"})))},Bn=function(){var e=Object(m.a)(),t=K(),n=Object(u.useDispatch)();if(!1===t){var r=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.insufficietnPermsDesc",defaultMessage:"You have to be an organisation admin to be able to do this action"});return n(Object(d.b)(r,"danger",a)),s.a.createElement(l.a,{to:Q.c.sources.path})}return null},qn=function(){var e=Object(l.h)().id,t=Object(m.a)(),n=W(),r=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),a=r.appTypesLoaded,o=r.sourceTypesLoaded,p=Object(u.useDispatch)(),f=Object(c.useState)(!1),y=i()(f,2),b=y[0],h=y[1];return Object(c.useEffect)((function(){n&&a&&o&&Object(Qe.g)(e).then((function(e){var t=i()(e.sources,1)[0];return p(Object(d.a)(t))})).then((function(){h(!0)}))}),[n,a,o]),b?(p(Object(d.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),s.a.createElement(l.a,{to:Q.c.sources.path})):null},Un=function(e){var t=e.route,n=e.children;return!(t.redirectNoId?wt():void 0)&&t.redirectNoId?s.a.createElement(qn,null):s.a.createElement(s.a.Fragment,null,t.writeAccess&&s.a.createElement(Bn,null),n)};Un.propTypes={route:C.a.shape({path:C.a.string.isRequired,redirectNoId:C.a.bool,writeAccess:C.a.bool}).isRequired,children:C.a.node.isRequired};var Gn=function(e){var t=e.route,n=e.componentProps,r=e.Component,a=A()(e,["route","componentProps","Component"]);return s.a.createElement(l.b,D()({},a,{path:t.path}),s.a.createElement(Un,{route:t},s.a.createElement(r,n)))};Gn.propTypes={route:C.a.shape({path:C.a.string.isRequired,redirectNoId:C.a.bool,writeAccess:C.a.bool}).isRequired,componentProps:C.a.any,Component:C.a.func.isRequired};var zn=Gn,Hn=n(110);function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=function(){var e=Object(c.useState)(!1),t=i()(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),O=i()(o,2),E=O[0],j=O[1],_=Object(c.useState)(),w=i()(_,2),T=w[0],P=w[1],S=W(),D=K(),M=Object(l.f)(),A=Object(l.g)(),I=Object(m.a)(),C=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),k=C.filterValue,x=C.numberOfEntities,R=C.appTypes,N=C.pageSize,L=C.pageNumber,F=C.fetchingError,V=C.undoValues,B=C.sourceTypes,q=C.paginationClicked,U=C.appTypesLoaded,G=C.sourceTypesLoaded,z=Object(u.useDispatch)();Object(c.useEffect)((function(){Promise.all([z(Object(d.h)()),z(Object(d.f)()),z(Object(d.g)(Object(Hn.a)()))]).then((function(){return j(!0)}))}),[]);var H=Object.entries(k).map((function(e){var t=i()(e,2);t[0];return t[1]})).filter(Boolean).length>0;Object(c.useEffect)((function(){E&&(r(S&&0===x&&!H),Object(Hn.b)(C))}),[A,E]),Object(c.useEffect)((function(){T!==k.name&&P(k.name)}),[k.name]),Object(c.useEffect)((function(){E&&S&&r(0===x&&!H)}),[k,S]);var Y=function(e,t){return z(Object(d.i)(t,N))},J=Math.ceil(x/N);S&&x>0&&L>Math.max(J,1)&&Y(0,J);var X={itemCount:x,page:L,perPage:N,onSetPage:Y,onPerPageSelect:function(e,t){return z(Object(d.i)(1,t))}},Z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},X,{dropDirection:"up",variant:"bottom",isCompact:!1}),$=!(S&&U&&G||q);return s.a.createElement(s.a.Fragment,null,s.a.createElement(zn,{exact:!0,route:Q.c.sourceManageApps,Component:Sn}),s.a.createElement(zn,{exact:!0,route:Q.c.sourcesRemove,Component:Mt}),s.a.createElement(zn,{exact:!0,route:Q.c.sourcesNew,Component:b.AddSourceWizard,componentProps:{sourceTypes:Ln(B,G),applicationTypes:Ln(R,U),isOpen:!0,onClose:function(e){return function(e){var t=e.values,n=e.dispatch,r=e.history,a=e.intl;if(t&&!mn()(t)){var o=Date.now();n(Object(d.b)(a.formatMessage({id:"sources.addWizardCanceled",defaultMessage:"Adding a source was cancelled"}),"success",s.a.createElement(y.a,{id:"sources.undoMistake",defaultMessage:"{undo} if this was a mistake.",values:{undo:s.a.createElement(En,{messageId:o,values:t})}}),o))}n(Object(d.c)()),r.push(Q.c.sources.path)}({values:e,dispatch:z,history:M,intl:I})},afterSuccess:function(e){return kn(z,e)},hideSourcesButton:!0,initialValues:V}}),s.a.createElement(zn,{exact:!0,route:Q.c.sourcesEdit,Component:yt}),s.a.createElement(g.PageHeader,null,s.a.createElement(g.PageHeaderTitle,{title:I.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),s.a.createElement(v.Section,{type:"content"},n||F?s.a.createElement(le,{title:F?F.title:void 0,body:F?F.detail:void 0}):s.a.createElement(s.a.Fragment,null,s.a.createElement(h.PrimaryToolbar,{pagination:$?s.a.createElement(Vn,null):x>0?X:void 0,actionsConfig:D?{actions:[s.a.createElement(p.b,{to:Q.c.sourcesNew.path,key:"addSourceButton"},s.a.createElement(f.Button,{variant:"primary"},s.a.createElement(y.a,{id:"sources.addSource",defaultMessage:"Add a source"})))]}:void 0,filterConfig:{items:[{label:I.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":I.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){P(t),In((function(){return Rn("name",t,z)}))},value:T}},{label:I.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return Rn("source_type_id",t,z)},items:xn(B||[]),value:k.source_type_id}}]},activeFiltersConfig:{filters:Nn(k,B),onDelete:function(e,t,n){return z(Object(d.e)(function(e,t,n){if(n)return Object.keys(t).reduce((function(e,t){return An({},e,a()({},t,void 0))}),{});var r=e[0];return An({},t,a()({},r.key,r.chips?t[r.key].filter((function(e){return e!==r.chips[0].value})):void 0))}(t,k,n)))}}}),s.a.createElement(ae,null),s.a.createElement(h.PrimaryToolbar,{pagination:$?s.a.createElement(Vn,null):x>0?Z:void 0}))))}},654:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(38),i=n.n(o),c=n(4),s=n(56),u=n(361),l=n(661),p=n(27),d=n(160),f=n(10),m=(n(648),n(356)),y=n.n(m),b=n(357),h=n.n(b),g=n(358),v=n.n(g),O=n(359),E=n.n(O),j=n(261),_=n.n(j),w=n(360),T=n.n(w),P=n(3),S=n.n(P),D=n(1),M=n.n(D),A=n(660),I=n(9),C=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=v()(this,(e=E()(t)).call.apply(e,[this].concat(a))),S()(_()(n),"state",{error:null}),n}return T()(t,e),h()(t,[{key:"componentDidCatch",value:function(e){var t=A.a(e);this.props.dispatch(Object(I.b)("".concat(e.toString()," (Sentry ID: ").concat(t,")"),"danger",e.stack))}},{key:"render",value:function(){var e=this.state.error,t=this.props.children;return e?a.a.createElement(r.Fragment,null,"Error occurred"):a.a.createElement(r.Fragment,null,t)}}],[{key:"getDerivedStateFromError",value:function(e,t){return{error:e,errorInfo:t}}}]),t}(r.Component);C.propTypes={dispatch:M.a.func.isRequired,children:M.a.node};var k=Object(c.connect)()(C),x=n(659);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N,L=["SET_ORG_ADMIN"].reduce((function(e,t){var n;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,(n={},S()(n,t,t),S()(n,"".concat(t,"_PENDING"),"".concat(t,"_PENDING")),S()(n,"".concat(t,"_FULFILLED"),"".concat(t,"_FULFILLED")),S()(n,"".concat(t,"_REJECTED"),"".concat(t,"_REJECTED")),n))}),{}),F=function(e){var t=e.children,n=Object(x.a)(),a=Object(c.useDispatch)();return Object(r.useEffect)((function(){var e=n.formatMessage({id:"sources.notOrgAdmTitle",defaultMessage:"Read access only"}),t=n.formatMessage({id:"sources.notOrgAdmDesc",defaultMessage:"You have to be an organisation admin to get a write access to Sources"});a(function(e,t){return function(n){return n({type:L.SET_ORG_ADMIN_PENDING}),insights.chrome.auth.getUser().then((function(r){var a=r.identity.user.is_org_admin;n({type:L.SET_ORG_ADMIN_FULFILLED,payload:a}),a||n(Object(I.b)(e,"info",t))})).catch((function(e){return n({type:L.SET_ORG_ADMIN_REJECTED,payload:{error:{detail:e.detail||e.data,title:"Cannot get user's credentials"}}})}))}}(e,t))}),[]),t},V=function(){return Object(r.useEffect)((function(){insights.chrome.init();try{insights.chrome.identifyApp("sources")}catch(e){console.warn("Failed to initialize chrome navigation.")}}),[]),a.a.createElement(p.a,{basename:Object(d.getBaseName)(location.pathname,1)},a.a.createElement(l.a,{locale:"en"},a.a.createElement(a.a.Fragment,null,a.a.createElement(s.NotificationsPortal,null),a.a.createElement(k,null,a.a.createElement(F,null,a.a.createElement(u.Main,{style:{padding:0}},a.a.createElement(f.a,null)))))))},B=n(172),q=n.n(B),U=n(362),G=n.n(U),z=n(363),H=n(364),Y=n(23),J=n.n(Y),W=n(7);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X,Z={loaded:0,pageSize:50,pageNumber:1,entities:[],numberOfEntities:0,appTypesLoaded:!1,sourceTypesLoaded:!1,undoValues:{},filterValue:{},sortBy:"created_at",sortDirection:"desc"},$=function(e,t){var n=t.payload,r=n.sourceId,a=n.app;return Q({},e,{entities:e.entities.map((function(e){return e.id===r?Q({},e,{applications:[].concat(J()(e.applications),[a])}):e}))})},ee=(N={},S()(N,W.a.LOAD_ENTITIES_PENDING,(function(e,t){var n=t.options;return Q({},e,{loaded:e.loaded+1,paginationClicked:!1},n)})),S()(N,W.a.LOAD_ENTITIES_FULFILLED,(function(e,t){var n=t.payload,r=t.options;return Q({},e,{loaded:Math.max(e.loaded-1,0),entities:n},r)})),S()(N,W.a.LOAD_ENTITIES_REJECTED,(function(e,t){return Q({},e,{fetchingError:t.payload.error})})),S()(N,W.a.LOAD_SOURCE_TYPES_PENDING,(function(e){return Q({},e,{sourceTypes:[],sourceTypesLoaded:!1})})),S()(N,W.a.LOAD_SOURCE_TYPES_FULFILLED,(function(e,t){return Q({},e,{sourceTypes:t.payload,sourceTypesLoaded:!0})})),S()(N,W.a.LOAD_APP_TYPES_PENDING,(function(e){return Q({},e,{appTypes:[],appTypesLoaded:!1})})),S()(N,W.a.LOAD_APP_TYPES_FULFILLED,(function(e,t){return Q({},e,{appTypes:t.payload,appTypesLoaded:!0})})),S()(N,W.a.REMOVE_SOURCE_PENDING,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?Q({},e,{isDeleting:!0}):e}))})})),S()(N,W.a.REMOVE_SOURCE_FULFILLED,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?void 0:e})).filter((function(e){return e}))})})),S()(N,W.a.REMOVE_SOURCE_REJECTED,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?Q({},e,{isDeleting:void 0}):e}))})})),S()(N,W.a.REMOVE_APPLICATION_PENDING,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?Q({},e,{applications:e.applications.map((function(e){return e.id===n.appId?Q({},e,{isDeleting:!0}):e}))}):e}))})})),S()(N,W.a.REMOVE_APPLICATION_FULFILLED,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?Q({},e,{applications:e.applications.filter((function(e){return e.id!==n.appId}))}):e}))})})),S()(N,W.a.REMOVE_APPLICATION_REJECTED,(function(e,t){var n=t.meta;return Q({},e,{entities:e.entities.map((function(e){return e.id===n.sourceId?Q({},e,{applications:e.applications.map((function(e){return e.id===n.appId?Q({},e,{isDeleting:void 0}):e}))}):e}))})})),S()(N,W.i,(function(e,t){var n=t.payload;return Q({},e,{sortBy:n.column,sortDirection:n.direction})})),S()(N,W.g,(function(e,t){var n=t.payload,r=n.page;return Q({},e,{pageSize:n.size,pageNumber:r})})),S()(N,W.f,(function(e,t){var n=t.payload.value;return Q({},e,{filterValue:Q({},e.filterValue,{},n),pageNumber:1})})),S()(N,W.b,$),S()(N,W.j,(function(e,t){return Q({},e,{undoValues:t.payload.values})})),S()(N,W.d,(function(e){return Q({},e,{undoValues:{}})})),S()(N,W.b,$),S()(N,W.h,(function(e,t){return Q({},e,{numberOfEntities:t.payload.count})})),S()(N,W.c,(function(e,t){var n=t.payload.source;return Q({},e,{entities:[].concat(J()(e.entities),[Q({},n,{hidden:!0})])})})),S()(N,W.e,(function(e){return Q({},e,{filterValue:{},pageNumber:1})})),N);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={isOrgAdmin:void 0},ae=(X={},S()(X,L.SET_ORG_ADMIN_PENDING,(function(e){return ne({},e,{isOrgAdmin:void 0})})),S()(X,L.SET_ORG_ADMIN_FULFILLED,(function(e,t){return ne({},e,{isOrgAdmin:t.payload})})),S()(X,L.SET_ORG_ADMIN_REJECTED,(function(e){return ne({},e,{isOrgAdmin:void 0})})),X),oe=n(110);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ce=function(e){return function(t){return function(n){if(n.type===W.a.LOAD_ENTITIES_PENDING){var r=e.getState().sources;Object(oe.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{},n.options))}t(n)}}},se=function(e){var t=[z.a,Object(s.notificationsMiddleware)({errorTitleKey:"error.title",errorDescriptionKey:"error.detail"}),H.a,ce];e&&t.push(G.a);var n=new q.a({},t);return n.register({sources:Object(B.applyReducerHash)(ee,Z)}),n.register({user:Object(B.applyReducerHash)(ae,re)}),n.register({notifications:s.notifications}),n.getStore()};i.a.render(a.a.createElement((function(){return a.a.createElement(c.Provider,{store:se(!1)},a.a.createElement(V,null))}),null),document.getElementById("root"))},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return y}));var r=n(3),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=["LOAD_ENTITIES","CREATE_SOURCE","REMOVE_SOURCE","LOAD_SOURCE_TYPES","LOAD_APP_TYPES","REMOVE_APPLICATION"].reduce((function(e,t){var n;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,(n={},a()(n,t,t),a()(n,"".concat(t,"_PENDING"),"".concat(t,"_PENDING")),a()(n,"".concat(t,"_FULFILLED"),"".concat(t,"_FULFILLED")),a()(n,"".concat(t,"_REJECTED"),"".concat(t,"_REJECTED")),n))}),{}),c="SORT_ENTITIES",s="PAGE_AND_SIZE",u="FILTER_SOURCES",l="ADD_APP_TO_SOURCE",p="UNDO_VALUES",d="CLEAR_ADD_SOURCE",f="SET_COUNT",m="ADD_HIDDEN_SOURCE",y="CLEAR_FILTERS"},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="".concat("/api","/cost-management/v1"),a="".concat("/api","/sources/v1.0")},9:function(e,t,n){"use strict";var r=n(17),a=n.n(r),o=n(56),i=n(7),c=n(14),s=n(169);n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"m",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"o",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"n",(function(){return O})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return _}));var u=function(e){return function(t,n){t({type:i.a.LOAD_ENTITIES_PENDING,options:e});var r=n().sources,o=r.pageSize,s=r.pageNumber,u=r.sortBy,l=r.sortDirection,p=r.filterValue;return Promise.all([Object(c.f)({pageSize:o,pageNumber:s,sortBy:u,sortDirection:l,filterValue:p}),Object(c.e)(p).then((function(e){var n=e.meta.count;return t({type:i.h,payload:{count:n}})}))]).then((function(e){var n=a()(e,1)[0].sources;return t({type:i.a.LOAD_ENTITIES_FULFILLED,payload:n})})).catch((function(e){return t({type:i.a.LOAD_ENTITIES_REJECTED,payload:{error:{detail:e.detail||e.data,title:"Fetching data failed, try refresh page"}}})}))}},l=function(){return function(e){return e({type:i.a.LOAD_SOURCE_TYPES_PENDING}),Object(c.i)().listSourceTypes().then((function(e){return e.data})).then((function(t){return e({type:i.a.LOAD_SOURCE_TYPES_FULFILLED,payload:t})}))}},p=function(){return function(e){return e({type:i.a.LOAD_APP_TYPES_PENDING}),Object(c.d)().then((function(t){return e({type:i.a.LOAD_APP_TYPES_FULFILLED,payload:t.data})}))}},d=function(e,t){return function(n){return n({type:i.i,payload:{column:e,direction:t}}),n(u())}},f=function(e,t){return function(n){return n({type:i.g,payload:{page:e,size:t}}),n(u({paginationClicked:!0}))}},m=function(e){return function(t){return t({type:i.f,payload:{value:e}}),t(u())}},y=function(e,t,n,r,a){return function(i){return Object(s.a)(e,t,a).then((function(e){return i({type:o.ADD_NOTIFICATION,payload:{variant:"success",title:n,description:r,dismissable:!0}})})).catch((function(e){throw i({type:"FOOBAR_REJECTED",payload:e}),e}))}},b=function(e,t,n,r){return function(a){return a({type:o.ADD_NOTIFICATION,payload:{title:e,variant:t,description:n,dismissable:!0,customId:r}})}},h=function(e,t){return function(n){return n({type:i.a.REMOVE_SOURCE_PENDING,meta:{sourceId:e}}),Object(c.h)(e).then((function(){return n(u({loaded:0}))})).then((function(){n({type:i.a.REMOVE_SOURCE_FULFILLED,meta:{sourceId:e}}),n(b(t,"success"))})).catch((function(){return n({type:i.a.REMOVE_SOURCE_REJECTED,meta:{sourceId:e}})}))}},g=function(e){return function(t){return t({type:o.REMOVE_NOTIFICATION,payload:e})}},v=function(e,t,n,r){return function(a){a({type:i.a.REMOVE_APPLICATION,payload:function(){return Object(c.c)(e,r)},meta:{appId:e,sourceId:t,notifications:{fulfilled:{variant:"success",title:n,dismissable:!0}}}})}},O=function(e){return{type:i.j,payload:{values:e}}},E=function(){return{type:i.d}},j=function(e){return{type:i.c,payload:{source:e}}},_=function(){return function(e){return e({type:i.e}),e(u())}}}});
//# sourceMappingURL=../sourcemaps/App.js.map