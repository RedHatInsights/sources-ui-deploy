(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{446:function(e,t,n){var r=n(227),a=n(447);e.exports=function(e,t){return a(e||[],t||[],r)}},447:function(e,t){e.exports=function(e,t,n){for(var r=-1,a=e.length,o=t.length,i={};++r<a;){var c=r<o?t[r]:void 0;n(i,e[r],c)}return i}},455:function(e,t,n){"use strict";n.r(t);var r=n(51),a=n.n(r),o=n(52),i=n.n(o),c=n(53),s=n.n(c),l=n(54),u=n.n(l),p=n(101),m=n.n(p),d=n(7),f=n.n(d),y=n(1),E=n.n(y),h=n(56),T=n(11),S=n(116),b=n(253),g=n(0),v=n.n(g),R=n(45),F=n(106),_=n(111),C=n(136),O=n(139),P=n(137),w=n(138),q=n(100),x=n.n(q),I=n(15),D=n.n(I),A=n(128),L=n.n(A),N=n(248),j=n(453),k=n(459),M=n(255),X=n(125),V=n.n(X),B=n(236),z=n(148),K=n(149),U=function(){return E.a.createElement(z.a,null,E.a.createElement(K.a,{sm:6,md:4,lg:4,xl:4},E.a.createElement("dl",null,E.a.createElement("dt",null,"Access Key ID (User ID)"),E.a.createElement("dd",null,"TO BE ADDED"))))};U.propTypes={source:v.a.shape({id:v.a.oneOfType([v.a.string,v.a.number]).isRequired,name:v.a.string.isRequired}).isRequired};var H=U,W=function(e){return E.a.createElement(B.a,L()({height:20,width:480},e),E.a.createElement("rect",{x:"30",y:"0",rx:"3",ry:"3",width:"250",height:"7"}),E.a.createElement("rect",{x:"300",y:"0",rx:"3",ry:"3",width:"70",height:"7"}),E.a.createElement("rect",{x:"385",y:"0",rx:"3",ry:"3",width:"95",height:"7"}),E.a.createElement("rect",{x:"50",y:"12",rx:"3",ry:"3",width:"80",height:"7"}),E.a.createElement("rect",{x:"150",y:"12",rx:"3",ry:"3",width:"200",height:"7"}),E.a.createElement("rect",{x:"360",y:"12",rx:"3",ry:"3",width:"120",height:"7"}),E.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"20",height:"20"}))},J=function(e){function t(e){var n;return a()(this,t),n=i()(this,s()(t).call(this,e)),f()(m()(m()(n)),"onItemSelect",function(e,t,r){return n.props.selectEntity(t,r)}),f()(m()(m()(n)),"onSort",function(e,t,r){n.props.sortEntities(n.filteredColumns[t].value,r),n.setState({sortBy:{index:t,direction:r}})}),f()(m()(m()(n)),"onCollapse",function(e,t,r){return n.props.expandEntity(n.sourceIndexToId(t),r)}),f()(m()(m()(n)),"sourceIndexToId",function(e){return n.props.entities[e/2].id}),f()(m()(m()(n)),"renderActions",function(){return[{title:"Remove Source",onClick:function(e,t){n.props.removeSource(n.sourceIndexToId(t)).then(function(){n.props.loadEntities()})}},{title:"Edit Source",onClick:function(e,t){n.props.history.push("/edit/".concat(n.sourceIndexToId(t)))}}]}),f()(m()(m()(n)),"sourceTypeFormatter",function(e){return n.sourceTypeMap.get(e)||e||""}),f()(m()(m()(n)),"itemToCells",function(e){return n.filteredColumns.map(function(t){return t.formatter?n[t.formatter](e[t.value]):e[t.value]||""})}),f()(m()(m()(n)),"render",function(){var e=n.props,t=e.entities,r=e.loaded,a=e.sourceTypes,o=V()(t.map(function(e,t){return[D()({},e,{isOpen:!!e.expanded,cells:n.itemToCells(e)}),{id:e.id+"_detail",parent:2*t,cells:[e.expanded?E.a.createElement(E.a.Fragment,{key:"".concat(e.id,"_detail")},E.a.createElement(H,{source:e})):"collapsed content"]}]}));return n.sourceTypeMap=new Map(a.map(function(e){return[e.id,e.name]})),r?E.a.createElement(N.b,{gridBreakPoint:"grid-lg","aria-label":"List of Sources",onCollapse:n.onCollapse,onSort:n.onSort,sortBy:n.state.sortBy,rows:o,cells:n.headers,actions:n.renderActions()},E.a.createElement(j.a,null),E.a.createElement(k.a,null)):E.a.createElement("table",{className:"sources-placeholder-table pf-m-compact ins-entity-table"},E.a.createElement("tbody",null,E.a.createElement("tr",null,E.a.createElement("td",null,E.a.createElement(W,null))),E.a.createElement("tr",null,E.a.createElement("td",null,E.a.createElement(W,null)))))}),n.filteredColumns=x()(n.props.columns,function(e){return e.title}),n.headers=n.filteredColumns.map(function(e){return{title:e.title,transforms:[M.a]}}),n.state={sortBy:{}},n}return u()(t,e),t}(E.a.Component);J.propTypes={columns:v.a.arrayOf(v.a.shape({value:v.a.string,title:v.a.string})).isRequired,loadEntities:v.a.func.isRequired,selectEntity:v.a.func.isRequired,expandEntity:v.a.func.isRequired,removeSource:v.a.func.isRequired,sortEntities:v.a.func.isRequired,entities:v.a.arrayOf(v.a.any),numberOfEntities:v.a.number.isRequired,loaded:v.a.bool.isRequired,sourceTypes:v.a.arrayOf(v.a.any),history:v.a.any.isRequired},J.defaultProps={entities:[],numberOfEntities:0,loaded:!1,sourceTypes:[]};var Q=Object(T.connect)(function(e){var t=e.providers;return{entities:t.entities,loaded:t.loaded,numberOfEntities:t.numberOfEntities,sourceTypes:t.sourceTypes}},function(e){return Object(h.bindActionCreators)({loadEntities:F.e,selectEntity:F.j,expandEntity:F.c,sortEntities:F.l,removeSource:F.i},e)})(Object(b.a)(J)),Z=function(e){function t(e){var n;return a()(this,t),n=i()(this,s()(t).call(this,e)),f()(m()(m()(n)),"render",function(){return E.a.createElement(R.SimpleTableFilter,{options:{title:"Filter By",items:n.props.columns},onOptionSelect:n.props.onFilterSelect,onButtonClick:n.props.onFilter})}),n}return u()(t,e),t}(y.Component);Z.propTypes={columns:v.a.arrayOf(v.a.shape({value:v.a.string,title:v.a.string})).isRequired,onFilter:v.a.func.isRequired,onFilterSelect:v.a.func.isRequired};var G=Z,Y=n(110),$=n(144),ee=n(146),te=n(135),ne=n(145),re=n(247),ae=n(114),oe=function(){return E.a.createElement(C.a,null,E.a.createElement(P.a,null,E.a.createElement(Y.a,null,E.a.createElement($.a,null,E.a.createElement(ee.a,{icon:re.a}),E.a.createElement(te.a,{headingLevel:"h5",size:"lg"},"No Sources"),E.a.createElement(ne.a,null,"No Sources have been defined. To start define a Source."),E.a.createElement(S.a,{to:ae.b.sourcesNew},E.a.createElement(_.c,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary"},"Add a Source"))))))},ie=n(147),ce=n(246),se=n(446),le=n.n(se),ue=n(234),pe=n.n(ue),me=function(e){return[{label:"Please Choose"}].concat(e.map(function(e){return{value:e.name,label:e.product_name}}))},de=function(e,t,n){return D()({},e,{name:t,stepKey:t,nextStep:n})},fe={openshift:{title:"Configure OpenShift",fields:[{component:ce.componentTypes.TEXT_FIELD,name:"role",type:"hidden",initialValue:"kubernetes"},{component:ce.componentTypes.TEXT_FIELD,name:"url",label:"URL"},{component:ce.componentTypes.CHECKBOX,name:"verify_ssl",label:"Verify SSL"},{component:ce.componentTypes.TEXT_FIELD,name:"certificate_authority",label:"Certificate Authority",condition:{when:"verify_ssl",is:!0}},{component:ce.componentTypes.TEXT_FIELD,name:"token",label:"Token",type:"password"}]},amazon:{title:"Configure AWS",fields:[{component:ce.componentTypes.TEXT_FIELD,name:"role",type:"hidden",initialValue:"aws"},{component:ce.componentTypes.TEXT_FIELD,name:"user_name",label:"Access Key"},{component:ce.componentTypes.TEXT_FIELD,name:"password",label:"Secret Key",type:"password"}]}},ye=function(e){return e.schema||fe[e.name]},Ee=function(e){return{title:"Get started with adding source",name:"step_1",stepKey:"step_1",nextStep:{when:"source_type",stepMapper:function(e){var t=e.map(function(e){return e.name});return le()(t,t)}(e)},fields:[{component:ce.componentTypes.TEXT_FIELD,name:"source_name",type:"text",label:"Name"},{component:ce.componentTypes.SELECT_COMPONENT,name:"source_type",label:"Source type",isRequired:!0,options:me(e),validate:[{type:ce.validatorTypes.REQUIRED}]}]}},he=function(e,t){return{title:"Edit a source",name:"step_1",stepKey:"step_1",nextStep:t,fields:[{component:ce.componentTypes.TEXT_FIELD,name:"source_name",type:"text",label:"Name"},{component:ce.componentTypes.SELECT_COMPONENT,name:"source_type",label:"Source type",isRequired:!0,isDisabled:!0,readOnly:!0,options:me(e),validate:[{type:ce.validatorTypes.REQUIRED}]}]}},Te=function(){return{fields:[{name:"summary",component:"summary"}],stepKey:"summary",name:"summary"}},Se=function(e){return e.map(function(e){return de(ye(e),e.name,"summary")})},be=function(e){return{source_name:e.name,source_type:e.source_type,url:function(e){return"".concat(e.scheme,"://").concat(e.host,":").concat(e.port).concat(e.path||"")}(e.endpoint),verify_ssl:e.endpoint.verify_ssl,certificate_authority:e.endpoint.certificate_authority,token:"FIXME",role:e.endpoint.role,user_name:"FIXME",password:"FIXME"}};var ge=n(245),ve=function(e){var t=e.location.pathname===ae.b.sourcesNew;Object(y.useEffect)(function(){t||e.loadSourceForEdit(parseInt(e.match.params.id,10))},[]);if(!e.sourceTypes||!t&&!e.source)return E.a.createElement("div",null,"Loading...");var n=t?function(e){return{initialValues:{verify_ssl:!0},schemaType:"default",showFormControls:!1,schema:{fields:[{component:ce.componentTypes.WIZARD,name:"wizard",fields:[Ee(e)].concat(Se(e),Te())}]}}}(e.sourceTypes):function(e,t){var n=pe()(e,{id:t.source_type_id}),r=n.name;return{initialValues:be(D()({source_type:n.name},t)),schemaType:"default",showFormControls:!1,schema:{fields:[{component:ce.componentTypes.WIZARD,name:"wizard",fields:[he(e,r)].concat(n&&de(ye(n),r,"summary"),Te())}]}}}(e.sourceTypes,e.source);return console.log("Form schema: ",n),E.a.createElement(ie.a,{title:t?"Add a New Source":"Edit Source",isOpen:!0,onClose:e.history.goBack,isLarge:!0},E.a.createElement(ge.a,{initialValues:n.initialValues,schemaType:n.schemaType,schema:n.schema,uiSchema:n.uiSchema,showFormControls:n.showFormControls,onSubmit:function(n,r){(t?e.createSource(n,e.sourceTypes):e.updateSource(e.source,n)).then(function(){e.history.replace("/"),e.loadEntities()}).catch(function(t){e.history.replace("/")})}}))};ve.propTypes={createSource:v.a.func.isRequired,loadSourceForEdit:v.a.func.isRequired,loadEntities:v.a.func.isRequired,updateSource:v.a.func.isRequired,sourceTypes:v.a.arrayOf(v.a.any),source:v.a.object,location:v.a.any.isRequired,match:v.a.object.isRequired,history:v.a.any.isRequired};var Re=Object(T.connect)(function(e){var t=e.providers;return{source:t.source,sourceTypes:t.sourceTypes}},function(e){return Object(h.bindActionCreators)({createSource:F.b,loadEntities:F.e,loadSourceForEdit:F.f,updateSource:F.m},e)})(Object(b.a)(ve)),Fe=n(127),_e=function(e){function t(e){var n;return a()(this,t),n=i()(this,s()(t).call(this,e)),f()(m()(m()(n)),"componentDidMount",function(){n.props.loadSourceTypes(),n.props.loadEntities()}),f()(m()(m()(n)),"onFilter",function(e){console.log("onFilter",e),n.props.filterProviders(e)}),f()(m()(m()(n)),"onFilterSelect",function(e,t){console.log("onFilter",t),n.props.setProviderFilterColumn(t.value)}),f()(m()(m()(n)),"onSetPage",function(e){n.setState({onPage:e}),n.props.pageAndSize(e,n.state.itemsPerPage)}),f()(m()(m()(n)),"onPerPageSelect",function(e){n.setState({onPage:1,itemsPerPage:e}),n.props.pageAndSize(1,e)}),f()(m()(m()(n)),"renderMainContent",function(){return E.a.createElement(C.a,null,E.a.createElement(O.a,null,E.a.createElement(G,{columns:x()(Fe.a.columns,function(e){return e.searchable}),onFilter:n.onFilter,onFilterSelect:n.onFilterSelect})),E.a.createElement(P.a,null,E.a.createElement(Q,{columns:Fe.a.columns})),E.a.createElement(w.a,null,E.a.createElement(R.Pagination,{itemsPerPage:n.state.itemsPerPage,page:n.state.onPage,direction:"up",onSetPage:n.onSetPage,onPerPageSelect:n.onPerPageSelect,numberOfItems:n.props.numberOfEntities||0})))}),f()(m()(m()(n)),"render",function(){var e=n.props.numberOfEntities,t=n.props.loaded&&!n.props.filterValue&&(!e||0===e),r=n.props.location.pathname===ae.b.sourcesNew,a=n.props.match.path===ae.b.sourcesEdit;return E.a.createElement(E.a.Fragment,null,r||a?E.a.createElement(Re,null):"",E.a.createElement(R.PageHeader,null,E.a.createElement(R.PageHeaderTitle,{title:"Sources"}),E.a.createElement(S.a,{to:ae.b.sourcesNew},E.a.createElement(_.c,{className:"pull-right",variant:"secondary"}," Add a New Source "))),E.a.createElement(R.Section,{type:"content"},t?E.a.createElement(oe,null):n.renderMainContent()))}),n.state={itemsPerPage:10,onPage:1},n}return u()(t,e),t}(y.Component);f()(_e,"propTypes",{filterProviders:v.a.func.isRequired,setProviderFilterColumn:v.a.func.isRequired,loadEntities:v.a.func.isRequired,loadSourceTypes:v.a.func.isRequired,pageAndSize:v.a.func.isRequired,filterValue:v.a.string,loaded:v.a.bool.isRequired,numberOfEntities:v.a.number.isRequired,location:v.a.any.isRequired,match:v.a.object.isRequired,history:v.a.any.isRequired});t.default=Object(T.connect)(function(e){var t=e.providers;return{filterValue:t.filterValue,loaded:t.loaded,numberOfEntities:t.numberOfEntities}},function(e){return Object(h.bindActionCreators)({filterProviders:F.d,loadEntities:F.e,loadSourceTypes:F.g,pageAndSize:F.h,setProviderFilterColumn:F.k},e)})(Object(b.a)(_e))}}]);
//# sourceMappingURL=../sourcemaps/SourcesPage.js.map