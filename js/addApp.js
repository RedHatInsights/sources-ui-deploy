(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{292:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(287),r=a.n(n),i=a(0),s=a.n(i),o=a(3),c=a.n(o),u=a(372),l=a.n(u),p=a(40),d=a(330),m="edit-field",f=function(e){var t=e.isRequired,a=e.label,n=e.helperText,r=e.hideLabel,i=e.meta,o=e.input,c=e.type,u=e.setEdit,m=i.error,f=i.touched&&m,y=o.value;"boolean"==typeof y&&(y=y?"True":"False");var g="password"===c||o.name.includes("password")?"Click to edit":"Click to add";return s.a.createElement(d.FormGroup,{isRequired:t,label:!r&&a,fieldId:o.name,isValid:!f,helperText:n,helperTextInvalid:m,onClick:u?function(){return u(o.name)}:void 0,tabIndex:0,onKeyPress:function(e){32===e.charCode&&u&&(e.preventDefault(),u(o.name))}},s.a.createElement("div",{className:"pf-c-form__horizontal-group ins-c-sources__edit-field-group ".concat(u?"clickable":"")},s.a.createElement(p.TextContent,{className:"ins-c-sources__edit-field-group-text-content ".concat(u?"clickable":"")},s.a.createElement("span",{className:"ins-c-sources__edit-field-value pf-u-mr-sm"},y||(u?g:"")),u&&s.a.createElement(l.a,null))))};f.propTypes={label:c.a.string,isRequired:c.a.bool,helperText:c.a.string,meta:c.a.object.isRequired,FieldProvider:c.a.oneOfType([c.a.node,c.a.func]),input:c.a.shape({value:c.a.any,name:c.a.string.isRequired}).isRequired,hideLabel:c.a.bool,setEdit:c.a.func,type:c.a.string};var y=function(e){var t=e.FieldProvider,a=r()(e,["FieldProvider"]);return s.a.createElement(t,a,(function(e){return s.a.createElement(f,e)}))};y.propTypes={FieldProvider:c.a.oneOfType([c.a.node,c.a.func]).isRequired},t.b=y},371:function(e,t,a){"use strict";var n=a(302),r=a.n(n),i=a(1),s=a.n(i),o=a(0),c=a.n(o),u=a(278),l=a.n(u),p=a(329),d=a(283),m=a(292);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a=function(e){return c.a.createElement(l.a,r()({layoutMapper:p.layoutMapper,formFieldsMapper:y({},p.formFieldsMapper,{},d.mapperExtension,{"edit-field":m.b})},e))}},399:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(3),s=a.n(i),o=a(29),c=a(10),u=a(25),l=a(40),p=a(75),d=a(310),m=a(311),f=a(282),y=function(e){var t=e.setApplicationToRemove,a=e.breakpoints,n=e.namePrefix,i=Object(o.useSelector)((function(e){return e.sources.appTypes})),s=Object(f.a)(),y=s.applications.map((function(e){var t=e.application_type_id,a=i.find((function(e){return e.id===t}));return a?a.display_name:void 0}));return s.applications.filter((function(e){return!e.isDeleting})).map((function(e){var t=i.find((function(t){return t.id===e.application_type_id}));if(t)return{display_name:t.display_name,id:e.id,dependent_applications:t.dependent_applications}})).sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){var i=e.display_name,s=e.id,o=e.dependent_applications;return r.a.createElement(l.TextContent,{key:s},r.a.createElement(d.Grid,null,r.a.createElement(m.GridItem,{md:a.display_name||4},r.a.createElement(u.Text,{component:u.TextVariants.p,style:{marginBottom:0}},n,i)),r.a.createElement(m.GridItem,{md:a.remove||8,className:"ins-c-sources__remove-app"},r.a.createElement(p.Button,{variant:p.ButtonVariant.link,isInline:!0,onClick:function(){return t({id:s,display_name:i,dependent_applications:o,sourceAppsNames:y})}},r.a.createElement(c.a,{id:"sources.remove",defaultMessage:"Remove"})))))}))};y.propTypes={setApplicationToRemove:s.a.func.isRequired,breakpoints:s.a.shape({display_name:s.a.number,remove:s.a.number}),namePrefix:s.a.node},y.defaultProps={breakpoints:{}},t.a=y},400:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(3),s=a.n(i),o=a(29),c=a(273),u=a(10),l=a(25),p=a(40),d=a(75),m=a(327),f=a(326),y=a(340),g=a(339),h=a(59),v=a.n(h),b=a(42),E=a(282),O=function(e){var t=e.app,a=e.onCancel,n=Object(c.a)(),i=Object(o.useSelector)((function(e){return e.sources.appTypes})),s=Object(E.a)(),h=Object(o.useDispatch)(),O=t.dependent_applications.map((function(e){var a=i.find((function(t){return t.name===e}));return a&&t.sourceAppsNames.includes(a.display_name)?a.display_name:void 0})).filter((function(e){return e}));return r.a.createElement(g.Modal,{className:"ins-c-sources__dialog--warning",title:"Remove ".concat(t.display_name," application"),isOpen:!0,isSmall:!0,onClose:a,isFooterLeftAligned:!0,actions:[r.a.createElement(d.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){var e=n.formatMessage({id:"sources.removeAppWarning",defaultMessage:"{ name } was removed from this source."},{name:t.display_name}),r=n.formatMessage({id:"sources.removeAppError",defaultMessage:"Removing of { name } application from this source was unsuccessful."},{name:t.display_name});return a(),h(Object(b.j)(t.id,s.id,e,r))}},r.a.createElement(u.a,{id:"sources.remove",defaultMessage:"Remove"})),r.a.createElement(d.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:a},r.a.createElement(u.a,{id:"sources.cancel",defaultMessage:"Cancel"}))]},r.a.createElement(m.Split,{gutter:"md"},r.a.createElement(f.SplitItem,null,r.a.createElement(v.a,{size:"xl",className:"ins-m-alert ins-c-source__delete-icon"})),r.a.createElement(f.SplitItem,{isFilled:!0},r.a.createElement(y.Stack,{gutter:"md"},r.a.createElement(p.TextContent,null,r.a.createElement(l.Text,{component:l.TextVariants.p},r.a.createElement(u.a,{id:"sources.deleteAppWarning",defaultMessage:"Are you sure to remove { appName } from this source?",values:{appName:t.display_name}})),O.length>0&&r.a.createElement(l.Text,{component:l.TextVariants.p},r.a.createElement(u.a,{id:"sources.deleteAppDetails",defaultMessage:"This change will affect these applications: { apps }.",values:{apps:O}})))))))};O.propTypes={app:s.a.shape({id:s.a.string.isRequired,display_name:s.a.string.isRequired,dependent_applications:s.a.arrayOf(s.a.string),sourceAppsNames:s.a.arrayOf(s.a.string)}).isRequired,onCancel:s.a.func.isRequired},t.a=O},674:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n),i=a(34),s=a.n(i),o=a(1),c=a.n(o),u=a(66),l=a.n(u),p=a(84),d=a.n(p),m=a(0),f=a.n(m),y=a(28),g=a(29),h=a(273),v=a(404),b=a.n(v),E=a(407),O=a.n(E),T=a(283),_=a(42),j=a(371),S=a(278),M=a(25),x=a(40),w=a(10),A=a(293),k=a.n(A),C=a(436),R=a(400),P=a(399),V=a(282),q=function(){var e=Object(m.useState)({}),t=s()(e,2),a=t[0],n=t[1],r=Object(g.useSelector)((function(e){return e.sources.sourceTypes})),i=Object(V.a)(),o=r.find((function(e){return e.id===i.source_type_id})),c=i.applications.filter((function(e){return!e.isDeleting}));return f.a.createElement(f.a.Fragment,null,a.id&&f.a.createElement(R.a,{app:a,onCancel:function(){return n({})}}),f.a.createElement(x.TextContent,null,f.a.createElement(C.Grid,{gutter:"md"},f.a.createElement(C.GridItem,{md:2},f.a.createElement(M.Text,{component:M.TextVariants.h4},f.a.createElement(w.a,{id:"sources.sourceName",defaultMessage:"Source name"}))),f.a.createElement(C.GridItem,{md:2},f.a.createElement(M.Text,{component:M.TextVariants.h4},f.a.createElement(w.a,{id:"sources.type",defaultMessage:"Type"}))),f.a.createElement(C.GridItem,{md:8},f.a.createElement(M.Text,{component:M.TextVariants.h4},f.a.createElement(w.a,{id:"sources.apps",defaultMessage:"Applications"}))),f.a.createElement(C.GridItem,{md:2},f.a.createElement(M.Text,{component:M.TextVariants.p},i.name)),f.a.createElement(C.GridItem,{md:2},f.a.createElement(M.Text,{component:M.TextVariants.p},o?o.product_name:f.a.createElement(w.a,{id:"sources.typeNotFound",defaultMessage:"Type not found"}))),f.a.createElement(C.GridItem,{md:8},c.length>0?f.a.createElement(P.a,{setApplicationToRemove:n}):f.a.createElement(w.a,{id:"sources.noApps",defaultMessage:"No applications"})))))},D=a(3),B=a.n(D),I=function(e){var t=e.formOptions,a=e.authenticationValues,n=e.modifiedValues,r=Object(m.useState)((function(){return function(t){return e!==t&&(e=t,!0)};var e})),i=s()(r,1)[0],o=Object(g.useSelector)((function(e){return e.sources}),g.shallowEqual),c=o.appTypes;return function(e){var t=e.sourceTypes,a=e.source,n=e.appTypes,r=e.formOptions,i=e.checkAuthType,s=e.authenticationValues,o=e.modifiedValues,c=t.find((function(e){return e.id===a.source_type_id})),u=r.getState(),l=n.find((function(e){return e.id===k()(u,"values.application.application_type_id",void 0)})),p=k()(l,"supported_authentication_types[".concat(c.name,"][0]"),"");if(i(p)){r.change("supported_auth_type",p);var d=s.find((function(e){return e.authtype===p}));if(d)if(o&&o.authentication){var m=b()(O()(d),o.authentication);r.change("authentication",m)}else r.change("authentication",d);else o&&o.authentication?r.change("authentication",o.authentication):r.change("authentication",void 0)}}({sourceTypes:o.sourceTypes,checkAuthType:i,formOptions:t,authenticationValues:a,appTypes:c,source:Object(V.a)(),modifiedValues:n}),null};I.propTypes={formOptions:B.a.shape({getState:B.a.func.isRequired,change:B.a.func.isRequired}).isRequired,authenticationValues:B.a.arrayOf(B.a.object),modifiedValues:B.a.object};var F=function(){return f.a.createElement(x.TextContent,null,f.a.createElement(M.Text,{component:M.TextVariants.p},f.a.createElement(w.a,{id:"sources.allApplicationsAssigned",defaultMessage:"All available applications have already been added to this source or there is no available application for this source type."})))},N=function(){return f.a.createElement(x.TextContent,null,f.a.createElement(M.Text,{component:M.TextVariants.p},f.a.createElement(w.a,{id:"sources.reviewAddAppSummary",defaultMessage:"Review the information below and click Finish to add the application to your source."})," ",f.a.createElement("br",null),f.a.createElement(w.a,{id:"sources.backGuide",defaultMessage:"Use the Back button to make changes."})))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return e.find((function(e){return e.authtype===k()(t,"supported_authentication_types.".concat(a,"[0]"))}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,c=e.length>0,u=c?"summary":void 0,l=[];if(!s.imported&&c){var p=a.find((function(e){return e.id===s.source_type_id})),d=p.schema.endpoint.hidden?p.schema.endpoint.fields:[],m=0===d.length;n.forEach((function(e){if(e.supported_source_types.includes(p.name)){var t=L(i,e,p.name);l.push(T.schemaBuilder.createSpecificAuthTypeSelection(p,e,d,!1,t))}})),p.schema.authentication.forEach((function(e){n.forEach((function(t){if(t.supported_source_types.includes(p.name)){var a=T.schemaBuilder.getAdditionalSteps(p.name,e.type,t.name);if(a.length>0){var n=L(i,t,p.name);l.push.apply(l,r()(T.schemaBuilder.createAdditionalSteps(a,p.name,e.type,m,e.fields,t.name,n)))}}}))})),m&&l.push(T.schemaBuilder.createEndpointStep(p.schema.endpoint,p.name)),u=function(e){var t=e.values.application,a=t||{},n=a.application_type_id?a.application_type_id:"";return"".concat(p.name,"-").concat(n)}}var f=c?{component:"card-select",name:"application.application_type_id",options:e,label:t.formatMessage({id:"sources.chooseAppToAdd",defaultMessage:"Choose an application to add"}),DefaultIcon:null,isRequired:!0,validate:[{type:S.validatorTypes.REQUIRED}]}:{component:"description",name:"description-no-options",validate:[{type:S.validatorTypes.REQUIRED}],Content:F};return{fields:[{component:S.componentTypes.WIZARD,name:"wizard",title:t.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),inModal:!0,predictSteps:!0,showTitles:!0,crossroads:["application.application_type_id"],description:t.formatMessage({id:"sources.addAppDescription",defaultMessage:"You are managing applications of this source."}),buttonLabels:{submit:t.formatMessage({id:"sources.finish",defaultMessage:"Finish"}),cancel:t.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}),back:t.formatMessage({id:"sources.back",defaultMessage:"Back"})},fields:[{nextStep:u,title:t.formatMessage({id:"sources.selectApp",defaultMessage:"Select application"}),stepKey:1,name:"selectAppStep",fields:[{component:"description",name:"description",Content:q},f,{component:"description",name:"authtypesetter",Content:I,authenticationValues:i,hideField:!0,modifiedValues:o}]},{title:t.formatMessage({id:"sources.review",defaultMessage:"Review"}),stepKey:"summary",name:"summary",fields:[{component:"description",name:"description-summary",Content:N},{component:"summary",name:"summary",sourceTypes:a,applicationTypes:n}]}].concat(l)}]}},z=a(75),U=a(296),W=a(297),Y=a(332),K=a(77),J=a(314),Q=function(e){var t=e.onClose,a=e.customText;return f.a.createElement(K.Bullseye,null,f.a.createElement(U.EmptyState,{variant:U.EmptyStateVariant.full},f.a.createElement(J.Spinner,null),f.a.createElement(W.EmptyStateBody,null,a),t&&f.a.createElement(Y.EmptyStateSecondaryActions,null,f.a.createElement(z.Button,{variant:"link",onClick:t},f.a.createElement(w.a,{id:"sources.cancel",defaultMessage:"Cancel"})))))};Q.propTypes={onClose:B.a.func,customText:B.a.node},Q.defaultProps={customText:f.a.createElement(w.a,{id:"sources.loading",defaultMessage:"Loading, please wait."})};var Z=Q,H=a(303),X=a(125),$=a(449),ee=a.n($),te=function(e){var t=e.onClose,a=e.onRetry,n=e.message,r=e.title;return f.a.createElement(K.Bullseye,null,f.a.createElement(U.EmptyState,{variant:U.EmptyStateVariant.full},f.a.createElement(H.EmptyStateIcon,{icon:ee.a,color:"var(--pf-global--danger-color--100)"}),f.a.createElement(X.Title,{headingLevel:"h5",size:"lg"},r),f.a.createElement(W.EmptyStateBody,null,n),f.a.createElement(z.Button,{variant:"primary",onClick:t},f.a.createElement(w.a,{id:"sources.backToSources",defaultMessage:"Back to Sources"})),a&&f.a.createElement(Y.EmptyStateSecondaryActions,null,f.a.createElement(z.Button,{variant:"link",onClick:a},f.a.createElement(w.a,{id:"sources.retry",defaultMessage:"Retry"})))))};te.propTypes={onClose:B.a.func.isRequired,message:B.a.node.isRequired,title:B.a.node.isRequired,onRetry:B.a.func};var ae=te,ne=function(e){var t=e.setState,a=e.goToSources,n=e.error;return f.a.createElement(ae,{onClose:a,message:f.a.createElement(f.a.Fragment,null,f.a.createElement(w.a,{id:"sources.successAddApp",defaultMessage:"Your application has not been successfully added:"}),f.a.createElement("br",null),f.a.createElement(x.TextContent,null,f.a.createElement(M.Text,{component:M.TextVariants.h6},n))),title:f.a.createElement(w.a,{id:"sources.configurationSuccessful",defaultMessage:"Configuration unsuccessful"}),onRetry:function(){return t({state:"wizard"})}})};ne.propTypes={setState:D.PropTypes.func.isRequired,goToSources:D.PropTypes.func.isRequired,error:D.PropTypes.string.isRequired};var re=ne,ie=a(60),se=a.n(ie),oe=function(e){var t=e.onClose,a=e.title,n=e.successfulMessage,r=e.secondaryActions;return f.a.createElement(K.Bullseye,null,f.a.createElement(U.EmptyState,{variant:U.EmptyStateVariant.full},f.a.createElement(H.EmptyStateIcon,{icon:se.a,color:"var(--pf-global--success-color--100)"}),f.a.createElement(X.Title,{headingLevel:"h5",size:"lg"},a),f.a.createElement(W.EmptyStateBody,null,n),f.a.createElement(z.Button,{variant:"primary",onClick:t},f.a.createElement(w.a,{id:"sources.backToSources",defaultMessage:"Back to Sources"})),r&&f.a.createElement(Y.EmptyStateSecondaryActions,null,r)))};oe.propTypes={onClose:B.a.func.isRequired,successfulMessage:B.a.node.isRequired,title:B.a.node.isRequired,secondaryActions:B.a.node};var ce=oe,ue=function(e){var t=e.setState,a=e.goToSources;return f.a.createElement(ce,{onClose:a,successfulMessage:f.a.createElement(w.a,{id:"sources.successAddApp",defaultMessage:"Your application has been successfully added."}),title:f.a.createElement(w.a,{id:"sources.configurationSuccessful",defaultMessage:"Configuration successful"}),secondaryActions:f.a.createElement(z.Button,{variant:"link",onClick:function(){return t({state:"wizard"})}},f.a.createElement(w.a,{id:"sources.continueManageApp",defaultMessage:"Continue managing applications"}))})};ue.propTypes={setState:D.PropTypes.func.isRequired,goToSources:D.PropTypes.func.isRequired};var le=ue,pe=a(445),de=function(e){var t=e.step,a=e.goToSources,n=Object(h.a)();return f.a.createElement(pe.Wizard,{isOpen:!0,onClose:a,title:n.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),description:n.formatMessage({id:"sources.addAppDescription",defaultMessage:"You are managing applications of this source."}),steps:[{name:"Finish",component:t,isFinishedStep:!0}]})};de.propTypes={step:D.PropTypes.node.isRequired,goToSources:D.PropTypes.func.isRequired};var me=de,fe=a(13),ye=a(317),ge=a(81),he=a(76),ve=a(287),be=a.n(ve),Ee=a(150),Oe=a.n(Ee),Te=a(664),_e=a(421),je=a.n(_e),Se=a(109);function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we=function e(t){return Object.keys(t).forEach((function(a){t[a]&&"object"===Oe()(t[a])?je()(t[a])?delete t[a]:e(t[a]):void 0===t[a]&&delete t[a]})),t},Ae=function(){var e=d()(l.a.mark((function e(t,a,n,r){var i,s,o,c,u,p,d,m,f,y,g,h,v,E,_,j,S,M,x,w,A,k,C,R,P,V,q,D,B;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.getState(),s=i.values,o=s.authentication?s.authentication.id:void 0,c=o?n.find((function(e){return e.id===o})):void 0,u=t.authentication,p=be()(t,["authentication"]),d=Object(Te.addedDiff)(r,p),m=Object(Te.updatedDiff)(r,p),f=Object(Te.addedDiff)(c,u),y=Object(Te.updatedDiff)(c,u),g=we(xe({},b()(O()(d),m),{authentication:xe({},b()(O()(f),y))})),e.prev=10,s.source&&s.source.id){e.next=13;break}throw"Missing source id";case 13:if(h=s.source.id,v=s.endpoint?s.endpoint.id:void 0,E=[],g.source&&!je()(g.source)&&E.push(Object(fe.i)().updateSource(h,g.source)),_=g.endpoint&&!je()(g.endpoint),j=g.url&&!je()(g.url),!_&&!j){e.next=32;break}if(S=Object(Se.b)(g),M=S.scheme,x=S.host,w=S.port,A=S.path,k=parseInt(w,10),C=we(xe({},g.endpoint,{scheme:M,host:x,port:isNaN(k)?void 0:k,path:A})),!v){e.next=27;break}E.push(Object(fe.i)().updateEndpoint(v,C)),e.next=32;break;case 27:return R=xe({},C,{default:!0,source_id:h}),e.next=30,Object(fe.i)().createEndpoint(R);case 30:P=e.sent,v=P.id;case 32:return g.authentication&&!je()(g.authentication)&&(o?E.push(Object(fe.i)().updateAuthentication(o,g.authentication)):v&&(V=xe({},g.authentication,{resource_id:v,resource_type:"Endpoint"}),E.push(Object(fe.i)().createAuthentication(V)))),g.application&&g.application.application_type_id&&E.push(Object(fe.b)(h,g.application.application_type_id)),e.next=36,Promise.all(E);case 36:if(!(g.credentials||g.billing_source)){e.next=44;break}return q=g.credentials,D=g.billing_source,B={},B=q?{authentication:{credentials:q}}:{},B=D?xe({},B,{billing_source:D}):B,e.next=44,Object(T.patchSource)(xe({id:h},B));case 44:e.next=52;break;case 46:return e.prev=46,e.t0=e.catch(10),e.next=50,Object(T.handleError)(e.t0);case 50:throw e.sent;case 52:case"end":return e.stop()}}),e,null,[[10,46]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),ke=a(475);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}a.d(t,"onSubmit",(function(){return Ve}));var Re=void 0,Pe=function(e){var t=e.values.application;return Re=t},Ve=function(e,t,a,n,r,i){return r({state:"submitting"}),Ae(e,t,a,i).then(d()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Object(_.g)());case 2:return Re=void 0,e.abrupt("return",r({state:"finished"}));case 4:case"end":return e.stop()}}),e)})))).catch((function(t){return r({state:"errored",error:t,values:e})}))},qe={state:"loading",error:"",values:{},authenticationsValues:[],sourceAppsLength:0,initialValues:{}},De=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{},t)};t.default=function(){var e=Object(h.a)(),t=Object(y.f)(),a=Object(ye.a)(),n=Object(g.useSelector)((function(e){return e.sources}),g.shallowEqual),i=n.appTypes,o=n.sourceTypesLoaded,c=n.appTypesLoaded,u=n.sourceTypes,l=n.undoValues,p=Object(V.a)(),d=Object(g.useDispatch)(),v=Object(m.useReducer)(De,qe),E=s()(v,2),S=E[0],M=E[1];Object(m.useEffect)((function(){Re=void 0}),[]),Object(m.useEffect)((function(){if(p){var e=S.sourceAppsLength>=p.applications.length&&S.sourceAppsLength>0;M({sourceAppsLength:p.applications.length}),e||(p.endpoints&&p.endpoints[0]?Object(fe.i)().listEndpointAuthentications(p.endpoints[0].id).then((function(e){var t=e.data;return M({authenticationsValues:t,initialValues:{source:p,endpoint:p.endpoints[0],url:Object(ge.b)(p.endpoints[0]),application:Re,values:{}}})})).then((function(){"loading"===S.state&&M({state:"wizard"})})):(M({initialValues:{source:p,application:Re},values:{}}),"loading"===S.state&&M({state:"wizard"})))}}),[p]);var x=function(){return t.push(he.c.sources.path)};if(!c||!o||!a)return f.a.createElement(me,{goToSources:x,step:f.a.createElement(Z,null)});if("loading"===S.state||"submitting"===S.state)return f.a.createElement(me,{goToSources:x,step:f.a.createElement(Z,null)});if("wizard"!==S.state){var A="finished"===S.state?f.a.createElement(le,{setState:M,goToSources:x}):f.a.createElement(re,{setState:M,goToSources:x,error:S.error});return f.a.createElement(me,{goToSources:x,step:A})}var k=p.applications.filter((function(e){return!e.isDeleting})).reduce((function(e,t){return[].concat(r()(e),[t.application_type_id])}),[]),C=u.find((function(e){return e.id===p.source_type_id})),R=C&&C.name,P=i.filter((function(e){return!k.includes(e.id)&&e.supported_source_types.includes(R)})).filter(T.filterApps),q=P.map((function(t){var a=p.applications.find((function(e){return e.application_type_id===t.id})),n="".concat(t.display_name," ").concat(a?"(".concat(e.formatMessage({id:"sources.currentlyRemoving",defaultMessage:"Currently removing"}),")"):"");return{value:t.id,label:n,isDisabled:!!a}})),D=b()(O()(l),S.values),B=G(q,e,u,i,S.authenticationsValues,p,D),I=P.length>0?function(e,t){return Ve(e,t,S.authenticationsValues,d,M,S.initialValues)}:x,F=b()(O()(S.initialValues),D);return f.a.createElement(j.a,{schema:B,showFormControls:!1,onSubmit:I,onCancel:function(a){return function(e){var t=e.values,a=e.dispatch,n=e.history,r=e.intl,i=e.sourceId;if(t&&t.application){var s=Date.now();a(Object(_.b)(r.formatMessage({id:"sources.addApplicationCanceled",defaultMessage:"Adding an application was cancelled"}),"success",f.a.createElement(w.a,{id:"sources.undoMistake",defaultMessage:"{undo} if this was a mistake.",values:{undo:f.a.createElement(ke.a,{messageId:s,values:t,path:Object(he.b)(he.c.sourceManageApps.path,i)})}}),s))}a(Object(_.c)()),n.push(he.c.sources.path)}({values:a,dispatch:d,intl:e,sourceId:p.id,history:t})},initialValues:F,subscription:{values:!0},onStateUpdate:Pe,clearedValue:null})}}}]);
//# sourceMappingURL=../sourcemaps/addApp.js.map