"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[180],{59622:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ce,onSubmit:()=>Ae});var a=n(45987),i=n(29439),r=n(87462),o=n(15861),s=n(64687),c=n.n(s),u=n(92950),l=n.n(u),p=n(86235),d=n(86706),m=n(86896),f=n(41609),h=n.n(f),g=n(49288),y=n(67850),v=n(89372),b=n(90280),E=n(4942),w=n(93433),M=n(96354),T=n(6848),Z=n(32600),_=n(27361),O=n.n(_),S=n(64124);var A=n(42812);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=n(45697),j=n.n(k),P=n(48880),N=function(e){var t=e.authenticationValues,n=(0,P.default)(),a=n.getState().values.selectedAuthentication,r=(0,u.useState)(a),o=(0,i.Z)(r,2),s=o[0],c=o[1];return(0,u.useEffect)((function(){s!==a&&(function(e){var t=e.formOptions,n=e.authenticationValues,a=e.selectedAuthentication;if(a.startsWith("new-")){var i=a.replace("new-","");t.change("authentication",{authtype:i})}else{var r=n.find((function(e){return e.id===a}));t.change("authentication",r)}}({formOptions:n,authenticationValues:t,selectedAuthentication:a}),c(void 0))}),[a]),null};N.propTypes={authenticationValues:j().arrayOf(j().object)};var R=function(e){var t=e.applicationTypeName,n=e.authenticationTypeName,a=(0,m.Z)();return l().createElement(T.TextContent,null,l().createElement(T.Text,{component:T.TextVariants.p},a.formatMessage({id:"sources.selectAuthenticationDescription",defaultMessage:"Selected application { applicationTypeName } supports { authenticationTypeName } authentication type. You can use already defined authentication values or define new."},{applicationTypeName:t,authenticationTypeName:n})))};R.propTypes={applicationTypeName:j().string,authenticationTypeName:j().string};var D=function(e){var t=e.authenticationValues,n=e.supportedAuthTypeName,a=e.supportedAuthType,i=e.applicationTypes,r=e.source;return t.filter((function(e){return e.authtype===a})).map((function(e){var t=e.username?"-".concat(e.username):"",a=r.applications.find((function(t){return t.authentications.find((function(t){return t.id===e.id}))})),o=a&&a.application_type_id?i.find((function(e){return e.id===a.application_type_id})):"",s=o?"-".concat(o.display_name):"-unused-".concat(e.id);return{label:"".concat(n).concat(t).concat(s),value:e.id}}))};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(){var e=(0,m.Z)();return l().createElement(T.TextContent,null,l().createElement(T.Text,{component:T.TextVariants.p},e.formatMessage({id:"sources.reviewAddAppSummary",defaultMessage:"Review the information below and click Add to add the application to your source. Use the Back button to make changes."})))};const I=function(e,t,n,a,i,r,o,s,c,u){var l,p,d,m=[];if(!i.imported){var f,h,g,y=null!==(f=t.schema.endpoint)&&void 0!==f&&f.hidden?null===(h=t.schema.endpoint)||void 0===h?void 0:h.fields:[],v=void 0!==t.schema.endpoint&&0===y.length,b=!n.supported_authentication_types[t.name]||0===n.supported_authentication_types[t.name].length,E=b?[A.Z.type]:n.supported_authentication_types[t.name],T=b?[A.Z]:t.schema.authentication;n.supported_source_types.includes(t.name)&&E.forEach((function(a){m.push(function(e,t,n,a,i,r,o){var s,c=(0,w.Z)(n),u=e.schema.endpoint&&!(null!==(s=e.schema.enpoint)&&void 0!==s&&s.hidden);Z.GN(e.name,a,t.name)&&(c=[]);var l,p=[].concat((0,w.Z)(e.schema.authentication),[r?A.Z:void 0]).find((function(e){return e.type===a})),d="".concat(e.name,"-").concat(a,"-").concat(t.name,"-additional-step"),m=Z.QW(e.name,a,t.name),f=Z.G$(e.name,a,t.name);l=Z.Z$(e.name,a,t.name,o).length>0?d:0===n.length&&!m&&u?"".concat(e.name,"-endpoint"):"summary";var h=Z.gF(e.name,a,t.name),g={};if(Z.pD(e.name,a,t.name)){var y=Z.Z$(e.name,a,t.name,o).find((function(e){return!e.name})),v=Z.zi(p.fields,d);l=y.nextStep?y.nextStep:0!==n.length||m||f||!u?"summary":"".concat(e.name,"-endpoint"),g=C(C({},y),{},{fields:[].concat((0,w.Z)(c),(0,w.Z)(Z.Ow([].concat((0,w.Z)(y.fields),(0,w.Z)(v)),e.name,a,t.name)))})}return C({name:"".concat(e.name,"-").concat(t.id,"-").concat(a),title:i.formatMessage({id:"sources.configureCredentials",defaultMessage:"Configure credentials"}),fields:[].concat((0,w.Z)(c),(0,w.Z)(Z.YD(e.name,a,t.name)),(0,w.Z)(Z.Ow(Z.sM(p.fields,h),e.name,a,t.name))),nextStep:l},g)}(t,n,y,a,e,b,u))})),T.forEach((function(e){if(n.supported_source_types.includes(t.name)){var a=Z.Z$(t.name,e.type,n.name,u);a.length>0&&m.push.apply(m,(0,w.Z)(Z.YV(a,t.name,e.type,v,e.fields,n.name)))}})),v&&m.push(Z.TC(t.schema.endpoint,t.name)),l=m[0],(p=(null==n||null===(g=n.supported_authentication_types[t.name])||void 0===g?void 0:g.length)>1)&&(l=function(e,t,n,a){return{name:"selectAuthType-".concat(t.id),title:n.formatMessage({id:"sources.selectAuthenticationTitle",defaultMessage:"Select authentication type"}),fields:[{component:M.Z.RADIO,name:"authtype",options:t.supported_authentication_types[e.name].map((function(t){var n;return{value:t,label:(null===(n=e.schema.authentication.find((function(e){return e.type===t})))||void 0===n?void 0:n.name)||"Unknown type"}})),isRequired:!0,validate:[{type:S.Z.REQUIRED}]}],nextStep:function(t){var n=t.values,i=n.application,r=n.authtype;if(r)return a.find((function(e){return e.authtype===r}))?"selectAuthentication":"".concat(e.name,"-").concat(i&&i.application_type_id,"-").concat(r)}}}(t,n,e,a)),d=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((function(n){return n.authtype===O()(e,"supported_authentication_types.".concat(t,"[0]"))}))}(a,n,t.name),d&&(l=function(e){var t,n=e.intl,a=e.source,i=e.authenticationValues,r=e.sourceType,o=e.app,s=e.applicationTypes,c=[{component:"description",name:"authtypesetter",Content:N,authenticationValues:i,hideField:!0}],u=o.supported_source_types.includes(r.name),l=!(null!==(t=a.applications)&&void 0!==t&&t.find((function(e){return e.application_type_id===o.id})));return u&&l&&O()(o,"supported_authentication_types[".concat(r.name,"]"),[]).forEach((function(e){if(i.find((function(t){return t.authtype===e}))){var t=O()(r,"schema.authentication",{}).find((function(t){return t.type===e})).name;c.push({component:M.Z.SUB_FORM,name:"".concat(o.name,"-subform"),fields:[{name:"".concat(o.name,"-select-authentication-summary"),component:"description",Content:R,applicationTypeName:o.display_name,authenticationTypeName:t},{component:M.Z.RADIO,name:"selectedAuthentication",label:n.formatMessage({id:"sources.selectAuthenticationTitle",defaultMessage:"Select authentication"}),isRequired:!0,validate:[{type:S.Z.REQUIRED}],options:[{label:n.formatMessage({id:"sources.selectAuthenticationradioLabel",defaultMessage:"Define new { supportedAuthTypeName }"},{supportedAuthTypeName:t}),value:"new-".concat(e)}].concat((0,w.Z)(D({authenticationValues:i,supportedAuthTypeName:t,supportedAuthType:e,applicationTypes:s,source:a})))}]})}})),{name:"selectAuthentication",title:n.formatMessage({id:"sources.selectAuthenticationTitle",defaultMessage:"Select authentication"}),fields:c,nextStep:function(e){var t=e.values,n=t.authtype,a=t.authentication;return"".concat(r.name,"-").concat(o.id,"-").concat(n||(null==a?void 0:a.authtype))}}}({intl:e,source:i,authenticationValues:a,sourceType:t,app:n,applicationTypes:c}))}var _={component:M.Z.TEXT_FIELD,name:"application.application_type_id",hideField:!0,initialValue:n.id};return{fields:[{component:M.Z.WIZARD,className:"sources",name:"wizard",title:o,inModal:!0,container:r,showTitles:!0,crossroads:["selectedAuthentication","authtype"],description:s,closeButtonAriaLabel:e.formatMessage({id:"wizard.close",defaultMessage:"Close wizard"}),buttonLabels:{submit:e.formatMessage({id:"sources.add",defaultMessage:"Add"}),cancel:e.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}),back:e.formatMessage({id:"sources.back",defaultMessage:"Back"})},fields:[].concat((0,w.Z)(i.imported?[]:[z(z({},l),{},{fields:[].concat((0,w.Z)(l.fields),[_])})]),[{title:e.formatMessage({id:"sources.reviewDetails",defaultMessage:"Review details"}),name:"summary",fields:[{component:"description",name:"description-summary",Content:V},{component:"summary",name:"summary",sourceTypes:[t],applicationTypes:[n]}].concat((0,w.Z)(i.imported?[_]:[]))}],(0,w.Z)(d||p?m:m.splice(1)))}]}};var L=function(e){var t=e.step,n=e.goToSources,a=e.title,i=e.description;return l().createElement(T.Wizard,{isOpen:!0,onClose:n,title:a,description:i,steps:[{name:"Finish",component:t,isFinishedStep:!0}]})};L.propTypes={step:k.PropTypes.node.isRequired,goToSources:k.PropTypes.func.isRequired,title:k.PropTypes.string,description:k.PropTypes.string};const F=L;var U=n(48815),q=n(60566),W=n(59824),G=n(4833),Y=n(60076),$=n(71002),Q=n(23389),H=n(91922),K=n(82492),X=n.n(K),J=n(50361),ee=n.n(J),te=n(34307),ne=n(72810),ae=n(96845),ie=n(84866),re=["authentication"];function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"===(0,$.Z)(t[n])?h()(t[n])?delete t[n]:e(t[n]):void 0===t[n]&&delete t[n]})),t},ue=function(){var e=(0,o.Z)(c().mark((function e(t,n,r,o){var s,u,l,p,d,m,f,g,y,v,b,E,w,M,T,Z,_,O,S,x,C,k,j,P,N,R,D,B,z,V,I,L,F,q,W,G,Y,$,K,J,oe,ue,le,pe,de=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=de.length>4&&void 0!==de[4]?de[4]:[],p=n.getState(),d=p.values,m=null===(s=d.authentication)||void 0===s?void 0:s.id,f=m&&r.find((function(e){return e.id===m})),g=t.authentication,y=(0,a.Z)(t,re),v=(0,Q.Z)(o,y),b=(0,H.Z)(o,y),E=(0,Q.Z)(f,g),w=(0,H.Z)(f,g),M=ce(se(se({},X()(ee()(v),b)),{},{authentication:se({},X()(ee()(E),w))})),e.prev=11,null!=d&&null!==(T=d.source)&&void 0!==T&&T.id){e.next=14;break}throw"Missing source id";case 14:return S=new Date,x=d.source.id,C=null==d||null===(Z=d.endpoint)||void 0===Z?void 0:Z.id,k=[],M.source&&!h()(M.source)?k.push((0,U.Rj)().updateSource(x,M.source)):k.push(Promise.resolve(void 0)),j=M.endpoint&&!h()(M.endpoint),P=M.url&&!h()(M.url),j||P?(N=(0,te.K_)(M),R=N.scheme,D=N.host,B=N.port,z=N.path,V=parseInt(B,10),I=ce(se(se({},M.endpoint),{},{scheme:R,host:D,port:isNaN(V)?void 0:V,path:z})),C?k.push((0,U.Rj)().updateEndpoint(C,I)):(L=se(se({},I),{},{default:!0,source_id:x}),k.push((0,U.Rj)().createEndpoint(L)))):k.push(Promise.resolve(void 0)),null!==(_=M.application)&&void 0!==_&&_.application_type_id?(F=se(se({},M.application),{},{source_id:x}),k.push((0,U.Cu)(F))):k.push(Promise.resolve(void 0)),e.next=25,Promise.all(k);case 25:if(q=e.sent,(W=(0,i.Z)(q,3))[0],G=W[1],Y=W[2],l=null==Y?void 0:Y.id,!M.authentication||h()(M.authentication)||M.authentication.authtype===A.Z.type){e.next=42;break}if(!m){e.next=38;break}return e.next=35,(0,U.Rj)().updateAuthentication(m,M.authentication);case 35:$=e.sent,e.next=42;break;case 38:return K=se(se({},M.authentication),{},{resource_id:(null==G?void 0:G.id)||(null==Y?void 0:Y.id),resource_type:null!=G&&G.id?"Endpoint":"Application"}),e.next=41,(0,U.Rj)().createAuthentication(K);case 41:$=e.sent;case 42:if(J=m||(null===(O=$)||void 0===O?void 0:O.id),null==Y||!Y.id||!J){e.next=47;break}return oe={application_id:Y.id,authentication_id:J},e.next=47,(0,U.Rj)().createAuthApp(oe);case 47:if(!C){e.next=51;break}return e.next=50,(0,ne.h)(C,void 0,void 0,"getEndpoint",S);case 50:ue=e.sent;case 51:if(!Y){e.next=57;break}return le=(0,ie.T2)(u).includes(Y.application_type_id)?1e4:0,e.next=55,(0,ne.h)(Y.id,le);case 55:return pe=e.sent,e.abrupt("return",se({id:pe.id,applications:[pe]},ue&&{endpoint:[ue]}));case 57:return e.abrupt("return",{});case 60:if(e.prev=60,e.t0=e.catch(11),console.error(e.t0),!l){e.next=66;break}return e.next=66,(0,U.Rj)().deleteApplication(l);case 66:return e.next=68,(0,ae.Z)(e.t0);case 68:throw e.sent;case 70:case"end":return e.stop()}}),e,null,[[11,60]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),le=n(91447);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me={state:"loading",error:"",values:{},authenticationsValues:[],sourceAppsLength:0,initialValues:{},isCancelling:!1};const fe=function(e,t){var n=t.type,a=t.length,i=t.authenticationsValues,r=t.initialValues,o=t.error,s=t.values,c=t.data,u=t.formApi;switch(n){case"setSourceAppslength":return de(de({},e),{},{sourceAppsLength:a});case"loadAuthentications":return de(de({},e),{},{authenticationsValues:i,initialValues:r,values:{},state:"loading"===e.state?"wizard":e.state});case"loadWithoutAuthentications":return de(de({},e),{},{initialValues:r,values:{},state:"loading"===e.state?"wizard":e.state});case"reset":return de(de({},e),{},{state:"wizard"});case"submit":return de(de({},e),{},{values:s,formApi:u,state:"submitting"});case"finish":return de(de({},e),{},{state:"finished",data:c});case"error":return de(de({},e),{},{state:"errored",error:o});case"toggleCancelling":return de(de({},e),{},{isCancelling:!e.isCancelling},s&&{values:s});default:return e}};var he=n(15185),ge=n(31623),ye=n(52893),ve=n(79433),be=n(98824),Ee=n(50063),we=n(4435),Me=n(86482),Te=n(64673),Ze=n(5746),_e=n(66974),Oe=["application"],Se=["application"],Ae=function(e,t,n,a,i,r,s,u){return i({type:"submit",values:e,formApi:t}),ue(e,t,n,r,s).then(function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,le.n)(r.source.id),e.next=3,a((0,v.il)());case 3:return u({values:{application:null}}),e.abrupt("return",i({type:"finish",data:t}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return i({type:"error",error:e})}))},xe=function(e){return l().createElement(y.ZP,(0,r.Z)({},e,{showFormControls:!1}))};const Ce=function(){var e=(0,m.Z)(),t=(0,p.useHistory)(),n=(0,u.useRef)(),r=(0,g.useFlag)("sources.wizard.lighthouse"),o=function(e){var t=e.values.application;return n.current=t},s=(0,p.useParams)().app_type_id,c=(0,W.W)(),f=(0,d.v9)((function(e){return e.sources}),d.wU),y=f.appTypes,v=f.sourceTypesLoaded,E=f.appTypesLoaded,w=f.sourceTypes,M=(0,q.L)(),Z=(0,d.I0)(),_=(0,u.useReducer)(fe,me),O=(0,i.Z)(_,2),S=O[0],A=O[1],x=(0,u.useRef)(document.createElement("div")),C=y.find((function(e){return e.id===s}));(0,u.useEffect)((function(){if(M){var e=S.sourceAppsLength>=M.applications.length&&S.sourceAppsLength>0;A({type:"setSourceAppslength",length:M.applications.length}),e||(M.endpoints&&M.endpoints[0]?(0,U.Rj)().listEndpointAuthentications(M.endpoints[0].id).then((function(e){var t=e.data;return A({type:"loadAuthentications",authenticationsValues:t,initialValues:{source:M,endpoint:M.endpoints[0],url:(0,G.Fd)(M.endpoints[0]),application:n.current},values:{}})})):A({type:"loadWithoutAuthentications",initialValues:{source:M,application:n.current},values:{}}))}}),[M]);var k=function(){return t.push((0,Y.yS)(Y._j.sourcesDetail.path,M.id))},j=e.formatMessage({id:"sources.addApplicationNameTitle",defaultMessage:"Connect {appName}"},{appName:(null==C?void 0:C.display_name)||"application"}),P=e.formatMessage({id:"sources.addApplicationNameDescription",defaultMessage:"Configure {appName} for this source."},{appName:(null==C?void 0:C.display_name)||"application"});if(!(E&&v&&c&&"loading"!==S.state||"submitting"===S.state))return l().createElement(F,{goToSources:k,title:j,description:P,step:l().createElement(ye.Z,{customText:e.formatMessage({id:"sources.loading",defaultMessage:"Loading, please wait."}),cancelTitle:e.formatMessage({id:"sources.close",defaultMessage:"Close"}),onClose:k})});var N=function(e,t){return Ae(e,t,S.authenticationsValues,Z,A,S.initialValues,y,o)};if("submitting"===S.state)return l().createElement(F,{title:j,description:P,goToSources:k,step:l().createElement(ye.Z,{cancelTitle:e.formatMessage({id:"sources.close",defaultMessage:"Close"}),onClose:k,customText:e.formatMessage({id:"wizard.loadingText",defaultMessage:"Validating credentials"}),description:e.formatMessage({id:"wizard.loadingDescription",defaultMessage:"This could take a minute. If you prefer not to wait, close this dialog and the process will continue."})})});var R=function(){return A({type:"reset"})},D=w.find((function(e){return e.id===M.source_type_id}));if("wizard"!==S.state){var B;if("finished"!==S.state)B=l().createElement(ve.Z,{onRetry:R,onClose:k,returnButtonTitle:e.formatMessage({id:"sources.retry",defaultMessage:"Retry"}),primaryAction:function(){return N(S.values,S.formApi)},secondaryActions:l().createElement(T.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},e.formatMessage({id:"wizard.openTicket",defaultMessage:"Open a support case"}))});else switch((0,Me.Z)(S.data)){default:B="amazon"===D.name?l().createElement(be.Z,{onClose:k}):l().createElement(Ee.Z,{title:e.formatMessage({id:"sources.configurationSuccessful",defaultMessage:"Configuration successful"}),hideSourcesButton:!0,onClose:k,returnButtonTitle:e.formatMessage({id:"sources.exit",defaultMessage:"Exit"}),successfulMessage:e.formatMessage({id:"sources.successAddApp",defaultMessage:"Your application was successfully added."})});break;case"unavailable":B=l().createElement(ve.Z,{onRetry:R,onClose:k,message:(0,Ze.Z)(S.data,e),title:e.formatMessage({id:"sources.configurationSuccessful",defaultMessage:"Configuration unsuccessful"}),secondaryActions:l().createElement(T.Button,{variant:"link",onClick:function(){var t,n;return A({type:"reset"}),(0,he.Z)({id:null===(t=S.data)||void 0===t?void 0:t.id,display_name:null===(n=y.find((function(e){var t,n,a;return e.id===(null===(t=S.data)||void 0===t||null===(n=t.applications)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.application_type_id)})))||void 0===n?void 0:n.display_name},e,void 0,Z,M)}},e.formatMessage({id:"wizard.removeApp",defaultMessage:"Remove application"})),Component:function(){return l().createElement(p.Link,{to:(0,Y.yS)(Y._j.sourcesDetail.path,M.id)},l().createElement(T.Button,{variant:"primary",className:"pf-u-mt-xl"},e.formatMessage({id:"wizard.editSource",defaultMessage:"Edit source"})))}});break;case"timeout":B=l().createElement(we.Z,{returnButtonTitle:e.formatMessage({id:"sources.exit",defaultMessage:"Exit"}),onClose:k})}return l().createElement(F,{title:j,description:P,goToSources:k,step:B})}var z=D&&D.name,V=y.filter((function(e){return e.supported_source_types.includes(z)})).filter(Te.Z).map((function(e){return{value:e.id,label:e.display_name}}));if(!C||M.applications.find((function(e){return e.application_type_id===s}))||!C.supported_source_types.includes(D.name))return l().createElement(p.Redirect,{to:(0,Y.yS)(Y._j.sourcesDetail.path,M.id)});var L=I(e,D,C,S.authenticationsValues,M,x.current,j,P,y,r),$=V.length>0?N:k;return l().createElement(l().Fragment,null,S.isCancelling&&l().createElement(_e.Z,{title:e.formatMessage({id:"sources.manageAppsCloseModalTitle",defaultMessage:"Exit application adding?"}),onStay:function(){x.current.style.opacity=1,x.current.setAttribute("aria-hidden","false"),A({type:"toggleCancelling"})},onExit:k}),l().createElement(b.Z,{schema:L,showFormControls:!1,onSubmit:$,onCancel:function(e){var t=S.initialValues,n=(t.application,(0,a.Z)(t,Oe)),i=(e.application,(0,a.Z)(e,Se));h()((0,ge.Z)(n,i))?k():(x.current.style.opacity=0,x.current.setAttribute("aria-hidden","true"),A({type:"toggleCancelling",values:e}))},initialValues:S.initialValues,subscription:{values:!0},debug:o,clearedValue:null,FormTemplate:xe}))}},15185:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(89372);const i=function(e,t,n,i,r){var o=t.formatMessage({id:"sources.removeAppWarning",defaultMessage:"{ name } was removed from this source."},{name:e.display_name}),s=t.formatMessage({id:"sources.removeAppError",defaultMessage:"Removing of { name } application from this source was unsuccessful."},{name:e.display_name});return n&&n(),i((0,a.Yn)(e.id,r.id,o,s))}},66974:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),i=n.n(a),r=n(45697),o=n.n(r),s=n(86896),c=n(44012),u=n(6848),l=n(69957),p=function(e){var t=e.onExit,n=e.onStay,r=e.title,o=e.exitTitle,c=e.stayTitle,p=e.description,d=(0,s.Z)(),m=(0,a.useRef)(!1);return i().createElement(u.Modal,{onEscapePress:function(e){m.current&&n(e),m.current=!0},className:"sources",variant:"small",title:r,"aria-label":d.formatMessage({id:"wizard.closeAriaLabel",defaultMessage:"Close add source wizard"}),header:i().createElement(u.Title,{headingLevel:"h1",size:"2xl"},i().createElement(l.ZP,{size:"sm",className:"src-c-warning-icon","aria-label":"Exclamation icon"}),r),isOpen:!0,onClose:n,actions:[i().createElement(u.Button,{key:"confirm",variant:"primary",id:"on-exit-button",onClick:t},o),i().createElement(u.Button,{key:"cancel",variant:"link",id:"on-stay-button",onClick:n},c)]},p)};p.propTypes={onExit:o().func.isRequired,onStay:o().func.isRequired,title:o().node,exitTitle:o().node,stayTitle:o().node,description:o().node},p.defaultProps={title:i().createElement(c.Z,{id:"wizard.closeTitle",defaultMessage:"Exit source creation?"}),exitTitle:i().createElement(c.Z,{id:"wizard.exitText",defaultMessage:"Exit"}),stayTitle:i().createElement(c.Z,{id:"wizard.stayText",defaultMessage:"Stay"}),description:i().createElement(c.Z,{id:"wizard.closeWarning",defaultMessage:"All inputs will be discarded."})};const d=p},98824:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(92950),i=n.n(a),r=n(45697),o=n.n(r),s=n(86896),c=n(6848),u=n(68778),l=function(e){var t=e.href,n=e.children;return i().createElement(i().Fragment,null,i().createElement(u.ZP,{className:"pf-u-mr-sm",fill:"var(--pf-global--success-color--100)"}),i().createElement(c.Text,{component:"a",href:t,target:"_blank",rel:"noopener noreferrer"},n))};l.propTypes={href:o().string.isRequired,children:o().node.isRequired};var p=insights.chrome.isBeta()?"beta/":"",d="/".concat(p,"subscriptions"),m="/".concat(p,"insights"),f="/".concat(p,"cost-management"),h=function(e){var t=e.onClose,n=(0,s.Z)();return i().createElement(a.Fragment,null,i().createElement(c.Alert,{variant:"info",isInline:!0,title:n.formatMessage({id:"aws.alertTitle",defaultMessage:"Allow 24 hours for full activation"})},n.formatMessage({id:"aws.alertDescription",defaultMessage:"Manage connections for this source at any time in Settings > Sources."})),i().createElement(c.Bullseye,null,i().createElement(c.EmptyState,{variant:c.EmptyStateVariant.full,className:"pf-u-mt-md"},i().createElement(c.EmptyStateIcon,{icon:u.ZP,color:"var(--pf-global--success-color--100)",className:"pf-u-mb-0"}),i().createElement(c.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},n.formatMessage({id:"aws.successTitle",defaultMessage:"Amazon Web Services connection established"})),i().createElement(c.EmptyStateBody,null,n.formatMessage({id:"aws.successDescription",defaultMessage:"Discover the benefits of your connection or exit to manage your new source."}),i().createElement(c.Grid,{hasGutter:!0,className:"src-c-aws-grid pf-u-mt-md"},i().createElement(c.GridItem,{md:"6"},i().createElement(l,{href:"https://access.redhat.com/management/cloud"},n.formatMessage({id:"aws.goldImages",defaultMessage:"View enabled AWS gold images"}))),i().createElement(c.GridItem,{md:"6"},i().createElement(l,{href:d},n.formatMessage({id:"aws.subwtachUsage",defaultMessage:"Subscription Watch usage"}))),i().createElement(c.GridItem,{md:"6"},i().createElement(l,{href:m},n.formatMessage({id:"aws.insights",defaultMessage:"Get started with Red Hat Insights"}))),i().createElement(c.GridItem,{md:"6"},i().createElement(l,{href:f},n.formatMessage({id:"aws.costLink",defaultMessage:"Cost Management reporting"}))))),i().createElement(c.Button,{variant:"primary",onClick:t,className:"pf-u-mt-xl"},n.formatMessage({id:"exit",defaultMessage:"Exit"})),i().createElement(c.EmptyStateSecondaryActions,null,i().createElement(c.Text,{component:"a",href:"https://access.redhat.com/public-cloud/aws",target:"_blank",rel:"noopener noreferrer"},n.formatMessage({id:"aws.learnMore",defaultMessage:"Learn more about this Cloud"}))))))};h.propTypes={onClose:o().func.isRequired};const g=h},50063:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),i=n.n(a),r=n(45697),o=n.n(r),s=n(44012),c=n(6848),u=n(68778),l=n(24160),p=function(e){var t=e.onClose,n=e.successfulMessage,a=e.hideSourcesButton,r=e.returnButtonTitle,o=e.title,p=e.linkText,d=e.secondaryActions,m=e.uuid;return i().createElement(c.Bullseye,null,i().createElement(c.EmptyState,{variant:c.EmptyStateVariant.full,className:"pf-u-mt-4xl"},i().createElement(c.EmptyStateIcon,{icon:u.ZP,color:"var(--pf-global--success-color--100)",className:"pf-u-mb-0"}),i().createElement(c.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},o),i().createElement(c.EmptyStateBody,{className:"src-c-wizard--step-text"},n),m&&i().createElement(c.Form,{className:"src-c-uuid"},i().createElement(c.FormGroup,{label:i().createElement(s.Z,{id:"wizard.sourcesUid",defaultMessage:"Source UUID"}),fieldId:"source-uuid"},i().createElement(c.ClipboardCopy,{id:"source-uuid",isReadOnly:!0,hoverTip:"Source UUID",clickTip:"Copied",className:"pf-u-mt-md"},m))),i().createElement(c.Button,{variant:"primary",onClick:t,className:"pf-u-mt-xl"},r),!a&&i().createElement(c.EmptyStateSecondaryActions,null,i().createElement(c.Button,{variant:"link",component:"a",target:"_blank",rel:"noopener noreferrer",href:(0,l.Z)()},p)),d&&i().createElement(c.EmptyStateSecondaryActions,null,d)))};p.propTypes={onClose:o().func.isRequired,successfulMessage:o().node.isRequired,hideSourcesButton:o().bool,returnButtonTitle:o().node.isRequired,title:o().node,linkText:o().node,secondaryActions:o().node,uuid:o().string},p.defaultProps={title:i().createElement(s.Z,{id:"wizard.succConfiguration",defaultMessage:"Configuration successful"}),linkText:i().createElement(s.Z,{id:"wizard.toSources",defaultMessage:"Take me to sources"})};const d=p},4435:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(92950),i=n.n(a),r=n(45697),o=n.n(r),s=n(86896),c=n(44012),u=n(6848),l=n(5913),p=function(e){var t=e.onClose,n=e.returnButtonTitle,a=e.title,r=e.secondaryActions,o=e.uuid,c=(0,s.Z)();return i().createElement(u.Bullseye,null,i().createElement(u.EmptyState,{variant:u.EmptyStateVariant.full,className:"pf-u-mt-4xl"},i().createElement(u.EmptyStateIcon,{icon:l.ZP,color:"var(--pf-global--Color--200)",className:"pf-u-mb-0"}),i().createElement(u.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},a),i().createElement(u.EmptyStateBody,null,c.formatMessage({id:"wizard.uncompleteConfigurationDescription",defaultMessage:"We are still working to confirm credentials and app settings.{newLine}To track progress, check the Status column in the Sources table."},{newLine:i().createElement("br",{key:"br"})}),null!=o?o:i().createElement(u.ClipboardCopy,{isReadOnly:!0,hoverTip:"Source UUID",clickTip:"Copied",className:"pf-u-mt-md"},o)),i().createElement(u.Button,{variant:"primary",onClick:t,className:"pf-u-mt-xl"},n),r&&i().createElement(u.EmptyStateSecondaryActions,null,r)))};p.propTypes={onClose:o().func.isRequired,returnButtonTitle:o().node.isRequired,title:o().node,secondaryActions:o().node,uuid:o().string},p.defaultProps={title:i().createElement(c.Z,{id:"wizard.uncompleteConfigurationTitle",defaultMessage:"Configuration in progress"})};const d=p},5746:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e,t){var n,a,i,r,o,s;return(null===(n=e.applications)||void 0===n||null===(a=n.filter(Boolean).find((function(e){return e.availability_status_error})))||void 0===a?void 0:a.availability_status_error)||(null===(i=e.endpoint)||void 0===i||null===(r=i.filter(Boolean).find((function(e){return e.availability_status_error})))||void 0===r?void 0:r.availability_status_error)||(null===(o=e.authentications)||void 0===o||null===(s=o.filter(Boolean).find((function(e){return e.availability_status_error})))||void 0===s?void 0:s.availability_status_error)||t.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"})}},86482:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(93433);const i=function(e){var t,n,i,r=(null===(t=e.applications)||void 0===t?void 0:t.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],o=(null===(n=e.endpoint)||void 0===n?void 0:n.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],s=(null===(i=e.authentications)||void 0===i?void 0:i.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],c=[].concat((0,a.Z)(r),(0,a.Z)(o),(0,a.Z)(s));return c.includes("unavailable")?"unavailable":c.length>0&&c.every((function(e){return"available"===e}))?"available":c.includes("timeout")?"timeout":"finished"}},24160:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(){return insights.chrome.isBeta()?"/beta/settings/sources":"/settings/sources"}}}]);
//# sourceMappingURL=../sourcemaps/addApplication.fd769f4d3be50ce6829f320c5b5b6e72.js.map