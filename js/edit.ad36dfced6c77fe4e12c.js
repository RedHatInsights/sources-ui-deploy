(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{401:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)();t.a=a},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(102),a=n.n(r),o=n(0),i=n.n(o),c=n(9),s=n.n(c),u=n(365),l=n.n(u),p=n(477),d=n.n(p),f=n(51),m=n(367),h=n(401),g=n(362),y=n.n(g),v="edit-field",b=function(e){var t=e.isRequired,n=e.label,r=e.helperText,c=e.hideLabel,s=e.name,u=e.type,p=e.isEditable,g=y()(),v=g.getFieldState,b=g.getState,O=Object(o.useContext)(h.a).setState,j=v(s)||{value:l()(b().initialValues,s)},E=j.error,w=j.touched,M=j.value,_=w&&E,P="password"===u||s.includes("password")?"Click to edit":"Click to add";return i.a.createElement(m.FormGroup,a()({isRequired:t,label:!c&&n,fieldId:s,validated:_?"error":"default",helperText:r,helperTextInvalid:E,tabIndex:0,onKeyPress:function(e){32===e.charCode&&p&&(e.preventDefault(),O({type:"setEdit",name:s}))}},p&&{onClick:function(){return O({type:"setEdit",name:s})}}),i.a.createElement("div",{className:"pf-c-form__horizontal-group ins-c-sources__edit-field-group ".concat(p?"clickable":"")},i.a.createElement(f.TextContent,{className:"ins-c-sources__edit-field-group-text-content ".concat(p?"clickable":"")},i.a.createElement("span",{className:"ins-c-sources__edit-field-value pf-u-mr-sm"},M||(p?P:"")),p&&i.a.createElement(d.a,null))))};b.propTypes={label:s.a.node,isRequired:s.a.bool,helperText:s.a.node,hideLabel:s.a.bool,isEditable:s.a.bool,type:s.a.string,name:s.a.string},t.b=b},432:function(e,t,n){var r=n(465);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},433:function(e,t,n){"use strict";var r=n(386).createCommonjsModule((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new T(r||[]);return o._invoke=function(e,t,n){var r=l;return function(a,o){if(r===d)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw o;return S()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=M(i,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=u(e,t,n);if("normal"===s.type){if(r=n.done?f:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=f,n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l="suspendedStart",p="suspendedYield",d="executing",f="completed",m={};function h(){}function g(){}function y(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,O=b&&b(b(x([])));O&&O!==n&&r.call(O,o)&&(v=O);var j=y.prototype=h.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:t,done:!0}}return g.prototype=j.constructor=y,y.constructor=g,y[c]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},E(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new w(s(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),j[c]="Generator",j[o]=function(){return this},j.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function a(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var o=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}};t._asyncToGenerator=o,t._regeneratorRuntime=r},434:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),o=r(n(9)),i=n(97),c=n(371),s=n(174),u=r(n(384)),l=function(e){var t=e.validating,n=i.useIntl();return a.createElement(c.FormHelperText,{isHidden:!t},a.createElement(s.Spinner,{size:"md",className:"pf-u-mr-md"}),n.formatMessage({id:"wizard.validating",defaultMessage:"Validating"}))};l.propTypes={validating:o.bool.isRequired};t.ValidatingSpinner=l,t.default=function(e,t){var n=t.meta;return n.validating?{helperText:a.createElement(u,null,(function(e){var t=e.validating;return a.createElement(l,{validating:t})}))}:n.valid?{validated:"success",FormGroupProps:{validated:"success"}}:{}}},464:function(e,t,n){var r=n(432),a=n(431),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&a(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},465:function(e,t,n){var r=n(400),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},466:function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);r.__exportStar(n(369),t),r.__exportStar(n(370),t)},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(386);var r=n(504);n(372),n(377),n(378),n(0),n(98),n(9),n(97),n(416),n(361),n(364),n(406),n(396),n(418),n(387),n(51),n(379),n(380),n(178),n(365),n(371),n(103),n(104),n(28),n(389),n(390),n(362),n(374),n(368),n(373),n(408),n(454),n(181),n(182),n(367),n(369),n(370),n(170),n(461),n(366),n(460),n(395),n(462),n(463),t.default=r.SourcesFormRenderer,t.mapperExtension=r.mapperExtension},509:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(386),n(372);var a=n(377);n(378);var o=n(0),i=r(o),c=r(n(9)),s=n(97),u=r(n(361)),l=r(n(364)),p=n(387),d=n(51);n(379),n(380),n(365),n(371),n(103),n(104);var f=n(28),m=n(389);n(390);var h=r(n(362));n(374),n(368);var g=n(373),y=n(408),v=n(433),b=r(n(473)),O=n(422);n(174),n(384);var j=n(434),E=function(e){var t=e.name,n=h();return o.useEffect((function(){return setTimeout((function(){return n.change(t,"1")})),function(){return n.change(t,"")}}),[]),null};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){a._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}E.propTypes={name:c.string.isRequired};var _,P=(_=v._asyncToGenerator(v._regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return v._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2?o[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,g.findSource(t);case 7:a=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(O.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!a.data.sources.find((function(e){return e.id!==n}))){e.next=16;break}throw r.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return _.apply(this,arguments)}),T=!0,x=function(e){return T=e},S=function(){return T},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,n)}(P),R=function(e){return S()?(x(!1),function(t,n){return t?P(t,n,e):void 0}):D},C=function(e){return p._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},A=function(e,t){return[{label:t.formatMessage({id:"wizard.none",defaultMessage:"None"}),key:"none"}].concat(p._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},k=function(e){return function(t,n){if(!t.value)return t;var r=n.getState().values.source_type,a=e.find((function(e){return e.display_name===t.label})),o=!r||a.supported_source_types.includes(r);return M({},t,{isDisabled:!o})}},L=function(e,t){return function(n,r){var a=r.getState().values.application?r.getState().values.application.application_type_id:void 0,o=e.find((function(e){return e.id===a})),i=!o||o.supported_source_types.includes(t.find((function(e){return e.product_name===n.label})).name);return M({},n,{isDisabled:!i})}},I=function(e){return function(t){var n=e.find((function(e){return e.name===t}));return n&&n.icon_url?function(){return i.createElement("img",{src:n.icon_url,alt:n.product_name,className:"ins-c-sources__wizard--icon"})}:null}},N=function(e){var t=e.values,n=t.application,r=t.source_type,a=n&&n.application_type_id;return a?"".concat(r,"-").concat(a):r},F=function(e,t,n,r){return{title:r.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Application and source type"}),name:"types_step",nextStep:N,fields:[{component:"enhanced-select",name:"application.application_type_id",label:r.formatMessage({id:"wizard.selectYourApplication",defaultMessage:"A. Select application"}),options:A(t,r),mutator:k(t),description:r.formatMessage({id:"wizard.selectAppWarning",defaultMessage:"Selecting an application will limit the available source types. You can attach an application to this source using the dropdown below, or by clicking ‘Manage applications’ after source creation."}),isDisabled:n,placeholder:r.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"})},{component:"card-select",name:"source_type",isRequired:!0,label:r.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"B. Select source type"}),iconMapper:I(e),validate:[{type:l.REQUIRED}],options:C(e),mutator:L(t,e)},{component:"description",name:"fixasyncvalidation",Content:E}]}},z=function(){var e=s.useIntl();return i.createElement(d.TextContent,{key:"step1"},i.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.nameDescription",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},q=function(e){return{title:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:z},{component:u.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return R(e)(t,void 0,e)},{type:l.REQUIRED}],resolveProps:j.default}]}},V=function(){var e=s.useIntl();return i.createElement(d.TextContent,null,i.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},G=function(e,t,n){return{fields:[{component:"description",name:"description-summary",Content:V},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:n.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}};t.NameDescription=z,t.SummaryDescription=V,t.appMutator=k,t.asyncValidator=P,t.asyncValidatorDebounced=D,t.asyncValidatorDebouncedWrapper=R,t.default=function(e,t,n,r,a){return x(!0),{fields:[{component:u.WIZARD,name:"wizard",title:m.WIZARD_TITLE,inModal:!0,description:m.WIZARD_DESCRIPTION,buttonLabels:{submit:a.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:a.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:a.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:a.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:r,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[q(a),F(e,t,n,a)].concat(p._toConsumableArray(y.schemaBuilder(e,t)),[G(e,t,a)])}]}},t.getFirstValidated=S,t.iconMapper=I,t.nextStep=N,t.setFirstValidated=x,t.sourceTypeMutator=L},510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(377),n(378),n(0),n(97),n(361),n(364),n(51),n(379),n(380),n(371),n(103),n(104),n(28);var r=n(389);n(390),n(362),n(374),n(368),n(373),t.default=r.hardcodedSchemas},522:function(e,t,n){"use strict";var r=n(102),a=n.n(r),o=n(2),i=n.n(o),c=n(0),s=n.n(c),u=n(416),l=n.n(u),p=n(361),d=n.n(p),f=n(364),m=n.n(f),h=n(406),g=n.n(h),y=n(396),v=n.n(y),b=n(418),O=n.n(b),j=n(503),E=n(74),w=n.n(E),M=n(9),_=n.n(M),P=n(428),T=n.n(P),x=n(401),S=n(421),D=[d.a.CHECKBOX,d.a.SWITCH],R=function(e){var t=e.originalComponent,n=e.isEditable,r=void 0===n||n,o=w()(e,["originalComponent","isEditable"]),i=S.b,u={},l=Object(c.useContext)(T.a).componentMapper;return Object(c.useContext)(x.a).editing[o.name]||D.includes(t)?i=l[t]:r&&(u={isEditable:!0}),s.a.createElement(i,a()({},o,u))};R.propTypes={originalComponent:_.a.string,name:_.a.string,isEditable:_.a.bool};var C=R;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){return s.a.createElement(l.a,a()({FormTemplate:v.a,componentMapper:k(k(k({},O.a),j.mapperExtension),{},{"edit-field":C,"switch-field":O.a[d.a.SWITCH]}),validatorMapper:{"required-validator":g.a[m.a.REQUIRED],"pattern-validator":g.a[m.a.PATTERN],"min-length-validator":g.a[m.a.MIN_LENGTH],"url-validator":g.a[m.a.URL]}},e))}},755:function(e,t,n){var r=n(756);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},756:function(e,t,n){var r=n(464),a=n(555),o=n(466),i=n(388),c=n(559);e.exports=function(e,t,n,s){if(!i(e))return e;for(var u=-1,l=(t=a(t,e)).length,p=l-1,d=e;null!=d&&++u<l;){var f=c(t[u]),m=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=p){var h=d[f];void 0===(m=s?s(h,f,d):void 0)&&(m=i(h)?h:o(t[u+1])?[]:{})}r(d,f,m),d=d[f]}return e}},757:function(e,t,n){"use strict";t.__esModule=!0,t.TrashIconConfig={name:"TrashIcon",height:512,width:448,svgPath:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z",yOffset:0,xOffset:0,transform:""},t.TrashIcon=n(15).createIcon(t.TrashIconConfig),t.default=t.TrashIcon},831:function(e,t,n){"use strict";n.r(t);var r=n(102),a=n.n(r),o=n(35),i=n.n(o),c=n(0),s=n.n(c),u=n(33),l=n(10),p=n(204),d=n(113),f=n(396),m=n.n(f),h=n(511),g=n(522),y=n(2),v=n.n(y),b=n(16),O=n(11);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=n(369),M=n(370),_=n(99),P=function(){var e=Object(p.a)();return s.a.createElement(w.Grid,null,s.a.createElement(M.GridItem,{xs:12},s.a.createElement(_.Title,{headingLevel:"h1",size:"3xl"},e.formatMessage({id:"sources.editSource",defaultMessage:"Edit source"}))),s.a.createElement(M.GridItem,{xs:12},e.formatMessage({id:"sources.editSourceDescription",defaultMessage:"You are editing a source."})))},T=n(74),x=n.n(T),S=n(365),D=n.n(S),R=n(755),C=n.n(R),A=n(109);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e,t){var n,r,a=e.endpoints,o=e.authentications,i=x()(e,["endpoints","authentications"]),c={};return o&&o.length>0&&o.forEach((function(e){c["a".concat(e.id)]=e})),a&&a.length>0&&(n=a[0]),n&&(r=n.scheme||n.host||n.path||n.port?Object(A.b)(n):void 0),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source_type:t,endpoint:n,authentications:c,url:r},i)},I=n(100),N=n(101),F=n(487),z=function(e,t,n,r,a,o){return n(Object(I.l)(r,function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){C()(n,t,D()(e,t))})),n}(e,t),a.formatMessage({id:"sources.modifiedNotificationTitle",defaultMessage:'"{ name }" was modified successfully.'},{name:r.source.name}),a.formatMessage({id:"sources.modifiedNotificationDescription",defaultMessage:"The source was successfully modified."}),{authentication:a.formatMessage({id:"sources.sourceEditAuthFailure",defaultMessage:"Authentication update failure."}),source:a.formatMessage({id:"sources.sourceEditFailure",defaultMessage:"Source update failure."}),endpoint:a.formatMessage({id:"sources.sourceEditEndpointFailure",defaultMessage:"Endpoint update failure."}),costManagement:a.formatMessage({id:"sources.sourceCostmanagementFailure",defaultMessage:"Cost Management update failure."})})).then((function(){Object(F.a)(r.source.id),o(N.c.sources.path),n(Object(I.f)())}))},q=n(404),V=n(425),G=n(26),B=n.n(G),W=n(361),H=n.n(W),U=n(509),Q=n(364),Y=n.n(Q),K=n(434),X=n.n(K),Z=n(421),J=function(e,t){return[{name:"source.name",label:t.formatMessage({id:"sources.sourceName",defaultMessage:"Source name"}),originalComponent:H.a.TEXT_FIELD,component:Z.a,validate:[function(n){return Object(U.asyncValidatorDebounced)(n,e,t)},{type:Y.a.REQUIRED}],isRequired:!0,resolveProps:X.a},{name:"source_type",label:t.formatMessage({id:"sources.sourceType",defaultMessage:"Source type"}),isReadOnly:!0,component:Z.a,isEditable:!1}]},$=n(510),ee=n.n($),te=n(14),ne=n(9),re=n.n(ne),ae=n(28),oe=n(51),ie=function(e){var t=e.authtype,n=Object(p.a)();return s.a.createElement(oe.TextContent,null,s.a.createElement(ae.Text,{component:ae.TextVariants.p},n.formatMessage({id:"sources.unsupportedAuthType",defaultMessage:"Authentication type of { authtype } is no longer supported."},{authtype:t})))};ie.propTypes={authtype:re.a.string};var ce=n(70),se=n(467),ue=n(757),le=n.n(ue),pe=n(401),de=function(e){var t=e.schemaAuth,n=e.auth,r=e.appTypes,a=e.isDeleting,o=Object(c.useContext)(pe.a),i=o.source,u=o.setState,l=Object(p.a)(),d=i.source.applications.filter((function(e){return e.authentications.find((function(e){return e.id===n.id}))})).map((function(e){var t=e.application_type_id;return t?r.find((function(e){return e.id===t})):void 0})).filter(Boolean).map((function(e){return e.display_name}));return s.a.createElement(se.GridItem,{sm:12},s.a.createElement(_.Title,{headingLevel:"h1",size:"xl"},t.name," ",!a&&s.a.createElement(ce.Button,{variant:"plain","aria-label":"Remove authentication",onClick:function(){return u({type:"setAuthRemoving",removingAuth:{auth:n,appNames:d,schemaAuth:t}})}},s.a.createElement(le.a,null))),s.a.createElement(oe.TextContent,null,s.a.createElement(ae.Text,{component:ae.TextVariants.small,className:"pf-u-mb-0"},l.formatMessage({id:"sources.removeAuthDescription",defaultMessage:"id: {authid} { appNames}"},{authid:n.id,appNames:d.length>0?l.formatMessage({id:"sources.removeAuthWithApps",defaultMessage:"used by {appNames}"},{appNames:d.join(", ")}):l.formatMessage({id:"sources.removeAuthNoApps",defaultMessage:"not used by any app"})}))))};de.propTypes={isDeleting:re.a.bool,appTypes:re.a.arrayOf(re.a.object),schemaAuth:re.a.shape({name:re.a.string.isRequired}).isRequired,auth:re.a.shape({id:re.a.string.isRequired}).isRequired};var fe=de,me=n(138),he=function(){var e=Object(p.a)();return s.a.createElement(se.Grid,null,s.a.createElement(se.GridItem,{xs:12},s.a.createElement(me.Bullseye,null,s.a.createElement(d.Spinner,{size:"lg"}))),s.a.createElement(se.GridItem,{xs:12},s.a.createElement(me.Bullseye,null,s.a.createElement(oe.TextContent,null,s.a.createElement(ae.Text,{component:ae.TextVariants.small,className:"pf-u-mt-md"},e.formatMessage({id:"sources.removingAuthMessage",defaultMessage:"This authentication is being removed..."}))))))};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){return e.map((function(e){return ye(ye({},e),{},{originalComponent:e.component,component:Z.a})}))};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e,t){return e.map((function(e){var n=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name,r=Oe(Oe({},e),{},{name:n});return"password"===r.name.split(".").pop()&&(r.helperText=s.a.createElement(te.a,{id:"sources.passwordResetHelperText",defaultMessage:"Changing this resets your current { label }.",values:{label:r.label}}),r.isRequired=!1,r.validate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.type!==Y.a.REQUIRED&&"required-validator"!==e.type}))}(r.validate)),r}))},Ee=function(e,t,n){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var r,a=e.isDeleting,o=x()(e,["isDeleting"]),i=t.schema.authentication.find((function(e){return e.type===o.authtype}));if(!i)return r=o.authtype,{component:"description",name:"".concat(r,"-unsupported"),authtype:r,Content:ie};var c=function(e,t){return D()(ee.a,[e,"authentication",t,"generic","includeStepKeyFields"],[])}(t.name,o.authtype),s=i.fields.filter((function(e){return!e.stepKey||c.includes(e.stepKey)})).map((function(e){return Oe(Oe({},e),function(e,t,n){return D()(ee.a,[e,"authentication",t,"generic",n],{})}(t.name,o.authtype,e.name))}));return{component:H.a.SUB_FORM,name:i.name,fields:[{component:"description",name:"".concat(o.id,"-authentication-management"),Content:fe,schemaAuth:i,appTypes:n,auth:o,isDeleting:a},a?{component:"description",name:"".concat(o.id,"-remove-spinner"),Content:he}:ve(je(s,o.id))]}})):[]};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var t=e.schema.endpoint.fields.map((function(t){return Me(Me({},t),function(e,t){return D()(ee.a,[e,"endpoint",t],{})}(e.name,t.name))}));return{component:H.a.SUB_FORM,title:s.a.createElement(te.a,{id:"sources.endpoint",defaultMessage:"Endpoint"}),name:"endpoint",fields:ve(t)}}};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe="/insights/platform/cost-management",Se=["billing_source","credentials"],De=function(e){var t=e.name;return Se.some((function(e){return t.startsWith(e)}))},Re=function(e){return Object.keys(e).map((function(t){return e[t].fields.filter(De)})).flatMap((function(e){return e}))},Ce=function(e,t,n){var r=void 0;return n.forEach((function(n){var a=r?{}:D()(ee.a,[e,"authentication",n],{});Object.keys(a).find((function(a){var o=D()(ee.a,[e,"authentication",n,a,t],void 0);if(o)return r=o,!0}))})),r||{}},Ae=function(e){return"openshift"===e.name?[{name:"source.source_ref",label:s.a.createElement(te.a,{id:"sources.clusterIdentifier",defaultMessage:"Cluster identifier"}),isRequired:!0,validate:[{type:Y.a.REQUIRED}],originalComponent:H.a.TEXT_FIELD,component:Z.a}]:[]},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=n.find((function(e){return e.name===xe}));if(a){var o=e.find((function(e){return e.application_type_id===a.id}));if(o){var i=Re(t.schema.authentication),c=r.authentications?r.authentications.map((function(e){return e.authtype})):[],s=i.map((function(e){return Te(Te({},e),Ce(t.name,e.name,c))}));return{component:H.a.SUB_FORM,title:a.display_name,name:a.display_name,fields:[].concat(B()(ve(s)),B()(Ae(t)))}}}},Le=function(e,t,n,r){return[ke(e,t,n,r)]},Ie=function(e,t,n,r){return{fields:[].concat(B()(J(e.source.id,r)),B()(Ee(e.authentications,t,n)),B()(Le(e.applications,t,n,e)),[!!(e.endpoints&&e.endpoints.length>0)&&_e(t)]).filter(Boolean)}};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze={loading:!0,editing:{},source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isAuthRemoving:null},qe=function(e,t){var n=t.type,r=t.source,a=t.name,o=t.sourceType,i=t.appTypes,c=t.authId,s=t.removingAuth,u=t.intl;switch(n){case"createForm":return Fe(Fe({},e),{},{sourceType:o,initialValues:L(e.source,o.product_name),schema:Ie(e.source,o,i,u),loading:!1});case"setSource":return Fe(Fe({},e),{},{source:r});case"reset":return Fe(Fe({},e),{},{editing:{}});case"setEdit":return Fe(Fe({},e),{},{editing:Fe(Fe({},e.editing),{},v()({},a,!e.editing[a]))});case"removeAuthPending":return Fe(Fe({},e),{},{isAuthRemoving:null,source:Fe(Fe({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===c?Fe(Fe({},e),{},{isDeleting:!0}):e}))})});case"removeAuthRejected":return Fe(Fe({},e),{},{source:Fe(Fe({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===c?Fe(Fe({},e),{},{isDeleting:!1}):e}))})});case"removeAuthFulfill":return Fe(Fe({},e),{},{source:Fe(Fe({},e.source),{},{authentications:e.source.authentications.filter((function(e){return e.id!==c}))})});case"setAuthRemoving":return Fe(Fe({},e),{},{isAuthRemoving:s});case"closeAuthRemoving":return Fe(Fe({},e),{},{isAuthRemoving:null});default:return e}},Ve=n(98),Ge=n(73),Be=n.n(Ge),We=n(422),He=function(e){var t,n,r=e.appNames,a=e.schemaAuth,o=e.auth,i=r.length>0,l=Object(u.useDispatch)(),d=Object(p.a)(),f=Object(c.useContext)(pe.a).setState,m=function(){return f({type:"closeAuthRemoving"})};return i?(t=d.formatMessage({id:"sources.removeAuthWarningApps",defaultMessage:"To remove {authname} authentication you have to remove attached {count, plural, one {application} other {applications}}: { appNames }."},{appNames:r.join(", "),count:r.length,authname:s.a.createElement("b",{key:"b"},a.name)}),n=[s.a.createElement(Ve.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:m},d.formatMessage({id:"sources.close",defaultMessage:"Close"}))]):(t=d.formatMessage({id:"sources.removeAuthWarning",defaultMessage:"This action will permanently remove {auth} from this source."},{auth:s.a.createElement("b",{key:"b"},a.name)}),n=[s.a.createElement(Ve.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){return f({type:"removeAuthPending",authId:o.id}),m(),Object(b.d)(o.id).then((function(){f({type:"removeAuthFulfill",authId:o.id}),l(Object(I.b)(d.formatMessage({id:"sources.authRemoveFullfil",defaultMessage:"Authentication was deleted successfully."}),"success"))})).catch((function(e){f({type:"removeAuthRejected",authId:o.id}),l(Object(I.b)(d.formatMessage({id:"sources.authRemoveRejected",defaultMessage:"Authentication was not deleted successfully."}),"danger",Object(We.handleError)(e)))}))}},d.formatMessage({id:"sources.deleteConfirm",defaultMessage:"Remove authentication"})),s.a.createElement(Ve.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:m},d.formatMessage({id:"sources.deleteCancel",defaultMessage:"Cancel"}))]),s.a.createElement(h.Modal,{isOpen:!0,className:"ins-c-sources__dialog--warning",onClose:m,actions:n,variant:"small","aria-label":d.formatMessage({id:"sources.deleteAuthTitle",defaultMessage:"Remove authentication?"}),header:s.a.createElement(_.Title,{headingLevel:"h1",size:"2xl"},s.a.createElement(Be.a,{size:"sm",className:"ins-m-alert ins-c-source__delete-icon pf-u-mr-sm"}),d.formatMessage({id:"sources.deleteAppTitle",defaultMessage:"Remove authentication?"}))},s.a.createElement(oe.TextContent,null,s.a.createElement(ae.Text,{variant:ae.TextVariants.p},t)))};He.propTypes={appNames:re.a.arrayOf(re.a.string),schemaAuth:re.a.shape({name:re.a.string.isRequired}).isRequired,auth:re.a.shape({id:re.a.string.isRequired}).isRequired};var Ue=He;t.default=function(){var e=Object(c.useReducer)(qe,ze),t=i()(e,2),n=t[0],r=t[1],o=Object(l.k)(),f=Object(q.a)(),y=Object(V.a)(),v=n.loading,j=n.editing,w=n.source,M=n.initialValues,_=n.schema,T=Object(p.a)(),x=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),S=x.sourceTypes,D=x.appTypes,R=x.sourceTypesLoaded,C=x.appTypesLoaded,A=Object(u.useDispatch)();Object(c.useEffect)((function(){f&&function(e){return Promise.all([Object(b.j)().showSource(e.id),Object(b.j)().listSourceEndpoints(e.id),Object(b.j)().listSourceApplications(e.id),(t=e.id,b.a.get("".concat(O.a,"/sources/").concat(t,"/"))).catch((function(){}))]).then((function(t){var n=i()(t,4),r=n[0],a=n[1],o=n[2],c=n[3],s=a&&a.data&&a.data[0],u={source:E(E({},e),r),applications:o.data};return c&&(u=E(E({},u),{},{billing_source:c.billing_source,credentials:c.authentication.credentials})),s?Object(b.j)().listEndpointAuthentications(s.id).then((function(e){return E(E({},u),{},{endpoints:a.data,authentications:e.data})})):u}));var t}(f).then((function(e){e.source.imported&&function(e,t,n,r){e(Object(I.b)(t.formatMessage({id:"sources.importSourceCannotEdited",defaultMessage:"Source { name } is imported."},{name:r}),"danger",t.formatMessage({id:"sources.importedSourcesCannotEdited",defaultMessage:"Imported sources cannot be edited."}))),n.push(N.c.sources.path)}(A,T,o,e.source.name),r({type:"setSource",source:e})}))}),[f,y]),Object(c.useEffect)((function(){if(w&&C&&R){var e=S.find((function(e){return e.id===w.source.source_type_id}));r({type:"createForm",sourceType:e,source:w,appTypes:D,intl:T})}}),[C,w,R]);var k=function(){return o.push(N.c.sources.path)};return!C||!R||v?s.a.createElement(h.Modal,{"aria-label":T.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:s.a.createElement(P,null),isOpen:!0,variant:"large",onClose:k},s.a.createElement("div",{className:"ins-c-sources__dialog--spinnerContainer"},s.a.createElement(d.Spinner,null))):s.a.createElement(s.a.Fragment,null,s.a.createElement(pe.a.Provider,{value:{setState:r,source:w,editing:j}},n.isAuthRemoving&&s.a.createElement(Ue,n.isAuthRemoving),s.a.createElement(h.Modal,{"aria-label":T.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:s.a.createElement(P,null),isOpen:!n.isAuthRemoving,variant:"large",onClose:k},s.a.createElement(g.a,{onCancel:k,schema:_,onSubmit:function(e,t){return z(e,t.getState().dirtyFields,A,w,T,o.push)},FormTemplate:function(e){return s.a.createElement(m.a,a()({},e,{formWrapperProps:{isHorizontal:!0},canReset:!0,disableSubmit:["submitting","pristine"],submitLabel:T.formatMessage({id:"sources.save",defaultMessage:"Save"})}))},clearedValue:null,onReset:function(){return r({type:"reset"})},initialValues:M}))))}}}]);
//# sourceMappingURL=../sourcemaps/edit.js.map