(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{357:function(e,t,n){"use strict";var a=n(0),r=Object(a.createContext)();t.a=r},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(93),r=n.n(a),i=n(0),o=n.n(i),c=n(1),s=n.n(c),u=n(331),l=n.n(u),p=n(469),d=n.n(p),m=n(46),f=n(330),h=n(357),b=n(326),g=n.n(b),O="edit-field",y=function(e){var t=e.isRequired,n=e.label,a=e.helperText,c=e.hideLabel,s=e.name,u=e.type,p=e.isEditable,b=g()(),O=b.getFieldState,y=b.getState,v=Object(i.useContext)(h.a).setState,j=O(s)||{value:l()(y().initialValues,s)},E=j.error,P=j.touched,w=j.value,M=P&&E,T="password"===u||s.includes("password")?"Click to edit":"Click to add";return o.a.createElement(f.FormGroup,r()({isRequired:t,label:!c&&n,fieldId:s,isValid:!M,helperText:a,helperTextInvalid:E,tabIndex:0,onKeyPress:function(e){32===e.charCode&&p&&(e.preventDefault(),v({type:"setEdit",name:s}))}},p&&{onClick:function(){return v({type:"setEdit",name:s})}}),o.a.createElement("div",{className:"pf-c-form__horizontal-group ins-c-sources__edit-field-group ".concat(p?"clickable":"")},o.a.createElement(m.TextContent,{className:"ins-c-sources__edit-field-group-text-content ".concat(p?"clickable":"")},o.a.createElement("span",{className:"ins-c-sources__edit-field-value pf-u-mr-sm"},w||(p?T:"")),p&&o.a.createElement(d.a,null))))};y.propTypes={label:s.a.node,isRequired:s.a.bool,helperText:s.a.node,hideLabel:s.a.bool,isEditable:s.a.bool,type:s.a.string,name:s.a.string},t.b=y},487:function(e,t,n){"use strict";var a=n(93),r=n.n(a),i=n(3),o=n.n(i),c=n(0),s=n.n(c),u=n(371),l=n.n(u),p=n(325),d=n.n(p),m=n(328),f=n.n(m),h=n(363),b=n.n(h),g=n(353),O=n.n(g),y=n(373),v=n.n(y),j=n(464),E=n(70),P=n.n(E),w=n(1),M=n.n(w),T=n(388),D=n.n(T),R=n(357),S=n(377),C=[d.a.CHECKBOX,d.a.SWITCH],A=function(e){var t=e.originalComponent,n=e.isEditable,a=void 0===n||n,i=P()(e,["originalComponent","isEditable"]),o=S.b,u={},l=Object(c.useContext)(D.a).componentMapper;return Object(c.useContext)(R.a).editing[i.name]||C.includes(t)?o=l[t]:a&&(u={isEditable:!0}),s.a.createElement(o,r()({},i,u))};A.propTypes={originalComponent:M.a.string,name:M.a.string,isEditable:M.a.bool};var _=A;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){return s.a.createElement(l.a,r()({FormTemplate:O.a,componentMapper:k(k(k({},v.a),j.mapperExtension),{},{"edit-field":_,"switch-field":v.a[d.a.SWITCH]}),validatorMapper:{"required-validator":b.a[f.a.REQUIRED],"pattern-validator":b.a[f.a.PATTERN],"min-length-validator":b.a[f.a.MIN_LENGTH],"url-validator":b.a[f.a.URL]}},e))}},785:function(e,t,n){"use strict";n.r(t);var a=n(93),r=n.n(a),i=n(40),o=n.n(i),c=n(0),s=n.n(c),u=n(31),l=n(10),p=n(314),d=n(107),m=n(353),f=n.n(m),h=n(530),b=n(487),g=n(3),O=n.n(g),y=n(14),v=n(11);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(13),w=n(334),M=n(335),T=n(90),D=function(){return s.a.createElement(w.Grid,null,s.a.createElement(M.GridItem,{xs:12},s.a.createElement(T.Title,{headingLevel:T.TitleLevel.h1,size:"3xl"},s.a.createElement(P.a,{id:"sources.editSource",defaultMessage:"Edit source"}))),s.a.createElement(M.GridItem,{xs:12},s.a.createElement(P.a,{id:"sources.editSourceDescription",defaultMessage:"You are editing a source."})))},R=n(70),S=n.n(R),C=n(331),A=n.n(C),_=n(703),x=n.n(_),k=n(102);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var I=function(e,t){var n,a,r=e.endpoints,i=e.authentications,o=S()(e,["endpoints","authentications"]),c={};return i&&i.length>0&&i.forEach((function(e){c["a".concat(e.id)]=e})),r&&r.length>0&&(n=r[0]),n&&(a=n.scheme||n.host||n.path||n.port?Object(k.b)(n):void 0),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source_type:t,endpoint:n,authentications:c,url:a},o)},F=n(91),q=n(92),L=n(445),B=function(e,t,n,a,r,i){return n(Object(F.l)(a,function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){x()(n,t,A()(e,t))})),n}(e,t),r.formatMessage({id:"sources.modifiedNotificationTitle",defaultMessage:'"{ name }" was modified successfully.'},{name:a.source.name}),r.formatMessage({id:"sources.modifiedNotificationDescription",defaultMessage:"The source was successfully modified."}),{authentication:r.formatMessage({id:"sources.sourceEditAuthFailure",defaultMessage:"Authentication update failure."}),source:r.formatMessage({id:"sources.sourceEditFailure",defaultMessage:"Source update failure."}),endpoint:r.formatMessage({id:"sources.sourceEditEndpointFailure",defaultMessage:"Endpoint update failure."}),costManagement:r.formatMessage({id:"sources.sourceCostmanagementFailure",defaultMessage:"Cost Management update failure."})})).then((function(){Object(L.a)(a.source.id),i(q.c.sources.path),n(Object(F.f)())}))},V=n(361),G=n(383),U=n(26),W=n.n(U),z=n(325),H=n.n(z),K=n(470),Q=n(328),X=n.n(Q),J=n(377),Y=n(472),Z=n.n(Y),$=n(27),ee=n(46),te=n(1),ne=n.n(te),ae=n(67),re=n(427),ie=n(710),oe=n.n(ie),ce=n(357),se=function(e){var t=e.schemaAuth,n=e.auth,a=e.appTypes,r=e.isDeleting,i=Object(c.useContext)(ce.a),o=i.source,u=i.setState,l=o.source.applications.filter((function(e){return e.authentications.find((function(e){return e.id===n.id}))})).map((function(e){var t=e.application_type_id;return t?a.find((function(e){return e.id===t})):void 0})).filter(Boolean).map((function(e){return e.display_name}));return s.a.createElement(re.GridItem,{sm:12},s.a.createElement(T.Title,{size:"xl"},t.name,"Â ",!r&&s.a.createElement(ae.Button,{variant:"plain","aria-label":"Remove authentication",onClick:function(){return u({type:"setAuthRemoving",removingAuth:{auth:n,appNames:l,schemaAuth:t}})}},s.a.createElement(oe.a,null))),s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{component:$.TextVariants.small,className:"pf-u-mb-0"},s.a.createElement(P.a,{id:"sources.removeAuthDescription",defaultMessage:"id: {authid} { appNames}",values:{authid:n.id,appNames:l.length>0?s.a.createElement(P.a,{id:"sources.removeAuthWithApps",defaultMessage:"used by {appNames}",values:{appNames:l.join(", ")}}):s.a.createElement(P.a,{id:"sources.removeAuthNoApps",defaultMessage:"not used by any app"})}}))))};se.propTypes={isDeleting:ne.a.bool,appTypes:ne.a.arrayOf(ne.a.object),schemaAuth:ne.a.shape({name:ne.a.string.isRequired}).isRequired,auth:ne.a.shape({id:ne.a.string.isRequired}).isRequired};var ue=se,le=n(106),pe=function(){return s.a.createElement(re.Grid,null,s.a.createElement(re.GridItem,{xs:12},s.a.createElement(le.Bullseye,null,s.a.createElement(d.Spinner,{size:"lg"}))),s.a.createElement(re.GridItem,{xs:12},s.a.createElement(le.Bullseye,null,s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{component:$.TextVariants.small,className:"pf-u-mt-md"},s.a.createElement(P.a,{id:"sources.removingAuthMessage",defaultMessage:"This authentication is being removed..."}))))))};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=function(e){return e.map((function(e){return me(me({},e),{},{originalComponent:e.component,component:J.a})}))};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(e,t){return e.map((function(e){var n=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name,a=be(be({},e),{},{name:n});return"password"===a.name.split(".").pop()&&(a.helperText=s.a.createElement(P.a,{id:"sources.passwordResetHelperText",defaultMessage:"Changing this resets your current { label }.",values:{label:a.label}}),a.isRequired=!1,a.validate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.type!==X.a.REQUIRED&&"required-validator"!==e.type}))}(a.validate)),a}))},Oe=function(e,t,n){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var a,r=e.isDeleting,i=S()(e,["isDeleting"]),o=t.schema.authentication.find((function(e){return e.type===i.authtype}));if(!o)return a=i.authtype,{component:"description",name:"".concat(a,"-unsupported"),Content:function(){return s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{component:$.TextVariants.p},s.a.createElement(P.a,{id:"sources.unsupportedAuthType",defaultMessage:"Authentication type of { type } is no longer supported.",values:{type:a}})))}};var c=function(e,t){return A()(Z.a,[e,"authentication",t,"generic","includeStepKeyFields"],[])}(t.name,i.authtype),u=o.fields.filter((function(e){return!e.stepKey||c.includes(e.stepKey)})).map((function(e){return be(be({},e),function(e,t,n){return A()(Z.a,[e,"authentication",t,"generic",n],{})}(t.name,i.authtype,e.name))}));return{component:H.a.SUB_FORM,name:o.name,fields:[{component:"description",name:"".concat(i.id,"-authentication-management"),Content:ue,schemaAuth:o,appTypes:n,auth:i,isDeleting:r},r?{component:"description",name:"".concat(i.id,"-remove-spinner"),Content:pe}:fe(ge(u,i.id))]}})):[]};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var t=e.schema.endpoint.fields.map((function(t){return ve(ve({},t),function(e,t){return A()(Z.a,[e,"endpoint",t],{})}(e.name,t.name))}));return{component:H.a.SUB_FORM,title:s.a.createElement(P.a,{id:"sources.endpoint",defaultMessage:"Endpoint"}),name:"endpoint",fields:fe(t)}}};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we="/insights/platform/cost-management",Me=["billing_source","credentials"],Te=function(e){var t=e.name;return Me.some((function(e){return t.startsWith(e)}))},De=function(e){return Object.keys(e).map((function(t){return e[t].fields.filter(Te)})).flatMap((function(e){return e}))},Re=function(e,t,n){var a=void 0;return n.forEach((function(n){var r=a?{}:A()(Z.a,[e,"authentication",n],{});Object.keys(r).find((function(r){var i=A()(Z.a,[e,"authentication",n,r,t],void 0);if(i)return a=i,!0}))})),a||{}},Se=function(e){return"openshift"===e.name?[{name:"source.source_ref",label:s.a.createElement(P.a,{id:"sources.clusterIdentifier",defaultMessage:"Cluster identifier"}),isRequired:!0,validate:[{type:X.a.REQUIRED}],originalComponent:H.a.TEXT_FIELD,component:J.a}]:[]},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=n.find((function(e){return e.name===we}));if(r){var i=e.find((function(e){return e.application_type_id===r.id}));if(i){var o=De(t.schema.authentication),c=a.authentications?a.authentications.map((function(e){return e.authtype})):[],s=o.map((function(e){return Pe(Pe({},e),Re(t.name,e.name,c))}));return{component:H.a.SUB_FORM,title:r.display_name,name:r.display_name,fields:[].concat(W()(fe(s)),W()(Se(t)))}}}},Ae=function(e,t,n,a){return[Ce(e,t,n,a)]},_e=function(e,t,n){return{fields:[].concat(W()((a=e.source.id,[{name:"source.name",label:s.a.createElement(P.a,{id:"sources.sourceName",defaultMessage:"Source name"}),originalComponent:H.a.TEXT_FIELD,component:J.a,validate:[function(e){return Object(K.asyncValidatorDebounced)(e,a)},{type:X.a.REQUIRED}],isRequired:!0},{name:"source_type",label:s.a.createElement(P.a,{id:"sources.sourceType",defaultMessage:"Source type"}),isReadOnly:!0,component:J.a,isEditable:!1}])),W()(Oe(e.authentications,t,n)),W()(Ae(e.applications,t,n,e)),[!!(e.endpoints&&e.endpoints.length>0)&&je(t)]).filter(Boolean)};var a};function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne={loading:!0,editing:{},source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isAuthRemoving:null},Ie=function(e,t){var n=t.type,a=t.source,r=t.name,i=t.sourceType,o=t.appTypes,c=t.authId,s=t.removingAuth;switch(n){case"createForm":return ke(ke({},e),{},{sourceType:i,initialValues:I(e.source,i.product_name),schema:_e(e.source,i,o),loading:!1});case"setSource":return ke(ke({},e),{},{source:a});case"reset":return ke(ke({},e),{},{editing:{}});case"setEdit":return ke(ke({},e),{},{editing:ke(ke({},e.editing),{},O()({},r,!e.editing[r]))});case"removeAuthPending":return ke(ke({},e),{},{isAuthRemoving:null,source:ke(ke({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===c?ke(ke({},e),{},{isDeleting:!0}):e}))})});case"removeAuthRejected":return ke(ke({},e),{},{source:ke(ke({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===c?ke(ke({},e),{},{isDeleting:!1}):e}))})});case"removeAuthFulfill":return ke(ke({},e),{},{source:ke(ke({},e.source),{},{authentications:e.source.authentications.filter((function(e){return e.id!==c}))})});case"setAuthRemoving":return ke(ke({},e),{},{isAuthRemoving:s});case"closeAuthRemoving":return ke(ke({},e),{},{isAuthRemoving:null});default:return e}},Fe=n(88),qe=n(97),Le=n.n(qe),Be=n(380),Ve=function(e){var t,n,a=e.appNames,r=e.schemaAuth,i=e.auth,o=a.length>0,l=Object(u.useDispatch)(),d=Object(p.a)(),m=Object(c.useContext)(ce.a).setState,f=function(){return m({type:"closeAuthRemoving"})};return o?(t=s.a.createElement(P.a,{id:"sources.removeAuthWarningApps",defaultMessage:"To remove {authname} authentication you have to remove attached {count, plural, one {application} other {applications}}: { appNames }.",values:{appNames:a.join(", "),count:a.length,authname:s.a.createElement("b",null,r.name)}}),n=[s.a.createElement(Fe.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:f},s.a.createElement(P.a,{id:"sources.close",defaultMessage:"Close"}))]):(t=s.a.createElement(P.a,{id:"sources.removeAuthWarning",defaultMessage:"Do you really want to remove {auth} authentication?",values:{auth:s.a.createElement("b",null,r.name)}}),n=[s.a.createElement(Fe.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){return m({type:"removeAuthPending",authId:i.id}),f(),Object(y.d)(i.id).then((function(){m({type:"removeAuthFulfill",authId:i.id}),l(Object(F.b)(d.formatMessage({id:"sources.authRemoveFullfil",defaultMessage:"Authentication was deleted successfully."}),"success"))})).catch((function(e){m({type:"removeAuthRejected",authId:i.id}),l(Object(F.b)(d.formatMessage({id:"sources.authRemoveRejected",defaultMessage:"Authentication was not deleted successfully."}),"danger",Object(Be.handleError)(e)))}))}},s.a.createElement(P.a,{id:"sources.deleteConfirm",defaultMessage:"Remove authentication"})),s.a.createElement(Fe.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:f},s.a.createElement(P.a,{id:"sources.deleteCancel",defaultMessage:"Cancel"}))]),s.a.createElement(h.Modal,{isOpen:!0,className:"ins-c-sources__dialog--warning",isFooterLeftAligned:!0,onClose:f,actions:n,isSmall:!0,title:d.formatMessage({id:"sources.deleteAuthTitle",defaultMessage:"Remove authentication?"}),header:s.a.createElement(T.Title,{size:"2xl"},s.a.createElement(Le.a,{size:"sm",className:"ins-m-alert ins-c-source__delete-icon pf-u-mr-sm"}),d.formatMessage({id:"sources.deleteAppTitle",defaultMessage:"Remove authentication?"}))},s.a.createElement(ee.TextContent,null,s.a.createElement($.Text,{variant:$.TextVariants.p},t)))};Ve.propTypes={appNames:ne.a.arrayOf(ne.a.string),schemaAuth:ne.a.shape({name:ne.a.string.isRequired}).isRequired,auth:ne.a.shape({id:ne.a.string.isRequired}).isRequired};var Ge=Ve;t.default=function(){var e=Object(c.useReducer)(Ie,Ne),t=o()(e,2),n=t[0],a=t[1],i=Object(l.f)(),m=Object(V.a)(),g=Object(G.a)(),O=n.loading,j=n.editing,P=n.source,w=n.initialValues,M=n.schema,T=Object(p.a)(),R=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),S=R.sourceTypes,C=R.appTypes,A=R.sourceTypesLoaded,_=R.appTypesLoaded,x=Object(u.useDispatch)();Object(c.useEffect)((function(){m&&function(e){return Promise.all([Object(y.j)().showSource(e.id),Object(y.j)().listSourceEndpoints(e.id),Object(y.j)().listSourceApplications(e.id),(t=e.id,y.a.get("".concat(v.a,"/sources/").concat(t,"/"))).catch((function(){}))]).then((function(t){var n=o()(t,4),a=n[0],r=n[1],i=n[2],c=n[3],s=r&&r.data&&r.data[0],u={source:E(E({},e),a),applications:i.data};return c&&(u=E(E({},u),{},{billing_source:c.billing_source,credentials:c.authentication.credentials})),s?Object(y.j)().listEndpointAuthentications(s.id).then((function(e){return E(E({},u),{},{endpoints:r.data,authentications:e.data})})):u}));var t}(m).then((function(e){e.source.imported&&function(e,t,n,a){e(Object(F.b)(t.formatMessage({id:"sources.importSourceCannotEdited",defaultMessage:"Source { name } is imported."},{name:a}),"danger",t.formatMessage({id:"sources.importedSourcesCannotEdited",defaultMessage:"Imported sources cannot be edited."}))),n.push(q.c.sources.path)}(x,T,i,e.source.name),a({type:"setSource",source:e})}))}),[m,g]),Object(c.useEffect)((function(){if(P&&_&&A){var e=S.find((function(e){return e.id===P.source.source_type_id}));a({type:"createForm",sourceType:e,source:P,appTypes:C})}}),[_,P,A]);var k=function(){return i.push(q.c.sources.path)};return!_||!A||O?s.a.createElement(h.Modal,{title:T.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:s.a.createElement(D,null),isOpen:!0,isLarge:!0,onClose:k},s.a.createElement("div",{className:"ins-c-sources__dialog--spinnerContainer"},s.a.createElement(d.Spinner,null))):s.a.createElement(s.a.Fragment,null,s.a.createElement(ce.a.Provider,{value:{setState:a,source:P,editing:j}},n.isAuthRemoving&&s.a.createElement(Ge,n.isAuthRemoving),s.a.createElement(h.Modal,{title:T.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:s.a.createElement(D,null),isOpen:!n.isAuthRemoving,isLarge:!0,onClose:k},s.a.createElement(b.a,{onCancel:k,schema:M,onSubmit:function(e,t){return B(e,t.getState().dirtyFields,x,P,T,i.push)},FormTemplate:function(e){return s.a.createElement(f.a,r()({},e,{formWrapperProps:{isHorizontal:!0},canReset:!0,disableSubmit:["submitting"],submitLabel:T.formatMessage({id:"sources.save",defaultMessage:"Save"})}))},clearedValue:null,onReset:function(){return a({type:"reset"})},initialValues:w}))))}}}]);
//# sourceMappingURL=../sourcemaps/edit.js.map