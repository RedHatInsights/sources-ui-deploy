(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{495:function(e,t,n){"use strict";var r=n(443).createCommonjsModule((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new x(r||[]);return i._invoke=function(e,t,n){var r=l;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=u(e,t,n);if("normal"===s.type){if(r=n.done?f:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=f,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l="suspendedStart",p="suspendedYield",d="executing",f="completed",m={};function h(){}function v(){}function y(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf,O=b&&b(b(P([])));O&&O!==n&&r.call(O,i)&&(g=O);var E=y.prototype=h.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e,t){var n;this._invoke=function(a,i){function o(){return new t((function(n,o){!function n(a,i,o,c){var s=u(e[a],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,o,c)}),(function(e){n("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,c)}))}c(s.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function w(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=u(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:t,done:!0}}return v.prototype=E.constructor=y,y.constructor=v,y[c]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},j(_.prototype),_.prototype[o]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new _(s(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},j(E),E[c]="Generator",E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function a(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var i=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function c(e){a(o,r,i,c,s,"next",e)}function s(e){a(o,r,i,c,s,"throw",e)}c(void 0)}))}};t._asyncToGenerator=i,t._regeneratorRuntime=r},524:function(e,t,n){"use strict";var r=n(132);t.a=function(e,t,n,a,i){var o=t.formatMessage({id:"sources.removeAppWarning",defaultMessage:"{ name } was removed from this source."},{name:e.display_name}),c=t.formatMessage({id:"sources.removeAppError",defaultMessage:"Removing of { name } application from this source was unsuccessful."},{name:e.display_name});return n&&n(),a(Object(r.i)(e.id,i.id,o,c))}},525:function(e,t,n){"use strict";t.__esModule=!0,t.TrashIconConfig={name:"TrashIcon",height:512,width:448,svgPath:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z",yOffset:0,xOffset:0},t.TrashIcon=n(26).createIcon(t.TrashIconConfig),t.default=t.TrashIcon},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(443);var r=n(574);n(414),n(425),n(415),n(0),n(129),n(12),n(208),n(467),n(407),n(406),n(493),n(451),n(472),n(444),n(210),n(428),n(429),n(217),n(411),n(424),n(445),n(430),n(209),n(446),n(447),n(405),n(417),n(412),n(416),n(456),n(518),n(229),n(230),n(410),n(421),n(422),n(212),n(521),n(409),n(520),n(437),n(522),n(523),t.default=r.SourcesFormRenderer,t.mapperExtension=r.mapperExtension},576:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(38),a=function(e){return Object(r.k)().checkAvailabilitySource(e).catch((function(){}))}},577:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(443),n(414),n(425);var a=n(415),i=n(0),o=r(i),c=r(n(12)),s=n(208),u=r(n(407)),l=r(n(406)),p=n(444),d=n(210);n(428),n(429),n(411),n(424),n(445),n(430);var f=n(209),m=n(446);n(447);var h=r(n(405));n(417),n(412);var v=n(416),y=n(456),g=n(495),b=r(n(529)),O=n(476);n(220),n(441);var E=n(474),j=function(e){var t=e.name,n=h();return i.useEffect((function(){return setTimeout((function(){return n.change(t,"1")})),function(){return n.change(t,"")}}),[]),null};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){a._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}j.propTypes={name:c.string.isRequired};var M,T=(M=g._asyncToGenerator(g._regeneratorRuntime.mark((function e(t){var n,r,a,i=arguments;return g._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:void 0,r=i.length>2?i[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,v.findSource(t);case 7:a=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(O.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!a.data.sources.find((function(e){return e.id!==n}))){e.next=16;break}throw r.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return M.apply(this,arguments)}),x=!0,P=function(e){return x=e},S=function(){return x},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,n)}(T),k=function(e){return S()?(P(!1),function(t,n){return t?T(t,n,e):void 0}):R},D=function(e){return p._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},A=function(e,t){return[{label:t.formatMessage({id:"wizard.none",defaultMessage:"None"}),key:"none"}].concat(p._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},C=function(e){return function(t,n){if(!t.value)return t;var r=n.getState().values.source_type,a=e.find((function(e){return e.display_name===t.label})),i=!r||a.supported_source_types.includes(r);return w({},t,{isDisabled:!i})}},N=function(e,t){return function(n,r){var a=r.getState().values.application?r.getState().values.application.application_type_id:void 0,i=e.find((function(e){return e.id===a})),o=!i||i.supported_source_types.includes(t.find((function(e){return e.product_name===n.label})).name);return w({},n,{isDisabled:!o})}},I=function(e){return function(t){var n=e.find((function(e){return e.name===t}));return n&&n.icon_url?function(){return o.createElement("img",{src:n.icon_url,alt:n.product_name,className:"ins-c-sources__wizard--icon"})}:null}},L=function(e){var t=e.values,n=t.application,r=t.source_type,a=n&&n.application_type_id;return a?"".concat(r,"-").concat(a):r},F=function(e,t,n,r){return{title:r.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Application and source type"}),name:"types_step",nextStep:L,fields:[{component:"enhanced-select",name:"application.application_type_id",label:r.formatMessage({id:"wizard.selectYourApplication",defaultMessage:"A. Select application"}),options:A(t,r),mutator:C(t),description:r.formatMessage({id:"wizard.selectAppWarning",defaultMessage:"Selecting an application will limit the available source types. You can attach an application to this source using the dropdown below, or by clicking ‘Manage applications’ after source creation."}),isDisabled:n,placeholder:r.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"})},{component:"card-select",name:"source_type",isRequired:!0,label:r.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"B. Select source type"}),iconMapper:I(e),validate:[{type:l.REQUIRED}],options:D(e),mutator:N(t,e)},{component:"description",name:"fixasyncvalidation",Content:j}]}},z=function(){var e=s.useIntl();return o.createElement(d.TextContent,{key:"step1"},o.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.nameDescription",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},B=function(e){return{title:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:z},{component:u.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return k(e)(t,void 0,e)},{type:l.REQUIRED}],resolveProps:E.default}]}},q=function(){var e=s.useIntl();return o.createElement(d.TextContent,null,o.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},G=function(e,t,n){return{fields:[{component:"description",name:"description-summary",Content:q},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:n.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}};t.NameDescription=z,t.SummaryDescription=q,t.appMutator=C,t.asyncValidator=T,t.asyncValidatorDebounced=R,t.asyncValidatorDebouncedWrapper=k,t.default=function(e,t,n,r,a){return P(!0),{fields:[{component:u.WIZARD,name:"wizard",title:m.WIZARD_TITLE,inModal:!0,description:m.WIZARD_DESCRIPTION,buttonLabels:{submit:a.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:a.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:a.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:a.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:r,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[B(a),F(e,t,n,a)].concat(p._toConsumableArray(y.schemaBuilder(e,t)),[G(e,t,a)])}]}},t.getFirstValidated=S,t.iconMapper=I,t.nextStep=L,t.setFirstValidated=P,t.sourceTypeMutator=N},592:function(e,t,n){"use strict";var r=n(134),a=n.n(r),i=n(3),o=n.n(i),c=n(0),s=n.n(c),u=n(467),l=n.n(u),p=n(451),d=n.n(p),f=n(472),m=n.n(f),h=n(573),v=n(56),y=n.n(v),g=n(411),b=n.n(g),O=n(410),E=n(435),j=n(568),_=n.n(j),w=n(405),M=n.n(w),T=n(406),x=n.n(T),P=n(474),S=n.n(P);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t,n,r=M()(),i=r.getState().values,o=(null==e||null===(t=e.name)||void 0===t?void 0:t.match(/\d+/))||[],u=y()(o,1)[0]||(null===(n=i.authentication)||void 0===n?void 0:n.id),l=b()(i,e.name),p=Object(c.useState)(!u||l),d=y()(p,2),f=d[0],m=d[1],h=Object(c.useRef)(!0),v=Object(c.useRef)(!1);Object(c.useEffect)((function(){v.current&&(!h.current&&r.getState().pristine&&(m(!1),h.current=!0),f&&(h.current=!1))})),Object(c.useEffect)((function(){v.current=!0}),[]);var g=e.validate&&e.validate.filter((function(e){return e.type!==x.a.REQUIRED})),j=k(k({},e),u?{validate:g,resolveProps:S.a}:{});return!f&&u?s.a.createElement(O.FormGroup,{helperText:j.helperText,label:j.label,onFocus:function(){return m(!0)},isRequired:!0},s.a.createElement(E.TextInput,{"aria-label":"pre-filled-authentication",value:"•••••••••••••"})):s.a.createElement(_.a,a()({},j,{autoFocus:!0}))},A=n(49),C=n.n(A),N=n(12),I=n.n(N),L=n(42),F=n(250),z=n(437),B=n(131),q=n(525),G=n.n(q),V=n(409),U=n.n(V),W=n(434),Q=n(209),K=n(210),Y=n(129),H=n(457),X=n(211),Z=n(213),J=n.n(Z),$=n(524),ee=function(e){var t=e.app,n=e.onCancel,r=e.container,a=Object(F.a)(),i=Object(L.useSelector)((function(e){return e.sources.appTypes})),o=Object(W.a)(),u=Object(L.useDispatch)();Object(c.useEffect)((function(){r&&(r.hidden=!0)}),[]);var l=t.dependent_applications.map((function(e){var n=i.find((function(t){return t.name===e}));return t.sourceAppsNames.includes(null==n?void 0:n.display_name)&&(null==n?void 0:n.display_name)})).filter((function(e){return e}));return s.a.createElement(H.Modal,{className:"ins-c-sources__dialog--warning",isOpen:!0,onClose:n,variant:"small","aria-label":a.formatMessage({id:"sources.deleteAppTitle",defaultMessage:"Remove application?"}),header:s.a.createElement(X.Title,{headingLevel:"h1",size:"2xl"},s.a.createElement(J.a,{size:"sm",className:"ins-m-alert ins-c-source__delete-icon pf-u-mr-sm"}),a.formatMessage({id:"sources.deleteAppTitle",defaultMessage:"Remove application?"})),actions:[s.a.createElement(Y.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){return Object($.a)(t,a,n,u,o)}},a.formatMessage({id:"sources.remove",defaultMessage:"Remove"})),s.a.createElement(Y.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:n},a.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}))]},s.a.createElement(K.TextContent,null,s.a.createElement(Q.Text,{component:Q.TextVariants.p},a.formatMessage({id:"sources.deleteAppWarning",defaultMessage:"{ appName } will be disconnected from this source."},{appName:s.a.createElement("b",{key:"b"},t.display_name)})),l.length>0&&s.a.createElement(Q.Text,{component:Q.TextVariants.p},a.formatMessage({id:"sources.deleteAppDetails",defaultMessage:"This change will affect these applications: { apps }."},{apps:l}))))};ee.propTypes={app:I.a.shape({id:I.a.string.isRequired,display_name:I.a.string.isRequired,dependent_applications:I.a.arrayOf(I.a.string),sourceAppsNames:I.a.arrayOf(I.a.string)}).isRequired,onCancel:I.a.func.isRequired,container:I.a.instanceOf(Element)};var te=ee,ne=function(e){var t=e.option,n=e.setApplicationToRemove,r=e.sourceAppsNames,a=e.app,i=e.appType,o=Object(F.a)();return s.a.createElement("div",{className:"pf-c-radio pf-u-mb-md"},s.a.createElement(B.Button,{id:"remove-app-".concat(t.value),variant:"plain","aria-label":o.formatMessage({id:"source.removeAppAria",defaultMessage:"Remove application {app} from this source"},{app:t.label}),className:"pf-u-p-0",onClick:function(){return n({id:null==a?void 0:a.id,display_name:null==i?void 0:i.display_name,dependent_applications:null==i?void 0:i.dependent_applications,sourceAppsNames:r})}},s.a.createElement(G.a,{variant:"small"})),s.a.createElement("label",{className:"pf-c-radio__label",htmlFor:"remove-app-".concat(t.value)},t.label))};ne.propTypes={option:I.a.shape({label:I.a.string.isRequired,value:I.a.string.isRequired}),setApplicationToRemove:I.a.func.isRequired,sourceAppsNames:I.a.arrayOf(I.a.string),appType:I.a.shape({display_name:I.a.string.isRequired,dependent_applications:I.a.arrayOf(I.a.string)}),app:I.a.shape({id:I.a.string.isRequired,application_type_id:I.a.string.isRequired})};var re=function(e){var t=U()(e),n=t.options,r=t.input,a=r.onChange,i=r.value,o=r.name,u=t.container,l=Object(c.useState)({}),p=y()(l,2),d=p[0],f=p[1],m=Object(L.useSelector)((function(e){return e.sources.appTypes})),h=Object(W.a)(),v=h.applications.map((function(e){var t,n=e.application_type_id;return null===(t=m.find((function(e){return e.id===n})))||void 0===t?void 0:t.display_name})),g=function(e){return null==m?void 0:m.find((function(t){return t.id===e}))},b=function(e){return h.applications.find((function(t){return t.application_type_id===e}))},O=function(e){var t;return null===(t=b(e))||void 0===t?void 0:t.isDeleting},E=h.applications.filter((function(e){return!e.isDeleting})).reduce((function(e,t){return[].concat(C()(e),[t.application_type_id])}),[]);return s.a.createElement("div",null,d.id&&s.a.createElement(te,{app:d,onCancel:function(){return u&&(u.hidden=!1),f({})},container:u}),n.map((function(e){return E.includes(e.value)?s.a.createElement(ne,{key:e.value,option:e,setApplicationToRemove:f,sourceAppsNames:v,app:b(e.value),appType:g(e.value)}):s.a.createElement(z.Radio,{className:"pf-u-mb-md",key:e.value,onChange:function(){return a(e.value)},label:e.label,id:"".concat(o,"-").concat(e.value),name:o,isChecked:i===e.value,isDisabled:O(e.value)})})))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){return s.a.createElement(l.a,a()({FormTemplate:d.a,componentMapper:ie(ie(ie({},m.a),h.mapperExtension),{},{authentication:D,"application-select":re})},e))}},595:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n(3),a=n.n(r),i=n(458),o=n(38),c=n(15);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return e.url||null===e.url?function(e){if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{var t=new URL(e),n=t.protocol.replace(/:$/,"");return{scheme:n,host:t.hostname,port:""===t.port?Object(i.b)(n):t.port,path:t.pathname}}catch(e){return{}}}(e.url):e.endpoint?e.endpoint:e},p=function(e,t){var n,r,a=[];if(t.source&&a.push(Object(o.k)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){var i=l(t),s=i.scheme,p=i.host,d=i.port,f=i.path,m=null===d?null:parseInt(d,10),h=u({scheme:s,host:p,path:f,port:null===m?null:isNaN(m)?void 0:m},t.endpoint);a.push(Object(o.k)().updateEndpoint(e.endpoints[0].id,h))}if(t.authentications&&Object.keys(t.authentications).forEach((function(e){var n=e.replace("a","");a.push(Object(o.k)().updateAuthentication(n,t.authentications[e]))})),t.billing_source||t.credentials){var v={};t.credentials&&(v={authentication:{credentials:t.credentials}}),t.billing_source&&(v=u(u({},v),{},{billing_source:t.billing_source})),a.push((n=e.source.id,r=v,o.a.patch("".concat(c.a,"/sources/").concat(n,"/"),r)))}return Promise.all(a)}},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(425),n(415),n(0),n(208),n(407),n(406),n(210),n(428),n(429),n(424),n(445),n(430),n(209);var r=n(446);n(447),n(405),n(417),n(412),n(416),t.default=r.hardcodedSchemas},676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);r.__exportStar(n(421),t),r.__exportStar(n(422),t)},895:function(e,t,n){var r=n(896);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},896:function(e,t,n){var r=n(552),a=n(657),i=n(553),o=n(439),c=n(658);e.exports=function(e,t,n,s){if(!o(e))return e;for(var u=-1,l=(t=a(t,e)).length,p=l-1,d=e;null!=d&&++u<l;){var f=c(t[u]),m=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=p){var h=d[f];void 0===(m=s?s(h,f,d):void 0)&&(m=o(h)?h:i(t[u+1])?[]:{})}r(d,f,m),d=d[f]}return e}},897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);r.__exportStar(n(571),t),r.__exportStar(n(572),t)},898:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);r.__exportStar(n(419),t),r.__exportStar(n(426),t),r.__exportStar(n(413),t),r.__exportStar(n(448),t),r.__exportStar(n(899),t)},899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStatePrimary=void 0;const r=n(1),a=r.__importStar(n(0)),i=n(4),o=r.__importDefault(n(479));t.EmptyStatePrimary=e=>{var{children:t,className:n=""}=e,c=r.__rest(e,["children","className"]);return a.createElement("div",Object.assign({className:i.css(o.default.emptyStatePrimary,n)},c),t)},t.EmptyStatePrimary.displayName="EmptyStatePrimary"},932:function(e,t,n){"use strict";n.r(t);var r=n(134),a=n.n(r),i=n(3),o=n.n(i),c=n(56),s=n.n(c),u=n(0),l=n.n(u),p=n(42),d=n(13),f=n(250),m=n(105),h=n(477),v=n(592),y=n(104),g=n.n(y),b=n(136),O=n.n(b),E=n(38),j=n(15);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e,t){return Promise.all([Object(E.k)().showSource(e.id),Object(E.k)().listSourceEndpoints(e.id),Object(E.f)(e.id),t&&(n=e.id,E.a.get("".concat(j.a,"/sources/").concat(n,"/"))).catch((function(){}))]).then(function(){var t=O()(g.a.mark((function t(n){var r,a,i,o,c,u,l,p,d,f,m,h,v;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s()(n,4),i=a[0],o=a[1],c=a[2],u=a[3],l=o&&o.data&&o.data[0],p=(null==c||null===(r=c.sources[0])||void 0===r?void 0:r.applications)||[],d={source:w(w({},e),i),applications:p},u&&(d=w(w({},d),{},{billing_source:u.billing_source,credentials:u.authentication.credentials})),f=[],h=[],v=[],p.forEach((function(e){var t;null==e||null===(t=e.authentications)||void 0===t||t.forEach((function(t){(null==t?void 0:t.id)&&(f.push(Object(E.k)().showAuthentication(t.id)),h.push(e.id),v.push(t.id))}))})),!(f.length>0)){t.next=14;break}return t.next=12,Promise.all(f);case 12:m=t.sent,h.forEach((function(e,t){d.applications.find((function(t){return t.id===e})).authentications.push(m[t])}));case 14:if(l){t.next=16;break}return t.abrupt("return",d);case 16:return t.abrupt("return",Object(E.k)().listEndpointAuthentications(l.id).then((function(e){return w(w({},d),{},{endpoints:o.data,authentications:e.data.filter((function(e){var t=e.id;return!v.includes(t)}))})})));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var n},T=n(12),x=n.n(T),P=n(421),S=n(422),R=n(211),k=function(e){var t=e.name,n=Object(f.a)();return l.a.createElement(P.Grid,null,l.a.createElement(S.GridItem,{xs:12},l.a.createElement(R.Title,{headingLevel:"h1",size:"3xl"},n.formatMessage({id:"sources.editSource",defaultMessage:"Edit source"}))),t&&l.a.createElement(S.GridItem,{xs:12},n.formatMessage({id:"sources.editSourceDescription",defaultMessage:"Use the form fields below to make desired changes to source {name}."},{name:l.a.createElement("b",{key:"b"},t)})))};k.propTypes={name:x.a.node};var D=k,A=n(526),C=n(49),N=n.n(C),I=n(103),L=n.n(I),F=n(411),z=n.n(F),B=n(895),q=n.n(B),G=n(458),V=n(407),U=n.n(V),W=n(406),Q=n.n(W),K=n(598),Y=n(675),H=n.n(Y),X=n(897),Z=n(129),J=n(525),$=n.n(J),ee=n(405),te=n.n(ee),ne=n(410),re=n(209),ae=n(210),ie=function(e){var t=e.id,n=Object(f.a)();return l.a.createElement(ne.FormGroup,{label:n.formatMessage({id:"sources.authId",defaultMessage:"Authentication ID"})},l.a.createElement(ae.TextContent,null,l.a.createElement(re.Text,{variant:"p"},t)))};ie.propTypes={id:x.a.string.isRequired};var oe=ie,ce=Object(u.createContext)(),se=n(141),ue=n(676),le=function(){var e=Object(f.a)();return l.a.createElement(ue.Grid,null,l.a.createElement(ue.GridItem,{xs:12},l.a.createElement(se.Bullseye,null,l.a.createElement(m.Spinner,{size:"lg"}))),l.a.createElement(ue.GridItem,{xs:12},l.a.createElement(se.Bullseye,null,l.a.createElement(ae.TextContent,null,l.a.createElement(re.Text,{component:re.TextVariants.small,className:"pf-u-mt-md"},e.formatMessage({id:"sources.removingAuthMessage",defaultMessage:"This authentication is being removed..."}))))))},pe=function(e){var t,n,r=e.id,a=e.fields,i=Object(f.a)(),o=te()().renderForm,c=Object(u.useContext)(ce),s=c.setState,p=c.source;return(null==p||null===(t=p.authentications)||void 0===t||null===(n=t.find((function(e){return e.id===r})))||void 0===n?void 0:n.isDeleting)?l.a.createElement(le,null):l.a.createElement(P.Grid,null,l.a.createElement(S.GridItem,{md:2},l.a.createElement(X.Flex,null,l.a.createElement(X.FlexItem,{className:"pf-u-mr-0"},l.a.createElement(Z.Button,{variant:"plain","aria-label":i.formatMessage({id:"sources.removeAuthAriaLabel",defaultMessage:"Remove authentication with id {id}"},{id:r}),onClick:function(){return s({type:"setAuthRemoving",removingAuth:r})}},l.a.createElement($.a,null))),l.a.createElement(X.Flex,null,l.a.createElement(oe,{id:r})))),l.a.createElement(S.GridItem,{md:10},o(a)))};pe.propTypes={id:x.a.string.isRequired,fields:x.a.array.isRequired};var de=pe;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){return e.split(".").pop()},ve=function(e,t){var n;return(null==e||null===(n=e.fields)||void 0===n?void 0:n.filter((function(e){return e.stepKey===t})))||[]},ye=function(e,t){return e.map((function(e){var n=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name,r=me(me({},e),{},{name:n});return"password"===he(r.name)&&(r.component="authentication"),r}))},ge=function(e,t,n){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var r,a,i,o=null==t||null===(r=t.schema)||void 0===r||null===(a=r.authentication)||void 0===a?void 0:a.find((function(t){return t.type===e.authtype}));if(!o)return[];var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return z()(H.a,[e,"authentication",t,n,"includeStepKeyFields"],[])}(t.name,e.authtype,n),s=null===(i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return z()(H.a,[e,"authentication",t,n,"additionalSteps"],[])}(t.name,e.authtype,n))||void 0===i?void 0:i.map((function(e){return me(me({},e),{},{fields:[].concat(N()(e.fields),N()(ve(o,e.name)))})})).map((function(e){return e.fields.map((function(e){return e.name}))})).flatMap((function(e){return e})),u=o.fields.filter((function(e){return s.includes(e.name)||!e.stepKey||e.stepKey&&c.includes(e.stepKey)})).map((function(r){return me(me({},r),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"generic";return z()(H.a,[e,"authentication",t,r,n],{})}(t.name,e.authtype,r.name,n))}));return n||"amazon"!==t.name||(u=u.map((function(t){return function(e,t){return"password"!==he(e.name)?e:"arn"===t?me(me({},e),{},{label:"Cost Management ARN"}):"cloud-meter-arn"===t?me(me({},e),{},{label:"Subscription Watch ARN"}):e}(t,e.authtype)}))),n?ye(u,e.id):[{name:"authentication-".concat(e.id),component:"description",id:e.id,Content:de,fields:ye(u,e.id)}]})):[]},be="/insights/platform/cost-management",Oe=function(e,t,n){var r;return[].concat(N()(ge(null===(r=n.authentications)||void 0===r?void 0:r.filter((function(e){return Object.keys(e).length>1})),t,null==e?void 0:e.name)),N()((null==e?void 0:e.name)===be?function(e){return"openshift"===e.name?[{name:"source.source_ref",label:l.a.createElement(K.a,{id:"sources.clusterIdentifier",defaultMessage:"Cluster identifier"}),isRequired:!0,validate:[{type:Q.a.REQUIRED}],component:U.a.TEXT_FIELD}]:[]}(t):[]))},Ee=function(e){return{component:U.a.PLAIN_TEXT,name:"unused-auth-warning",label:l.a.createElement(K.a,{id:"sources.authNotUsed",defaultMessage:"The following {length, plural, one {authentication is not} other {authentications are not}} used by any application.",values:{length:e}})}},je=function(e,t,n,r){var a=function(e,t,n){var r,a,i;if(!e||0===e.length)return[];var o=null==t||null===(r=t.schema)||void 0===r||null===(a=r.authentication)||void 0===a||null===(i=a.reduce((function(n,r){var a=r.type,i=e.filter((function(e){var t=e.authtype;return a===t}));return(null==i?void 0:i.length)>0?[].concat(N()(n),N()(ge(i,t))):n}),[]))||void 0===i?void 0:i.filter(Boolean);return o=0!==n?[{fields:[Ee(o.length)].concat(N()(o)),title:t.product_name,name:"unused-auths-tab"}]:[{fields:[Ee(o.length)].concat(N()(o)),component:U.a.SUB_FORM,name:"unused-auths-group"}]}(r,t,null==e?void 0:e.length);if(e&&0!==e.length){if(1===e.length&&0===a.length){var i=n.find((function(t){return t.id===e[0].application_type_id}));return Oe(i,t,e[0])}return[{component:U.a.TABS,name:"app-tabs",isBox:!0,fields:[].concat(N()(e.map((function(e){var r=n.find((function(t){return t.id===e.application_type_id}));return{name:null==r?void 0:r.id,title:null==r?void 0:r.display_name,fields:Oe(r,t,e)}}))),N()(a))}]}return a};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var we=function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){q()(n,t,z()(e,t))})),n},Me=function(e,t){var n,r,a=e.endpoints,i=e.authentications,c=e.applications,s=L()(e,["endpoints","authentications","applications"]),u={},l=[].concat(N()(i||[]),N()((null==c?void 0:c.reduce((function(e,t){return[].concat(N()(e),N()(t.authentications))}),[]))||[]));return l.length>0&&l.forEach((function(e){u["a".concat(e.id)]=e})),a&&a.length>0&&(n=a[0]),n&&(r=n.scheme||n.host||n.path||n.port?Object(G.c)(n):void 0),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source_type:t,endpoint:n,authentications:u,url:r},s)},Te=function(e,t){var n;return e.applications.map((function(e){return e.application_type_id})).includes(null===(n=t.find((function(e){return e.name===be})))||void 0===n?void 0:n.id)},xe=n(132),Pe=n(576),Se=n(595),Re=function(){var e=O()(g.a.mark((function e(t,n,r,a,i,o,c){var s,u,l,p,d,f,m,h,v;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"submit",values:t,editing:n}),p=new Date,e.prev=2,e.next=5,Object(Se.a)(a,we(t,n));case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),r(Object(xe.f)()),o({type:"submitFailed"}),e.abrupt("return");case 12:return Object(Pe.a)(a.source.id),e.next=15,M({id:a.source.id},c);case 15:if(f=e.sent,m=(null===(s=a.applications)||void 0===s?void 0:s.map((function(e){var t=e.id;return Object(A.checkAppAvailability)(t,void 0,void 0,void 0,p)})))||[],(null===(u=a.endpoints)||void 0===u||null===(l=u[0])||void 0===l?void 0:l.id)&&m.push(Object(A.checkAppAvailability)(a.endpoints[0].id,void 0,void 0,"getEndpoint",p)),!(m.length>0)){e.next=41;break}return e.prev=19,e.next=22,Promise.all(m);case 22:h=e.sent,e.next=30;break;case 25:return e.prev=25,e.t1=e.catch(19),r(Object(xe.f)()),o({type:"submitFailed"}),e.abrupt("return");case 30:if(!(v=h.find((function(e){return e.availability_status===G.a})))){e.next=36;break}return d={title:i.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit source failed"}),description:v.availability_status_error,variant:"danger"},o({type:"submitFinished",source:f,message:d}),r(Object(xe.f)()),e.abrupt("return");case 36:if(!h.some((function(e){return!e.availability_status}))){e.next=41;break}return o({type:"submitTimetouted"}),r(Object(xe.f)()),e.abrupt("return");case 41:d={title:i.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Source ‘{name}’ was edited successfully."},{name:a.source.name}),variant:"success"},o({type:"submitFinished",source:f,message:d}),r(Object(xe.f)());case 44:case"end":return e.stop()}}),e,null,[[2,7],[19,25]])})));return function(t,n,r,a,i,o,c){return e.apply(this,arguments)}}(),ke=n(133),De=n(434),Ae=n(481),Ce=n(577),Ne=n(474),Ie=n.n(Ne),Le=function(e){var t=e.sourceType,n=e.applications,r=Object(f.a)(),a=Object(p.useSelector)((function(e){return e.sources.appTypes})),i=null==n?void 0:n.map((function(e){var t,n=e.application_type_id;return null==a||null===(t=a.find((function(e){return e.id===n})))||void 0===t?void 0:t.display_name}));return l.a.createElement(ae.TextContent,null,l.a.createElement(ue.Grid,{hasGutter:!0},l.a.createElement(ue.GridItem,{md:2},l.a.createElement(re.Text,{component:re.TextVariants.h4},r.formatMessage({id:"sources.sourceType",defaultMessage:"Source type"})),l.a.createElement(re.Text,{component:re.TextVariants.p,id:"source-edit-type"},t.product_name)),l.a.createElement(ue.GridItem,{md:8},l.a.createElement(re.Text,{component:re.TextVariants.h4},r.formatMessage({id:"sources.apps",defaultMessage:"Applications"})),l.a.createElement(re.Text,{component:re.TextVariants.p,id:"source-edit-apps"},i.length>0?i.join(", "):r.formatMessage({id:"sources.none",defaultMessage:"None"})))))};Le.propTypes={sourceType:x.a.shape({product_name:x.a.string.isRequired}),applications:x.a.arrayOf(x.a.shape({application_type_id:x.a.string.isRequired}))};var Fe=Le,ze=n(217),Be=function(){var e=te()().getState().values.message;return l.a.createElement(ze.Alert,{variant:null==e?void 0:e.variant,isInline:!0,title:null==e?void 0:e.title},null==e?void 0:e.description)},qe=function(e,t,n,r){return[{name:"alert",component:"description",Content:Be,condition:{when:"message",isNotEmpty:!0}},{name:"source.name",label:t.formatMessage({id:"sources.sourceName",defaultMessage:"Source name"}),component:U.a.TEXT_FIELD,validate:[function(n){return Object(Ce.asyncValidatorDebounced)(n,e,t)},{type:Q.a.REQUIRED}],isRequired:!0,resolveProps:Ie.a},{name:"additional_info",Content:Fe,component:"description",sourceType:n,applications:r}]};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var t=e.schema.endpoint.fields.map((function(t){return Ve(Ve({},t),function(e,t){return z()(H.a,[e,"endpoint",t],{})}(e.name,t.name))})),n={component:U.a.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){var r,a=t.find((function(e){return"url"===e.name}));return Ve(Ve({},n),{},{fields:[{component:U.a.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[Ve(Ve({},a),{},{isRequired:!1,validate:null==a||null===(r=a.validate)||void 0===r?void 0:r.filter((function(e){return e.type!==Q.a.REQUIRED}))})]},{component:U.a.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]})}return Ve(Ve({},n),{},{fields:t})}},We=function(e){var t=e.title,n=e.description;return l.a.createElement(ae.TextContent,null,l.a.createElement(R.Title,{headingLevel:"h2",className:"pf-u-mb-0"},t),n&&l.a.createElement(re.Text,{variant:"p"},n))};We.propTypes={title:x.a.node.isRequired,description:x.a.node};var Qe=function(e,t,n,r,a){var i,o;if(0===e.length)i=r.formatMessage({id:"source.editTitleNoApp",defaultMessage:"{type} credentials"},{type:null==t?void 0:t.product_name});else if(1===e.length){var c=n.find((function(t){return t.id===e[0].application_type_id}));i=r.formatMessage({id:"source.editTitleOneApp",defaultMessage:"{type} & {app} credentials"},{type:null==t?void 0:t.product_name,app:null==c?void 0:c.display_name})}else i=r.formatMessage({id:"source.editTitleMoreApps",defaultMessage:"{type} & application credentials"},{type:null==t?void 0:t.product_name}),o=r.formatMessage({id:"source.editDescriptionMoreApps",defaultMessage:"Use the tabs below to view and edit credentials for connected applications."});return{component:"description",name:"edit-title",Content:We,title:i,description:o,hideField:0===(null==e?void 0:e.length)&&0===(null==a?void 0:a.length)}},Ke=function(e,t,n,r){return{fields:[].concat(N()(qe(e.source.id,r,t,e.applications)),[Qe(e.applications,t,n,r,e.authentications)],N()(je(e.applications,t,n,e.authentications)),[!!(e.endpoints&&e.endpoints.length>0)&&Ue(t)]).filter(Boolean)}};function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,isTimeouted:!1},Ze=function(e,t){var n=t.type,r=t.source,a=t.sourceType,i=t.appTypes,o=t.intl,c=t.message,s=t.values,u=t.editing,l=t.removingAuth,p=t.authId;switch(n){case"createForm":return He(He({},e),{},{sourceType:a,initialValues:Me(e.source,a.product_name),schema:Ke(e.source,a,i,o),loading:!1});case"setSource":return He(He({},e),{},{source:r,initialLoad:!1});case"submit":return He(He({},e),{},{isSubmitting:!0,submitError:!1,values:s,editing:u});case"submitFinished":return He(He({},e),{},{isSubmitting:!1,source:r,message:c});case"submitFailed":return He(He({},e),{},{isSubmitting:!1,submitError:!0});case"submitTimetouted":return He(He({},e),{},{isSubmitting:!1,isTimeouted:!0});case"removeAuthPending":return He(He({},e),{},{isAuthRemoving:null,source:He(He({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===p?He(He({},e),{},{isDeleting:!0}):e}))})});case"removeAuthRejected":return He(He({},e),{},{source:He(He({},e.source),{},{authentications:e.source.authentications.map((function(e){return e.id===p?He(He({},e),{},{isDeleting:!1}):e}))})});case"removeAuthFulfill":return He(He({},e),{},{source:He(He({},e.source),{},{authentications:e.source.authentications.filter((function(e){return e.id!==p}))})});case"setAuthRemoving":return He(He({},e),{},{isAuthRemoving:l});case"closeAuthRemoving":return He(He({},e),{},{isAuthRemoving:null});default:return e}},Je=n(441),$e=n.n(Je),et=n(451),tt=n.n(et),nt=n(564),rt=n(131),at=n(640),it=function(e){return l.a.createElement(at.Form,a()({},e,{id:"modal-form"}))},ot=function(){var e=Object(f.a)(),t=te()(),n=t.onReset,r=t.onCancel;return l.a.createElement($e.a,{subscription:{submitting:!0,pristine:!0,invalid:!0,validating:!0}},(function(t){var a=t.pristine,i=t.invalid,o=t.validating,c=t.submitting;return l.a.createElement("div",{className:"pf-c-form"},l.a.createElement(nt.ActionGroup,{className:"pf-u-mt-0"},l.a.createElement(rt.Button,{variant:"primary",form:"modal-form",type:"submit",isDisabled:a||o||c||i},e.formatMessage({id:"sources.save",defaultMessage:"Save"})),l.a.createElement(rt.Button,{variant:"secondary",isDisabled:a,onClick:n,id:"reset-modal"},e.formatMessage({id:"sources.reset",defaultMessage:"Reset"})),l.a.createElement(rt.Button,{variant:"link",onClick:r,id:"cancel-modal"},e.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}))))}))},ct=function(e){var t=e.ModalProps,n=L()(e,["ModalProps"]);return l.a.createElement(h.Modal,a()({},t,{footer:l.a.createElement(ot,null)}),l.a.createElement(tt.a,a()({},n,{showFormControls:!1,FormWrapper:it})))};ct.propTypes={ModalProps:x.a.object};var st=ct,ut=n(578),lt=n.n(ut),pt=function(){var e=Object(f.a)(),t=Object(d.k)();return l.a.createElement("div",{className:"pf-c-form"},l.a.createElement(nt.ActionGroup,{className:"pf-u-mt-0"},l.a.createElement(rt.Button,{variant:"primary",isDisabled:!0},e.formatMessage({id:"sources.save",defaultMessage:"Save"})),l.a.createElement(rt.Button,{variant:"secondary",isDisabled:!0},e.formatMessage({id:"sources.reset",defaultMessage:"Reset"})),l.a.createElement(rt.Button,{variant:"link",onClick:function(){return t.push(ke.c.sources.path)}},e.formatMessage({id:"sources.cancel",defaultMessage:"Cancel"}))))},dt=function(e){var t=e.children,n=Object(d.k)(),r=Object(De.a)(),a=Object(f.a)();return l.a.createElement(h.Modal,{"aria-label":a.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:l.a.createElement(D,{name:r.name}),variant:"large",isOpen:!0,onClose:function(){return n.push(ke.c.sources.path)},footer:l.a.createElement(pt,null)},t)};dt.propTypes={children:x.a.node.isRequired};var ft=dt,mt=function(){var e=Object(f.a)();return l.a.createElement(ft,null,l.a.createElement(lt.a,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})}))},ht=n(532),vt=n(898),yt=n(413),gt=n(488),bt=n.n(gt),Ot=function(){var e=Object(f.a)();return l.a.createElement(ft,null,l.a.createElement(se.Bullseye,null,l.a.createElement(vt.EmptyState,{variant:vt.EmptyStateVariant.full,className:"pf-u-mt-4xl"},l.a.createElement(yt.EmptyStateIcon,{icon:bt.a,color:"var(--pf-global--Color--200)",className:"pf-u-mb-0"}),l.a.createElement(ht.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},e.formatMessage({id:"sources.editTimetoutedTitle",defaultMessage:"Edit source not yet complete"})),l.a.createElement(vt.EmptyStateBody,null,e.formatMessage({id:"sources.editTimetoutedDescription",defaultMessage:"We are still working to confirm your updated credentials and app settings.{newLine}To track progress, check the Status column in the Sources table."},{newLine:l.a.createElement("br",{key:"br"})})))))},Et=n(579),jt=n.n(Et),_t=function(e){var t=e.onRetry,n=Object(f.a)();return l.a.createElement(ft,null,l.a.createElement(jt.a,{onClose:t,customText:n.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:l.a.createElement(re.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},n.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:n.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})}))};_t.propTypes={onRetry:x.a.func.isRequired};var wt=_t,Mt=n(213),Tt=n.n(Mt),xt=n(476),Pt=function(e){var t,n,r=e.authId,a=Object(u.useContext)(ce),i=a.setState,o=a.source,c=a.sourceType,s=null==c||null===(t=c.schema)||void 0===t||null===(n=t.authentication)||void 0===n?void 0:n.find((function(e){var t,n;return e.type===(null==o||null===(t=o.authentications)||void 0===t||null===(n=t.find((function(e){return(null==e?void 0:e.id)===r})))||void 0===n?void 0:n.authtype)})),d=Object(p.useDispatch)(),m=Object(f.a)(),v=function(){return i({type:"closeAuthRemoving"})};return l.a.createElement(h.Modal,{isOpen:!0,className:"ins-c-sources__dialog--warning",onClose:v,actions:[l.a.createElement(Z.Button,{id:"deleteSubmit",key:"submit",variant:"danger",type:"button",onClick:function(){return i({type:"removeAuthPending",authId:r}),v(),Object(E.d)(r).then((function(){i({type:"removeAuthFulfill",authId:r}),d(Object(xe.b)(m.formatMessage({id:"sources.authRemoveFullfil",defaultMessage:"Authentication was deleted successfully."}),"success"))})).catch((function(e){i({type:"removeAuthRejected",authId:r}),d(Object(xe.b)(m.formatMessage({id:"sources.authRemoveRejected",defaultMessage:"Authentication was not deleted successfully."}),"danger",Object(xt.handleError)(e)))}))}},m.formatMessage({id:"sources.deleteConfirm",defaultMessage:"Remove authentication"})),l.a.createElement(Z.Button,{id:"deleteCancel",key:"cancel",variant:"link",type:"button",onClick:v},m.formatMessage({id:"sources.deleteCancel",defaultMessage:"Cancel"}))],variant:"small","aria-label":m.formatMessage({id:"sources.deleteAuthTitle",defaultMessage:"Remove authentication?"}),header:l.a.createElement(R.Title,{headingLevel:"h1",size:"2xl"},l.a.createElement(Tt.a,{size:"sm",className:"ins-m-alert ins-c-source__delete-icon pf-u-mr-sm"}),m.formatMessage({id:"sources.deleteAppTitle",defaultMessage:"Remove authentication?"}))},l.a.createElement(ae.TextContent,null,l.a.createElement(re.Text,{variant:re.TextVariants.p},m.formatMessage({id:"sources.removeAuthWarning",defaultMessage:"This action will permanently remove {auth} from this source."},{auth:l.a.createElement("b",{key:"b"},null==s?void 0:s.name)}))))};Pt.propTypes={authId:x.a.string.isRequired};var St=Pt;function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(u.useReducer)(Ze,Xe),t=s()(e,2),n=t[0],r=t[1],i=Object(d.k)(),c=Object(De.a)(),y=Object(Ae.a)(),g=n.loading,b=n.editing,O=n.source,E=n.initialValues,j=n.schema,_=n.isSubmitting,w=n.initialLoad,T=n.message,x=n.submitError,P=n.isTimeouted,S=n.values,R=n.sourceType,k=n.isAuthRemoving,A=Object(f.a)(),C=Object(p.useSelector)((function(e){return e.sources}),p.shallowEqual),N=C.sourceTypes,I=C.appTypes,L=C.sourceTypesLoaded,F=C.appTypesLoaded,z=Object(p.useDispatch)();Object(u.useEffect)((function(){c&&w&&F&&M(c,Te(c,I)).then((function(e){e.source.imported&&function(e,t,n,r){e(Object(xe.b)(t.formatMessage({id:"sources.importSourceCannotEdited",defaultMessage:"Source { name } is imported."},{name:r}),"danger",t.formatMessage({id:"sources.importedSourcesCannotEdited",defaultMessage:"Imported sources cannot be edited."}))),n.push(ke.c.sources.path)}(z,A,i,e.source.name),r({type:"setSource",source:e})}))}),[c,y,F]),Object(u.useEffect)((function(){if(O&&F&&L){var e=N.find((function(e){return e.id===O.source.source_type_id}));r({type:"createForm",sourceType:e,source:O,appTypes:I,intl:A})}}),[F,O,L]);var B=!F||!L||g,q=function(){return i.push(ke.c.sources.path)};return P?l.a.createElement(Ot,null):x?l.a.createElement(wt,{onRetry:function(){return Re(S,b,z,O,A,r,Te(c,I))}}):_?l.a.createElement(mt,null):B?l.a.createElement(h.Modal,{"aria-label":A.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."}),header:l.a.createElement(D,null),isOpen:!0,variant:"large",onClose:q},l.a.createElement("div",{className:"ins-c-sources__dialog--spinnerContainer"},l.a.createElement(m.Spinner,null))):l.a.createElement(ce.Provider,{value:{setState:r,source:O,sourceType:R}},k&&l.a.createElement(St,{authId:k}),l.a.createElement(v.a,{onCancel:q,schema:j,onSubmit:function(e,t){return Re(e,t.getState().dirtyFields,z,O,A,r,Te(c,I))},FormTemplate:function(e){var t;return l.a.createElement(st,a()({ModalProps:(t={},o()(t,"aria-label",A.formatMessage({id:"sources.editSource",defaultMessage:"Edit source."})),o()(t,"header",l.a.createElement(D,{name:O.source.name})),o()(t,"variant","large"),o()(t,"isOpen",!k),o()(t,"onClose",q),t)},e))},clearedValue:null,initialValues:kt(kt({},E),{},{message:T})}))}}}]);
//# sourceMappingURL=../sourcemaps/edit.js.map