{"version":3,"sources":["webpack://sources-ui/./src/components/AddApplication/RemoveAppModal.js"],"names":["RemoveAppModal","intl","useIntl","useHistory","push","useParams","app_id","source","useSource","appTypes","useSelector","sources","dispatch","useDispatch","application","applications","find","id","replaceRouteId","routes","appType","application_type_id","app","display_name","dependent_applications","sourceAppsNames","map","onCancel","onSubmit","removeAppSubmit","dependentApps","appName","name","filter","Boolean","formatMessage","defaultMessage","TextVariants","p","length","apps"],"mappings":"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","file":"js/removeApplication.e0c17d419b0277ecbd5c.js","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { Redirect, useHistory, useParams } from 'react-router-dom';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/esm/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/esm/components/Text/TextContent';\nimport { Button } from '@patternfly/react-core/dist/esm/components/Button/Button';\nimport { Modal } from '@patternfly/react-core/dist/esm/components/Modal/Modal';\nimport { Title } from '@patternfly/react-core/dist/esm/components/Title/Title';\n\nimport ExclamationTriangleIcon from '@patternfly/react-icons/dist/esm/icons/exclamation-triangle-icon';\n\nimport { useSource } from '../../hooks/useSource';\n\nimport removeAppSubmit from './removeAppSubmit';\nimport { replaceRouteId, routes } from '../../Routes';\n\nconst RemoveAppModal = () => {\n  const intl = useIntl();\n  const { push } = useHistory();\n  const { app_id } = useParams();\n  const source = useSource();\n\n  const appTypes = useSelector(({ sources }) => sources.appTypes);\n  const dispatch = useDispatch();\n\n  const application = source.applications?.find(({ id }) => id === app_id);\n\n  if (!application) {\n    return <Redirect to={replaceRouteId(routes.sourcesDetail.path, source.id)} />;\n  }\n\n  const appType = appTypes.find(({ id }) => id === application?.application_type_id);\n\n  const app = {\n    id: app_id,\n    display_name: appType?.display_name,\n    dependent_applications: appType?.dependent_applications,\n    sourceAppsNames: source.applications.map(\n      ({ application_type_id }) => appTypes.find(({ id }) => id === application_type_id)?.display_name\n    ),\n  };\n\n  const onCancel = () => push(replaceRouteId(routes.sourcesDetail.path, source.id));\n  const onSubmit = () => removeAppSubmit(app, intl, onCancel, dispatch, source);\n\n  const dependentApps = appType?.dependent_applications\n    .map((appName) => {\n      const appType = appTypes.find(({ name }) => name === appName);\n\n      return source?.applications?.find(({ application_type_id }) => application_type_id === appType.id) && appType?.display_name;\n    })\n    .filter(Boolean);\n\n  return (\n    <Modal\n      className=\"ins-c-sources__dialog--warning\"\n      isOpen={true}\n      onClose={onCancel}\n      variant=\"small\"\n      aria-label={intl.formatMessage({\n        id: 'sources.deleteAppTitle',\n        defaultMessage: 'Remove application?',\n      })}\n      header={\n        <Title headingLevel=\"h1\" size=\"2xl\">\n          <ExclamationTriangleIcon size=\"sm\" className=\"ins-m-alert ins-c-source__delete-icon pf-u-mr-sm\" />\n          {intl.formatMessage({\n            id: 'sources.deleteAppTitle',\n            defaultMessage: 'Remove application?',\n          })}\n        </Title>\n      }\n      actions={[\n        <Button id=\"deleteSubmit\" key=\"submit\" variant=\"danger\" type=\"button\" onClick={onSubmit}>\n          {intl.formatMessage({\n            id: 'sources.remove',\n            defaultMessage: 'Remove',\n          })}\n        </Button>,\n        <Button id=\"deleteCancel\" key=\"cancel\" variant=\"link\" type=\"button\" onClick={onCancel}>\n          {intl.formatMessage({\n            id: 'sources.cancel',\n            defaultMessage: 'Cancel',\n          })}\n        </Button>,\n      ]}\n    >\n      <TextContent>\n        <Text component={TextVariants.p}>\n          {intl.formatMessage(\n            {\n              id: 'sources.deleteAppWarning',\n              defaultMessage: '{ appName } will be disconnected from this source.',\n            },\n            { appName: <b key=\"b\">{app.display_name}</b> }\n          )}\n        </Text>\n        {dependentApps.length > 0 && (\n          <Text component={TextVariants.p}>\n            {intl.formatMessage(\n              {\n                id: 'sources.deleteAppDetails',\n                defaultMessage: 'This change will affect these applications: { apps }.',\n              },\n              { apps: dependentApps }\n            )}\n          </Text>\n        )}\n      </TextContent>\n    </Modal>\n  );\n};\n\nexport default RemoveAppModal;\n"],"sourceRoot":""}