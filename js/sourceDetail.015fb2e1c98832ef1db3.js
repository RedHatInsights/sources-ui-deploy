(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[818],{56186:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,i:()=>l});var r,a=n(70655),i=n(92950),s=n(38296),o=n(68335),c=n(80164);!function(e){e.hr="hr",e.li="li",e.div="div"}(r||(r={}));const l=e=>{var{className:t,component:n=r.hr,isVertical:l=!1,inset:u}=e,p=(0,a._T)(e,["className","component","isVertical","inset"]);const d=n;return i.createElement(d,Object.assign({className:(0,s.i)(o.Z.divider,l&&o.Z.modifiers.vertical,(0,c.wt)(u,o.Z),t)},"hr"!==n&&{role:"separator"},p))};l.displayName="Divider"},74829:(e,t,n)=>{"use strict";n.d(t,{u:()=>l});var r=n(70655),a=n(92950),i=n(99355),s=n(33676),o=n(56186),c=n(62472);const l=e=>{var{className:t="",ref:n,ouiaId:u,ouiaSafe:p}=e,d=(0,r._T)(e,["className","ref","ouiaId","ouiaSafe"]);const f=(0,c.S$)(l.displayName,u,p);return a.createElement(i.e4.Consumer,null,(e=>a.createElement(s.n,Object.assign({},d,{context:e,component:a.createElement(o.i,{component:o.N.div}),className:t,role:"separator"},f))))};l.displayName="DropdownSeparator"},92607:(e,t,n)=>{"use strict";n.d(t,{x:()=>r,y5:()=>d,oi:()=>f});var r,a=n(70655),i=n(92950),s=n(13973),o=n(38296),c=n(64190),l=n(80164),u=n(62472),p=n(84709);!function(e){e.text="text",e.date="date",e.datetimeLocal="datetime-local",e.email="email",e.month="month",e.number="number",e.password="password",e.search="search",e.tel="tel",e.time="time",e.url="url"}(r||(r={}));class d extends i.Component{constructor(e){super(e),this.inputRef=i.createRef(),this.observer=()=>{},this.handleChange=e=>{this.props.onChange&&this.props.onChange(e.currentTarget.value,e)},this.handleResize=()=>{const e=this.props.innerRef||this.inputRef;e&&e.current&&(0,l.fi)(e.current,String(this.props.value))},this.restoreText=()=>{const e=this.props.innerRef||this.inputRef;e.current.value=String(this.props.value),e.current.scrollLeft=e.current.scrollWidth},this.onFocus=e=>{const{isLeftTruncated:t,onFocus:n}=this.props;t&&this.restoreText(),n&&n(e)},this.onBlur=e=>{const{isLeftTruncated:t,onBlur:n}=this.props;t&&this.handleResize(),n&&n(e)},e.id||e["aria-label"]||e["aria-labelledby"]||console.error("Text input:","Text input requires either an id or aria-label to be specified"),this.state={ouiaStateId:(0,u.ql)(d.displayName)}}componentDidMount(){if(this.props.isLeftTruncated){const e=this.props.innerRef||this.inputRef;this.observer=(0,p.p)(e.current,this.handleResize),this.handleResize()}}componentWillUnmount(){this.props.isLeftTruncated&&this.observer()}render(){const e=this.props,{innerRef:t,className:n,type:r,value:l,validated:p,onChange:d,onFocus:m,onBlur:g,isLeftTruncated:h,isReadOnly:v,isRequired:b,isDisabled:y,iconVariant:O,customIconUrl:E,customIconDimensions:_,ouiaId:w,ouiaSafe:M}=e,x=(0,a._T)(e,["innerRef","className","type","value","validated","onChange","onFocus","onBlur","isLeftTruncated","isReadOnly","isRequired","isDisabled","iconVariant","customIconUrl","customIconDimensions","ouiaId","ouiaSafe"]),j={};return E&&(j.backgroundImage=`url('${E}')`),_&&(j.backgroundSize=_),i.createElement("input",Object.assign({},x,{onFocus:this.onFocus,onBlur:this.onBlur,className:(0,o.i)(s.Z.formControl,p===c.LD.success&&s.Z.modifiers.success,p===c.LD.warning&&s.Z.modifiers.warning,(O&&"search"!==O||E)&&s.Z.modifiers.icon,O&&s.Z.modifiers[O],n),onChange:this.handleChange,type:r,value:l,"aria-invalid":x["aria-invalid"]?x["aria-invalid"]:p===c.LD.error,required:b,disabled:y,readOnly:v,ref:t||this.inputRef},(E||_)&&{style:j},(0,u.dp)(f.displayName,void 0!==w?w:this.state.ouiaStateId,M)))}}d.displayName="TextInputBase",d.defaultProps={"aria-label":null,className:"",isRequired:!1,validated:"default",isDisabled:!1,isReadOnly:!1,type:r.text,isLeftTruncated:!1,onChange:()=>{},ouiaSafe:!0};const f=i.forwardRef(((e,t)=>i.createElement(d,Object.assign({},e,{innerRef:t}))));f.displayName="TextInput"},84709:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(80164);const a=(e,t)=>{let n;if(r.Nq){const{ResizeObserver:r}=window;if(e&&r){const a=new r((e=>{window.requestAnimationFrame((()=>{Array.isArray(e)&&e.length>0&&t()}))}));a.observe(e),n=()=>a.unobserve(e)}else window.addEventListener("resize",t),n=()=>window.removeEventListener("resize",t)}return()=>{n&&n()}}},83668:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>r});const r=(0,n(40400).IU)({name:"StarIcon",height:512,width:576,svgPath:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z",yOffset:0,xOffset:0})},88007:(e,t,n)=>{"use strict";n(32857),t.Z={check:"pf-c-check",checkBody:"pf-c-check__body",checkDescription:"pf-c-check__description",checkInput:"pf-c-check__input",checkLabel:"pf-c-check__label",modifiers:{standalone:"pf-m-standalone",disabled:"pf-m-disabled"}}},68335:(e,t,n)=>{"use strict";n(28992),t.Z={divider:"pf-c-divider",modifiers:{hidden:"pf-m-hidden",hiddenOnSm:"pf-m-hidden-on-sm",visibleOnSm:"pf-m-visible-on-sm",hiddenOnMd:"pf-m-hidden-on-md",visibleOnMd:"pf-m-visible-on-md",hiddenOnLg:"pf-m-hidden-on-lg",visibleOnLg:"pf-m-visible-on-lg",hiddenOnXl:"pf-m-hidden-on-xl",visibleOnXl:"pf-m-visible-on-xl",hiddenOn_2xl:"pf-m-hidden-on-2xl",visibleOn_2xl:"pf-m-visible-on-2xl",vertical:"pf-m-vertical",insetNone:"pf-m-inset-none",insetXs:"pf-m-inset-xs",insetSm:"pf-m-inset-sm",insetMd:"pf-m-inset-md",insetLg:"pf-m-inset-lg",insetXl:"pf-m-inset-xl",inset_2xl:"pf-m-inset-2xl",inset_3xl:"pf-m-inset-3xl",insetNoneOnSm:"pf-m-inset-none-on-sm",insetXsOnSm:"pf-m-inset-xs-on-sm",insetSmOnSm:"pf-m-inset-sm-on-sm",insetMdOnSm:"pf-m-inset-md-on-sm",insetLgOnSm:"pf-m-inset-lg-on-sm",insetXlOnSm:"pf-m-inset-xl-on-sm",inset_2xlOnSm:"pf-m-inset-2xl-on-sm",inset_3xlOnSm:"pf-m-inset-3xl-on-sm",insetNoneOnMd:"pf-m-inset-none-on-md",insetXsOnMd:"pf-m-inset-xs-on-md",insetSmOnMd:"pf-m-inset-sm-on-md",insetMdOnMd:"pf-m-inset-md-on-md",insetLgOnMd:"pf-m-inset-lg-on-md",insetXlOnMd:"pf-m-inset-xl-on-md",inset_2xlOnMd:"pf-m-inset-2xl-on-md",inset_3xlOnMd:"pf-m-inset-3xl-on-md",insetNoneOnLg:"pf-m-inset-none-on-lg",insetXsOnLg:"pf-m-inset-xs-on-lg",insetSmOnLg:"pf-m-inset-sm-on-lg",insetMdOnLg:"pf-m-inset-md-on-lg",insetLgOnLg:"pf-m-inset-lg-on-lg",insetXlOnLg:"pf-m-inset-xl-on-lg",inset_2xlOnLg:"pf-m-inset-2xl-on-lg",inset_3xlOnLg:"pf-m-inset-3xl-on-lg",insetNoneOnXl:"pf-m-inset-none-on-xl",insetXsOnXl:"pf-m-inset-xs-on-xl",insetSmOnXl:"pf-m-inset-sm-on-xl",insetMdOnXl:"pf-m-inset-md-on-xl",insetLgOnXl:"pf-m-inset-lg-on-xl",insetXlOnXl:"pf-m-inset-xl-on-xl",inset_2xlOnXl:"pf-m-inset-2xl-on-xl",inset_3xlOnXl:"pf-m-inset-3xl-on-xl",insetNoneOn_2xl:"pf-m-inset-none-on-2xl",insetXsOn_2xl:"pf-m-inset-xs-on-2xl",insetSmOn_2xl:"pf-m-inset-sm-on-2xl",insetMdOn_2xl:"pf-m-inset-md-on-2xl",insetLgOn_2xl:"pf-m-inset-lg-on-2xl",insetXlOn_2xl:"pf-m-inset-xl-on-2xl",inset_2xlOn_2xl:"pf-m-inset-2xl-on-2xl",inset_3xlOn_2xl:"pf-m-inset-3xl-on-2xl"}}},25065:(e,t,n)=>{"use strict";n(78752),t.Z={form:"pf-c-form",formActions:"pf-c-form__actions",formFieldGroup:"pf-c-form__field-group",formFieldGroupBody:"pf-c-form__field-group-body",formFieldGroupHeader:"pf-c-form__field-group-header",formFieldGroupHeaderActions:"pf-c-form__field-group-header-actions",formFieldGroupHeaderDescription:"pf-c-form__field-group-header-description",formFieldGroupHeaderMain:"pf-c-form__field-group-header-main",formFieldGroupHeaderTitle:"pf-c-form__field-group-header-title",formFieldGroupHeaderTitleText:"pf-c-form__field-group-header-title-text",formFieldGroupToggle:"pf-c-form__field-group-toggle",formFieldGroupToggleButton:"pf-c-form__field-group-toggle-button",formFieldGroupToggleIcon:"pf-c-form__field-group-toggle-icon",formFieldset:"pf-c-form__fieldset",formGroup:"pf-c-form__group",formGroupControl:"pf-c-form__group-control",formGroupLabel:"pf-c-form__group-label",formGroupLabelHelp:"pf-c-form__group-label-help",formGroupLabelInfo:"pf-c-form__group-label-info",formGroupLabelMain:"pf-c-form__group-label-main",formHelperText:"pf-c-form__helper-text",formHelperTextIcon:"pf-c-form__helper-text-icon",formLabel:"pf-c-form__label",formLabelRequired:"pf-c-form__label-required",formLabelText:"pf-c-form__label-text",formSection:"pf-c-form__section",formSectionTitle:"pf-c-form__section-title",modifiers:{horizontal:"pf-m-horizontal",alignRight:"pf-m-align-right",noPaddingTop:"pf-m-no-padding-top",limitWidth:"pf-m-limit-width",action:"pf-m-action",info:"pf-m-info",disabled:"pf-m-disabled",inline:"pf-m-inline",stack:"pf-m-stack",error:"pf-m-error",success:"pf-m-success",warning:"pf-m-warning",inactive:"pf-m-inactive",hidden:"pf-m-hidden",expanded:"pf-m-expanded"}}},13973:(e,t,n)=>{"use strict";n(90479),t.Z={formControl:"pf-c-form-control",modifiers:{success:"pf-m-success",expanded:"pf-m-expanded",icon:"pf-m-icon",warning:"pf-m-warning",search:"pf-m-search",calendar:"pf-m-calendar",clock:"pf-m-clock",placeholder:"pf-m-placeholder",resizeVertical:"pf-m-resize-vertical",resizeHorizontal:"pf-m-resize-horizontal"}}},34307:(e,t,n)=>{"use strict";n.d(t,{K_:()=>o,yH:()=>c});var r=n(4942),a=n(17570),i=n(79829);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=function(e){return e.url||null===e.url?function(e){if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{var t=new URL(e),n=t.protocol.replace(/:$/,"");return{scheme:n,host:t.hostname,port:""===t.port?(0,a.bF)(n):t.port,path:t.pathname}}catch(e){return{}}}(e.url):e.endpoint?e.endpoint:e},c=function(e,t,n){var a=[];if(t.source&&a.push((0,i.Rj)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){var c=o(t),l=c.scheme,u=c.host,p=c.port,d=c.path,f=null===p?null:parseInt(p,10),m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({scheme:l,host:u,path:d,port:null===f?null:isNaN(f)?void 0:f},t.endpoint);a.push((0,i.Rj)().updateEndpoint(e.endpoints[0].id,m))}return t.authentications&&Object.keys(t.authentications).forEach((function(e){var n=e.replace("a","");a.push((0,i.Rj)().updateAuthentication(n,t.authentications[e]))})),t.applications&&Object.keys(t.applications).forEach((function(e){var t=e.replace("a","");a.push((0,i.Rj)().updateApplication(t,{extra:n.applications[e].extra}))})),Promise.all(a)}},80254:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(87462),a=n(45987),i=n(92950),s=n.n(i),o=n(86235),c=n(45697),l=n.n(c),u=n(60566),p=n(28216),d=n(86896),f=n(98495),m=n(58185),g=n(60076),h=n(16946);const v=function(){var e=(0,d.Z)(),t=(0,m.E)(),n=(0,p.I0)();return(0,i.useEffect)((function(){if(!1===t){var r=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=(0,h.$)(e);n((0,f.Hz)({title:r,variant:"danger",description:a}))}}),[t]),!1===t?s().createElement(o.Redirect,{to:g._j.sources.path}):null};var b=n(60409);const y=function(){var e=(0,d.Z)(),t=(0,u.L)(),n=(0,p.I0)();return(0,i.useEffect)((function(){t.paused_at&&n((0,f.Hz)({title:e.formatMessage({id:"sources.sourcePausedRedirect",defaultMessage:"Source is paused"}),variant:"danger",description:e.formatMessage({id:"sources.sourcePausedRedirectDescription",defaultMessage:"You cannot perform this action on a paused source."})}))}),[t.paused_at]),t.paused_at?s().createElement(o.Redirect,{to:(0,g.yS)(g._j.sourcesDetail.path,t.id)}):null};var O=["route","componentProps","Component"],E=function(e){var t=e.route,n=e.children;return t.redirectNoId&&(0,u.L)()||!t.redirectNoId?s().createElement(s().Fragment,null,t.noPaused&&s().createElement(y,null),t.writeAccess&&s().createElement(v,null),n):s().createElement(b.Z,null)};E.propTypes={route:l().shape({path:l().string.isRequired,redirectNoId:l().bool,writeAccess:l().bool,noPaused:l().bool}).isRequired,children:l().node.isRequired};var _=function(e){var t=e.route,n=e.componentProps,i=e.Component,c=(0,a.Z)(e,O);return s().createElement(o.Route,(0,r.Z)({},c,{path:t.path}),s().createElement(E,{route:t},s().createElement(i,n)))};_.propTypes={route:l().shape({path:l().string.isRequired,redirectNoId:l().bool,writeAccess:l().bool,noPaused:l().bool}).isRequired,componentProps:l().any,Component:l().oneOfType([l().func,l().object]).isRequired};const w=_},60409:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(29439),a=n(92950),i=n.n(a),s=n(28216),o=n(86235),c=n(86896),l=n(98495),u=n(79829),p=n(59824),d=n(60076),f=n(60566);const m=function(){var e=(0,o.useParams)().id,t=(0,c.Z)(),n=(0,f.L)(),m=(0,p.W)(),g=(0,s.v9)((function(e){return e.sources}),s.wU),h=g.appTypesLoaded,v=g.sourceTypesLoaded,b=(0,s.I0)(),y=(0,a.useState)(!1),O=(0,r.Z)(y,2),E=O[0],_=O[1];return(0,a.useEffect)((function(){m&&h&&v&&(0,u.oI)(e).then((function(e){var t=(0,r.Z)(e.sources,1)[0];return b((0,l._B)(t)),t})).then((function(n){n||b((0,l.Hz)({title:t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),variant:"danger",description:t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e})})),_(!0)}))}),[m,h,v]),E&&!n?i().createElement(o.Redirect,{to:d._j.sources.path}):null}},58185:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(28216),a=function(){var e=(0,r.v9)((function(e){var t=e.user;return null==t?void 0:t.writePermissions}));if("boolean"==typeof e)return!!e}},59824:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});var r=n(28216),a=function(){return(0,r.v9)((function(e){return e.sources.loaded}))<=0}},60566:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(28216),a=n(86235),i=function(){var e=(0,a.useParams)().id;return(0,r.v9)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},1835:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>dt});var r=n(92950),a=n.n(r),i=n(15040),s=n(86896),o=n(28216),c=n(45697),l=n.n(c),u=n(60566),p=n(17570),d=n(15861),f=n(29439),m=n(87757),g=n.n(m),h=n(40400);const v=(0,h.IU)({name:"RedoIcon",height:512,width:512,svgPath:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z",yOffset:0,xOffset:0});var b=n(91447),y=n(98495);const O=function(){var e=(0,u.L)(),t=(0,s.Z)(),n=(0,o.I0)(),c=(0,r.useState)(!1),l=(0,f.Z)(c,2),p=l[0],m=l[1];return a().createElement(i.Button,{variant:"plain","aria-label":t.formatMessage({id:"sources.checkavailability",defaultMessage:"Check source availability"}),onClick:(0,d.Z)(g().mark((function r(){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return m(!0),r.next=3,(0,b.Z)(e.id);case 3:m(!1),n((0,y.Hz)({title:t.formatMessage({id:"sources.checkavailability.notificationTitle",defaultMessage:"Request to check source status was sent"}),variant:"info",description:t.formatMessage({id:"sources.checkavailability.notificationDescription",defaultMessage:"Check this page later for updates"})}));case 5:case"end":return r.stop()}}),r)}))),isDisabled:p},!p&&a().createElement(v,null),p&&a().createElement(i.Spinner,{size:"md"}))};var E=function(e){var t=e.term,n=e.description;return a().createElement(i.DescriptionListGroup,null,a().createElement(i.DescriptionListTerm,null,t),a().createElement(i.DescriptionListDescription,null,n))};E.propTypes={term:l().node,description:l().node};const _=function(){var e,t=(0,s.Z)(),n=(0,u.L)(),r=(0,o.v9)((function(e){return e.sources.sourceTypes}),o.wU),c=r.find((function(e){return e.id===n.source_type_id}));if("amazon"===c.name){var l,d,f,m=null===(l=n.authentications)||void 0===l?void 0:l.find((function(e){return e.authtype.includes("arn")}));null!=m&&m.username&&(e=null===(d=m.username.match(/:\d+/))||void 0===d||null===(f=d[0])||void 0===f?void 0:f.replace(/:/g,""))}return a().createElement(i.Card,{className:"pf-m-selectable pf-m-selected src-c-card-summary pf-u-m-lg pf-u-mr-sm-on-md"},a().createElement(i.CardTitle,null,t.formatMessage({id:"detail.summary.title",defaultMessage:"Source summary"})),a().createElement(i.CardBody,null,a().createElement(i.DescriptionList,{columnModifier:{default:"2Col"}},a().createElement(E,{term:t.formatMessage({id:"detail.summary.type",defaultMessage:"Source type"}),description:(0,p.P5)(n.source_type_id,void 0,{sourceTypes:r})}),a().createElement(E,{term:t.formatMessage({id:"detail.summary.lastChecked",defaultMessage:"Last availability check"}),description:a().createElement(a().Fragment,null,n.last_checked_at||n.last_available_at?(0,p.vh)(n.last_checked_at||n.last_available_at):t.formatMessage({id:"detail.summary.notChecked",defaultMessage:"Not checked yet"}),a().createElement(O,null))}),a().createElement(E,{term:t.formatMessage({id:"detail.summary.dateAdded",defaultMessage:"Date added"}),description:(0,p.vh)(n.created_at)}),a().createElement(E,{term:t.formatMessage({id:"detail.summary.lastModified",defaultMessage:"Last modified"}),description:(0,p.vh)(n.updated_at)}),n.app_creation_workflow&&a().createElement(E,{term:t.formatMessage({id:"detail.summary.configurationMode",defaultMessage:"Configuration mode"}),description:(0,p.Z3)(n.app_creation_workflow,n,{intl:t,sourceType:c})}),e&&a().createElement(E,{term:t.formatMessage({id:"detail.summary.awsAccountNumber",defaultMessage:"AWS account number"}),description:e}))))};var w=n(4942),M=n(86235),x=n(17546),j=n(27957),T=n(60076),Z=n(58185),P=n(45587),k=n(79829),L=n(79477),C=n(64673),S=n(87462),D=n(16946);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.app,n=e.removeApp,o=e.addApp,c=(0,r.useState)(!1),l=(0,f.Z)(c,2),p=l[0],d=l[1],m=(0,s.Z)(),g=(0,u.L)(),h=(0,M.useHistory)().push,v=(0,Z.E)(),b=function(e){return function(){d(!1),e()}},y=(0,D.Z)(m),O=m.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),E=A(A({},y),{},{tooltip:O}),_=t.paused_at?a().createElement(i.DropdownItem,(0,S.Z)({},g.paused_at&&E,!v&&y,{key:"resume",description:m.formatMessage({id:"app.kebab.resume.title",defaultMessage:"Resume data collection for this application."}),onClick:b(o)}),m.formatMessage({id:"app.kebab.resume.button",defaultMessage:"Resume"})):a().createElement(i.DropdownItem,(0,S.Z)({},g.paused_at&&E,!v&&y,{key:"pause",description:m.formatMessage({id:"app.kebab.pause.title",defaultMessage:"Temporarily stop this application from collecting data."}),onClick:b(n)}),m.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Pause"})),w=a().createElement(i.DropdownItem,(0,S.Z)({},g.paused_at&&E,!v&&y,{key:"remove",description:m.formatMessage({id:"app.kebab.remove.title",defaultMessage:"Permanently stop data collection for this application."}),onClick:b((function(){return h((0,T.yS)(T._j.sourcesDetailRemoveApp.path,g.id).replace(":app_id",t.id))}))}),m.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Remove"}));return a().createElement(i.Dropdown,{isPlain:!0,isOpen:p,position:"right",dropdownItems:[_,w],className:"src-c-dropdown__application_kebab",toggle:a().createElement(i.KebabToggle,{onToggle:function(){return d((function(e){return!e}))}})})};N.propTypes={app:l().shape({id:l().string,paused_at:l().string}).isRequired,removeApp:l().func,addApp:l().func};const I=N;var z=n(96845),F=n(84569);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={selectedApps:{}},X=function(e,t){var n=t.type,r=t.id;switch(n){case"addApp":return H(H({},e),{},{selectedApps:H(H({},e.selectedApps),{},(0,w.Z)({},r,!0))});case"removeApp":return H(H({},e),{},{selectedApps:H(H({},e.selectedApps),{},(0,w.Z)({},r,!1))});case"clean":return H(H({},e),{},{selectedApps:H(H({},e.selectedApps),{},(0,w.Z)({},r,void 0))})}},q=function(e,t,n,r){var i,s=null===(i=r.find((function(t){return t.id===e})))||void 0===i?void 0:i.display_name;t((0,y.Hz)({title:n.formatMessage({id:"detail.applications.resumed.alert.title",defaultMessage:"{appName} connection resumed"},{appName:s}),variant:"default",customIcon:a().createElement(j.ZP,null)}))},U=function(e,t,n,r){var i,s=null===(i=r.find((function(t){return t.id===e})))||void 0===i?void 0:i.display_name;t((0,y.Hz)({title:n.formatMessage({id:"detail.applications.paused.alert.title",defaultMessage:"{appName} connection paused"},{appName:s}),description:n.formatMessage({id:"detail.applications.paused.alert.description",defaultMessage:"Your application will not reflect the most recent data until {appName} connection is resumed"},{appName:s}),variant:"default",customIcon:a().createElement(x.ZP,null)}))},V=function(e,t,n,r){var a={create:t.formatMessage({id:"detail.applications.add.error",defaultMessage:"Application create failed"}),pause:t.formatMessage({id:"detail.applications.pause.error",defaultMessage:"Application pause failed"}),resume:t.formatMessage({id:"detail.applications.resume.error",defaultMessage:"Application resume failed"})}[n];e((0,y.Hz)({title:a,description:(0,F.Z)(t,(0,z.Z)(r)),variant:"danger"}))};const W=function(){var e=(0,s.Z)(),t=(0,u.L)(),n=(0,M.useHistory)().push,c=(0,o.v9)((function(e){return e.sources.sourceTypes}),o.wU),l=(0,o.v9)((function(e){return e.sources.appTypes}),o.wU),m=(0,Z.E)(),h=(0,o.I0)(),v=(0,r.useReducer)(X,G),b=(0,f.Z)(v,2),O=b[0].selectedApps,E=b[1],_=c.find((function(e){return e.id===t.source_type_id})),x=null==_?void 0:_.name,j=l.filter((function(e){return e.supported_source_types.includes(x)})).filter(C.Z),S=function(){var r=(0,d.Z)(g().mark((function r(a,i){return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=4;break}n((0,T.yS)(T._j.sourcesDetailAddApp.path,t.id).replace(":app_type_id",a)),r.next=18;break;case 4:if("boolean"==typeof O[a]){r.next=18;break}return E({type:"addApp",id:a}),r.prev=6,r.next=9,(0,k.Rj)().unpauseApplication(i);case 9:return q(a,h,e,l),r.next=12,h((0,y.il)());case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(6),V(h,e,"resume",r.t0);case 17:E({type:"clean",id:a});case 18:case"end":return r.stop()}}),r,null,[[6,14]])})));return function(e,t){return r.apply(this,arguments)}}(),R=function(){var t=(0,d.Z)(g().mark((function t(n,r){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"==typeof O[r]){t.next=14;break}return E({type:"removeApp",id:r}),t.prev=2,t.next=5,(0,k.Rj)().pauseApplication(n);case 5:return U(r,h,e,l),t.next=8,h((0,y.il)());case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),V(h,e,"pause",t.t0);case 13:E({type:"clean",id:r});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,P.Z)(t)&&(S=function(){var n=(0,d.Z)(g().mark((function n(r,a){return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("boolean"==typeof O[r]){n.next=27;break}if(E({type:"addApp",id:r}),!a){n.next=16;break}return n.prev=3,n.next=6,(0,k.Rj)().unpauseApplication(a);case 6:return q(r,h,e,l),n.next=9,h((0,y.il)());case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),V(h,e,"resume",n.t0);case 14:n.next=26;break;case 16:return n.prev=16,n.next=19,(0,k.Cu)({source_id:t.id,application_type_id:r});case 19:return n.next=21,h((0,y.il)());case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(16),V(h,e,"create",n.t1);case 26:E({type:"clean",id:r});case 27:case"end":return n.stop()}}),n,null,[[3,11],[16,23]])})));return function(e,t){return n.apply(this,arguments)}}()),a().createElement(i.Card,{className:"src-c-card-applications pf-u-p-lg pf-u-pl-sm-on-md"},a().createElement(i.CardTitle,null,e.formatMessage({id:"detail.applications.title",defaultMessage:"Applications"})),a().createElement(i.CardBody,null,!m&&a().createElement("div",{className:"pf-u-mb-md",id:"no-permissions-applications"},(0,D.$)(e)),a().createElement("div",{className:"pf-c-form"},j.map((function(n){var r=t.applications.find((function(e){return e.application_type_id===n.id})),s=function(e,t){var n;return(n={},(0,w.Z)(n,L.f.COST_MANAGAMENT,t.formatMessage({id:"cost.app.description",defaultMessage:"Analyze, forecast, and optimize your Red Hat OpenShift cluster costs in hybrid cloud environments."})),(0,w.Z)(n,L.f.CLOUD_METER,t.formatMessage({id:"cost.app.description",defaultMessage:"Includes access to Red Hat gold images, high precision subscription watch data, and autoregistration."})),n)[e]}(n.name,e),o=Boolean(r),c=Boolean(null==r?void 0:r.paused_at),l=!c&&o,u="boolean"==typeof O[n.id]?O[n.id]:l;return a().createElement(i.FormGroup,{key:n.id},a().createElement("div",{className:"src-c-application_flex"},a().createElement("div",null,a().createElement(i.Switch,{id:"app-switch-".concat(n.id),label:n.display_name,isChecked:u,isDisabled:(null==r?void 0:r.isDeleting)||!m||Boolean(t.paused_at),onChange:function(e){return e?S(n.id,null==r?void 0:r.id):R(r.id,n.id)}}),Boolean(r)&&a().createElement(p.c,{className:"pf-u-ml-sm src-m-clickable",app:r,showStatusText:!0}),s&&a().createElement("div",{className:"pf-c-switch pf-u-mt-sm src-c-application_fake_switch"},a().createElement("span",{className:"pf-c-switch__toggle src-m-hide-me"}),a().createElement("div",{className:"pf-c-switch__label src-c-switch__description"},s))),(c||o)&&a().createElement(I,{app:r,removeApp:function(){return R(r.id,n.id)},addApp:function(){return S(n.id,r.id)}})))})))))};var $=n(7081);const K=function(){var e=(0,s.Z)();return a().createElement(i.EmptyState,null,a().createElement(i.EmptyStateIcon,{icon:$.ZP}),a().createElement(i.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.noapplications.title",defaultMessage:"No connected applications"})),a().createElement(i.EmptyStateBody,{className:"src-c-empty-state__body"},e.formatMessage({id:"detail.noapplications.description",defaultMessage:"You have not connected any applications to this source. Use the switches above to add applications."})))},Y=(0,h.IU)({name:"PrivateIcon",height:1024,width:1024,svgPath:"M512,0 C229.2,0 0,229.2 0,512 C0,794.8 229.2,1024 512,1024 C794.8,1024 1024,794.8 1024,512 C1024,229.2 794.8,0 512,0 L512,0 Z M832,723.3 C832,751.6 821.4,777.5 801.3,798.2 L800.9,798.6 L800.5,799 C773.2,826.3 744.4,832 725,832 L298.8,832 C279.6,832 251.1,826.3 223.6,799.3 L223.2,798.9 C202.7,778.4 191.9,752.3 191.9,723.2 L191.9,488.7 C191.9,460.3 202.5,434.4 222.5,413.8 L222.9,413.4 L223.3,413 C241.3,395 261.5,388.2 277.1,385.6 L277.1,363.2 C277.1,299.2 300.3,243.4 346.2,197.4 C368.8,174.7 394.4,157.2 422.1,145.6 C450,133.9 480.2,128 512.1,128 C543.9,128 574.2,133.9 602.1,145.6 C629.9,157.2 655.5,174.7 678.1,197.4 C723.7,243.2 746.9,299 746.9,363.2 L746.9,385.7 C767.9,389.3 785.9,398.3 800.6,412.7 C821.2,433 832.1,459.3 832.1,488.7 L832,723.3 Z M755.6,458.4 C747.2,450.1 737.2,448 725.3,448 L682.8,448 L682.8,363.2 C682.8,316.3 666.3,276.3 632.7,242.5 C599.1,208.8 558.8,192 512,192 C465.2,192 425.1,208.8 391.5,242.5 C357.9,276.2 341.1,316.1 341.1,363.2 L341.1,448 L298.8,448 C286.9,448 276.8,450 268.5,458.3 C260.2,466.8 256,476.8 256,488.7 L256,723.4 C256,735.4 260.3,745.5 268.5,753.8 C276.9,762.1 286.9,768.1 298.8,768.1 L725.1,768.1 C737,768.1 747.1,762.1 755.4,753.8 C763.7,745.3 768.1,735.3 768.1,723.4 L768.1,488.8 C768,476.8 764,466.7 755.6,458.4 L755.6,458.4 Z M597.3,448 L426.7,448 L426.7,364.9 C426.7,341.4 435.1,321.2 451.6,304.6 C468.3,287.9 488.4,279.5 512,279.5 C535.6,279.5 555.9,287.8 572.3,304.4 C589,321.1 597.4,341.2 597.4,364.8 L597.4,448 L597.3,448 Z",yOffset:0,xOffset:0}),J=function(){var e=(0,s.Z)();return a().createElement(i.EmptyState,null,a().createElement(i.EmptyStateIcon,{icon:Y}),a().createElement(i.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.nopermissions.title",defaultMessage:"Missing permissions"})),a().createElement(i.EmptyStateBody,{className:"src-c-empty-state__body"},(0,D.$)(e)))};var Q=n(67850),ee=n(90280);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e,t,n){return Promise.all([(0,k.Rj)().showSource(e.id),(0,k.Rj)().listSourceEndpoints(e.id),(0,k.ye)(e.id,t,n)]).then(function(){var t=(0,d.Z)(g().mark((function t(n){var r,a,i,s,o,c,l,u,p,d,m,h;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(0,f.Z)(n,3),i=a[0],s=a[1],o=a[2],c=s&&s.data&&s.data[0],l=(null==o||null===(r=o.sources[0])||void 0===r?void 0:r.applications)||[],u={source:ne(ne({},e),i),applications:l},p=[],m=[],h=[],l.forEach((function(e){var t;null==e||null===(t=e.authentications)||void 0===t||t.forEach((function(t){null!=t&&t.id&&(p.push((0,k.Rj)().showAuthentication(t.id)),m.push(e.id),h.push(t.id))}))})),!(p.length>0)){t.next=13;break}return t.next=11,Promise.all(p);case 11:d=t.sent,m.forEach((function(e,t){u.applications.find((function(t){return t.id===e})).authentications.push(d[t])}));case 13:if(c){t.next=15;break}return t.abrupt("return",u);case 15:return t.abrupt("return",(0,k.Rj)().listEndpointAuthentications(c.id).then((function(e){return ne(ne({},u),{},{endpoints:s.data,authentications:e.data.filter((function(e){var t=e.id;return!h.includes(t)}))})})));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},ae=n(93433),ie=n(45987),se=n(27361),oe=n.n(se),ce=n(36968),le=n.n(ce),ue=n(36488),pe=function(e,t){return{title:e.formatMessage({id:"wizard.pausedApplication",defaultMessage:"{application} is paused"},{application:t}),description:e.formatMessage({id:"wizard.pausedApplicationDescription",defaultMessage:"To resume data collection for this application, switch {application} on in the <b>Applications</b> section of this page."},{application:t,b:ue.S}),variant:"default",customIcon:a().createElement(x.ZP,null)}},de=["endpoints","authentications","applications"];function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge="check-endpoint",he=function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){le()(n,t,oe()(e,t))})),n},ve=function(e,t){var n,r,a=e.endpoints,i=e.authentications,s=e.applications,o=(0,ie.Z)(e,de),c={},l=[].concat((0,ae.Z)(i||[]),(0,ae.Z)((null==s?void 0:s.reduce((function(e,t){return[].concat((0,ae.Z)(e),(0,ae.Z)(t.authentications))}),[]))||[]));l.length>0&&l.forEach((function(e){c["a".concat(e.id)]=e})),a&&a.length>0&&(n=a[0]),n&&(r=n.scheme||n.host||n.path||n.port?(0,p.Fd)(n):void 0);var u={};return(null==s?void 0:s.length)>0&&s.forEach((function(e){e.extra&&Object.keys(e.extra).length>0&&(u["a".concat(e.id)]={extra:e.extra})})),me(me({source_type:t,endpoint:n,authentications:c,url:r},Object.keys(u).length&&{applications:u}),o)},be=function(e,t){return!e.includes(t)&&e.push(t)},ye=function(e,t){var n=[];return Object.keys(t).forEach((function(r){if(t[r]){var a,i,s=null===(a=r.match(/.a\d+/))||void 0===a||null===(i=a[0])||void 0===i?void 0:i.replace(".a","");r.startsWith("applications")&&be(n,s),r.startsWith("authentications")&&e.applications.forEach((function(e){return e.authentications.forEach((function(t){var r=t.id,a=t.resource_type;return a&&r===s&&be(n,"Application"===a?e.id:"".concat(ge,"-").concat(e.id))}))})),(r.startsWith("url")||r.startsWith("endpoint"))&&e.applications.forEach((function(e){return e.authentications.forEach((function(t){return"Endpoint"===t.resource_type&&be(n,"".concat(ge,"-").concat(e.id))}))}))}})),n.filter(Boolean)},Oe=n(34307),Ee=n(72810);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(){var e=(0,d.Z)(g().mark((function e(t,n,r,a,i,s){var o,c,l,u,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"submit",values:t,editing:n}),o=new Date,e.prev=2,e.next=5,(0,Oe.yH)(a,he(t,n),t);case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,r((0,y.il)());case 11:return s({type:"submitFailed"}),e.abrupt("return");case 13:if((0,b.n)(a.source.id),c={},l=ye(a,n),u=[],l.forEach((function(e){e.includes(ge)?u.push((0,Ee.h)(a.endpoints[0].id,void 0,void 0,"getEndpoint",o).then((function(t){return we(we({},t),{},{id:e.replace("".concat(ge,"-"),"")})}))):u.push((0,Ee.h)(e,void 0,void 0,void 0,o))})),!(u.length>0)){e.next=32;break}return e.prev=19,e.next=22,Promise.all(u);case 22:d=e.sent,e.next=31;break;case 25:return e.prev=25,e.t1=e.catch(19),e.next=29,r((0,y.il)());case 29:return s({type:"submitFailed"}),e.abrupt("return");case 31:d.forEach((function(e){var t=e.availability_status,n=e.availability_status_error,r=e.id;t===p.Rl&&(c[r]={title:i.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Application credentials were edited successfully."}),description:n,variant:"success"}),t===p.nZ&&(c[r]={title:i.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit application credentials failed."}),description:n,variant:"danger"}),t&&t!==p.Bj||(c[r]={title:i.formatMessage({id:"wizard.timeoutEditToastTitle",defaultMessage:"Edit in progress"}),description:i.formatMessage({id:"wizard.timeoutEditToastDescription",defaultMessage:"We are still working to confirm your updated credentials. Changes will be reflected in this table when complete."}),variant:"warning"})}));case 32:return e.next=34,r((0,y.il)());case 34:s({type:"submitFinished",messages:c});case 35:case"end":return e.stop()}}),e,null,[[2,7],[19,25]])})));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}(),xe=n(59824),je=function(e,t,n,r){return{description:r.formatMessage({id:"sources.editFormDescripiton",defaultMessage:"Use the form fields to edit application credentials."}),fields:(0,L.J)(e.applications,t,n)}};function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,submitMessages:void 0};const ke=function(e,t){var n=t.type,r=t.source,a=t.sourceType,i=t.appTypes,s=t.intl,o=t.values,c=t.editing,l=t.messages;switch(n){case"createForm":return Ze(Ze({},e),{},{sourceType:a,initialValues:ve(e.source,a.product_name),schema:je(e.source,a,i,s),loading:!1});case"setSource":return Ze(Ze({},e),{},{messages:Ze(Ze({},l),e.submitMessages),source:r,initialLoad:!1,submitMessages:void 0});case"submit":return Ze(Ze({},e),{},{isSubmitting:!0,submitError:!1,values:o,editing:c});case"submitFinished":return Ze(Ze({},e),{},{isSubmitting:!1,source:r,submitMessages:l});case"submitFailed":return Ze(Ze({},e),{},{isSubmitting:!1,submitError:!0,messages:void 0});case"sourceChanged":return Ze(Ze({},e),{},{initialLoad:!0,loading:!0});default:return e}};var Le=n(52893);const Ce=function(){var e=(0,s.Z)();return a().createElement(Le.Z,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})})};var Se=n(79433),De=function(e){var t=e.onRetry,n=(0,s.Z)();return a().createElement(Se.Z,{onClose:t,customText:n.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:a().createElement(i.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},n.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:n.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})})};De.propTypes={onRetry:l().func.isRequired};const Re=De;function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ie=function(){var e,t=(0,r.useReducer)(ke,Pe),n=(0,f.Z)(t,2),c=n[0],l=n[1],d=(0,u.L)(),m=(0,xe.W)(),g=c.loading,h=c.editing,v=c.source,b=c.initialValues,y=c.schema,O=c.isSubmitting,E=c.initialLoad,_=c.message,w=c.messages,M=c.submitError,x=c.values,j=(0,s.Z)(),T=(0,o.v9)((function(e){return e.sources}),o.wU),Z=T.sourceTypes,P=T.appTypes,k=T.sourceTypesLoaded,L=T.appTypesLoaded,C=(0,o.I0)();(0,r.useEffect)((function(){E||l({type:"sourceChanged"})}),[d,null==d||null===(e=d.applications)||void 0===e?void 0:e.length]),(0,r.useEffect)((function(){d&&E&&L&&re(d,P,Z).then((function(e){var t=function(e,t,n){var r,a,i={};return e.applications.forEach((function(e){var r=e.id,a=e.application_type_id,s=e.availability_status_error,o=e.availability_status;if(e.paused_at){var c,l=(null===(c=n.find((function(e){return e.id===a})))||void 0===c?void 0:c.display_name)||r;i[r]=pe(t,l)}else o===p.nZ&&(i[r]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:s,variant:"danger"})})),null!==(r=e.endpoints)&&void 0!==r&&null!==(a=r[0])&&void 0!==a&&a.availability_status_error&&e.applications.map((function(e){return e.authentications.find((function(t){var n=t.resource_type;return!e.paused_at&&"Endpoint"===n}))?e.id:void 0})).filter(Boolean).forEach((function(n){var r,a;i[n]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:null===(r=e.endpoints)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.availability_status_error,variant:"danger"}})),i}(e,j,P);l({type:"setSource",source:e,messages:t})}))}),[d,m,L,E]),(0,r.useEffect)((function(){if(v&&L&&k){var e=Z.find((function(e){return e.id===v.source.source_type_id}));l({type:"createForm",sourceType:e,source:v,appTypes:P,intl:j})}}),[L,v,k]);var D=!L||!k||g;if(M)return a().createElement(Re,{onRetry:function(){return Me(x,h,C,v,j,l)}});if(O)return a().createElement(Ce,null);if(D)return a().createElement(i.Bullseye,{className:"pf-u-m-2xl"},a().createElement(i.Spinner,null));var R=v.source.paused_at||v.applications.every((function(e){return e.paused_at}));return a().createElement(ee.Z,{schema:y,onSubmit:function(e,t){return Me(e,t.getState().dirtyFields,C,v,j,l)},FormTemplate:function(e){return a().createElement(Q.ZP,(0,S.Z)({canReset:!0,showFormControls:!R,submitLabel:"Save changes",disableSubmit:["pristine","invalid"]},e))},clearedValue:null,initialValues:Ne(Ne(Ne({},b),!d.paused_at&&{message:_}),!d.paused_at&&{messages:w})})},ze=function(){var e=(0,s.Z)(),t=(0,u.L)(),n=(0,Z.E)();return a().createElement(i.Card,{className:"card pf-u-m-lg pf-u-mt-0"},a().createElement(i.CardTitle,null,e.formatMessage({id:"detail.resources.title",defaultMessage:"Manage connected applications"})),a().createElement(i.CardBody,null,!n&&a().createElement(J,null),n&&0===t.applications.length&&a().createElement(K,null),n&&t.applications.length>0&&a().createElement(Ie,null)))};var Fe=n(60409),Be=n(98583),He=n(80254),Ge=n(48716),Xe=["href"];const qe=function(){var e=(0,s.Z)(),t=(0,u.L)();return a().createElement(i.Breadcrumb,null,a().createElement(i.BreadcrumbItem,{component:function(e){var t=e.href,n=(0,ie.Z)(e,Xe);return a().createElement(M.Link,(0,S.Z)({to:t},n))},to:T._j.sources.path},e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})),a().createElement(i.BreadcrumbItem,{isActive:!0},t.name))};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const We=function(){var e=(0,r.useState)(!1),t=(0,f.Z)(e,2),n=t[0],c=t[1],l=(0,s.Z)(),p=(0,M.useHistory)().push,d=(0,u.L)(),m=(0,Z.E)(),g=(0,o.I0)(),h=function(e){return function(){c(!1),e()}},v=l.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),b=(0,D.Z)(l),O=Ve(Ve({},b),{},{tooltip:v});return a().createElement(i.Dropdown,{toggle:a().createElement(i.KebabToggle,{onToggle:function(){return c(!n)},id:"toggle-id-6"}),isOpen:n,isPlain:!0,position:"right",dropdownItems:[d.paused_at?a().createElement(i.DropdownItem,(0,S.Z)({},!m&&b,{key:"unpause",onClick:h((function(){return g((0,y.AX)(d.id,d.name,l))})),description:l.formatMessage({id:"detail.resume.description",defaultMessage:"Unpause data collection for this source"})}),l.formatMessage({id:"detail.resume.button",defaultMessage:"Resume"})):a().createElement(i.DropdownItem,(0,S.Z)({},!m&&b,{key:"pause",onClick:h((function(){return g((0,y.xz)(d.id,d.name,l))})),description:l.formatMessage({id:"detail.pause.description",defaultMessage:"Temporarily disable data collection"})}),l.formatMessage({id:"detail.pause.button",defaultMessage:"Pause"})),a().createElement(i.DropdownItem,(0,S.Z)({},!m&&b,{key:"remove",onClick:function(){return p((0,T.yS)(T._j.sourcesDetailRemove.path,d.id))},description:l.formatMessage({id:"detail.remove.description",defaultMessage:"Permanently delete this source and all collected data"})}),l.formatMessage({id:"detail.remove.button",defaultMessage:"Remove"})),a().createElement(i.DropdownItem,(0,S.Z)({},!m&&b,d.paused_at&&O,{key:"rename",onClick:function(){return p((0,T.yS)(T._j.sourcesDetailRename.path,d.id))}}),l.formatMessage({id:"detail.rename.button",defaultMessage:"Rename"}))]})},$e=function(){var e=(0,s.Z)(),t=(0,u.L)(),n=(0,o.v9)((function(e){return e.sources.appTypes}),o.wU),r=(0,o.v9)((function(e){return e.sources.sourceTypes}),o.wU);return a().createElement(Ge.Z,null,a().createElement(qe,null),a().createElement(i.Flex,{className:"pf-u-mb-sm"},a().createElement(i.FlexItem,null,a().createElement(i.Title,{headingLevel:"h1",size:"2xl"},t.name)),a().createElement(i.FlexItem,null,(0,p.BN)(void 0,t,{appTypes:n,sourceTypes:r})),a().createElement(i.FlexItem,{align:{default:"alignRight"}},a().createElement(We,null))),a().createElement(i.TextContent,null,a().createElement(i.Text,null,e.formatMessage({id:"detail.description",defaultMessage:"View details and manage connections for this source."}))))};var Ke=n(98975),Ye=n(5037),Je=n(84731),Qe=["description"];function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt=function(e){return[e.formatMessage({id:"resourceTable.resourceType",defaultMessage:"Resource type"}),e.formatMessage({id:"resourceTable.resourceValue",defaultMessage:"Value"})]},rt=function(e,t,n){return e.applications.reduce((function(r,i){var s,o,c,l=t.find((function(e){return e.id===i.application_type_id})),u=(o=(0,Ye.Hx)(null===(s=i.authentications)||void 0===s?void 0:s.filter((function(e){return Object.keys(e).length>1})),n,null==l?void 0:l.name,i.id),c=ve(e,n.product_name),o.flatMap((function(e){return e})).map((function(e){return!e.hideField&&[a().createElement(a().Fragment,{key:"label"},e.label),oe()(c,e.name)]})).filter(Boolean));return tt(tt({},r),{},(0,w.Z)({},i.id,u))}),{})},at=function(e,t){var n=t.type,r=t.intl,a=t.source,i=t.activeTab,s=t.appTypes,o=t.sourceType;switch(n){case"loaded":return tt(tt({},e),{},{columns:nt(r),applicationsRows:rt(a,s,o),loading:!1,activeTab:a.applications[0].id});case"switchTab":return tt(tt({},e),{},{activeTab:i});case"setLoading":return tt(tt({},e),{},{loading:!0})}};const it=function(){var e,t=(0,s.Z)(),n=(0,u.L)(),c=(0,xe.W)(),l=(0,o.v9)((function(e){return e.sources}),o.wU),p=l.sourceTypes,d=l.appTypes,m=l.sourceTypesLoaded,g=l.appTypesLoaded,h=(0,r.useReducer)(at,function(e){var t;return{loading:Boolean(null===(t=e.applications)||void 0===t?void 0:t.length),columns:[],applicationsRows:{},activeTab:0}}(n)),v=(0,f.Z)(h,2),b=v[0],y=b.activeTab,O=b.loading,E=b.columns,_=b.applicationsRows,w=v[1];return(0,r.useEffect)((function(){var e;n&&c&&g&&m&&null!=n&&null!==(e=n.applications)&&void 0!==e&&e.length&&(w({type:"setLoading"}),re(n,d,p).then((function(e){var n=p.find((function(t){return t.id===e.source.source_type_id}));w({type:"loaded",source:e,intl:t,sourceType:n,appTypes:d})})))}),[null==n||null===(e=n.applications)||void 0===e?void 0:e.length,c,g,m]),a().createElement(i.Card,{className:"pf-u-m-lg pf-u-mt-0"},a().createElement(i.CardTitle,null,t.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"})),a().createElement(i.CardBody,null,O&&a().createElement(i.Bullseye,{className:"pf-u-m-2xl"},a().createElement(i.Spinner,null)),!O&&!n.applications.length&&a().createElement(K,null),!O&&n.applications.length>0&&a().createElement(a().Fragment,null,a().createElement(i.Text,{className:"pf-u-mb-md"},t.formatMessage({id:"resourceTable.description",defaultMessage:"View resources for your connected applications."})),a().createElement(i.Tabs,{isBox:!0,activeKey:y,onSelect:function(e,t){return w({type:"switchTab",activeTab:t})}},n.applications.map((function(e){var r,s,o=(null===(r=d.find((function(t){return t.id===e.application_type_id})))||void 0===r?void 0:r.display_name)||e.application_type_id,c=e.paused_at?pe(t,o):{},l=c.description,u=(0,ie.Z)(c,Qe);return a().createElement(i.Tab,{eventKey:e.id,key:e.id,title:a().createElement(i.TabTitleText,null,o)},e.paused_at&&!n.paused_at&&a().createElement(i.Alert,(0,S.Z)({isInline:!0,className:"pf-u-mt-lg"},u),l),null!==(s=_[e.id])&&void 0!==s&&s.length?a().createElement(Ke.Table,{"aria-label":t.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"}),variant:"compact",cells:E,rows:_[e.id],className:"pf-u-mt-md"},a().createElement(Ke.TableHeader,null),a().createElement(Ke.TableBody,null)):a().createElement(Je.Z,{applicationName:o}))}))))))},st=function(){var e=(0,s.Z)(),t=(0,Z.E)(),n=(0,o.I0)(),r=(0,u.L)();return a().createElement(i.GridItem,{md:12,className:"pf-u-m-lg pf-u-mb-0"},a().createElement(i.Alert,{customIcon:a().createElement(x.ZP,null),variant:"default",isInline:!0,title:e.formatMessage({id:"source.detail.pausedTitle",defaultMessage:"Source paused"}),actionLinks:t?a().createElement(i.AlertActionLink,{onClick:function(){return n((0,y.AX)(r.id,r.name,e))}},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})):a().createElement(i.Tooltip,{content:(0,D.$)(e)},a().createElement(i.AlertActionLink,{isDisabled:!0},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})))},e.formatMessage({id:"source.detail.pausedDescription",defaultMessage:"No data is being collected for this source. Turn the source back on to reestablish connection and data collection. Previous credentials will be restored and application connections will continue as seen on this page."})))};var ot=(0,r.lazy)((function(){return n.e(490).then(n.bind(n,55997))})),ct=(0,r.lazy)((function(){return Promise.all([n.e(90),n.e(972),n.e(180)]).then(n.bind(n,59622))})),lt=(0,r.lazy)((function(){return n.e(744).then(n.bind(n,76902))})),ut=(0,r.lazy)((function(){return Promise.all([n.e(671),n.e(291)]).then(n.bind(n,72498))})),pt=(0,r.lazy)((function(){return n.e(331).then(n.bind(n,524))}));const dt=function(){var e=(0,u.L)();if(!e)return a().createElement(a().Fragment,null,a().createElement(Be.X6,null),a().createElement(Fe.Z,null));var t=(0,P.Z)(e);return a().createElement("div",{className:"src-c-detail-page"},a().createElement(r.Suspense,{fallback:null},a().createElement(He.Z,{exact:!0,route:T._j.sourcesDetailRemove,Component:ot,componentProps:{backPath:(0,T.yS)(T._j.sourcesDetail.path,e.id)}}),a().createElement(He.Z,{exact:!0,route:T._j.sourcesDetailAddApp,Component:ct}),a().createElement(He.Z,{exact:!0,route:T._j.sourcesDetailRemoveApp,Component:lt}),a().createElement(He.Z,{exact:!0,route:T._j.sourcesDetailRename,Component:ut}),a().createElement(He.Z,{exact:!0,route:T._j.sourcesDetailEditCredentials,Component:pt})),a().createElement($e,null),e.paused_at&&a().createElement(st,null),a().createElement(i.Grid,null,a().createElement(i.GridItem,{md:"6"},a().createElement(_,null)),a().createElement(i.GridItem,{md:"6"},a().createElement(W,null)),a().createElement(i.GridItem,{md:"12"},t?a().createElement(it,null):a().createElement(ze,null))))}},16946:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,Z:()=>a});var r=function(e){return e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must be granted Sources Administrator permissions from your Organization Administrator."})};const a=function(e){return{tooltip:r(e),isDisabled:!0,className:"src-m-dropdown-item-disabled"}}},64673:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,Z:()=>i});var r=n(84866),a=function(e,t){return function(n){return n.supported_source_types.find((function(n){var a,i;return t===r.JL?((null===(a=e.find((function(e){var t=e.name;return n===t})))||void 0===a?void 0:a.vendor)||r.B0)!==r.B0:(null===(i=e.find((function(e){var t=e.name;return n===t})))||void 0===i?void 0:i.vendor)===r.B0}))}};const i=function(e){return e.name!==r.M$}},11452:()=>{},32857:()=>{},93818:()=>{},94498:()=>{},28992:()=>{},90479:()=>{},78752:()=>{},99624:()=>{},36974:()=>{},84506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(83878),a=n(59199),i=n(40181),s=n(25267);function o(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,i.Z)(e)||(0,s.Z)()}}}]);
//# sourceMappingURL=../sourcemaps/sourceDetail.aaf4a6f87168310c2b581469bc6d1197.js.map