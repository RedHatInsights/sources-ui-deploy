"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[818],{7081:(e,t,n)=>{n.d(t,{ZP:()=>o,lb:()=>a,wl:()=>i});var r=n(40400);const a={name:"PlusCircleIcon",height:512,width:512,svgPath:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z",yOffset:0,xOffset:0},i=(0,r.IU)(a),o=i},8705:(e,t,n)=>{n.d(t,{ZP:()=>o,cn:()=>a,lM:()=>i});var r=n(40400);const a={name:"PrivateIcon",height:1024,width:1024,svgPath:"M512,0 C229.2,0 0,229.2 0,512 C0,794.8 229.2,1024 512,1024 C794.8,1024 1024,794.8 1024,512 C1024,229.2 794.8,0 512,0 L512,0 Z M832,723.3 C832,751.6 821.4,777.5 801.3,798.2 L800.9,798.6 L800.5,799 C773.2,826.3 744.4,832 725,832 L298.8,832 C279.6,832 251.1,826.3 223.6,799.3 L223.2,798.9 C202.7,778.4 191.9,752.3 191.9,723.2 L191.9,488.7 C191.9,460.3 202.5,434.4 222.5,413.8 L222.9,413.4 L223.3,413 C241.3,395 261.5,388.2 277.1,385.6 L277.1,363.2 C277.1,299.2 300.3,243.4 346.2,197.4 C368.8,174.7 394.4,157.2 422.1,145.6 C450,133.9 480.2,128 512.1,128 C543.9,128 574.2,133.9 602.1,145.6 C629.9,157.2 655.5,174.7 678.1,197.4 C723.7,243.2 746.9,299 746.9,363.2 L746.9,385.7 C767.9,389.3 785.9,398.3 800.6,412.7 C821.2,433 832.1,459.3 832.1,488.7 L832,723.3 Z M755.6,458.4 C747.2,450.1 737.2,448 725.3,448 L682.8,448 L682.8,363.2 C682.8,316.3 666.3,276.3 632.7,242.5 C599.1,208.8 558.8,192 512,192 C465.2,192 425.1,208.8 391.5,242.5 C357.9,276.2 341.1,316.1 341.1,363.2 L341.1,448 L298.8,448 C286.9,448 276.8,450 268.5,458.3 C260.2,466.8 256,476.8 256,488.7 L256,723.4 C256,735.4 260.3,745.5 268.5,753.8 C276.9,762.1 286.9,768.1 298.8,768.1 L725.1,768.1 C737,768.1 747.1,762.1 755.4,753.8 C763.7,745.3 768.1,735.3 768.1,723.4 L768.1,488.8 C768,476.8 764,466.7 755.6,458.4 L755.6,458.4 Z M597.3,448 L426.7,448 L426.7,364.9 C426.7,341.4 435.1,321.2 451.6,304.6 C468.3,287.9 488.4,279.5 512,279.5 C535.6,279.5 555.9,287.8 572.3,304.4 C589,321.1 597.4,341.2 597.4,364.8 L597.4,448 L597.3,448 Z",yOffset:0,xOffset:0},i=(0,r.IU)(a),o=i},7766:(e,t,n)=>{n.d(t,{ZP:()=>o,lJ:()=>a,zG:()=>i});var r=n(40400);const a={name:"RedoIcon",height:512,width:512,svgPath:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z",yOffset:0,xOffset:0},i=(0,r.IU)(a),o=i},34307:(e,t,n)=>{n.d(t,{K_:()=>s,yH:()=>c});var r=n(4942),a=n(4833),i=n(48815);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s=function(e){return e.url||null===e.url?function(e){if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{var t=new URL(e),n=t.protocol.replace(/:$/,"");return{scheme:n,host:t.hostname,port:""===t.port?(0,a.bF)(n):t.port,path:t.pathname}}catch(e){return{}}}(e.url):e.endpoint?e.endpoint:e},c=function(e,t,n){var a=[];if(t.source&&a.push((0,i.Rj)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){var c=s(t),u=c.scheme,l=c.host,p=c.port,d=c.path,f=null===p?null:parseInt(p,10),m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({scheme:u,host:l,path:d,port:null===f?null:isNaN(f)?void 0:f},t.endpoint);a.push((0,i.Rj)().updateEndpoint(e.endpoints[0].id,m))}return t.authentications&&Object.keys(t.authentications).forEach((function(e){var n=e.replace("a","");a.push((0,i.Rj)().updateAuthentication(n,t.authentications[e]))})),t.applications&&Object.keys(t.applications).forEach((function(e){var t=e.replace("a","");a.push((0,i.Rj)().updateApplication(t,{extra:n.applications[e].extra}))})),Promise.all(a)}},91011:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(87462),a=n(92950),i=n.n(a),o=n(49881),s=n(16959),c=n(45697),u=n.n(c),l=function(e){return i().createElement(o.Navigate,(0,r.Z)({},e,{to:(0,s.n)(e.to,s.d)}))};l.displayName="AppNavigate",l.propTypes={to:u().oneOfType([u().string,u().object])};const p=l},80254:(e,t,n)=>{n.d(t,{Z:()=>P});var r=n(87462),a=n(45987),i=n(92950),o=n.n(i),s=n(49881),c=n(45697),u=n.n(c),l=n(60566),p=n(86706),d=n(86896),f=n(89372),m=n(58185),g=n(38181),v=n(16946),y=n(91011);const b=function(){var e=(0,d.Z)(),t=(0,m.E)(),n=(0,p.v9)((function(e){return e.user.isOrgAdmin})),r=(0,p.I0)();return(0,i.useEffect)((function(){if(!1===t){var a=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),i=(0,v.$)(e,n);r((0,f.Hz)({title:a,variant:"danger",description:i}))}}),[t]),!1===t?o().createElement(y.Z,{to:g._j.sources.path}):null};var h=n(60409);const O=function(){var e=(0,d.Z)(),t=(0,l.L)(),n=(0,p.I0)();return(0,i.useEffect)((function(){t.paused_at&&n((0,f.Hz)({title:e.formatMessage({id:"sources.sourcePausedRedirect",defaultMessage:"Source is paused"}),variant:"danger",description:e.formatMessage({id:"sources.sourcePausedRedirectDescription",defaultMessage:"You cannot perform this action on a paused source."})}))}),[t.paused_at]),t.paused_at?o().createElement(y.Z,{to:(0,g.yS)(g._j.sourcesDetail.path,t.id)}):null};var E=["route","componentProps","Component"],j=function(e){var t=e.route,n=e.children;return t.redirectNoId&&(0,l.L)()||!t.redirectNoId?o().createElement(o().Fragment,null,t.noPaused&&o().createElement(O,null),t.writeAccess&&o().createElement(b,null),n):o().createElement(h.Z,null)};j.propTypes={route:u().shape({path:u().string.isRequired,redirectNoId:u().bool,writeAccess:u().bool,noPaused:u().bool}).isRequired,children:u().node.isRequired};var w=function(e){var t=e.route,n=e.componentProps,i=e.Component,c=(0,a.Z)(e,E);return o().createElement(s.Routes,null,o().createElement(s.Route,(0,r.Z)({},c,{path:t.path,element:o().createElement(j,{route:t},o().createElement(i,n))})))};w.propTypes={route:u().shape({path:u().string.isRequired,redirectNoId:u().bool,writeAccess:u().bool,noPaused:u().bool}).isRequired,componentProps:u().any,Component:u().oneOfType([u().func,u().object]).isRequired};const P=w},60409:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(29439),a=n(92950),i=n.n(a),o=n(86706),s=n(49881),c=n(86896),u=n(89372),l=n(48815),p=n(59824),d=n(38181),f=n(60566),m=n(91011);const g=function(){var e=(0,s.useParams)().id,t=(0,c.Z)(),n=(0,f.L)(),g=(0,p.W)(),v=(0,o.v9)((function(e){return e.sources}),o.wU),y=v.appTypesLoaded,b=v.sourceTypesLoaded,h=(0,o.I0)(),O=(0,a.useState)(!1),E=(0,r.Z)(O,2),j=E[0],w=E[1];return(0,a.useEffect)((function(){g&&y&&b&&(0,l.oI)(e).then((function(e){var t=(0,r.Z)(e.sources,1)[0];return h((0,u._B)(t)),t})).then((function(n){n||h((0,u.Hz)({title:t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),variant:"danger",description:t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e})})),w(!0)}))}),[g,y,b]),j&&!n?i().createElement(m.Z,{to:d._j.sources.path}):null}},93736:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(49881),a=n(16959),i=function(){var e=(0,r.useNavigate)();return function(t,n){return e((0,a.n)(t,a.d),n)}}},58185:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(86706),a=function(){var e=(0,r.v9)((function(e){var t=e.user;return null==t?void 0:t.writePermissions}));if("boolean"==typeof e)return!!e}},59824:(e,t,n)=>{n.d(t,{W:()=>a});var r=n(86706),a=function(){return(0,r.v9)((function(e){return e.sources.loaded}))<=0}},60566:(e,t,n)=>{n.d(t,{L:()=>i});var r=n(86706),a=n(49881),i=function(){var e=(0,a.useParams)().id;return(0,r.v9)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},63799:(e,t,n)=>{n.r(t),n.d(t,{default:()=>St});var r=n(4942),a=n(92950),i=n.n(a),o=n(6848),s=n(86896),c=n(86706),u=n(45697),l=n.n(u),p=n(60566),d=n(4833),f=n(15861),m=n(29439),g=n(64687),v=n.n(g),y=n(7766),b=n(91447),h=n(89372),O=function(e){var t=e.setCheckPending,n=(0,p.L)(),r=(0,s.Z)(),u=(0,c.I0)(),l=(0,a.useState)(!1),d=(0,m.Z)(l,2),g=d[0],O=d[1];return i().createElement(o.Button,{variant:"plain","aria-label":r.formatMessage({id:"sources.checkavailability",defaultMessage:"Check source availability"}),onClick:(0,f.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t(),O(!0),e.next=4,(0,b.Z)(n.id);case 4:O(!1),u((0,h.Hz)({title:r.formatMessage({id:"sources.checkavailability.notificationTitle",defaultMessage:"Request to check source status was sent"}),variant:"info",description:r.formatMessage({id:"sources.checkavailability.notificationDescription",defaultMessage:"Check this page later for updates"})}));case 6:case"end":return e.stop()}}),e)}))),isDisabled:g},!g&&i().createElement(y.ZP,{"data-testid":"RedoIcon"}),g&&i().createElement(o.Spinner,{size:"md"}))};O.propTypes={setCheckPending:l().func};const E=O;var j=function(e){var t=e.term,n=e.description;return i().createElement(o.DescriptionListGroup,null,i().createElement(o.DescriptionListTerm,null,t),i().createElement(o.DescriptionListDescription,null,n))};j.propTypes={term:l().node,description:l().node};const w=function(){var e,t=(0,c.I0)(),n=(0,s.Z)(),r=(0,p.L)(),a=(0,c.v9)((function(e){return e.sources.sourceTypes}),c.wU),u=a.find((function(e){return e.id===r.source_type_id}));if("amazon"===(null==u?void 0:u.name)){var l,f,m,g=null===(l=r.authentications)||void 0===l?void 0:l.find((function(e){return e.authtype.includes("arn")}));null!=g&&g.username&&(e=null===(f=g.username.match(/:\d+/))||void 0===f||null===(m=f[0])||void 0===m?void 0:m.replace(/:/g,""))}return i().createElement(o.Card,{className:"pf-m-selectable pf-m-selected src-c-card-summary pf-u-m-lg pf-u-mr-sm-on-md"},i().createElement(o.CardTitle,null,n.formatMessage({id:"detail.summary.title",defaultMessage:"Source summary"})),i().createElement(o.CardBody,null,i().createElement(o.DescriptionList,{columnModifier:{default:"2Col"}},i().createElement(j,{term:n.formatMessage({id:"detail.summary.type",defaultMessage:"Source type"}),description:(0,d.P5)(r.source_type_id,void 0,{sourceTypes:a})}),i().createElement(j,{term:n.formatMessage({id:"detail.summary.lastChecked",defaultMessage:"Last availability check"}),description:i().createElement(i().Fragment,null,r.isCheckPending||!r.last_checked_at&&!r.last_available_at?n.formatMessage({id:"detail.summary.waitingForUpdate",defaultMessage:"Waiting for update"}):(0,d.vh)(r.last_checked_at||r.last_available_at),i().createElement(E,{setCheckPending:function(){return t((0,h.mE)(r.id))}}))}),i().createElement(j,{term:n.formatMessage({id:"detail.summary.dateAdded",defaultMessage:"Date added"}),description:(0,d.vh)(r.created_at)}),i().createElement(j,{term:n.formatMessage({id:"detail.summary.lastModified",defaultMessage:"Last modified"}),description:(0,d.vh)(r.updated_at)}),r.app_creation_workflow&&i().createElement(j,{term:n.formatMessage({id:"detail.summary.configurationMode",defaultMessage:"Configuration mode"}),description:(0,d.Z3)(r.app_creation_workflow,r,{intl:n,sourceType:u})}),e&&i().createElement(j,{term:n.formatMessage({id:"detail.summary.awsAccountNumber",defaultMessage:"AWS account number"}),description:e}))))};var P=n(17546),M=n(27957),Z=n(38181),_=n(58185),T=n(45587),k=n(48815),D=n(64673),S=n(87462),C=n(16946),A=n(28347);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.app,n=e.removeApp,r=e.addApp,u=(0,a.useState)(!1),l=(0,m.Z)(u,2),d=l[0],f=l[1],g=(0,s.Z)(),v=(0,p.L)(),y=(0,_.E)(),b=(0,c.v9)((function(e){return e.user.isOrgAdmin})),h=function(e){return function(){f(!1),e()}},O=(0,C.Z)(g,b),E=g.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),j=x(x({},O),{},{tooltip:E}),w=t.paused_at?i().createElement(o.DropdownItem,(0,S.Z)({},v.paused_at&&j,!y&&O,{key:"resume",description:g.formatMessage({id:"app.kebab.resume.title",defaultMessage:"Resume data collection for this application."}),onClick:h(r)}),g.formatMessage({id:"app.kebab.resume.button",defaultMessage:"Resume"})):i().createElement(o.DropdownItem,(0,S.Z)({},v.paused_at&&j,!y&&O,{key:"pause",description:g.formatMessage({id:"app.kebab.pause.title",defaultMessage:"Temporarily stop this application from collecting data."}),onClick:h(n)}),g.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Pause"})),P=i().createElement(o.DropdownItem,(0,S.Z)({},v.paused_at&&j,!y&&O,{key:"remove",description:g.formatMessage({id:"app.kebab.remove.title",defaultMessage:"Permanently stop data collection for this application."}),to:(0,Z.yS)(Z._j.sourcesDetailRemoveApp.path,v.id).replace(":app_id",t.id),component:A.Z}),g.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Remove"}));return i().createElement(o.Dropdown,{isPlain:!0,isOpen:d,position:"right",dropdownItems:[w,P],className:"src-c-dropdown__application_kebab",toggle:i().createElement(o.KebabToggle,{onToggle:function(){return f((function(e){return!e}))}})})};R.propTypes={app:l().shape({id:l().string,paused_at:l().string}).isRequired,removeApp:l().func,addApp:l().func};const I=R;var N=n(96845),B=n(84569),F=n(84866),z=n(93736);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={selectedApps:{}},V=function(e,t){var n=t.type,a=t.id;switch(n){case"addApp":return q(q({},e),{},{selectedApps:q(q({},e.selectedApps),{},(0,r.Z)({},a,!0))});case"removeApp":return q(q({},e),{},{selectedApps:q(q({},e.selectedApps),{},(0,r.Z)({},a,!1))});case"clean":return q(q({},e),{},{selectedApps:q(q({},e.selectedApps),{},(0,r.Z)({},a,void 0))})}},H=function(e,t,n,r){var a,o=null===(a=r.find((function(t){return t.id===e})))||void 0===a?void 0:a.display_name;t((0,h.Hz)({title:n.formatMessage({id:"detail.applications.resumed.alert.title",defaultMessage:"{appName} connection resumed"},{appName:o}),variant:"default",customIcon:i().createElement(M.ZP,null)}))},K=function(e,t,n,r){var a,o=null===(a=r.find((function(t){return t.id===e})))||void 0===a?void 0:a.display_name;t((0,h.Hz)({title:n.formatMessage({id:"detail.applications.paused.alert.title",defaultMessage:"{appName} connection paused"},{appName:o}),description:n.formatMessage({id:"detail.applications.paused.alert.description",defaultMessage:"Your application will not reflect the most recent data until {appName} connection is resumed"},{appName:o}),variant:"default",customIcon:i().createElement(P.ZP,null)}))},G=function(e,t,n,r){var a={create:t.formatMessage({id:"detail.applications.add.error",defaultMessage:"Application create failed"}),pause:t.formatMessage({id:"detail.applications.pause.error",defaultMessage:"Application pause failed"}),resume:t.formatMessage({id:"detail.applications.resume.error",defaultMessage:"Application resume failed"})}[n];e((0,h.Hz)({title:a,description:(0,B.Z)(t,(0,N.Z)(r)),variant:"danger"}))};const $=function(){var e=(0,s.Z)(),t=(0,p.L)(),n=(0,z.a)(),r=(0,c.v9)((function(e){return e.sources.sourceTypes}),c.wU),u=(0,c.v9)((function(e){return e.sources.appTypes}),c.wU),l=(0,c.v9)((function(e){return e.sources.hcsEnrolled}),c.wU),g=(0,c.v9)((function(e){return e.sources.hcsEnrolledLoaded}),c.wU),y=(0,c.v9)((function(e){return e.user.isOrgAdmin})),b=(0,_.E)(),O=(0,c.I0)(),E=(0,a.useReducer)(V,W),j=(0,m.Z)(E,2),w=j[0].selectedApps,P=j[1],M=r.find((function(e){return e.id===t.source_type_id})),S=null==M?void 0:M.name,A=u.filter((function(e){return e.supported_source_types.includes(S)})).filter(D.Z),L=function(){var r=(0,f.Z)(v().mark((function r(a,i){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=4;break}n((0,Z.yS)(Z._j.sourcesDetailAddApp.path,t.id).replace(":app_type_id",a)),r.next=18;break;case 4:if("boolean"==typeof w[a]){r.next=18;break}return P({type:"addApp",id:a}),r.prev=6,r.next=9,(0,k.Rj)().unpauseApplication(i);case 9:return H(a,O,e,u),r.next=12,O((0,h.il)());case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(6),G(O,e,"resume",r.t0);case 17:P({type:"clean",id:a});case 18:case"end":return r.stop()}}),r,null,[[6,14]])})));return function(e,t){return r.apply(this,arguments)}}(),x=function(){var t=(0,f.Z)(v().mark((function t(n,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"==typeof w[r]){t.next=14;break}return P({type:"removeApp",id:r}),t.prev=2,t.next=5,(0,k.Rj)().pauseApplication(n);case 5:return K(r,O,e,u),t.next=8,O((0,h.il)());case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),G(O,e,"pause",t.t0);case 13:P({type:"clean",id:r});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,T.Z)(t)&&(L=function(){var n=(0,f.Z)(v().mark((function n(r,a){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("boolean"==typeof w[r]){n.next=27;break}if(P({type:"addApp",id:r}),!a){n.next=16;break}return n.prev=3,n.next=6,(0,k.Rj)().unpauseApplication(a);case 6:return H(r,O,e,u),n.next=9,O((0,h.il)());case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),G(O,e,"resume",n.t0);case 14:n.next=26;break;case 16:return n.prev=16,n.next=19,(0,k.Cu)({source_id:t.id,application_type_id:r});case 19:return n.next=21,O((0,h.il)());case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(16),G(O,e,"create",n.t1);case 26:P({type:"clean",id:r});case 27:case"end":return n.stop()}}),n,null,[[3,11],[16,23]])})));return function(e,t){return n.apply(this,arguments)}}()),i().createElement(o.Card,{className:"src-c-card-applications pf-u-p-lg pf-u-pl-sm-on-md"},i().createElement(o.CardTitle,null,e.formatMessage({id:"detail.applications.title",defaultMessage:"Applications"})),i().createElement(o.CardBody,null,i().createElement("div",{className:"pf-c-form src-c-applications_form"},A.map((function(n){var r=t.applications.find((function(e){return e.application_type_id===n.id})),s=Boolean(r),c=Boolean(null==r?void 0:r.paused_at),u=!c&&s,p="boolean"==typeof w[n.id]?w[n.id]:u,f=b?i().Fragment:o.Tooltip;return i().createElement(o.FormGroup,{key:n.id},i().createElement("div",{className:"src-c-application_flex"},g?i().createElement(a.Fragment,null,i().createElement(f,!b&&{content:(0,C.$)(e,y)},i().createElement(o.Switch,{className:"src-c-application_switch",id:"app-switch-".concat(n.id),label:n.id===F.sC&&l?F.X0:n.display_name,isChecked:p,isDisabled:(null==r?void 0:r.isDeleting)||!b||Boolean(t.paused_at),onChange:function(e){return e?L(n.id,null==r?void 0:r.id):x(r.id,n.id)}})),Boolean(r)&&i().createElement(d.c,{className:"pf-u-ml-sm src-m-clickable",app:r,showStatusText:!0}),(c||s)&&i().createElement(I,{app:r,removeApp:function(){return x(r.id,n.id)},addApp:function(){return L(n.id,r.id)}})):i().createElement(o.Skeleton,{width:"75%"})))})))))};var X=n(7081);const Y=function(){var e=(0,s.Z)();return i().createElement(o.EmptyState,null,i().createElement(o.EmptyStateIcon,{icon:X.ZP}),i().createElement(o.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.noapplications.title",defaultMessage:"No connected applications"})),i().createElement(o.EmptyStateBody,{className:"src-c-empty-state__body"},e.formatMessage({id:"detail.noapplications.description",defaultMessage:"You have not connected any applications to this source. Use the switches above to add applications."})))};var J=n(8705);const Q=function(){var e=(0,s.Z)(),t=(0,c.v9)((function(e){var t=e.user;return null==t?void 0:t.isOrgAdmin}));return i().createElement(o.EmptyState,null,i().createElement(o.EmptyStateIcon,{icon:J.ZP}),i().createElement(o.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.nopermissions.title",defaultMessage:"Missing permissions"})),i().createElement(o.EmptyStateBody,{className:"src-c-empty-state__body"},(0,C.$)(e,t)))};var ee=n(67850),te=n(90280);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=function(e){return Promise.all([(0,k.Rj)().showSource(e.id),(0,k.Rj)().listSourceEndpoints(e.id),(0,k.ye)(e.id)]).then(function(){var t=(0,f.Z)(v().mark((function t(n){var r,a,i,o,s,c,u,l,p,d,f,g;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(0,m.Z)(n,3),i=a[0],o=a[1],s=a[2],c=o&&o.data&&o.data[0],u=(null==s||null===(r=s.sources[0])||void 0===r?void 0:r.applications)||[],l={source:re(re({},e),i),applications:u},p=[],f=[],g=[],u.forEach((function(e){var t;null==e||null===(t=e.authentications)||void 0===t||t.forEach((function(t){null!=t&&t.id&&(p.push((0,k.Rj)().showAuthentication(t.id)),f.push(e.id),g.push(t.id))}))})),!(p.length>0)){t.next=13;break}return t.next=11,Promise.all(p);case 11:d=t.sent,f.forEach((function(e,t){l.applications.find((function(t){return t.id===e})).authentications.push(d[t])}));case 13:if(c){t.next=15;break}return t.abrupt("return",l);case 15:return t.abrupt("return",(0,k.Rj)().listEndpointAuthentications(c.id).then((function(e){return re(re({},l),{},{endpoints:o.data,authentications:e.data.filter((function(e){var t=e.id;return!g.includes(t)}))})})));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},ie=n(93433),oe=n(45987),se=n(27361),ce=n.n(se),ue=n(36968),le=n.n(ue),pe=n(36488),de=function(e,t){return{title:e.formatMessage({id:"wizard.pausedApplication",defaultMessage:"{application} is paused"},{application:t}),description:e.formatMessage({id:"wizard.pausedApplicationDescription",defaultMessage:"To resume data collection for this application, switch {application} on in the <b>Applications</b> section of this page."},{application:t,b:pe.S}),variant:"default",customIcon:i().createElement(P.ZP,null)}},fe=["endpoints","authentications","applications"];function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve="check-endpoint",ye=function(e,t){var n={};return Object.keys(t).filter((function(e){return t[e]})).forEach((function(t){le()(n,t,ce()(e,t))})),n},be=function(e,t){var n,r,a=e.endpoints,i=e.authentications,o=e.applications,s=(0,oe.Z)(e,fe),c={},u=[].concat((0,ie.Z)(i||[]),(0,ie.Z)((null==o?void 0:o.reduce((function(e,t){return[].concat((0,ie.Z)(e),(0,ie.Z)(t.authentications))}),[]))||[]));u.length>0&&u.forEach((function(e){c["a".concat(e.id)]=e})),a&&a.length>0&&(n=a[0]),n&&(r=n.scheme||n.host||n.path||n.port?(0,d.Fd)(n):void 0);var l={};return(null==o?void 0:o.length)>0&&o.forEach((function(e){e.extra&&Object.keys(e.extra).length>0&&(l["a".concat(e.id)]={extra:e.extra})})),ge(ge({source_type:t,endpoint:n,authentications:c,url:r},Object.keys(l).length&&{applications:l}),s)},he=function(e,t){return!e.includes(t)&&e.push(t)},Oe=function(e,t){var n=[];return Object.keys(t).forEach((function(r){if(t[r]){var a,i,o=null===(a=r.match(/.a\d+/))||void 0===a||null===(i=a[0])||void 0===i?void 0:i.replace(".a","");r.startsWith("applications")&&he(n,o),r.startsWith("authentications")&&e.applications.forEach((function(e){return e.authentications.forEach((function(t){var r=t.id,a=t.resource_type;return a&&r===o&&he(n,"Application"===a?e.id:"".concat(ve,"-").concat(e.id))}))})),(r.startsWith("url")||r.startsWith("endpoint"))&&e.applications.forEach((function(e){return e.authentications.forEach((function(t){return"Endpoint"===t.resource_type&&he(n,"".concat(ve,"-").concat(e.id))}))}))}})),n.filter(Boolean)},Ee=n(34307),je=n(72810);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(){var e=(0,f.Z)(v().mark((function e(t,n,r,a,i,o){var s,c,u,l,p;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"submit",values:t,editing:n}),s=new Date,e.prev=2,e.next=5,(0,Ee.yH)(a,ye(t,n),t);case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(2),e.next=11,r((0,h.il)());case 11:return o({type:"submitFailed"}),e.abrupt("return");case 13:if((0,b.n)(a.source.id),c={},u=Oe(a,n),l=[],u.forEach((function(e){e.includes(ve)?l.push((0,je.h)(a.endpoints[0].id,void 0,void 0,"getEndpoint",s).then((function(t){return Pe(Pe({},t),{},{id:e.replace("".concat(ve,"-"),"")})}))):l.push((0,je.h)(e,void 0,void 0,void 0,s))})),!(l.length>0)){e.next=32;break}return e.prev=19,e.next=22,Promise.all(l);case 22:p=e.sent,e.next=31;break;case 25:return e.prev=25,e.t1=e.catch(19),e.next=29,r((0,h.il)());case 29:return o({type:"submitFailed"}),e.abrupt("return");case 31:p.forEach((function(e){var t=e.availability_status,n=e.availability_status_error,r=e.id;t===d.Rl&&(c[r]={title:i.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Application credentials were edited successfully."}),description:n,variant:"success"}),t===d.nZ&&(c[r]={title:i.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit application credentials failed."}),description:n,variant:"danger"}),t&&t!==d.Bj||(c[r]={title:i.formatMessage({id:"wizard.timeoutEditToastTitle",defaultMessage:"Edit in progress"}),description:i.formatMessage({id:"wizard.timeoutEditToastDescription",defaultMessage:"We are still working to confirm your updated credentials. Changes will be reflected in this table when complete."}),variant:"warning"})}));case 32:return e.next=34,r((0,h.il)());case 34:o({type:"submitFinished",messages:c});case 35:case"end":return e.stop()}}),e,null,[[2,7],[19,25]])})));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}(),Ze=n(59824),_e=n(96354),Te=n(64124),ke=n(9038);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e,t){var n;return(null==e||null===(n=e.fields)||void 0===n?void 0:n.filter((function(e){return t&&e.stepKey===t})))||[]},Ae=function(e,t,n,r){return e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((function(e){var a,i,o,s=null==t||null===(a=t.schema)||void 0===a||null===(i=a.authentication)||void 0===i?void 0:i.find((function(t){return t.type===e.authtype}));if(!s)return[];var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return ce()(ke.Z,[e,"authentication",t,n,"includeStepKeyFields"],[])}(t.name,e.authtype,n),u=null===(o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"generic";return ce()(ke.Z,[e,"authentication",t,n,"additionalSteps"],[])}(t.name,e.authtype,n))||void 0===o?void 0:o.map((function(e){return Se(Se({},e),{},{fields:[].concat((0,ie.Z)(e.fields),(0,ie.Z)(Ce(s,e.name)))})})).map((function(e){return e.fields.map((function(e){return e.name}))})).flatMap((function(e){return e})),l=s.fields.filter((function(e){return u.includes(e.name)||!u.length&&!e.stepKey||e.stepKey&&c.includes(e.stepKey)})).map((function(r){return Se(Se({},r),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"generic";return ce()(ke.Z,[e,"authentication",t,r,n],{})}(t.name,e.authtype,r.name,n))}));return function(e,t,n){return e.map((function(e){var r=e.name.startsWith("authentication")?function(e,t){return"authentications.a".concat(t,".").concat(e.replace("authentication.",""))}(e.name,t):e.name.startsWith("application")?function(e,t){return"applications.a".concat(t,".").concat(e.replace("application.",""))}(e.name,n):e.name,a=Se(Se({},e),{},{name:r});return"password"===a.name.split(".").pop()&&(a.component="authentication"),a}))}(l,e.id,r)})):[]};function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=n(48880),Ie=function(e){var t=e.name,n=(0,Re.default)(),r=ce()(n.getState().values,t),a=r.variant,s=r.title,c=r.description,u=r.customIcon;return i().createElement(o.Alert,{variant:a,isInline:!0,title:s,customIcon:u},c)};Ie.propTypes={name:l().string.isRequired};const Ne=Ie;var Be=n(5913),Fe=function(e){var t=e.applicationName,n=e.message,r=e.Icon,a=(0,s.Z)();return i().createElement(o.Bullseye,null,i().createElement(o.EmptyState,{variant:o.EmptyStateVariant.small},i().createElement(o.EmptyStateIcon,{icon:r}),i().createElement(o.Title,{headingLevel:"h2",size:"lg"},a.formatMessage({id:"resourceTable.emptyStateTitle",defaultMessage:"No application resources"})),i().createElement(o.EmptyStateBody,null,a.formatMessage(n,{applicationName:t}))))};Fe.propTypes={applicationName:l().string.isRequired,message:l().shape({id:l().string.isRequired,defaultMessage:l().string.isRequired}),Icon:l().elementType},Fe.defaultProps={message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will appear here when created."},Icon:Be.ZP};const ze=Fe;function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e,t,n,r){return[{component:_e.Z.TABS,name:"app-tabs",isBox:!0,fields:(0,ie.Z)(e.map((function(e){var a=n.find((function(t){return t.id===e.application_type_id})),i=function(e,t,n){var r;return[{name:"messages.".concat(n.id),component:"description",Content:Ne,condition:{when:function(e){return e.name},isNotEmpty:!0}}].concat((0,ie.Z)(Ae(null===(r=n.authentications)||void 0===r?void 0:r.filter((function(e){return Object.keys(e).length>1})),t,null==e?void 0:e.name,n.id)))}(a,t,e);if(e.authentications.find((function(e){return"Endpoint"===e.resource_type}))){var o=function(e){if(e.schema&&e.schema.endpoint&&!e.schema.endpoint.hidden){var t=e.schema.endpoint.fields.map((function(t){return xe(xe({},t),function(e,t){return ce()(ke.Z,[e,"endpoint",t],{})}(e.name,t.name))})),n={component:_e.Z.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){var r,a=t.find((function(e){return"url"===e.name}));return xe(xe({},n),{},{fields:[{component:_e.Z.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[xe(xe({},a),{},{isRequired:!1,validate:null==a||null===(r=a.validate)||void 0===r?void 0:r.filter((function(e){return e.type!==Te.Z.REQUIRED}))})]},{component:_e.Z.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]})}return xe(xe({},n),{},{fields:t})}}(t);i=[i[0],[].concat((0,ie.Z)(i[1]||[]),(0,ie.Z)(o?[o]:[]))]}return 1===i.length?i.push({component:"description",name:"no-credentials",Content:ze,message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will be added here when created."},applicationName:null==a?void 0:a.display_name,Icon:X.ZP}):e.paused_at&&(i=[i[0],i[1].map((function(e){return qe(qe({},e),{},{isDisabled:!0})}))]),{name:null==a?void 0:a.id,title:(null==a?void 0:a.id)===F.sC&&r?F.X0:null==a?void 0:a.display_name,fields:i}})))}]},Ve=function(e,t,n,r,a){return{description:r.formatMessage({id:"sources.editFormDescripiton",defaultMessage:"Use the form fields to edit application credentials."}),fields:We(e.applications,t,n,a)}};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,submitMessages:void 0};const $e=function(e,t){var n=t.type,r=t.source,a=t.sourceType,i=t.appTypes,o=t.intl,s=t.values,c=t.editing,u=t.messages,l=t.hcsEnrolled;switch(n){case"createForm":return Ke(Ke({},e),{},{sourceType:a,initialValues:be(e.source,a.product_name),schema:Ve(e.source,a,i,o,l),loading:!1});case"setSource":return Ke(Ke({},e),{},{messages:Ke(Ke({},u),e.submitMessages),source:r,initialLoad:!1,submitMessages:void 0});case"submit":return Ke(Ke({},e),{},{isSubmitting:!0,submitError:!1,values:s,editing:c});case"submitFinished":return Ke(Ke({},e),{},{isSubmitting:!1,source:r,submitMessages:u});case"submitFailed":return Ke(Ke({},e),{},{isSubmitting:!1,submitError:!0,messages:void 0});case"sourceChanged":return Ke(Ke({},e),{},{initialLoad:!0,loading:!0});default:return e}};var Xe=n(52893);const Ye=function(){var e=(0,s.Z)();return i().createElement(Xe.Z,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})})};var Je=n(79433),Qe=function(e){var t=e.onRetry,n=(0,s.Z)();return i().createElement(Je.Z,{onClose:t,customText:n.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:i().createElement(o.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},n.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:n.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})})};Qe.propTypes={onRetry:l().func.isRequired};const et=Qe;function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const rt=function(){var e,t=(0,a.useReducer)($e,Ge),n=(0,m.Z)(t,2),r=n[0],u=n[1],l=(0,p.L)(),f=(0,Ze.W)(),g=r.loading,v=r.editing,y=r.source,b=r.initialValues,h=r.schema,O=r.isSubmitting,E=r.initialLoad,j=r.message,w=r.messages,P=r.submitError,M=r.values,Z=(0,s.Z)(),_=(0,c.v9)((function(e){return e.sources}),c.wU),T=_.sourceTypes,k=_.appTypes,D=_.sourceTypesLoaded,C=_.appTypesLoaded,A=(0,c.v9)((function(e){return e.sources.hcsEnrolled}),c.wU),L=(0,c.v9)((function(e){return e.sources.hcsEnrolledLoaded}),c.wU),x=(0,c.I0)();(0,a.useEffect)((function(){E||u({type:"sourceChanged"})}),[l,null==l||null===(e=l.applications)||void 0===e?void 0:e.length]),(0,a.useEffect)((function(){l&&E&&C&&ae(l).then((function(e){var t=function(e,t,n){var r,a,i={};return e.applications.forEach((function(e){var r=e.id,a=e.application_type_id,o=e.availability_status_error,s=e.availability_status;if(e.paused_at){var c,u=(null===(c=n.find((function(e){return e.id===a})))||void 0===c?void 0:c.display_name)||r;i[r]=de(t,u)}else s===d.nZ&&(i[r]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:o,variant:"danger"})})),null!==(r=e.endpoints)&&void 0!==r&&null!==(a=r[0])&&void 0!==a&&a.availability_status_error&&e.applications.map((function(e){return e.authentications.find((function(t){var n=t.resource_type;return!e.paused_at&&"Endpoint"===n}))?e.id:void 0})).filter(Boolean).forEach((function(n){var r,a;i[n]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:null===(r=e.endpoints)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.availability_status_error,variant:"danger"}})),i}(e,Z,k);u({type:"setSource",source:e,messages:t})}))}),[l,f,C,E]),(0,a.useEffect)((function(){if(y&&C&&D){var e=T.find((function(e){return e.id===y.source.source_type_id}));u({type:"createForm",sourceType:e,source:y,appTypes:k,hcsEnrolled:A,intl:Z})}}),[C,y,D,L]);var R=!L||!C||!D||g;if(P)return i().createElement(et,{onRetry:function(){return Me(M,v,x,y,Z,u)}});if(O)return i().createElement(Ye,null);if(R)return i().createElement(o.Bullseye,{className:"pf-u-m-2xl"},i().createElement(o.Spinner,null));var I=y.source.paused_at||y.applications.every((function(e){return e.paused_at}));return i().createElement(te.Z,{schema:h,onSubmit:function(e,t){return Me(e,t.getState().dirtyFields,x,y,Z,u)},FormTemplate:function(e){return i().createElement(ee.ZP,(0,S.Z)({canReset:!0,showFormControls:!I,submitLabel:"Save changes",disableSubmit:["pristine","invalid"]},e))},clearedValue:null,initialValues:nt(nt(nt({},b),!l.paused_at&&{message:j}),!l.paused_at&&{messages:w})})},at=function(){var e=(0,s.Z)(),t=(0,p.L)(),n=(0,_.E)();return i().createElement(o.Card,{className:"card pf-u-m-lg pf-u-mt-0"},i().createElement(o.CardTitle,null,e.formatMessage({id:"detail.resources.title",defaultMessage:"Manage connected applications"})),i().createElement(o.CardBody,null,!n&&i().createElement(Q,null),n&&0===t.applications.length&&i().createElement(Y,null),n&&t.applications.length>0&&i().createElement(rt,null)))};var it=n(60409),ot=n(98583),st=n(80254),ct=n(89376),ut=["href"];const lt=function(){var e=(0,s.Z)(),t=(0,p.L)();return i().createElement(o.Breadcrumb,null,i().createElement(o.BreadcrumbItem,{component:function(e){var t=e.href,n=(0,oe.Z)(e,ut);return i().createElement(A.Z,(0,S.Z)({to:t},n))},to:Z._j.sources.path},e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})),i().createElement(o.BreadcrumbItem,{isActive:!0},t.name))};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ft=function(){var e=(0,a.useState)(!1),t=(0,m.Z)(e,2),n=t[0],r=t[1],u=(0,s.Z)(),l=(0,p.L)(),d=(0,_.E)(),f=(0,c.I0)(),g=(0,c.v9)((function(e){return e.user.isOrgAdmin})),v=function(e){return function(){r(!1),e()}},y=u.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),b=(0,C.Z)(u,g),O=dt(dt({},b),{},{tooltip:y});return i().createElement(o.Dropdown,{toggle:i().createElement(o.KebabToggle,{onToggle:function(){return r(!n)},id:"toggle-id-6"}),isOpen:n,isPlain:!0,position:"right",dropdownItems:[l.paused_at?i().createElement(o.DropdownItem,(0,S.Z)({},!d&&b,{key:"unpause",onClick:v((function(){return f((0,h.AX)(l.id,l.name,u))})),description:u.formatMessage({id:"detail.resume.description",defaultMessage:"Unpause data collection for this source"})}),u.formatMessage({id:"detail.resume.button",defaultMessage:"Resume"})):i().createElement(o.DropdownItem,(0,S.Z)({},!d&&b,{key:"pause",onClick:v((function(){return f((0,h.xz)(l.id,l.name,u))})),description:u.formatMessage({id:"detail.pause.description",defaultMessage:"Temporarily disable data collection"})}),u.formatMessage({id:"detail.pause.button",defaultMessage:"Pause"})),i().createElement(o.DropdownItem,(0,S.Z)({},!d&&b,{key:"remove",to:(0,Z.yS)(Z._j.sourcesDetailRemove.path,l.id),component:A.Z,description:u.formatMessage({id:"detail.remove.description",defaultMessage:"Permanently delete this source and all collected data"})}),u.formatMessage({id:"detail.remove.button",defaultMessage:"Remove"})),i().createElement(o.DropdownItem,(0,S.Z)({},!d&&b,l.paused_at&&O,{key:"rename",to:(0,Z.yS)(Z._j.sourcesDetailRename.path,l.id),component:A.Z}),u.formatMessage({id:"detail.rename.button",defaultMessage:"Rename"}))]})},mt=function(){var e=(0,s.Z)(),t=(0,p.L)(),n=(0,c.v9)((function(e){return e.sources.appTypes}),c.wU),r=(0,c.v9)((function(e){return e.sources.sourceTypes}),c.wU);return i().createElement(ct.Z,null,i().createElement(lt,null),i().createElement(o.Flex,{className:"pf-u-mb-sm"},i().createElement(o.FlexItem,null,i().createElement(o.Title,{headingLevel:"h1",size:"2xl"},t.name)),i().createElement(o.FlexItem,null,(0,d.BN)(void 0,t,{appTypes:n,sourceTypes:r})),i().createElement(o.FlexItem,{align:{default:"alignRight"}},i().createElement(ft,null))),i().createElement(o.TextContent,null,i().createElement(o.Text,null,e.formatMessage({id:"detail.description",defaultMessage:"View details and manage connections for this source."}))))};var gt=n(4259),vt=["description"];function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=function(e){return[e.formatMessage({id:"resourceTable.resourceType",defaultMessage:"Resource type"}),e.formatMessage({id:"resourceTable.resourceValue",defaultMessage:"Value"})]},Ot=function(e,t,n){return e.applications.reduce((function(a,o){var s,c,u,l=t.find((function(e){return e.id===o.application_type_id})),p=(c=Ae(null===(s=o.authentications)||void 0===s?void 0:s.filter((function(e){return Object.keys(e).length>1})),n,null==l?void 0:l.name,o.id),u=be(e,n.product_name),c.flatMap((function(e){return e})).map((function(e){return!e.hideField&&[i().createElement(i().Fragment,{key:"label"},e.label),ce()(u,e.name)]})).filter(Boolean));return bt(bt({},a),{},(0,r.Z)({},o.id,p))}),{})},Et=function(e,t){var n=t.type,r=t.intl,a=t.source,i=t.activeTab,o=t.appTypes,s=t.sourceType;switch(n){case"loaded":return bt(bt({},e),{},{columns:ht(r),applicationsRows:Ot(a,o,s),loading:!1,activeTab:a.applications[0].id});case"switchTab":return bt(bt({},e),{},{activeTab:i});case"setLoading":return bt(bt({},e),{},{loading:!0})}};const jt=function(){var e,t=(0,s.Z)(),n=(0,p.L)(),r=(0,Ze.W)(),u=(0,c.v9)((function(e){return e.sources}),c.wU),l=u.sourceTypes,d=u.appTypes,f=u.sourceTypesLoaded,g=u.appTypesLoaded,v=(0,a.useReducer)(Et,function(e){var t;return{loading:Boolean(null===(t=e.applications)||void 0===t?void 0:t.length),columns:[],applicationsRows:{},activeTab:0}}(n)),y=(0,m.Z)(v,2),b=y[0],h=b.activeTab,O=b.loading,E=b.columns,j=b.applicationsRows,w=y[1];return(0,a.useEffect)((function(){var e;n&&r&&g&&f&&null!=n&&null!==(e=n.applications)&&void 0!==e&&e.length&&(w({type:"setLoading"}),ae(n).then((function(e){var n=l.find((function(t){return t.id===e.source.source_type_id}));w({type:"loaded",source:e,intl:t,sourceType:n,appTypes:d})})))}),[null==n||null===(e=n.applications)||void 0===e?void 0:e.length,r,g,f]),i().createElement(o.Card,{className:"pf-u-m-lg pf-u-mt-0"},i().createElement(o.CardTitle,null,t.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"})),i().createElement(o.CardBody,null,O&&i().createElement(o.Bullseye,{className:"pf-u-m-2xl"},i().createElement(o.Spinner,null)),!O&&!n.applications.length&&i().createElement(Y,null),!O&&n.applications.length>0&&i().createElement(i().Fragment,null,i().createElement(o.Text,{className:"pf-u-mb-md"},t.formatMessage({id:"resourceTable.description",defaultMessage:"View resources for your connected applications."})),i().createElement(o.Tabs,{isBox:!0,activeKey:h,onSelect:function(e,t){return w({type:"switchTab",activeTab:t})}},n.applications.map((function(e){var r,a,s=(null===(r=d.find((function(t){return t.id===e.application_type_id})))||void 0===r?void 0:r.display_name)||e.application_type_id,c=e.paused_at?de(t,s):{},u=c.description,l=(0,oe.Z)(c,vt);return i().createElement(o.Tab,{eventKey:e.id,key:e.id,title:i().createElement(o.TabTitleText,null,s)},e.paused_at&&!n.paused_at&&i().createElement(o.Alert,(0,S.Z)({isInline:!0,className:"pf-u-mt-lg"},l),u),null!==(a=j[e.id])&&void 0!==a&&a.length?i().createElement(gt.Table,{"aria-label":t.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"}),variant:"compact",cells:E,rows:j[e.id],className:"pf-u-mt-md"},i().createElement(gt.TableHeader,null),i().createElement(gt.TableBody,null)):i().createElement(ze,{applicationName:s}))}))))))},wt=function(){var e=(0,s.Z)(),t=(0,_.E)(),n=(0,c.I0)(),r=(0,p.L)(),a=(0,c.v9)((function(e){return e.user.isOrgAdmin}));return i().createElement(o.GridItem,{md:12,className:"pf-u-m-lg pf-u-mb-0"},i().createElement(o.Alert,{customIcon:i().createElement(P.ZP,null),variant:"default",isInline:!0,title:e.formatMessage({id:"source.detail.pausedTitle",defaultMessage:"Source paused"}),actionLinks:t?i().createElement(o.AlertActionLink,{onClick:function(){return n((0,h.AX)(r.id,r.name,e))}},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})):i().createElement(o.Tooltip,{content:(0,C.$)(e,a)},i().createElement(o.AlertActionLink,{isDisabled:!0},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})))},e.formatMessage({id:"source.detail.pausedDescription",defaultMessage:"No data is being collected for this source. Turn the source back on to reestablish connection and data collection. Previous credentials will be restored and application connections will continue as seen on this page."})))};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=(0,a.lazy)((function(){return n.e(128).then(n.bind(n,55997))})),_t=(0,a.lazy)((function(){return Promise.all([n.e(429),n.e(180)]).then(n.bind(n,59622))})),Tt=(0,a.lazy)((function(){return n.e(744).then(n.bind(n,76902))})),kt=(0,a.lazy)((function(){return Promise.all([n.e(728),n.e(291)]).then(n.bind(n,72498))})),Dt=(0,a.lazy)((function(){return n.e(331).then(n.bind(n,524))}));const St=function(){var e=(0,p.L)();if(!e)return i().createElement(i().Fragment,null,i().createElement(ot.X6,null),i().createElement(it.Z,null));var t=(0,T.Z)(e);return i().createElement("div",{className:"src-c-detail-page"},i().createElement(a.Suspense,{fallback:null},i().createElement(st.Z,{route:Mt(Mt({},Z._j.sourcesDetail),{},{path:"remove"}),Component:Zt,componentProps:{backPath:(0,Z.yS)(Z._j.sourcesDetail.path,e.id)}}),i().createElement(st.Z,{route:Mt(Mt({},Z._j.sourcesDetailAddApp),{},{path:"add_app/:app_type_id"}),Component:_t}),i().createElement(st.Z,{route:Mt(Mt({},Z._j.sourcesDetailRemoveApp),{},{path:"remove_app/:app_id"}),Component:Tt}),i().createElement(st.Z,{route:Mt(Mt({},Z._j.sourcesDetail),{},{path:"rename"}),Component:kt,componentProps:{backPath:(0,Z.yS)(Z._j.sourcesDetail.path,e.id)}}),i().createElement(st.Z,{route:Mt(Mt({},Z._j.sourcesDetail),{},{path:"edit_credentials"}),Component:Dt,componentProps:{backPath:(0,Z.yS)(Z._j.sourcesDetail.path,e.id)}})),i().createElement(mt,null),e.paused_at&&i().createElement(wt,null),i().createElement(o.Grid,null,i().createElement(o.GridItem,{md:"6"},i().createElement(w,null)),i().createElement(o.GridItem,{md:"6"},i().createElement($,null)),i().createElement(o.GridItem,{md:"12"},t?i().createElement(jt,null):i().createElement(at,null))))}},16946:(e,t,n)=>{n.d(t,{$:()=>r,Z:()=>a});var r=function(e,t){return t?e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must add Sources Administrator permissions to your user."}):e.formatMessage({id:"sources.notWritePermissionButton",defaultMessage:"To perform this action, your Organization Administrator must grant you Sources Administrator permissions."})};const a=function(e,t){return{tooltip:r(e,t),isDisabled:!0,className:"src-m-dropdown-item-disabled"}}},64673:(e,t,n)=>{n.d(t,{W:()=>a,Z:()=>i});var r=n(84866),a=function(e,t){return function(n){return n.supported_source_types.find((function(n){var r;return(null===(r=e.find((function(e){var t=e.name;return n===t})))||void 0===r?void 0:r.category)===t}))}};const i=function(e){return e.name!==r.M$}}}]);
//# sourceMappingURL=../sourcemaps/sourceDetail.d53fe6b919aed349e0e3cba60720a93b.js.map