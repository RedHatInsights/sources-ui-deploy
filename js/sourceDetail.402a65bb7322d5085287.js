(self.webpackChunksources=self.webpackChunksources||[]).push([[6818],{66042:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n}),a(87234);const n={bullseye:"pf-v5-l-bullseye"}},96874:e=>{e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},86556:(e,t,a)=>{var n=a(89465),i=a(77813);e.exports=function(e,t,a){(void 0!==a&&!i(e[t],a)||void 0===a&&!(t in e))&&n(e,t,a)}},28483:(e,t,a)=>{var n=a(25063)();e.exports=n},42980:(e,t,a)=>{var n=a(46384),i=a(86556),s=a(28483),o=a(59783),r=a(13218),l=a(81704),c=a(36390);e.exports=function e(t,a,p,d,u){t!==a&&s(a,(function(s,l){if(u||(u=new n),r(s))o(t,a,l,p,e,d,u);else{var m=d?d(c(t,l),s,l+"",t,a,u):void 0;void 0===m&&(m=s),i(t,l,m)}}),l)}},59783:(e,t,a)=>{var n=a(86556),i=a(64626),s=a(77133),o=a(278),r=a(38517),l=a(35694),c=a(1469),p=a(29246),d=a(44144),u=a(23560),m=a(13218),f=a(68630),g=a(36719),h=a(36390),y=a(59881);e.exports=function(e,t,a,E,v,b,T){var M=h(e,a),w=h(t,a),C=T.get(w);if(C)n(e,a,C);else{var _=b?b(M,w,a+"",e,t,T):void 0,x=void 0===_;if(x){var R=c(w),k=!R&&d(w),A=!R&&!k&&g(w);_=w,R||k||A?c(M)?_=M:p(M)?_=o(M):k?(x=!1,_=i(w,!0)):A?(x=!1,_=s(w,!0)):_=[]:f(w)||l(w)?(_=M,l(M)?_=y(M):m(M)&&!u(M)||(_=r(w))):x=!1}x&&(T.set(w,_),v(_,w,E,b,T),T.delete(w)),n(e,a,_)}}},5976:(e,t,a)=>{var n=a(6557),i=a(45357),s=a(30061);e.exports=function(e,t){return s(i(e,t,n),e+"")}},56560:(e,t,a)=>{var n=a(75703),i=a(38777),s=a(6557),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=o},21463:(e,t,a)=>{var n=a(5976),i=a(16612);e.exports=function(e){return n((function(t,a){var n=-1,s=a.length,o=s>1?a[s-1]:void 0,r=s>2?a[2]:void 0;for(o=e.length>3&&"function"==typeof o?(s--,o):void 0,r&&i(a[0],a[1],r)&&(o=s<3?void 0:o,s=1),t=Object(t);++n<s;){var l=a[n];l&&e(t,l,n,o)}return t}))}},25063:e=>{e.exports=function(e){return function(t,a,n){for(var i=-1,s=Object(t),o=n(t),r=o.length;r--;){var l=o[e?r:++i];if(!1===a(s[l],l,s))break}return t}}},16612:(e,t,a)=>{var n=a(77813),i=a(98612),s=a(65776),o=a(13218);e.exports=function(e,t,a){if(!o(a))return!1;var r=typeof t;return!!("number"==r?i(a)&&s(t,a.length):"string"==r&&t in a)&&n(a[t],e)}},45357:(e,t,a)=>{var n=a(96874),i=Math.max;e.exports=function(e,t,a){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=i(s.length-t,0),l=Array(r);++o<r;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=a(l),n(e,this,c)}}},36390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},30061:(e,t,a)=>{var n=a(56560),i=a(21275)(n);e.exports=i},21275:e=>{var t=Date.now;e.exports=function(e){var a=0,n=0;return function(){var i=t(),s=16-(i-n);if(n=i,s>0){if(++a>=800)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}},75703:e=>{e.exports=function(e){return function(){return e}}},6557:e=>{e.exports=function(e){return e}},29246:(e,t,a)=>{var n=a(98612),i=a(37005);e.exports=function(e){return i(e)&&n(e)}},28368:(e,t,a)=>{var n=a(90939);e.exports=function(e,t,a){var i=(a="function"==typeof a?a:void 0)?a(e,t):void 0;return void 0===i?n(e,t,void 0,a):!!i}},68630:(e,t,a)=>{var n=a(44239),i=a(85924),s=a(37005),o=Function.prototype,r=Object.prototype,l=o.toString,c=r.hasOwnProperty,p=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var a=c.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&l.call(a)==p}},30236:(e,t,a)=>{var n=a(42980),i=a(21463)((function(e,t,a,i){n(e,t,a,i)}));e.exports=i},59881:(e,t,a)=>{var n=a(98363),i=a(81704);e.exports=function(e){return n(e,i(e))}},85490:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,n:()=>i});var n=a(90573);const i=e=>(0,n.Rj)().checkAvailabilitySource(e).catch((()=>{})),s=i},95290:(e,t,a)=>{"use strict";a.d(t,{K_:()=>s,yH:()=>o});var n=a(63367),i=a(90573);const s=e=>e.url||null===e.url?(e=>{if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{const t=new URL(e),a=t.protocol.replace(/:$/,"");return{scheme:a,host:t.hostname,port:""===t.port?(0,n.bF)(a):t.port,path:t.pathname}}catch(e){return{}}})(e.url):e.endpoint?e.endpoint:e,o=(e,t,a)=>{const n=[];if(t.source&&n.push((0,i.Rj)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){const{scheme:a,host:o,port:r,path:l}=s(t),c=null===r?null:parseInt(r,10),p={scheme:a,host:o,path:l,port:null===c?null:isNaN(c)?void 0:c,...t.endpoint};n.push((0,i.Rj)().updateEndpoint(e.endpoints[0].id,p))}return t.authentications&&Object.keys(t.authentications).forEach((e=>{const a=e.replace("a","");n.push((0,i.Rj)().updateAuthentication(a,t.authentications[e]))})),t.applications&&Object.keys(t.applications).forEach((e=>{const t=e.replace("a","");n.push((0,i.Rj)().updateApplication(t,{extra:a.applications[e].extra}))})),Promise.all(n)}},5454:(e,t,a)=>{"use strict";a.d(t,{h:()=>i});var n=a(90573);const i=(e,t=1e4,a=1e3,i="showApplication",s)=>new Promise(((o,r)=>{const l=Date.now(),c=()=>(0,n.Rj)()[i](e).then((e=>{if(Date.now()-l>=t)return s?{...e,availability_status:null,availability_status_error:null}:e;if("available"===e.availability_status||"unavailable"===e.availability_status){if(s&&new Date(e.last_checked_at||e.updated_at)>s)return e;if(!s)return e}return((e,t)=>new Promise((t=>{setTimeout(t.bind(null,undefined),e)})))(a).then((()=>c()))}));return c().then((e=>o(e))).catch((e=>r(e)))}))},27552:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a(28416),i=a.n(n),s=a(45697),o=a.n(s),r=a(25387),l=a(67187),c=a(46665),p=a(15256),d=a(62345),u=a(57945),m=a.n(u);const f=({onClose:e,returnButtonTitle:t,message:a,title:n,customText:s,primaryAction:o,secondaryActions:r,Component:c})=>i().createElement(l.Bullseye,null,i().createElement(p.EmptyState,{variant:p.EmptyStateVariant.full,className:"pf-v5-u-mt-4xl"},i().createElement(p.EmptyStateIcon,{icon:m(),color:"var(--pf-v5-global--danger-color--100)",className:"pf-v5-u-mb-0"}),i().createElement(d.Title,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-xl"},n),i().createElement(p.EmptyStateBody,{className:"src-c-wizard--step-text"},a||s),i().createElement(c,{variant:"primary",onClick:o||e},t),r&&i().createElement(p.EmptyStateActions,{className:"pf-v5-u-mt-sm"},r)));f.propTypes={onClose:o().func.isRequired,returnButtonTitle:o().node,message:o().node,title:o().node,customText:o().node,primaryAction:o().func,secondaryActions:o().node,Component:o().elementType},f.defaultProps={title:i().createElement(r._H,{id:"wizard.unsuccConfiguration",defaultMessage:"Something went wrong"}),customText:i().createElement(r._H,{id:"wizard.errorText",defaultMessage:"There was a problem while trying to add your source. Please try again. If the error persists, open a support case."}),Component:c.Button};const g=f},26946:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a(28416),i=a.n(n),s=a(45697),o=a.n(s),r=a(25387),l=a(67187),c=a(46665),p=a(15256),d=a(54602),u=a(62345);const m=({onClose:e,customText:t,cancelTitle:a,description:n})=>i().createElement(l.Bullseye,null,i().createElement(p.EmptyState,{variant:p.EmptyStateVariant.full,className:"pf-v5-u-mt-4xl"},i().createElement(p.EmptyStateIcon,{icon:d.Spinner,className:"pf-v5-u-mb-0"}),i().createElement(u.Title,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-xl"},t),n&&i().createElement(p.EmptyStateBody,{className:"src-c-wizard--step-text"},n),e&&i().createElement(p.EmptyStateActions,{className:"pf-v5-u-mt-xl"},i().createElement(c.Button,{variant:"link",onClick:e},a))));m.propTypes={onClose:o().func,customText:o().node,cancelTitle:o().node,description:o().node},m.defaultProps={customText:i().createElement(r._H,{id:"wizard.loadingText",defaultMessage:"Loading, please wait."}),cancelTitle:i().createElement(r._H,{id:"wizard.cancelText",defaultMessage:"Cancel"})};const f=m},84414:(e,t,a)=>{"use strict";a.d(t,{a:()=>s});var n=a(48947),i=a(78116);const s=()=>{const e=(0,n.useNavigate)();return(t,a)=>e((0,i.n)(t,i.d),a)}},57564:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ot});var n=a(28416),i=a.n(n),s=a(5521),o=a(25387),r=a(86706),l=a(45697),c=a.n(l),p=a(2387),d=a(88131),u=a(97979),m=a(63367),f=a(23962),g=a.n(f),h=a(46665),y=a(54602),E=a(85490),v=a(31665);const b=({setCheckPending:e})=>{const t=(0,u.L)(),a=(0,o.YB)(),s=(0,r.I0)(),[l,c]=(0,n.useState)(!1);return i().createElement(h.Button,{variant:"plain","aria-label":a.formatMessage({id:"sources.checkavailability",defaultMessage:"Check integration availability"}),onClick:async()=>{e&&e(),c(!0),await(0,E.Z)(t.id),c(!1),s((0,v.Hz)({title:a.formatMessage({id:"sources.checkavailability.notificationTitle",defaultMessage:"Request to check integration status was sent"}),variant:"info",description:a.formatMessage({id:"sources.checkavailability.notificationDescription",defaultMessage:"Check this page later for updates"})}))},isDisabled:l},!l&&i().createElement(g(),{"data-testid":"RedoIcon"}),l&&i().createElement(y.Spinner,{size:"md"}))};b.propTypes={setCheckPending:c().func};const T=b,M=({term:e,description:t})=>i().createElement(d.DescriptionListGroup,null,i().createElement(d.DescriptionListTerm,null,e),i().createElement(d.DescriptionListDescription,null,t));M.propTypes={term:c().node,description:c().node};const w=()=>{const e=(0,r.I0)(),t=(0,o.YB)(),a=(0,u.L)(),n=(0,r.v9)((({sources:e})=>e.sourceTypes),r.wU),s=n.find((e=>e.id===a.source_type_id));let l;if("amazon"===s?.name){const e=a.authentications?.find((({authtype:e})=>e.includes("arn")));e?.username&&(l=e.username.match(/:\d+/)?.[0]?.replace(/:/g,""))}return i().createElement(p.Card,{className:"pf-m-selectable pf-m-selected src-c-card-summary pf-v5-u-m-lg pf-v5-u-mr-sm-on-md"},i().createElement(p.CardTitle,null,t.formatMessage({id:"detail.summary.title",defaultMessage:"Integration summary"})),i().createElement(p.CardBody,null,i().createElement(d.DescriptionList,{columnModifier:{default:"2Col"}},i().createElement(M,{term:t.formatMessage({id:"detail.summary.type",defaultMessage:"Integration type"}),description:(0,m.P5)(a.source_type_id,void 0,{sourceTypes:n})}),i().createElement(M,{term:t.formatMessage({id:"detail.summary.lastChecked",defaultMessage:"Last availability check"}),description:i().createElement(i().Fragment,null,a.isCheckPending||!a.last_checked_at&&!a.last_available_at?t.formatMessage({id:"detail.summary.waitingForUpdate",defaultMessage:"Waiting for update"}):(0,m.vh)(a.last_checked_at||a.last_available_at),i().createElement(T,{setCheckPending:()=>e((0,v.mE)(a.id))}))}),i().createElement(M,{term:t.formatMessage({id:"detail.summary.dateAdded",defaultMessage:"Date added"}),description:(0,m.vh)(a.created_at)}),i().createElement(M,{term:t.formatMessage({id:"detail.summary.lastModified",defaultMessage:"Last modified"}),description:(0,m.vh)(a.updated_at)}),a.app_creation_workflow&&i().createElement(M,{term:t.formatMessage({id:"detail.summary.configurationMode",defaultMessage:"Configuration mode"}),description:(0,m.Z3)(a.app_creation_workflow,a,{intl:t,sourceType:s})}),l&&i().createElement(M,{term:t.formatMessage({id:"detail.summary.awsAccountNumber",defaultMessage:"AWS account number"}),description:l}))))};var C=a(88431),_=a(81023),x=a(86253),R=a(42309),k=a(89572),A=a.n(k),N=a(96758),S=a.n(N),I=a(87281),D=a(82866),Z=a(70642),O=a(90573),P=a(12567),B=a(65353),F=a(12744),L=a(41435),j=a(62472);const z=e=>{var{children:t,className:a,component:i="a",isDisabled:s=!1,isAriaDisabled:o=!1,isPlainText:r=!1,href:l,tooltip:c,tooltipProps:p={},listItemClassName:d,onClick:u,ref:m,additionalChild:f,customChild:g,tabIndex:h=-1,icon:y=null,autoFocus:E,description:v=null,styleChildren:b,ouiaId:T,ouiaSafe:M}=e,w=(0,B.__rest)(e,["children","className","component","isDisabled","isAriaDisabled","isPlainText","href","tooltip","tooltipProps","listItemClassName","onClick","ref","additionalChild","customChild","tabIndex","icon","autoFocus","description","styleChildren","ouiaId","ouiaSafe"]);const C=(0,j.useOUIAProps)(z.displayName,T,M);return n.createElement(L.e4.Consumer,null,(e=>n.createElement(F.n,Object.assign({context:e,role:"menuitem",tabIndex:h,className:a,component:i,isDisabled:s,isAriaDisabled:o,isPlainText:r,href:l,tooltip:c,tooltipProps:p,listItemClassName:d,onClick:u,additionalChild:f,customChild:g,icon:y,autoFocus:E,styleChildren:b,description:v},C,w),t)))};z.displayName="DropdownItem";var U=a(73699),W=a(38296),G=a(31051),Y=a(80164);class $ extends n.Component{constructor(){super(...arguments),this.refsCollection=[],this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onKeyDown)},this.onKeyDown=e=>{if(!this.props.isOpen||!Array.from(document.activeElement.classList).find((e=>$.validToggleClasses.concat(this.context.toggleClass).includes(e))))return;const t=this.refsCollection;if("ArrowDown"===e.key){const a=t.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled")));$.focusFirstRef(a),e.stopPropagation()}else if("ArrowUp"===e.key){const a=t.length,n=t.slice(a-1,a),i=n&&n[0];$.focusFirstRef(i),e.stopPropagation()}},this.childKeyHandler=(e,t,a,i=!1)=>{(0,Y.qG)(e,t,a,this.refsCollection,this.props.isGrouped?this.refsCollection:n.Children.toArray(this.props.children),i)},this.sendRef=(e,t,a,n)=>{this.refsCollection[e]=[],t.map(((t,a)=>{t?t.getAttribute?this.refsCollection[e][a]=n?null:t:this.refsCollection[e][a]=G.findDOMNode(t):this.refsCollection[e][a]=null}))}}componentDidMount(){document.addEventListener("keydown",this.onKeyDown);const{autoFocus:e}=this.props;if(e){const e=this.refsCollection.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled"))),t=e&&e[0];t&&t.focus&&setTimeout((()=>t.focus()))}}shouldComponentUpdate(){return this.refsCollection=[],!0}extendChildren(){const{children:e,isGrouped:t}=this.props;if(t){let t=0;return n.Children.map(e,(e=>{const a=e,i={};return a.props&&a.props.children&&(Array.isArray(a.props.children)?i.children=n.Children.map(a.props.children,(e=>n.cloneElement(e,{index:t++}))):i.children=n.cloneElement(a.props.children,{index:t++})),n.cloneElement(a,i)}))}return n.Children.map(e,((e,t)=>n.cloneElement(e,{index:t})))}render(){const e=this.props,{className:t,isOpen:a,position:i,children:s,component:o,isGrouped:r,setMenuComponentRef:l,alignments:c}=e,p=(0,B.__rest)(e,["className","isOpen","position","children","component","isGrouped","setMenuComponentRef","alignments"]);return n.createElement(L.e4.Provider,{value:{keyHandler:this.childKeyHandler,sendRef:this.sendRef}},"div"===o?n.createElement(L.Dl.Consumer,null,(({onSelect:e,menuClass:o})=>n.createElement("div",{className:(0,W.i)(o,i===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,onClick:t=>e&&e(t),ref:l},s))):r&&n.createElement(L.Dl.Consumer,null,(({menuClass:e,menuComponent:s})=>{const o=s||"div";return n.createElement(o,Object.assign({},p,{className:(0,W.i)(e,i===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:l}),this.extendChildren())}))||n.createElement(L.Dl.Consumer,null,(({menuClass:e,menuComponent:s})=>{const r=s||o;return n.createElement(r,Object.assign({},p,{className:(0,W.i)(e,i===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:l}),this.extendChildren())})))}}$.displayName="DropdownMenu",$.defaultProps={className:"",isOpen:!0,autoFocus:!0,position:L.ir.left,component:"ul",isGrouped:!1,setMenuComponentRef:null},$.validToggleClasses=[U.Z.dropdownToggle,U.Z.dropdownToggleButton],$.focusFirstRef=e=>{e&&e[0]&&e[0].focus&&setTimeout((()=>e[0].focus()))},$.contextType=L.Dl;var H=a(69121);class K extends n.Component{constructor(e){super(e),this.openedOnEnter=!1,this.baseComponentRef=n.createRef(),this.menuComponentRef=n.createRef(),this.onEnter=()=>{this.openedOnEnter=!0},this.setMenuComponentRef=e=>{this.menuComponentRef=e},this.getMenuComponentRef=()=>this.menuComponentRef,e.dropdownItems&&e.dropdownItems.length>0&&e.children&&console.error("Children and dropdownItems props have been provided. Only the dropdownItems prop items will be rendered")}componentDidUpdate(){this.props.isOpen||(this.openedOnEnter=!1)}render(){const e=this.props,{children:t,className:a,direction:i,dropdownItems:s,isOpen:o,isPlain:r,isText:l,isGrouped:c,isFullHeight:p,onSelect:d,position:u,toggle:m,autoFocus:f,minWidth:g,menuAppendTo:h,isFlipEnabled:y,zIndex:E}=e,v=(0,B.__rest)(e,["children","className","direction","dropdownItems","isOpen","isPlain","isText","isGrouped","isFullHeight","onSelect","position","toggle","autoFocus","minWidth","menuAppendTo","isFlipEnabled","zIndex"]),b=m.props.id||"pf-dropdown-toggle-id-"+K.currentId++;let T,M,w=!1;s&&s.length>0?(T="ul",M=s,w=!0):(T="div",M=n.Children.toArray(t));const C=n.createRef(),_=this.openedOnEnter,x=y&&"inline"!==h;return n.createElement(L.Dl.Consumer,null,(({baseClass:e,baseComponent:t,id:s,ouiaId:d,ouiaComponentType:y,ouiaSafe:R,alignments:k})=>{const A=t,N=n.createElement($,{className:(0,W.i)(x&&U.Z.modifiers.static),setMenuComponentRef:this.setMenuComponentRef,component:T,isOpen:o,position:u,"aria-labelledby":s?`${s}-toggle`:b,isGrouped:c,autoFocus:_&&f,alignments:k},M),S=n.createElement("div",{className:(0,W.i)(e,i===L.dw.up&&U.Z.modifiers.top,u===L.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,a),ref:C},o&&N),I=n.createElement(A,Object.assign({},v,{className:(0,W.i)(e,i===L.dw.up&&U.Z.modifiers.top,u===L.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,p&&U.Z.modifiers.fullHeight,a),ref:this.baseComponentRef},(0,j.getOUIAProps)(y,d,R)),n.Children.map(m,(e=>n.cloneElement(e,{parentRef:this.baseComponentRef,getMenuRef:this.getMenuComponentRef,isOpen:o,id:b,isPlain:r,isText:l,"aria-haspopup":w,onEnter:()=>{this.onEnter(),e.props.onEnter&&e.props.onEnter()}}))),"inline"===h&&o&&N);return"inline"===h?I:n.createElement(H.Popper,{trigger:I,triggerRef:this.baseComponentRef,popper:S,popperRef:C,direction:i,position:u,appendTo:"parent"===h?(()=>this.baseComponentRef&&this.baseComponentRef.current?this.baseComponentRef.current.parentElement:null)():h,isVisible:o,zIndex:E,minWidth:void 0!==g?g:"revert"})}))}}K.displayName="DropdownWithContext",K.currentId=0,K.defaultProps={className:"",dropdownItems:[],isOpen:!1,isPlain:!1,isText:!1,isGrouped:!1,position:L.ir.left,direction:L.dw.down,onSelect:()=>{},autoFocus:!0,menuAppendTo:"inline",isFlipEnabled:!0};const V=e=>{var{onSelect:t,ref:a,ouiaId:i,ouiaSafe:s,alignments:o,contextProps:r,minWidth:l,menuAppendTo:c="inline",isFlipEnabled:p=!0,zIndex:d=9999}=e,u=(0,B.__rest)(e,["onSelect","ref","ouiaId","ouiaSafe","alignments","contextProps","minWidth","menuAppendTo","isFlipEnabled","zIndex"]);return n.createElement(L.Dl.Provider,{value:Object.assign({onSelect:e=>t&&t(e),toggleTextClass:U.Z.dropdownToggleText,toggleIconClass:U.Z.dropdownToggleImage,toggleIndicatorClass:U.Z.dropdownToggleIcon,menuClass:U.Z.dropdownMenu,itemClass:U.Z.dropdownMenuItem,toggleClass:U.Z.dropdownToggle,baseClass:U.Z.dropdown,baseComponent:"div",sectionClass:U.Z.dropdownGroup,sectionTitleClass:U.Z.dropdownGroupTitle,sectionComponent:"section",disabledClass:U.Z.modifiers.disabled,plainTextClass:U.Z.modifiers.text,ouiaId:(0,j.useOUIAId)(V.displayName,i),ouiaSafe:s,ouiaComponentType:V.displayName,alignments:o},r)},n.createElement(K,Object.assign({menuAppendTo:c,isFlipEnabled:p,zIndex:d,minWidth:l},u)))};V.displayName="Dropdown";var q=a(62165),X=a(1774);const Q={default:"",primary:U.Z.modifiers.primary,secondary:U.Z.modifiers.secondary};class J extends n.Component{constructor(){super(...arguments),this.buttonRef=n.createRef(),this.componentDidMount=()=>{document.addEventListener("click",this.onDocClick),document.addEventListener("touchstart",this.onDocClick),document.addEventListener("keydown",this.onEscPress)},this.componentWillUnmount=()=>{document.removeEventListener("click",this.onDocClick),document.removeEventListener("touchstart",this.onDocClick),document.removeEventListener("keydown",this.onEscPress)},this.onDocClick=e=>{const{isOpen:t,parentRef:a,onToggle:n,getMenuRef:i}=this.props,s=i&&i(),o=a&&a.current&&a.current.contains(e.target),r=s&&s.contains&&s.contains(e.target);!t||o||r||null==n||n(e,!1)},this.onEscPress=e=>{var t,a,n;const{parentRef:i,getMenuRef:s}=this.props,o=s&&s(),r=i&&i.current&&i.current.contains(e.target),l=o&&o.contains&&o.contains(e.target);!this.props.isOpen||e.key!==X.yu.Escape&&"Tab"!==e.key||!r&&!l||(null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!1),null===(n=this.buttonRef.current)||void 0===n||n.focus())},this.onKeyDown=e=>{var t,a,n,i,s,o;("Tab"!==e.key||this.props.isOpen)&&("Tab"!==e.key&&"Enter"!==e.key&&" "!==e.key||!this.props.isOpen?"Enter"!==e.key&&" "!==e.key||this.props.isOpen||(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(i=(n=this.props).onToggle)||void 0===i||i.call(n,e,!this.props.isOpen),null===(o=(s=this.props).onEnter)||void 0===o||o.call(s)):(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!this.props.isOpen)))}}render(){const e=this.props,{className:t,children:a,isOpen:i,isDisabled:s,isPlain:o,isText:r,isSplitButton:l,toggleVariant:c,onToggle:p,"aria-haspopup":d,isActive:u,bubbleEvent:m,onEnter:f,parentRef:g,getMenuRef:h,id:y,type:E}=e,v=(0,B.__rest)(e,["className","children","isOpen","isDisabled","isPlain","isText","isSplitButton","toggleVariant","onToggle","aria-haspopup","isActive","bubbleEvent","onEnter","parentRef","getMenuRef","id","type"]);return n.createElement(L.Dl.Consumer,null,(({toggleClass:e})=>n.createElement("button",Object.assign({},v,{id:y,ref:this.buttonRef,className:(0,W.i)(l?U.Z.dropdownToggleButton:e||U.Z.dropdownToggle,u&&U.Z.modifiers.active,o&&U.Z.modifiers.plain,r&&U.Z.modifiers.text,c&&Q[c],t),type:E||"button",onClick:e=>null==p?void 0:p(e,!i),"aria-expanded":i,"aria-haspopup":d,onKeyDown:e=>this.onKeyDown(e),disabled:s}),a)))}}J.displayName="Toggle",J.defaultProps={className:"",isOpen:!1,isActive:!1,isDisabled:!1,isPlain:!1,isText:!1,isSplitButton:!1,onToggle:()=>{},onEnter:()=>{},bubbleEvent:!1};const ee=e=>{var{id:t="",children:a=null,className:i="",isOpen:s=!1,"aria-label":o="Actions",parentRef:r=null,getMenuRef:l=null,isActive:c=!1,isPlain:p=!1,isDisabled:d=!1,bubbleEvent:u=!1,onToggle:m=(()=>{}),ref:f}=e,g=(0,B.__rest)(e,["id","children","className","isOpen","aria-label","parentRef","getMenuRef","isActive","isPlain","isDisabled","bubbleEvent","onToggle","ref"]);return n.createElement(J,Object.assign({id:t,className:i,isOpen:s,"aria-label":o,parentRef:r,getMenuRef:l,isActive:c,isPlain:p,isDisabled:d,onToggle:m,bubbleEvent:u},g),n.createElement(q.default,null))};ee.displayName="KebabToggle";var te=a(42399),ae=a(96380);const ne=({app:e,removeApp:t,addApp:a})=>{const[s,l]=(0,n.useState)(!1),c=(0,o.YB)(),p=(0,u.L)(),d=(0,D.E)(),m=(0,r.v9)((({user:e})=>e.isOrgAdmin)),f=e=>()=>{l(!1),e()},g=(0,te.Z)(c,m),h=c.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused integration."}),y={...g,tooltip:h,tooltipProps:{...g,content:h}},E=e.paused_at?i().createElement(z,{...p.paused_at&&y,...!d&&g,key:"resume",description:c.formatMessage({id:"app.kebab.resume.title",defaultMessage:"Resume data collection for this application."}),onClick:f(a)},c.formatMessage({id:"app.kebab.resume.button",defaultMessage:"Resume"})):i().createElement(z,{...p.paused_at&&y,...!d&&g,key:"pause",description:c.formatMessage({id:"app.kebab.pause.title",defaultMessage:"Temporarily stop this application from collecting data."}),onClick:f(t)},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Pause"})),v=i().createElement(z,{...p.paused_at&&y,...!d&&g,key:"remove",description:c.formatMessage({id:"app.kebab.remove.title",defaultMessage:"Permanently stop data collection for this application."}),to:(0,I.yS)(I._j.sourcesDetailRemoveApp.path,p.id).replace(":app_id",e.id),component:ae.Z},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Remove"}));return i().createElement(V,{isPlain:!0,isOpen:s,position:"right",dropdownItems:[E,v],className:"src-c-dropdown__application_kebab",toggle:i().createElement(ee,{onToggle:()=>l((e=>!e))})})};ne.propTypes={app:c().shape({id:c().string,paused_at:c().string}).isRequired,removeApp:c().func,addApp:c().func};const ie=ne;var se=a(5495),oe=a(69706),re=a(75614),le=a(84414);const ce={selectedApps:{}},pe=(e,{type:t,id:a})=>{switch(t){case"addApp":return{...e,selectedApps:{...e.selectedApps,[a]:!0}};case"removeApp":return{...e,selectedApps:{...e.selectedApps,[a]:!1}};case"clean":return{...e,selectedApps:{...e.selectedApps,[a]:void 0}}}},de=(e,t,a,n)=>{const s=n.find((t=>t.id===e))?.display_name;t((0,v.Hz)({title:a.formatMessage({id:"detail.applications.resumed.alert.title",defaultMessage:"{appName} connection resumed"},{appName:s}),variant:"default",customIcon:i().createElement(S(),null)}))},ue=(e,t,a,n)=>{const i={create:t.formatMessage({id:"detail.applications.add.error",defaultMessage:"Application create failed"}),pause:t.formatMessage({id:"detail.applications.pause.error",defaultMessage:"Application pause failed"}),resume:t.formatMessage({id:"detail.applications.resume.error",defaultMessage:"Application resume failed"})}[a];e((0,v.Hz)({title:i,description:(0,oe.Z)(t,(0,se.Z)(n)),variant:"danger"}))},me=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,le.a)(),s=(0,r.v9)((({sources:e})=>e.sourceTypes),r.wU),l=(0,r.v9)((({sources:e})=>e.appTypes),r.wU),c=(0,r.v9)((({sources:e})=>e.hcsEnrolled),r.wU),d=(0,r.v9)((({sources:e})=>e.hcsEnrolledLoaded),r.wU),f=(0,r.v9)((({user:e})=>e.isOrgAdmin)),g=(0,D.E)(),h=(0,r.I0)(),[{selectedApps:y},E]=(0,n.useReducer)(pe,ce),b=s.find((e=>e.id===t.source_type_id)),T=b?.name,M=l.filter((e=>e.supported_source_types.includes(T))).filter(P.Z);let w=async(n,i)=>{if(i){if("boolean"!=typeof y[n]){E({type:"addApp",id:n});try{await(0,O.Rj)().unpauseApplication(i),de(n,h,e,l),await h((0,v.il)())}catch(t){ue(h,e,"resume",t)}E({type:"clean",id:n})}}else a((0,I.yS)(I._j.sourcesDetailAddApp.path,t.id).replace(":app_type_id",n))};const k=async(t,a)=>{if("boolean"!=typeof y[a]){E({type:"removeApp",id:a});try{await(0,O.Rj)().pauseApplication(t),((e,t,a,n)=>{const s=n.find((t=>t.id===e))?.display_name;t((0,v.Hz)({title:a.formatMessage({id:"detail.applications.paused.alert.title",defaultMessage:"{appName} connection paused"},{appName:s}),description:a.formatMessage({id:"detail.applications.paused.alert.description",defaultMessage:"Your application will not reflect the most recent data until {appName} connection is resumed"},{appName:s}),variant:"default",customIcon:i().createElement(A(),null)}))})(a,h,e,l),await h((0,v.il)())}catch(t){ue(h,e,"pause",t)}E({type:"clean",id:a})}};return(0,Z.Z)(t)&&(w=async(a,n)=>{if("boolean"!=typeof y[a]){if(E({type:"addApp",id:a}),n)try{await(0,O.Rj)().unpauseApplication(n),de(a,h,e,l),await h((0,v.il)())}catch(t){ue(h,e,"resume",t)}else try{await(0,O.Cu)({source_id:t.id,application_type_id:a}),await h((0,v.il)())}catch(t){ue(h,e,"create",t)}E({type:"clean",id:a})}}),M.length>0?i().createElement(p.Card,{className:"src-c-card-applications pf-v5-u-p-lg pf-v5-u-pl-sm-on-md"},i().createElement(p.CardTitle,null,e.formatMessage({id:"detail.applications.title",defaultMessage:"Applications"})),i().createElement(p.CardBody,null,i().createElement("div",{className:"pf-v5-c-form src-c-applications_form"},M.map((a=>{const s=t.applications.find((e=>e.application_type_id===a.id)),o=Boolean(s),r=Boolean(s?.paused_at),l=!r&&o,p="boolean"==typeof y[a.id]?y[a.id]:l,u=g?i().Fragment:R.Tooltip;return i().createElement(C.FormGroup,{key:a.id},i().createElement("div",{className:"src-c-application_flex"},d?i().createElement(n.Fragment,null,i().createElement(u,{...!g&&{content:(0,te.$)(e,f)}},i().createElement(x.Switch,{className:"src-c-application_switch",id:`app-switch-${a.id}`,label:a.id===re.sC&&c?re.X0:a.display_name,isChecked:p,isDisabled:s?.isDeleting||!g||Boolean(t.paused_at),onChange:(e,t)=>t?w(a.id,s?.id):k(s.id,a.id)})),Boolean(s)&&i().createElement(m.c,{className:"pf-v5-u-ml-sm src-m-clickable",app:s,showStatusText:!0}),(r||o)&&i().createElement(ie,{app:s,removeApp:()=>k(s.id,a.id),addApp:()=>w(a.id,s.id)})):i().createElement(_.Skeleton,{width:"75%"})))}))))):null};var fe=a(15256),ge=a(62345),he=a(63319),ye=a.n(he);const Ee=()=>{const e=(0,o.YB)();return i().createElement(fe.EmptyState,null,i().createElement(fe.EmptyStateIcon,{icon:ye()}),i().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.noapplications.title",defaultMessage:"No connected applications"})),i().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},e.formatMessage({id:"detail.noapplications.description",defaultMessage:"You have not connected any applications to this source. Use the switches above to add applications."})))};var ve=a(2156),be=a.n(ve);const Te=()=>{const e=(0,o.YB)(),t=(0,r.v9)((({user:e})=>e?.isOrgAdmin));return i().createElement(fe.EmptyState,null,i().createElement(fe.EmptyStateIcon,{icon:be()}),i().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.nopermissions.title",defaultMessage:"Missing permissions"})),i().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},(0,te.$)(e,t)))};var Me=a(67187),we=a(67850),Ce=a(35729);const _e=e=>Promise.all([(0,O.Rj)().showSource(e.id),(0,O.Rj)().listSourceEndpoints(e.id),(0,O.ye)(e.id)]).then((async([t,a,n])=>{const i=a&&a.data&&a.data[0],s=n?.sources[0]?.applications||[];let o={source:{...e,...t},applications:s};const r=[];let l;const c=[],p=[];return s.forEach((e=>{e?.authentications?.forEach((t=>{t?.id&&(r.push((0,O.Rj)().showAuthentication(t.id)),c.push(e.id),p.push(t.id))}))})),r.length>0&&(l=await Promise.all(r),c.forEach(((e,t)=>{o.applications.find((t=>t.id===e)).authentications.push(l[t])}))),i?(0,O.Rj)().listEndpointAuthentications(i.id).then((e=>({...o,endpoints:a.data,authentications:e.data.filter((({id:e})=>!p.includes(e)))}))):o}));var xe=a(27361),Re=a.n(xe),ke=a(36968),Ae=a.n(ke),Ne=a(32321);const Se=(e,t)=>({title:e.formatMessage({id:"wizard.pausedApplication",defaultMessage:"{application} is paused"},{application:t}),description:e.formatMessage({id:"wizard.pausedApplicationDescription",defaultMessage:"To resume data collection for this application, switch {application} on in the <b>Applications</b> section of this page."},{application:t,b:Ne.S}),variant:"default",customIcon:i().createElement(A(),null)}),Ie="check-endpoint",De=({endpoints:e,authentications:t,applications:a,...n},i)=>{const s={},o=[...t||[],...a?.reduce(((e,t)=>[...e,...t.authentications]),[])||[]];let r,l;o.length>0&&o.forEach((e=>{s[`a${e.id}`]=e})),e&&e.length>0&&(r=e[0]),r&&(l=r.scheme||r.host||r.path||r.port?(0,m.Fd)(r):void 0);const c={};return a?.length>0&&a.forEach((e=>{e.extra&&Object.keys(e.extra).length>0&&(c[`a${e.id}`]={extra:e.extra})})),{source_type:i,endpoint:r,authentications:s,url:l,...Object.keys(c).length&&{applications:c},...n}},Ze=(e,t)=>!e.includes(t)&&e.push(t);var Oe=a(95290),Pe=a(5454);const Be=async(e,t,a,n,i,s)=>{s({type:"submit",values:e,editing:t});const o=new Date;try{await(0,Oe.yH)(n,((e,t)=>{const a={};return Object.keys(t).filter((e=>t[e])).forEach((t=>{Ae()(a,t,Re()(e,t))})),a})(e,t),e)}catch{return await a((0,v.il)()),void s({type:"submitFailed"})}(0,E.n)(n.source.id);let r={};const l=((e,t)=>{const a=[];return Object.keys(t).forEach((n=>{if(t[n]){const t=n.match(/.a\d+/)?.[0]?.replace(".a","");n.startsWith("applications")&&Ze(a,t),n.startsWith("authentications")&&e.applications.forEach((e=>e.authentications.forEach((({id:n,resource_type:i})=>i&&n===t&&Ze(a,"Application"===i?e.id:`${Ie}-${e.id}`))))),(n.startsWith("url")||n.startsWith("endpoint"))&&e.applications.forEach((e=>e.authentications.forEach((({resource_type:t})=>"Endpoint"===t&&Ze(a,`${Ie}-${e.id}`)))))}})),a.filter(Boolean)})(n,t),c=[];let p;if(l.forEach((e=>{e.includes(Ie)?c.push((0,Pe.h)(n.endpoints[0].id,void 0,void 0,"getEndpoint",o).then((t=>({...t,id:e.replace(`${Ie}-`,"")})))):c.push((0,Pe.h)(e,void 0,void 0,void 0,o))})),c.length>0){try{p=await Promise.all(c)}catch(e){return await a((0,v.il)()),void s({type:"submitFailed"})}p.forEach((({availability_status:e,availability_status_error:t,id:a})=>{e===m.Rl&&(r[a]={title:i.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Application credentials were edited successfully."}),description:t,variant:"success"}),e===m.nZ&&(r[a]={title:i.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit application credentials failed."}),description:t,variant:"danger"}),e&&e!==m.Bj||(r[a]={title:i.formatMessage({id:"wizard.timeoutEditToastTitle",defaultMessage:"Edit in progress"}),description:i.formatMessage({id:"wizard.timeoutEditToastDescription",defaultMessage:"We are still working to confirm your updated credentials. Changes will be reflected in this table when complete."}),variant:"warning"})}))}await a((0,v.il)()),s({type:"submitFinished",messages:r})};var Fe=a(15185),Le=a(96354),je=a(64124),ze=a(58647),Ue=a(50142);const We=e=>e.split(".").pop(),Ge=(e,t,a,n="generic")=>Re()(Ue.Z,[e,"authentication",t,n,a],{}),Ye=(e,t)=>e?.fields?.filter((e=>t&&e.stepKey===t))||[],$e=(e,t,a,n,s)=>{let r=e,l=(r||0===r.length)&&a===re.Qr&&s?.length>0;return l&&(r=[{authtype:"token"}]),r&&0!==r.length&&t.schema&&t.schema.authentication?r.map((e=>{const s=t?.schema?.authentication?.find((({type:t})=>t===e.authtype));if(!s)return[];const r=((e,t,a="generic")=>Re()(Ue.Z,[e,"authentication",t,a,"includeStepKeyFields"],[]))(t.name,e.authtype,a),c=((e,t,a="generic")=>Re()(Ue.Z,[e,"authentication",t,a,"additionalSteps"],[]))(t.name,e.authtype,a)?.map((e=>({...e,fields:[...e.fields,...Ye(s,e.name)]}))).map((({fields:e})=>e.map((({name:e})=>e)))).flatMap((e=>e));return((e,t,a,n)=>e.map((e=>{let s=e.name.startsWith("authentication")?((e,t)=>`authentications.a${t}.${e.replace("authentication.","")}`)(e.name,t):e.name.startsWith("application")?((e,t)=>`applications.a${t}.${e.replace("application.","")}`)(e.name,a):e.name;const r={...e,name:s},l="password"===We(r.name),c="bucket_region"===We(r.name)&&r.label.includes("AWS"),p="external_id"===We(r.name),d="source_ref"===We(r.name);return l&&(r.component="authentication"),c&&(r.loadOptions=()=>(0,ze.j)().then((e=>e.map((e=>({value:e,label:e})))))),p&&(r.hideField=!1,r.label=i().createElement(o._H,{id:"cost.arn.externalId",defaultMessage:"External ID"}),r.component="clipboard-copy",r.isReadOnly=!0),d&&n&&(r.isDisabled=!0,r.helperText="Value cannot be modified since it has been set using the API"),r})))(s.fields.filter((e=>c.includes(e.name)||!c.length&&!e.stepKey||e.stepKey&&r.includes(e.stepKey))).map((n=>({...n,...Ge(t.name,e.authtype,n.name,a)}))),e.id,n,l)})):[]},He=(e,t)=>Re()(Ue.Z,[e,"endpoint",t],{});var Ke=a(48880),Ve=a(10431);const qe=({name:e})=>{const t=(0,Ke.default)(),{variant:a,title:n,description:s,customIcon:o}=Re()(t.getState().values,e);return i().createElement(Ve.Alert,{variant:a,isInline:!0,title:n,customIcon:o},s)};qe.propTypes={name:c().string.isRequired};const Xe=qe;var Qe=a(85333),Je=a.n(Qe);const et=({applicationName:e,message:t,Icon:a})=>{const n=(0,o.YB)();return i().createElement(Me.Bullseye,null,i().createElement(fe.EmptyState,{variant:fe.EmptyStateVariant.small},i().createElement(fe.EmptyStateIcon,{icon:a}),i().createElement(ge.Title,{headingLevel:"h2",size:"lg"},n.formatMessage({id:"resourceTable.emptyStateTitle",defaultMessage:"No application resources"})),i().createElement(fe.EmptyStateBody,null,n.formatMessage(t,{applicationName:e}))))};et.propTypes={applicationName:c().string.isRequired,message:c().shape({id:c().string.isRequired,defaultMessage:c().string.isRequired}),Icon:c().elementType},et.defaultProps={message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will appear here when created."},Icon:Je()};const tt=et,at=(e,t,a,n,i)=>[{component:Le.Z.TABS,name:"app-tabs",isBox:!0,fields:[...e.map((e=>{const s=a.find((({id:t})=>t===e.application_type_id));let o=((e,t,a,n)=>[{name:`messages.${a.id}`,component:"description",Content:Xe,condition:{when:({name:e})=>e,isNotEmpty:!0}},...$e(a.authentications?.filter((e=>Object.keys(e).length>1)),t,e?.name,a.id,n)])(s,t,e,i);if(e.authentications.find((({resource_type:e})=>"Endpoint"===e))){const e=(e=>{if(!e.schema||!e.schema.endpoint||e.schema.endpoint.hidden)return;const t=e.schema.endpoint.fields.map((t=>({...t,...He(e.name,t.name)}))),a={component:Le.Z.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){const e=t.find((({name:e})=>"url"===e));return{...a,fields:[{component:Le.Z.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[{...e,isRequired:!1,validate:e?.validate?.filter((e=>e.type!==je.Z.REQUIRED))}]},{component:Le.Z.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]}}return{...a,fields:t}})(t);o=[o[0],[...o[1]||[],...e?[e]:[]]]}return 1===o.length?o.push({component:"description",name:"no-credentials",Content:tt,message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will be added here when created."},applicationName:s?.display_name,Icon:ye()}):e.paused_at&&(o=[o[0],o[1].map((e=>({...e,isDisabled:!0})))]),{name:s?.id,title:s?.id===re.sC&&n?re.X0:s?.display_name,fields:o}}))]}],nt=(e,t,a,n,i)=>({description:n.formatMessage({id:"sources.editFormDescripiton",defaultMessage:"Use the form fields to edit application credentials."}),fields:at(e.applications,t,a,i,e?.source?.source_ref)}),it={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,submitMessages:void 0},st=(e,{type:t,source:a,sourceType:n,appTypes:i,intl:s,values:o,editing:r,messages:l,hcsEnrolled:c})=>{switch(t){case"createForm":return{...e,sourceType:n,initialValues:De(e.source,n.product_name),schema:nt(e.source,n,i,s,c),loading:!1};case"setSource":return{...e,messages:{...l,...e.submitMessages},source:a,initialLoad:!1,submitMessages:void 0};case"submit":return{...e,isSubmitting:!0,submitError:!1,values:o,editing:r};case"submitFinished":return{...e,isSubmitting:!1,source:a,submitMessages:l};case"submitFailed":return{...e,isSubmitting:!1,submitError:!0,messages:void 0};case"sourceChanged":return{...e,initialLoad:!0,loading:!0};default:return e}};var ot=a(26946);const rt=()=>{const e=(0,o.YB)();return i().createElement(ot.Z,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})})};var lt=a(82793),ct=a(27552);const pt=({onRetry:e})=>{const t=(0,o.YB)();return i().createElement(ct.Z,{onClose:e,customText:t.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:i().createElement(lt.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},t.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:t.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})})};pt.propTypes={onRetry:c().func.isRequired};const dt=pt;var ut=a(58706),mt=a(81169);ut.ClipboardCopy.propTypes={label:c().string};const ft=e=>{const{label:t,input:a}=(0,mt.Z)(e);return i().createElement(C.FormGroup,{label:t},i().createElement(ut.ClipboardCopy,{label:t,isReadOnly:!0},a.value))},gt=()=>{const[e,t]=(0,n.useReducer)(st,it),a=(0,u.L)(),s=(0,Fe.W)(),{loading:l,editing:c,source:p,initialValues:d,schema:f,isSubmitting:g,initialLoad:h,message:E,messages:v,submitError:b,values:T}=e,M=(0,o.YB)(),{sourceTypes:w,appTypes:C,sourceTypesLoaded:_,appTypesLoaded:x}=(0,r.v9)((({sources:e})=>e),r.wU),R=(0,r.v9)((({sources:e})=>e.hcsEnrolled),r.wU),k=(0,r.v9)((({sources:e})=>e.hcsEnrolledLoaded),r.wU),A=(0,r.I0)();(0,n.useEffect)((()=>{h||t({type:"sourceChanged"})}),[a,a?.applications?.length]),(0,n.useEffect)((()=>{a&&h&&x&&_e(a).then((e=>{const a=((e,t,a)=>{const n={};return e.applications.forEach((({id:e,application_type_id:i,availability_status_error:s,availability_status:o,paused_at:r})=>{if(r){const s=a.find((e=>e.id===i))?.display_name||e;n[e]=Se(t,s)}else o===m.nZ&&(n[e]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:s,variant:"danger"})})),e.endpoints?.[0]?.availability_status_error&&e.applications.map((e=>e.authentications.find((({resource_type:t})=>!e.paused_at&&"Endpoint"===t))?e.id:void 0)).filter(Boolean).forEach((a=>{n[a]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:e.endpoints?.[0]?.availability_status_error,variant:"danger"}})),n})(e,M,C);t({type:"setSource",source:e,messages:a})}))}),[a,s,x,h]),(0,n.useEffect)((()=>{if(p&&x&&_){const e=w.find((({id:e})=>e===p.source.source_type_id));t({type:"createForm",sourceType:e,source:p,appTypes:C,hcsEnrolled:R,intl:M})}}),[x,p,_,k]);const N=!k||!x||!_||l;if(b)return i().createElement(dt,{onRetry:()=>Be(T,c,A,p,M,t)});if(g)return i().createElement(rt,null);if(N)return i().createElement(Me.Bullseye,{className:"pf-v5-u-m-2xl"},i().createElement(y.Spinner,null));const S=p.source.paused_at||p.applications.every((({paused_at:e})=>e));return i().createElement(Ce.Z,{schema:f,onSubmit:(e,a)=>Be(e,a.getState().dirtyFields,A,p,M,t),FormTemplate:e=>i().createElement(we.ZP,{canReset:!0,showFormControls:!S,submitLabel:"Save changes",disableSubmit:["pristine","invalid"],...e}),clearedValue:null,initialValues:{...d,...!a.paused_at&&{message:E},...!a.paused_at&&{messages:v}},componentMapper:{"clipboard-copy":ft}})},ht=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,D.E)();return i().createElement(p.Card,{className:"card pf-v5-u-m-lg pf-v5-u-mt-0"},i().createElement(p.CardTitle,null,e.formatMessage({id:"detail.resources.title",defaultMessage:"Manage connected applications"})),i().createElement(p.CardBody,null,!a&&i().createElement(Te,null),a&&0===t.applications.length&&i().createElement(Ee,null),a&&t.applications.length>0&&i().createElement(gt,null)))};var yt=a(40423),Et=a(63663),vt=a(63456),bt=a(83233),Tt=a(92863);const Mt=()=>{const e=(0,o.YB)(),t=(0,u.L)();return i().createElement(Tt.Breadcrumb,null,i().createElement(Tt.BreadcrumbItem,{component:({href:e,...t})=>i().createElement(ae.Z,{to:e,...t}),to:I._j.sources.path},e.formatMessage({id:"sources.sources",defaultMessage:"Integrations"})),i().createElement(Tt.BreadcrumbItem,{isActive:!0},t.name))},wt=()=>{const[e,t]=(0,n.useState)(!1),a=(0,o.YB)(),s=(0,u.L)(),l=(0,D.E)(),c=(0,r.I0)(),p=(0,r.v9)((({user:e})=>e.isOrgAdmin)),d=e=>()=>{t(!1),e()},m=a.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused integration."}),f=(0,te.Z)(a,p),g={...f,tooltip:m,tooltipProps:{...f.tooltipProps,content:m}};return i().createElement(V,{toggle:i().createElement(ee,{onToggle:()=>t(!e),id:"toggle-id-6"}),isOpen:e,isPlain:!0,position:"right",dropdownItems:[s.paused_at?i().createElement(z,{...!l&&f,key:"unpause",onClick:d((()=>c((0,v.AX)(s.id,s.name,a)))),description:a.formatMessage({id:"detail.resume.description",defaultMessage:"Unpause data collection for this integration"})},a.formatMessage({id:"detail.resume.button",defaultMessage:"Resume"})):i().createElement(z,{...!l&&f,key:"pause",onClick:d((()=>c((0,v.xz)(s.id,s.name,a)))),description:a.formatMessage({id:"detail.pause.description",defaultMessage:"Temporarily disable data collection"})},a.formatMessage({id:"detail.pause.button",defaultMessage:"Pause"})),i().createElement(z,{...!l&&f,key:"remove",to:(0,I.yS)(I._j.sourcesDetailRemove.path,s.id),component:ae.Z,description:a.formatMessage({id:"detail.remove.description",defaultMessage:"Permanently delete this integration and all collected data"})},a.formatMessage({id:"detail.remove.button",defaultMessage:"Remove"})),i().createElement(z,{...!l&&f,...s.paused_at&&g,key:"rename",to:(0,I.yS)(I._j.sourcesDetailRename.path,s.id),component:ae.Z},a.formatMessage({id:"detail.rename.button",defaultMessage:"Rename"}))]})},Ct=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,r.v9)((({sources:e})=>e.appTypes),r.wU),n=(0,r.v9)((({sources:e})=>e.sourceTypes),r.wU);return i().createElement(vt.Z,null,i().createElement(Mt,null),i().createElement(bt.Flex,{className:"pf-v5-u-mb-sm"},i().createElement(bt.FlexItem,null,i().createElement(ge.Title,{headingLevel:"h1",size:"2xl"},t.name)),i().createElement(bt.FlexItem,null,(0,m.BN)(void 0,t,{appTypes:a,sourceTypes:n})),i().createElement(bt.FlexItem,{align:{default:"alignRight"}},i().createElement(wt,null))),i().createElement(lt.TextContent,null,i().createElement(lt.Text,null,e.formatMessage({id:"detail.description",defaultMessage:"View details and manage connections for this integration."}))))};var _t=a(21081),xt=a(49004),Rt=a(34844),kt=a(76678);const At=e=>[{title:e.formatMessage({id:"resourceTable.resourceType",defaultMessage:"Resource type"}),props:{"aria-label":"Resource type"}},{title:e.formatMessage({id:"resourceTable.resourceValue",defaultMessage:"Value"}),props:{"aria-label":"Resource value"}}],Nt=(e,t,a)=>e.applications.reduce(((n,s)=>{const o=t.find((({id:e})=>e===s.application_type_id)),r=(l=$e(s.authentications?.filter((e=>Object.keys(e).length>1)),a,o?.name,s.id),c=De(e,a.product_name),l.flatMap((e=>e)).map((e=>!e.hideField&&[i().createElement(i().Fragment,{key:"label"},e.label),Re()(c,e.name)])).filter(Boolean));var l,c;return{...n,[s.id]:r}}),{}),St=(e,{type:t,intl:a,source:n,activeTab:i,appTypes:s,sourceType:o})=>{switch(t){case"loaded":return{...e,columns:At(a),applicationsRows:Nt(n,s,o),loading:!1,activeTab:n.applications[0].id};case"switchTab":return{...e,activeTab:i};case"setLoading":return{...e,loading:!0};default:return e}},It=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,Fe.W)(),{sourceTypes:s,appTypes:l,sourceTypesLoaded:c,appTypesLoaded:d}=(0,r.v9)((({sources:e})=>e),r.wU),[{activeTab:m,loading:f,columns:g,applicationsRows:h},E]=(0,n.useReducer)(St,(e=>({loading:Boolean(e.applications?.length),columns:[],applicationsRows:{},activeTab:0}))(t));return(0,n.useEffect)((()=>{t&&a&&d&&c&&t?.applications?.length&&(E({type:"setLoading"}),_e(t).then((t=>{const a=s.find((({id:e})=>e===t.source.source_type_id));E({type:"loaded",source:t,intl:e,sourceType:a,appTypes:l})})))}),[t?.applications?.length,a,d,c]),i().createElement(p.Card,{className:"pf-v5-u-m-lg pf-v5-u-mt-0"},i().createElement(p.CardTitle,null,e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"})),i().createElement(p.CardBody,null,f&&i().createElement(Me.Bullseye,{className:"pf-v5-u-m-2xl"},i().createElement(y.Spinner,null)),!f&&!t.applications.length&&i().createElement(Ee,null),!f&&t.applications.length>0&&i().createElement(i().Fragment,null,i().createElement(lt.Text,{className:"pf-v5-u-mb-md"},e.formatMessage({id:"resourceTable.description",defaultMessage:"View resources for your connected applications."})),i().createElement(kt.Tabs,{isBox:!0,activeKey:m,onSelect:(e,t)=>E({type:"switchTab",activeTab:t})},t.applications.map((a=>{const n=l.find((({id:e})=>e===a.application_type_id))?.display_name||a.application_type_id,{description:s,...o}=a.paused_at?Se(e,n):{};return i().createElement(kt.Tab,{eventKey:a.id,key:a.id,title:i().createElement(kt.TabTitleText,null,n)},a.paused_at&&!t.paused_at&&i().createElement(Ve.Alert,{isInline:!0,className:"pf-v5-u-mt-lg",...o},s),h[a.id]?.length?i().createElement(_t.i,{"aria-label":e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"}),variant:"compact",cells:g,rows:h[a.id],className:"pf-v5-u-mt-md"},i().createElement(xt.x,null),i().createElement(Rt.R,null)):i().createElement(tt,{applicationName:n}))}))))))},Dt=()=>{const e=(0,o.YB)(),t=(0,D.E)(),a=(0,r.I0)(),n=(0,u.L)(),l=(0,r.v9)((({user:e})=>e.isOrgAdmin));return i().createElement(s.GridItem,{md:12,className:"pf-v5-u-m-lg pf-v5-u-mb-0"},i().createElement(Ve.Alert,{customIcon:i().createElement(A(),null),variant:"default",isInline:!0,title:e.formatMessage({id:"source.detail.pausedTitle",defaultMessage:"Integration paused"}),actionLinks:t?i().createElement(Ve.AlertActionLink,{onClick:()=>a((0,v.AX)(n.id,n.name,e))},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})):i().createElement(R.Tooltip,{content:(0,te.$)(e,l)},i().createElement(Ve.AlertActionLink,{isDisabled:!0},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})))},e.formatMessage({id:"source.detail.pausedDescription",defaultMessage:"No data is being collected for this integration. Turn the integration back on to reestablish connection and data collection. Previous credentials will be restored and application connections will continue as seen on this page."})))};var Zt=a(48947);const Ot=()=>{const e=(0,u.L)();if(!e)return i().createElement(i().Fragment,null,i().createElement(Et.X6,null),i().createElement(yt.Z,null));const t=(0,Z.Z)(e);return i().createElement("div",{className:"src-c-detail-page"},i().createElement(n.Suspense,{fallback:null},i().createElement(Zt.Outlet,{context:{backPath:(0,I.yS)(I._j.sourcesDetail.path,e.id)}})),i().createElement(Ct,null),e.paused_at&&i().createElement(Dt,null),i().createElement(s.Grid,null,i().createElement(s.GridItem,{md:"6"},i().createElement(w,null)),i().createElement(s.GridItem,{md:"6"},i().createElement(me,null)),i().createElement(s.GridItem,{md:"12"},t?i().createElement(It,null):i().createElement(ht,null))))}},12567:(e,t,a)=>{"use strict";a.d(t,{W:()=>i,Z:()=>s});var n=a(75614);const i=(e,t)=>({supported_source_types:a})=>a.find((a=>e.find((({name:e})=>a===e))?.category===t)),s=e=>e.name!==n.M$&&e.name!==n.Qk},70642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(64072);const i=e=>e?.app_creation_workflow===n.b},58392:()=>{},8572:()=>{},98379:()=>{},91993:()=>{},44690:()=>{},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/sourceDetail.24a67617b00f0fc5042e7764796336e9.js.map