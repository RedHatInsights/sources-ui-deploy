(self.webpackChunksources=self.webpackChunksources||[]).push([[6818],{66042:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n}),a(87234);const n={bullseye:"pf-v5-l-bullseye"}},85490:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,n:()=>s});var n=a(90573);const s=e=>(0,n.Rj)().checkAvailabilitySource(e).catch((()=>{})),i=s},95290:(e,t,a)=>{"use strict";a.d(t,{K_:()=>i,yH:()=>o});var n=a(63367),s=a(90573);const i=e=>e.url||null===e.url?(e=>{if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{const t=new URL(e),a=t.protocol.replace(/:$/,"");return{scheme:a,host:t.hostname,port:""===t.port?(0,n.bF)(a):t.port,path:t.pathname}}catch(e){return{}}})(e.url):e.endpoint?e.endpoint:e,o=(e,t,a)=>{const n=[];if(t.source&&n.push((0,s.Rj)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){const{scheme:a,host:o,port:l,path:r}=i(t),c=null===l?null:parseInt(l,10),d={scheme:a,host:o,path:r,port:null===c?null:isNaN(c)?void 0:c,...t.endpoint};n.push((0,s.Rj)().updateEndpoint(e.endpoints[0].id,d))}return t.authentications&&Object.keys(t.authentications).forEach((e=>{const a=e.replace("a","");n.push((0,s.Rj)().updateAuthentication(a,t.authentications[e]))})),t.applications&&Object.keys(t.applications).forEach((e=>{const t=e.replace("a","");n.push((0,s.Rj)().updateApplication(t,{extra:a.applications[e].extra}))})),Promise.all(n)}},5454:(e,t,a)=>{"use strict";a.d(t,{h:()=>s});var n=a(90573);const s=(e,t=1e4,a=1e3,s="showApplication",i)=>new Promise(((o,l)=>{const r=Date.now(),c=()=>(0,n.Rj)()[s](e).then((e=>{if(Date.now()-r>=t)return i?{...e,availability_status:null,availability_status_error:null}:e;if("available"===e.availability_status||"unavailable"===e.availability_status){if(i&&new Date(e.last_checked_at||e.updated_at)>i)return e;if(!i)return e}return((e,t)=>new Promise((t=>{setTimeout(t.bind(null,undefined),e)})))(a).then((()=>c()))}));return c().then((e=>o(e))).catch((e=>l(e)))}))},27552:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a(66029),s=a.n(n),i=a(45697),o=a.n(i),l=a(25387),r=a(67187),c=a(46665),d=a(15256),p=a(62345),u=a(57945),m=a.n(u);const f=({onClose:e,returnButtonTitle:t,message:a,title:n,customText:i,primaryAction:o,secondaryActions:l,Component:c})=>s().createElement(r.Bullseye,null,s().createElement(d.EmptyState,{variant:d.EmptyStateVariant.full,className:"pf-v5-u-mt-4xl"},s().createElement(d.EmptyStateIcon,{icon:m(),color:"var(--pf-v5-global--danger-color--100)",className:"pf-v5-u-mb-0"}),s().createElement(p.Title,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-xl"},n),s().createElement(d.EmptyStateBody,{className:"src-c-wizard--step-text"},a||i),s().createElement(c,{variant:"primary",onClick:o||e},t),l&&s().createElement(d.EmptyStateActions,{className:"pf-v5-u-mt-sm"},l)));f.propTypes={onClose:o().func.isRequired,returnButtonTitle:o().node,message:o().node,title:o().node,customText:o().node,primaryAction:o().func,secondaryActions:o().node,Component:o().elementType},f.defaultProps={title:s().createElement(l._H,{id:"wizard.unsuccConfiguration",defaultMessage:"Something went wrong"}),customText:s().createElement(l._H,{id:"wizard.errorText",defaultMessage:"There was a problem while trying to add your source. Please try again. If the error persists, open a support case."}),Component:c.Button};const g=f},26946:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a(66029),s=a.n(n),i=a(45697),o=a.n(i),l=a(25387),r=a(67187),c=a(46665),d=a(15256),p=a(54602),u=a(62345);const m=({onClose:e,customText:t,cancelTitle:a,description:n})=>s().createElement(r.Bullseye,null,s().createElement(d.EmptyState,{variant:d.EmptyStateVariant.full,className:"pf-v5-u-mt-4xl"},s().createElement(d.EmptyStateIcon,{icon:p.Spinner,className:"pf-v5-u-mb-0"}),s().createElement(u.Title,{headingLevel:"h2",size:"xl",className:"pf-v5-u-mt-xl"},t),n&&s().createElement(d.EmptyStateBody,{className:"src-c-wizard--step-text"},n),e&&s().createElement(d.EmptyStateActions,{className:"pf-v5-u-mt-xl"},s().createElement(c.Button,{variant:"link",onClick:e},a))));m.propTypes={onClose:o().func,customText:o().node,cancelTitle:o().node,description:o().node},m.defaultProps={customText:s().createElement(l._H,{id:"wizard.loadingText",defaultMessage:"Loading, please wait."}),cancelTitle:s().createElement(l._H,{id:"wizard.cancelText",defaultMessage:"Cancel"})};const f=m},84414:(e,t,a)=>{"use strict";a.d(t,{a:()=>i});var n=a(48947),s=a(78116);const i=()=>{const e=(0,n.useNavigate)();return(t,a)=>e((0,s.n)(t,s.d),a)}},57564:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ot});var n=a(66029),s=a.n(n),i=a(5521),o=a(25387),l=a(86706),r=a(45697),c=a.n(r),d=a(2387),p=a(88131),u=a(97979),m=a(63367),f=a(23962),g=a.n(f),h=a(46665),y=a(54602),E=a(85490),b=a(31665);const v=({setCheckPending:e})=>{const t=(0,u.L)(),a=(0,o.YB)(),i=(0,l.I0)(),[r,c]=(0,n.useState)(!1);return s().createElement(h.Button,{variant:"plain","aria-label":a.formatMessage({id:"sources.checkavailability",defaultMessage:"Check integration availability"}),onClick:async()=>{e&&e(),c(!0),await(0,E.Z)(t.id),c(!1),i((0,b.Hz)({title:a.formatMessage({id:"sources.checkavailability.notificationTitle",defaultMessage:"Request to check integration status was sent"}),variant:"info",description:a.formatMessage({id:"sources.checkavailability.notificationDescription",defaultMessage:"Check this page later for updates"})}))},isDisabled:r},!r&&s().createElement(g(),{"data-testid":"RedoIcon"}),r&&s().createElement(y.Spinner,{size:"md"}))};v.propTypes={setCheckPending:c().func};const T=v,M=({term:e,description:t})=>s().createElement(p.DescriptionListGroup,null,s().createElement(p.DescriptionListTerm,null,e),s().createElement(p.DescriptionListDescription,null,t));M.propTypes={term:c().node,description:c().node};const C=()=>{const e=(0,l.I0)(),t=(0,o.YB)(),a=(0,u.L)(),n=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU),i=n.find((e=>e.id===a.source_type_id));let r;if("amazon"===i?.name){const e=a.authentications?.find((({authtype:e})=>e.includes("arn")));e?.username&&(r=e.username.match(/:\d+/)?.[0]?.replace(/:/g,""))}return s().createElement(d.Card,{className:"pf-m-selectable pf-m-selected src-c-card-summary pf-v5-u-m-lg pf-v5-u-mr-sm-on-md"},s().createElement(d.CardTitle,null,t.formatMessage({id:"detail.summary.title",defaultMessage:"Integration summary"})),s().createElement(d.CardBody,null,s().createElement(p.DescriptionList,{columnModifier:{default:"2Col"}},s().createElement(M,{term:t.formatMessage({id:"detail.summary.type",defaultMessage:"Integration type"}),description:(0,m.P5)(a.source_type_id,void 0,{sourceTypes:n})}),s().createElement(M,{term:t.formatMessage({id:"detail.summary.lastChecked",defaultMessage:"Last availability check"}),description:s().createElement(s().Fragment,null,a.isCheckPending||!a.last_checked_at&&!a.last_available_at?t.formatMessage({id:"detail.summary.waitingForUpdate",defaultMessage:"Waiting for update"}):(0,m.vh)(a.last_checked_at||a.last_available_at),s().createElement(T,{setCheckPending:()=>e((0,b.mE)(a.id))}))}),s().createElement(M,{term:t.formatMessage({id:"detail.summary.dateAdded",defaultMessage:"Date added"}),description:(0,m.vh)(a.created_at)}),s().createElement(M,{term:t.formatMessage({id:"detail.summary.lastModified",defaultMessage:"Last modified"}),description:(0,m.vh)(a.updated_at)}),a.app_creation_workflow&&s().createElement(M,{term:t.formatMessage({id:"detail.summary.configurationMode",defaultMessage:"Configuration mode"}),description:(0,m.Z3)(a.app_creation_workflow,a,{intl:t,sourceType:i})}),r&&s().createElement(M,{term:t.formatMessage({id:"detail.summary.awsAccountNumber",defaultMessage:"AWS account number"}),description:r}))))};var w=a(88431),_=a(81023),R=a(86253),k=a(42309),A=a(89572),x=a.n(A),N=a(96758),S=a.n(N),I=a(87281),D=a(82866),Z=a(70642),O=a(90573),B=a(12567),P=a(65353),F=a(12744),L=a(41435),j=a(62472);const z=e=>{var{children:t,className:a,component:s="a",isDisabled:i=!1,isAriaDisabled:o=!1,isPlainText:l=!1,href:r,tooltip:c,tooltipProps:d={},listItemClassName:p,onClick:u,ref:m,additionalChild:f,customChild:g,tabIndex:h=-1,icon:y=null,autoFocus:E,description:b=null,styleChildren:v,ouiaId:T,ouiaSafe:M}=e,C=(0,P.__rest)(e,["children","className","component","isDisabled","isAriaDisabled","isPlainText","href","tooltip","tooltipProps","listItemClassName","onClick","ref","additionalChild","customChild","tabIndex","icon","autoFocus","description","styleChildren","ouiaId","ouiaSafe"]);const w=(0,j.useOUIAProps)(z.displayName,T,M);return n.createElement(L.e4.Consumer,null,(e=>n.createElement(F.n,Object.assign({context:e,role:"menuitem",tabIndex:h,className:a,component:s,isDisabled:i,isAriaDisabled:o,isPlainText:l,href:r,tooltip:c,tooltipProps:d,listItemClassName:p,onClick:u,additionalChild:f,customChild:g,icon:y,autoFocus:E,styleChildren:v,description:b},w,C),t)))};z.displayName="DropdownItem";var U=a(73699),W=a(38296),G=a(37704),Y=a(80164);class $ extends n.Component{constructor(){super(...arguments),this.refsCollection=[],this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onKeyDown)},this.onKeyDown=e=>{if(!this.props.isOpen||!Array.from(document.activeElement.classList).find((e=>$.validToggleClasses.concat(this.context.toggleClass).includes(e))))return;const t=this.refsCollection;if("ArrowDown"===e.key){const a=t.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled")));$.focusFirstRef(a),e.stopPropagation()}else if("ArrowUp"===e.key){const a=t.length,n=t.slice(a-1,a),s=n&&n[0];$.focusFirstRef(s),e.stopPropagation()}},this.childKeyHandler=(e,t,a,s=!1)=>{(0,Y.qG)(e,t,a,this.refsCollection,this.props.isGrouped?this.refsCollection:n.Children.toArray(this.props.children),s)},this.sendRef=(e,t,a,n)=>{this.refsCollection[e]=[],t.map(((t,a)=>{t?t.getAttribute?this.refsCollection[e][a]=n?null:t:this.refsCollection[e][a]=G.findDOMNode(t):this.refsCollection[e][a]=null}))}}componentDidMount(){document.addEventListener("keydown",this.onKeyDown);const{autoFocus:e}=this.props;if(e){const e=this.refsCollection.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled"))),t=e&&e[0];t&&t.focus&&setTimeout((()=>t.focus()))}}shouldComponentUpdate(){return this.refsCollection=[],!0}extendChildren(){const{children:e,isGrouped:t}=this.props;if(t){let t=0;return n.Children.map(e,(e=>{const a=e,s={};return a.props&&a.props.children&&(Array.isArray(a.props.children)?s.children=n.Children.map(a.props.children,(e=>n.cloneElement(e,{index:t++}))):s.children=n.cloneElement(a.props.children,{index:t++})),n.cloneElement(a,s)}))}return n.Children.map(e,((e,t)=>n.cloneElement(e,{index:t})))}render(){const e=this.props,{className:t,isOpen:a,position:s,children:i,component:o,isGrouped:l,setMenuComponentRef:r,alignments:c}=e,d=(0,P.__rest)(e,["className","isOpen","position","children","component","isGrouped","setMenuComponentRef","alignments"]);return n.createElement(L.e4.Provider,{value:{keyHandler:this.childKeyHandler,sendRef:this.sendRef}},"div"===o?n.createElement(L.Dl.Consumer,null,(({onSelect:e,menuClass:o})=>n.createElement("div",{className:(0,W.i)(o,s===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,onClick:t=>e&&e(t),ref:r},i))):l&&n.createElement(L.Dl.Consumer,null,(({menuClass:e,menuComponent:i})=>{const o=i||"div";return n.createElement(o,Object.assign({},d,{className:(0,W.i)(e,s===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:r}),this.extendChildren())}))||n.createElement(L.Dl.Consumer,null,(({menuClass:e,menuComponent:i})=>{const l=i||o;return n.createElement(l,Object.assign({},d,{className:(0,W.i)(e,s===L.ir.right&&U.Z.modifiers.alignRight,(0,Y.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:r}),this.extendChildren())})))}}$.displayName="DropdownMenu",$.defaultProps={className:"",isOpen:!0,autoFocus:!0,position:L.ir.left,component:"ul",isGrouped:!1,setMenuComponentRef:null},$.validToggleClasses=[U.Z.dropdownToggle,U.Z.dropdownToggleButton],$.focusFirstRef=e=>{e&&e[0]&&e[0].focus&&setTimeout((()=>e[0].focus()))},$.contextType=L.Dl;var H=a(69121);class K extends n.Component{constructor(e){super(e),this.openedOnEnter=!1,this.baseComponentRef=n.createRef(),this.menuComponentRef=n.createRef(),this.onEnter=()=>{this.openedOnEnter=!0},this.setMenuComponentRef=e=>{this.menuComponentRef=e},this.getMenuComponentRef=()=>this.menuComponentRef,e.dropdownItems&&e.dropdownItems.length>0&&e.children&&console.error("Children and dropdownItems props have been provided. Only the dropdownItems prop items will be rendered")}componentDidUpdate(){this.props.isOpen||(this.openedOnEnter=!1)}render(){const e=this.props,{children:t,className:a,direction:s,dropdownItems:i,isOpen:o,isPlain:l,isText:r,isGrouped:c,isFullHeight:d,onSelect:p,position:u,toggle:m,autoFocus:f,minWidth:g,menuAppendTo:h,isFlipEnabled:y,zIndex:E}=e,b=(0,P.__rest)(e,["children","className","direction","dropdownItems","isOpen","isPlain","isText","isGrouped","isFullHeight","onSelect","position","toggle","autoFocus","minWidth","menuAppendTo","isFlipEnabled","zIndex"]),v=m.props.id||"pf-dropdown-toggle-id-"+K.currentId++;let T,M,C=!1;i&&i.length>0?(T="ul",M=i,C=!0):(T="div",M=n.Children.toArray(t));const w=n.createRef(),_=this.openedOnEnter,R=y&&"inline"!==h;return n.createElement(L.Dl.Consumer,null,(({baseClass:e,baseComponent:t,id:i,ouiaId:p,ouiaComponentType:y,ouiaSafe:k,alignments:A})=>{const x=t,N=n.createElement($,{className:(0,W.i)(R&&U.Z.modifiers.static),setMenuComponentRef:this.setMenuComponentRef,component:T,isOpen:o,position:u,"aria-labelledby":i?`${i}-toggle`:v,isGrouped:c,autoFocus:_&&f,alignments:A},M),S=n.createElement("div",{className:(0,W.i)(e,s===L.dw.up&&U.Z.modifiers.top,u===L.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,a),ref:w},o&&N),I=n.createElement(x,Object.assign({},b,{className:(0,W.i)(e,s===L.dw.up&&U.Z.modifiers.top,u===L.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,d&&U.Z.modifiers.fullHeight,a),ref:this.baseComponentRef},(0,j.getOUIAProps)(y,p,k)),n.Children.map(m,(e=>n.cloneElement(e,{parentRef:this.baseComponentRef,getMenuRef:this.getMenuComponentRef,isOpen:o,id:v,isPlain:l,isText:r,"aria-haspopup":C,onEnter:()=>{this.onEnter(),e.props.onEnter&&e.props.onEnter()}}))),"inline"===h&&o&&N);return"inline"===h?I:n.createElement(H.Popper,{trigger:I,triggerRef:this.baseComponentRef,popper:S,popperRef:w,direction:s,position:u,appendTo:"parent"===h?(()=>this.baseComponentRef&&this.baseComponentRef.current?this.baseComponentRef.current.parentElement:null)():h,isVisible:o,zIndex:E,minWidth:void 0!==g?g:"revert"})}))}}K.displayName="DropdownWithContext",K.currentId=0,K.defaultProps={className:"",dropdownItems:[],isOpen:!1,isPlain:!1,isText:!1,isGrouped:!1,position:L.ir.left,direction:L.dw.down,onSelect:()=>{},autoFocus:!0,menuAppendTo:"inline",isFlipEnabled:!0};const V=e=>{var{onSelect:t,ref:a,ouiaId:s,ouiaSafe:i,alignments:o,contextProps:l,minWidth:r,menuAppendTo:c="inline",isFlipEnabled:d=!0,zIndex:p=9999}=e,u=(0,P.__rest)(e,["onSelect","ref","ouiaId","ouiaSafe","alignments","contextProps","minWidth","menuAppendTo","isFlipEnabled","zIndex"]);return n.createElement(L.Dl.Provider,{value:Object.assign({onSelect:e=>t&&t(e),toggleTextClass:U.Z.dropdownToggleText,toggleIconClass:U.Z.dropdownToggleImage,toggleIndicatorClass:U.Z.dropdownToggleIcon,menuClass:U.Z.dropdownMenu,itemClass:U.Z.dropdownMenuItem,toggleClass:U.Z.dropdownToggle,baseClass:U.Z.dropdown,baseComponent:"div",sectionClass:U.Z.dropdownGroup,sectionTitleClass:U.Z.dropdownGroupTitle,sectionComponent:"section",disabledClass:U.Z.modifiers.disabled,plainTextClass:U.Z.modifiers.text,ouiaId:(0,j.useOUIAId)(V.displayName,s),ouiaSafe:i,ouiaComponentType:V.displayName,alignments:o},l)},n.createElement(K,Object.assign({menuAppendTo:c,isFlipEnabled:d,zIndex:p,minWidth:r},u)))};V.displayName="Dropdown";var q=a(62165),X=a(1774);const Q={default:"",primary:U.Z.modifiers.primary,secondary:U.Z.modifiers.secondary};class J extends n.Component{constructor(){super(...arguments),this.buttonRef=n.createRef(),this.componentDidMount=()=>{document.addEventListener("click",this.onDocClick),document.addEventListener("touchstart",this.onDocClick),document.addEventListener("keydown",this.onEscPress)},this.componentWillUnmount=()=>{document.removeEventListener("click",this.onDocClick),document.removeEventListener("touchstart",this.onDocClick),document.removeEventListener("keydown",this.onEscPress)},this.onDocClick=e=>{const{isOpen:t,parentRef:a,onToggle:n,getMenuRef:s}=this.props,i=s&&s(),o=a&&a.current&&a.current.contains(e.target),l=i&&i.contains&&i.contains(e.target);!t||o||l||null==n||n(e,!1)},this.onEscPress=e=>{var t,a,n;const{parentRef:s,getMenuRef:i}=this.props,o=i&&i(),l=s&&s.current&&s.current.contains(e.target),r=o&&o.contains&&o.contains(e.target);!this.props.isOpen||e.key!==X.yu.Escape&&"Tab"!==e.key||!l&&!r||(null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!1),null===(n=this.buttonRef.current)||void 0===n||n.focus())},this.onKeyDown=e=>{var t,a,n,s,i,o;("Tab"!==e.key||this.props.isOpen)&&("Tab"!==e.key&&"Enter"!==e.key&&" "!==e.key||!this.props.isOpen?"Enter"!==e.key&&" "!==e.key||this.props.isOpen||(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(s=(n=this.props).onToggle)||void 0===s||s.call(n,e,!this.props.isOpen),null===(o=(i=this.props).onEnter)||void 0===o||o.call(i)):(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!this.props.isOpen)))}}render(){const e=this.props,{className:t,children:a,isOpen:s,isDisabled:i,isPlain:o,isText:l,isSplitButton:r,toggleVariant:c,onToggle:d,"aria-haspopup":p,isActive:u,bubbleEvent:m,onEnter:f,parentRef:g,getMenuRef:h,id:y,type:E}=e,b=(0,P.__rest)(e,["className","children","isOpen","isDisabled","isPlain","isText","isSplitButton","toggleVariant","onToggle","aria-haspopup","isActive","bubbleEvent","onEnter","parentRef","getMenuRef","id","type"]);return n.createElement(L.Dl.Consumer,null,(({toggleClass:e})=>n.createElement("button",Object.assign({},b,{id:y,ref:this.buttonRef,className:(0,W.i)(r?U.Z.dropdownToggleButton:e||U.Z.dropdownToggle,u&&U.Z.modifiers.active,o&&U.Z.modifiers.plain,l&&U.Z.modifiers.text,c&&Q[c],t),type:E||"button",onClick:e=>null==d?void 0:d(e,!s),"aria-expanded":s,"aria-haspopup":p,onKeyDown:e=>this.onKeyDown(e),disabled:i}),a)))}}J.displayName="Toggle",J.defaultProps={className:"",isOpen:!1,isActive:!1,isDisabled:!1,isPlain:!1,isText:!1,isSplitButton:!1,onToggle:()=>{},onEnter:()=>{},bubbleEvent:!1};const ee=e=>{var{id:t="",children:a=null,className:s="",isOpen:i=!1,"aria-label":o="Actions",parentRef:l=null,getMenuRef:r=null,isActive:c=!1,isPlain:d=!1,isDisabled:p=!1,bubbleEvent:u=!1,onToggle:m=(()=>{}),ref:f}=e,g=(0,P.__rest)(e,["id","children","className","isOpen","aria-label","parentRef","getMenuRef","isActive","isPlain","isDisabled","bubbleEvent","onToggle","ref"]);return n.createElement(J,Object.assign({id:t,className:s,isOpen:i,"aria-label":o,parentRef:l,getMenuRef:r,isActive:c,isPlain:d,isDisabled:p,onToggle:m,bubbleEvent:u},g),n.createElement(q.default,null))};ee.displayName="KebabToggle";var te=a(42399),ae=a(96380);const ne=({app:e,removeApp:t,addApp:a})=>{const[i,r]=(0,n.useState)(!1),c=(0,o.YB)(),d=(0,u.L)(),p=(0,D.E)(),m=(0,l.v9)((({user:e})=>e.isOrgAdmin)),f=e=>()=>{r(!1),e()},g=(0,te.Z)(c,m),h=c.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused integration."}),y={...g,tooltip:h,tooltipProps:{...g,content:h}},E=e.paused_at?s().createElement(z,{...d.paused_at&&y,...!p&&g,key:"resume",description:c.formatMessage({id:"app.kebab.resume.title",defaultMessage:"Resume data collection for this application."}),onClick:f(a)},c.formatMessage({id:"app.kebab.resume.button",defaultMessage:"Resume"})):s().createElement(z,{...d.paused_at&&y,...!p&&g,key:"pause",description:c.formatMessage({id:"app.kebab.pause.title",defaultMessage:"Temporarily stop this application from collecting data."}),onClick:f(t)},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Pause"})),b=s().createElement(z,{...d.paused_at&&y,...!p&&g,key:"remove",description:c.formatMessage({id:"app.kebab.remove.title",defaultMessage:"Permanently stop data collection for this application."}),to:(0,I.yS)(I._j.sourcesDetailRemoveApp.path,d.id).replace(":app_id",e.id),component:ae.Z},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Remove"}));return s().createElement(V,{isPlain:!0,isOpen:i,position:"right",dropdownItems:[E,b],className:"src-c-dropdown__application_kebab",toggle:s().createElement(ee,{onToggle:()=>r((e=>!e))})})};ne.propTypes={app:c().shape({id:c().string,paused_at:c().string}).isRequired,removeApp:c().func,addApp:c().func};const se=ne;var ie=a(5495),oe=a(69706),le=a(75614),re=a(84414);const ce={selectedApps:{}},de=(e,{type:t,id:a})=>{switch(t){case"addApp":return{...e,selectedApps:{...e.selectedApps,[a]:!0}};case"removeApp":return{...e,selectedApps:{...e.selectedApps,[a]:!1}};case"clean":return{...e,selectedApps:{...e.selectedApps,[a]:void 0}}}},pe=(e,t,a,n)=>{const i=n.find((t=>t.id===e))?.display_name;t((0,b.Hz)({title:a.formatMessage({id:"detail.applications.resumed.alert.title",defaultMessage:"{appName} connection resumed"},{appName:i}),variant:"default",customIcon:s().createElement(S(),null)}))},ue=(e,t,a,n)=>{const s={create:t.formatMessage({id:"detail.applications.add.error",defaultMessage:"Application create failed"}),pause:t.formatMessage({id:"detail.applications.pause.error",defaultMessage:"Application pause failed"}),resume:t.formatMessage({id:"detail.applications.resume.error",defaultMessage:"Application resume failed"})}[a];e((0,b.Hz)({title:s,description:(0,oe.Z)(t,(0,ie.Z)(n)),variant:"danger"}))},me=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,re.a)(),i=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU),r=(0,l.v9)((({sources:e})=>e.appTypes),l.wU),c=(0,l.v9)((({sources:e})=>e.hcsEnrolled),l.wU),p=(0,l.v9)((({sources:e})=>e.hcsEnrolledLoaded),l.wU),f=(0,l.v9)((({user:e})=>e.isOrgAdmin)),g=(0,D.E)(),h=(0,l.I0)(),[{selectedApps:y},E]=(0,n.useReducer)(de,ce),v=i.find((e=>e.id===t.source_type_id)),T=v?.name,M=r.filter((e=>e.supported_source_types.includes(T))).filter(B.Z);let C=async(n,s)=>{if(s){if("boolean"!=typeof y[n]){E({type:"addApp",id:n});try{await(0,O.Rj)().unpauseApplication(s),pe(n,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"resume",t)}E({type:"clean",id:n})}}else a((0,I.yS)(I._j.sourcesDetailAddApp.path,t.id).replace(":app_type_id",n))};const A=async(t,a)=>{if("boolean"!=typeof y[a]){E({type:"removeApp",id:a});try{await(0,O.Rj)().pauseApplication(t),((e,t,a,n)=>{const i=n.find((t=>t.id===e))?.display_name;t((0,b.Hz)({title:a.formatMessage({id:"detail.applications.paused.alert.title",defaultMessage:"{appName} connection paused"},{appName:i}),description:a.formatMessage({id:"detail.applications.paused.alert.description",defaultMessage:"Your application will not reflect the most recent data until {appName} connection is resumed"},{appName:i}),variant:"default",customIcon:s().createElement(x(),null)}))})(a,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"pause",t)}E({type:"clean",id:a})}};return(0,Z.Z)(t)&&(C=async(a,n)=>{if("boolean"!=typeof y[a]){if(E({type:"addApp",id:a}),n)try{await(0,O.Rj)().unpauseApplication(n),pe(a,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"resume",t)}else try{await(0,O.Cu)({source_id:t.id,application_type_id:a}),await h((0,b.il)())}catch(t){ue(h,e,"create",t)}E({type:"clean",id:a})}}),M.length>0?s().createElement(d.Card,{className:"src-c-card-applications pf-v5-u-p-lg pf-v5-u-pl-sm-on-md"},s().createElement(d.CardTitle,null,e.formatMessage({id:"detail.applications.title",defaultMessage:"Applications"})),s().createElement(d.CardBody,null,s().createElement("div",{className:"pf-v5-c-form src-c-applications_form"},M.map((a=>{const i=t.applications.find((e=>e.application_type_id===a.id)),o=Boolean(i),l=Boolean(i?.paused_at),r=!l&&o,d="boolean"==typeof y[a.id]?y[a.id]:r,u=g?s().Fragment:k.Tooltip;return s().createElement(w.FormGroup,{key:a.id},s().createElement("div",{className:"src-c-application_flex"},p?s().createElement(n.Fragment,null,s().createElement(u,{...!g&&{content:(0,te.$)(e,f)}},s().createElement(R.Switch,{className:"src-c-application_switch",id:`app-switch-${a.id}`,label:a.id===le.sC&&c?le.X0:a.display_name,isChecked:d,isDisabled:i?.isDeleting||!g||Boolean(t.paused_at),onChange:(e,t)=>t?C(a.id,i?.id):A(i.id,a.id)})),Boolean(i)&&s().createElement(m.c,{className:"pf-v5-u-ml-sm src-m-clickable",app:i,showStatusText:!0}),(l||o)&&s().createElement(se,{app:i,removeApp:()=>A(i.id,a.id),addApp:()=>C(a.id,i.id)})):s().createElement(_.Skeleton,{width:"75%"})))}))))):null};var fe=a(15256),ge=a(62345),he=a(63319),ye=a.n(he);const Ee=()=>{const e=(0,o.YB)();return s().createElement(fe.EmptyState,null,s().createElement(fe.EmptyStateIcon,{icon:ye()}),s().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.noapplications.title",defaultMessage:"No connected applications"})),s().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},e.formatMessage({id:"detail.noapplications.description",defaultMessage:"You have not connected any applications to this source. Use the switches above to add applications."})))};var be=a(2156),ve=a.n(be);const Te=()=>{const e=(0,o.YB)(),t=(0,l.v9)((({user:e})=>e?.isOrgAdmin));return s().createElement(fe.EmptyState,null,s().createElement(fe.EmptyStateIcon,{icon:ve()}),s().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.nopermissions.title",defaultMessage:"Missing permissions"})),s().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},(0,te.$)(e,t)))};var Me=a(67187),Ce=a(67850),we=a(35729);const _e=e=>Promise.all([(0,O.Rj)().showSource(e.id),(0,O.Rj)().listSourceEndpoints(e.id),(0,O.ye)(e.id)]).then((async([t,a,n])=>{const s=a&&a.data&&a.data[0],i=n?.sources[0]?.applications||[];let o={source:{...e,...t},applications:i};const l=[];let r;const c=[],d=[];return i.forEach((e=>{e?.authentications?.forEach((t=>{t?.id&&(l.push((0,O.Rj)().showAuthentication(t.id)),c.push(e.id),d.push(t.id))}))})),l.length>0&&(r=await Promise.all(l),c.forEach(((e,t)=>{o.applications.find((t=>t.id===e)).authentications.push(r[t])}))),s?(0,O.Rj)().listEndpointAuthentications(s.id).then((e=>({...o,endpoints:a.data,authentications:e.data.filter((({id:e})=>!d.includes(e)))}))):o}));var Re=a(27361),ke=a.n(Re),Ae=a(36968),xe=a.n(Ae),Ne=a(32321);const Se=(e,t)=>({title:e.formatMessage({id:"wizard.pausedApplication",defaultMessage:"{application} is paused"},{application:t}),description:e.formatMessage({id:"wizard.pausedApplicationDescription",defaultMessage:"To resume data collection for this application, switch {application} on in the <b>Applications</b> section of this page."},{application:t,b:Ne.S}),variant:"default",customIcon:s().createElement(x(),null)}),Ie="check-endpoint",De=({endpoints:e,authentications:t,applications:a,...n},s)=>{const i={},o=[...t||[],...a?.reduce(((e,t)=>[...e,...t.authentications]),[])||[]];let l,r;o.length>0&&o.forEach((e=>{i[`a${e.id}`]=e})),e&&e.length>0&&(l=e[0]),l&&(r=l.scheme||l.host||l.path||l.port?(0,m.Fd)(l):void 0);const c={};return a?.length>0&&a.forEach((e=>{e.extra&&Object.keys(e.extra).length>0&&(c[`a${e.id}`]={extra:e.extra})})),{source_type:s,endpoint:l,authentications:i,url:r,...Object.keys(c).length&&{applications:c},...n}},Ze=(e,t)=>!e.includes(t)&&e.push(t);var Oe=a(95290),Be=a(5454);const Pe=async(e,t,a,n,s,i)=>{i({type:"submit",values:e,editing:t});const o=new Date;try{await(0,Oe.yH)(n,((e,t)=>{const a={};return Object.keys(t).filter((e=>t[e])).forEach((t=>{xe()(a,t,ke()(e,t))})),a})(e,t),e)}catch{return await a((0,b.il)()),void i({type:"submitFailed"})}(0,E.n)(n.source.id);let l={};const r=((e,t)=>{const a=[];return Object.keys(t).forEach((n=>{if(t[n]){const t=n.match(/.a\d+/)?.[0]?.replace(".a","");n.startsWith("applications")&&Ze(a,t),n.startsWith("authentications")&&e.applications.forEach((e=>e.authentications.forEach((({id:n,resource_type:s})=>s&&n===t&&Ze(a,"Application"===s?e.id:`${Ie}-${e.id}`))))),(n.startsWith("url")||n.startsWith("endpoint"))&&e.applications.forEach((e=>e.authentications.forEach((({resource_type:t})=>"Endpoint"===t&&Ze(a,`${Ie}-${e.id}`)))))}})),a.filter(Boolean)})(n,t),c=[];let d;if(r.forEach((e=>{e.includes(Ie)?c.push((0,Be.h)(n.endpoints[0].id,void 0,void 0,"getEndpoint",o).then((t=>({...t,id:e.replace(`${Ie}-`,"")})))):c.push((0,Be.h)(e,void 0,void 0,void 0,o))})),c.length>0){try{d=await Promise.all(c)}catch(e){return await a((0,b.il)()),void i({type:"submitFailed"})}d.forEach((({availability_status:e,availability_status_error:t,id:a})=>{e===m.Rl&&(l[a]={title:s.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Application credentials were edited successfully."}),description:t,variant:"success"}),e===m.nZ&&(l[a]={title:s.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit application credentials failed."}),description:t,variant:"danger"}),e&&e!==m.Bj||(l[a]={title:s.formatMessage({id:"wizard.timeoutEditToastTitle",defaultMessage:"Edit in progress"}),description:s.formatMessage({id:"wizard.timeoutEditToastDescription",defaultMessage:"We are still working to confirm your updated credentials. Changes will be reflected in this table when complete."}),variant:"warning"})}))}await a((0,b.il)()),i({type:"submitFinished",messages:l})};var Fe=a(15185),Le=a(96354),je=a(64124),ze=a(58647),Ue=a(50142);const We=e=>e.split(".").pop(),Ge=(e,t,a,n="generic")=>ke()(Ue.Z,[e,"authentication",t,n,a],{}),Ye=(e,t)=>e?.fields?.filter((e=>t&&e.stepKey===t))||[],$e=(e,t,a,n,i)=>{let l=e,r=(l||0===l.length)&&a===le.Qr&&i?.length>0;return r&&(l=[{authtype:"token"}]),l&&0!==l.length&&t.schema&&t.schema.authentication?l.map((e=>{const i=t?.schema?.authentication?.find((({type:t})=>t===e.authtype));if(!i)return[];const l=((e,t,a="generic")=>ke()(Ue.Z,[e,"authentication",t,a,"includeStepKeyFields"],[]))(t.name,e.authtype,a),c=((e,t,a="generic")=>ke()(Ue.Z,[e,"authentication",t,a,"additionalSteps"],[]))(t.name,e.authtype,a)?.map((e=>({...e,fields:[...e.fields,...Ye(i,e.name)]}))).map((({fields:e})=>e.map((({name:e})=>e)))).flatMap((e=>e));return((e,t,a,n)=>e.map((e=>{let i=e.name.startsWith("authentication")?((e,t)=>`authentications.a${t}.${e.replace("authentication.","")}`)(e.name,t):e.name.startsWith("application")?((e,t)=>`applications.a${t}.${e.replace("application.","")}`)(e.name,a):e.name;const l={...e,name:i},r="password"===We(l.name),c="bucket_region"===We(l.name)&&l.label.includes("AWS"),d="external_id"===We(l.name),p="source_ref"===We(l.name);return r&&(l.component="authentication"),c&&(l.loadOptions=()=>(0,ze.j)().then((e=>e.map((e=>({value:e,label:e})))))),d&&(l.hideField=!1,l.label=s().createElement(o._H,{id:"cost.arn.externalId",defaultMessage:"External ID"}),l.component="clipboard-copy",l.isReadOnly=!0),p&&n&&(l.isDisabled=!0,l.helperText="Value cannot be modified since it has been set using the API"),l})))(i.fields.filter((e=>c.includes(e.name)||!c.length&&!e.stepKey||e.stepKey&&l.includes(e.stepKey))).map((n=>({...n,...Ge(t.name,e.authtype,n.name,a)}))),e.id,n,r)})):[]},He=(e,t)=>ke()(Ue.Z,[e,"endpoint",t],{});var Ke=a(48880),Ve=a(10431);const qe=({name:e})=>{const t=(0,Ke.default)(),{variant:a,title:n,description:i,customIcon:o}=ke()(t.getState().values,e);return s().createElement(Ve.Alert,{variant:a,isInline:!0,title:n,customIcon:o},i)};qe.propTypes={name:c().string.isRequired};const Xe=qe;var Qe=a(85333),Je=a.n(Qe);const et=({applicationName:e,message:t,Icon:a})=>{const n=(0,o.YB)();return s().createElement(Me.Bullseye,null,s().createElement(fe.EmptyState,{variant:fe.EmptyStateVariant.small},s().createElement(fe.EmptyStateIcon,{icon:a}),s().createElement(ge.Title,{headingLevel:"h2",size:"lg"},n.formatMessage({id:"resourceTable.emptyStateTitle",defaultMessage:"No application resources"})),s().createElement(fe.EmptyStateBody,null,n.formatMessage(t,{applicationName:e}))))};et.propTypes={applicationName:c().string.isRequired,message:c().shape({id:c().string.isRequired,defaultMessage:c().string.isRequired}),Icon:c().elementType},et.defaultProps={message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will appear here when created."},Icon:Je()};const tt=et,at=(e,t,a,n,s)=>[{component:Le.Z.TABS,name:"app-tabs",isBox:!0,fields:[...e.map((e=>{const i=a.find((({id:t})=>t===e.application_type_id));let o=((e,t,a,n)=>[{name:`messages.${a.id}`,component:"description",Content:Xe,condition:{when:({name:e})=>e,isNotEmpty:!0}},...$e(a.authentications?.filter((e=>Object.keys(e).length>1)),t,e?.name,a.id,n)])(i,t,e,s);if(e.authentications.find((({resource_type:e})=>"Endpoint"===e))){const e=(e=>{if(!e.schema||!e.schema.endpoint||e.schema.endpoint.hidden)return;const t=e.schema.endpoint.fields.map((t=>({...t,...He(e.name,t.name)}))),a={component:Le.Z.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){const e=t.find((({name:e})=>"url"===e));return{...a,fields:[{component:Le.Z.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[{...e,isRequired:!1,validate:e?.validate?.filter((e=>e.type!==je.Z.REQUIRED))}]},{component:Le.Z.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]}}return{...a,fields:t}})(t);o=[o[0],[...o[1]||[],...e?[e]:[]]]}return 1===o.length?o.push({component:"description",name:"no-credentials",Content:tt,message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will be added here when created."},applicationName:i?.display_name,Icon:ye()}):e.paused_at&&(o=[o[0],o[1].map((e=>({...e,isDisabled:!0})))]),{name:i?.id,title:i?.id===le.sC&&n?le.X0:i?.display_name,fields:o}}))]}],nt=(e,t,a,n,s)=>({description:n.formatMessage({id:"sources.editFormDescripiton",defaultMessage:"Use the form fields to edit application credentials."}),fields:at(e.applications,t,a,s,e?.source?.source_ref)}),st={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,submitMessages:void 0},it=(e,{type:t,source:a,sourceType:n,appTypes:s,intl:i,values:o,editing:l,messages:r,hcsEnrolled:c})=>{switch(t){case"createForm":return{...e,sourceType:n,initialValues:De(e.source,n.product_name),schema:nt(e.source,n,s,i,c),loading:!1};case"setSource":return{...e,messages:{...r,...e.submitMessages},source:a,initialLoad:!1,submitMessages:void 0};case"submit":return{...e,isSubmitting:!0,submitError:!1,values:o,editing:l};case"submitFinished":return{...e,isSubmitting:!1,source:a,submitMessages:r};case"submitFailed":return{...e,isSubmitting:!1,submitError:!0,messages:void 0};case"sourceChanged":return{...e,initialLoad:!0,loading:!0};default:return e}};var ot=a(26946);const lt=()=>{const e=(0,o.YB)();return s().createElement(ot.Z,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})})};var rt=a(82793),ct=a(27552);const dt=({onRetry:e})=>{const t=(0,o.YB)();return s().createElement(ct.Z,{onClose:e,customText:t.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:s().createElement(rt.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},t.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:t.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})})};dt.propTypes={onRetry:c().func.isRequired};const pt=dt;var ut=a(58706),mt=a(81169);ut.ClipboardCopy.propTypes={label:c().string};const ft=e=>{const{label:t,input:a}=(0,mt.Z)(e);return s().createElement(w.FormGroup,{label:t},s().createElement(ut.ClipboardCopy,{label:t,isReadOnly:!0},a.value))},gt=()=>{const[e,t]=(0,n.useReducer)(it,st),a=(0,u.L)(),i=(0,Fe.W)(),{loading:r,editing:c,source:d,initialValues:p,schema:f,isSubmitting:g,initialLoad:h,message:E,messages:b,submitError:v,values:T}=e,M=(0,o.YB)(),{sourceTypes:C,appTypes:w,sourceTypesLoaded:_,appTypesLoaded:R}=(0,l.v9)((({sources:e})=>e),l.wU),k=(0,l.v9)((({sources:e})=>e.hcsEnrolled),l.wU),A=(0,l.v9)((({sources:e})=>e.hcsEnrolledLoaded),l.wU),x=(0,l.I0)();(0,n.useEffect)((()=>{h||t({type:"sourceChanged"})}),[a,a?.applications?.length]),(0,n.useEffect)((()=>{a&&h&&R&&_e(a).then((e=>{const a=((e,t,a)=>{const n={};return e.applications.forEach((({id:e,application_type_id:s,availability_status_error:i,availability_status:o,paused_at:l})=>{if(l){const i=a.find((e=>e.id===s))?.display_name||e;n[e]=Se(t,i)}else o===m.nZ&&(n[e]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:i,variant:"danger"})})),e.endpoints?.[0]?.availability_status_error&&e.applications.map((e=>e.authentications.find((({resource_type:t})=>!e.paused_at&&"Endpoint"===t))?e.id:void 0)).filter(Boolean).forEach((a=>{n[a]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:e.endpoints?.[0]?.availability_status_error,variant:"danger"}})),n})(e,M,w);t({type:"setSource",source:e,messages:a})}))}),[a,i,R,h]),(0,n.useEffect)((()=>{if(d&&R&&_){const e=C.find((({id:e})=>e===d.source.source_type_id));t({type:"createForm",sourceType:e,source:d,appTypes:w,hcsEnrolled:k,intl:M})}}),[R,d,_,A]);const N=!A||!R||!_||r;if(v)return s().createElement(pt,{onRetry:()=>Pe(T,c,x,d,M,t)});if(g)return s().createElement(lt,null);if(N)return s().createElement(Me.Bullseye,{className:"pf-v5-u-m-2xl"},s().createElement(y.Spinner,null));const S=d.source.paused_at||d.applications.every((({paused_at:e})=>e));return s().createElement(we.Z,{schema:f,onSubmit:(e,a)=>Pe(e,a.getState().dirtyFields,x,d,M,t),FormTemplate:e=>s().createElement(Ce.ZP,{canReset:!0,showFormControls:!S,submitLabel:"Save changes",disableSubmit:["pristine","invalid"],...e}),clearedValue:null,initialValues:{...p,...!a.paused_at&&{message:E},...!a.paused_at&&{messages:b}},componentMapper:{"clipboard-copy":ft}})},ht=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,D.E)();return s().createElement(d.Card,{className:"card pf-v5-u-m-lg pf-v5-u-mt-0"},s().createElement(d.CardTitle,null,e.formatMessage({id:"detail.resources.title",defaultMessage:"Manage connected applications"})),s().createElement(d.CardBody,null,!a&&s().createElement(Te,null),a&&0===t.applications.length&&s().createElement(Ee,null),a&&t.applications.length>0&&s().createElement(gt,null)))};var yt=a(40423),Et=a(63663),bt=a(63456),vt=a(83233),Tt=a(92863);const Mt=()=>{const e=(0,o.YB)(),t=(0,u.L)();return s().createElement(Tt.Breadcrumb,null,s().createElement(Tt.BreadcrumbItem,{component:({href:e,...t})=>s().createElement(ae.Z,{to:e,...t}),to:I._j.sources.path},e.formatMessage({id:"sources.sources",defaultMessage:"Integrations"})),s().createElement(Tt.BreadcrumbItem,{isActive:!0},t.name))},Ct=()=>{const[e,t]=(0,n.useState)(!1),a=(0,o.YB)(),i=(0,u.L)(),r=(0,D.E)(),c=(0,l.I0)(),d=(0,l.v9)((({user:e})=>e.isOrgAdmin)),p=e=>()=>{t(!1),e()},m=a.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused integration."}),f=(0,te.Z)(a,d),g={...f,tooltip:m,tooltipProps:{...f.tooltipProps,content:m}};return s().createElement(V,{toggle:s().createElement(ee,{onToggle:()=>t(!e),id:"toggle-id-6"}),isOpen:e,isPlain:!0,position:"right",dropdownItems:[i.paused_at?s().createElement(z,{...!r&&f,key:"unpause",onClick:p((()=>c((0,b.AX)(i.id,i.name,a)))),description:a.formatMessage({id:"detail.resume.description",defaultMessage:"Unpause data collection for this integration"})},a.formatMessage({id:"detail.resume.button",defaultMessage:"Resume"})):s().createElement(z,{...!r&&f,key:"pause",onClick:p((()=>c((0,b.xz)(i.id,i.name,a)))),description:a.formatMessage({id:"detail.pause.description",defaultMessage:"Temporarily disable data collection"})},a.formatMessage({id:"detail.pause.button",defaultMessage:"Pause"})),s().createElement(z,{...!r&&f,key:"remove",to:(0,I.yS)(I._j.sourcesDetailRemove.path,i.id),component:ae.Z,description:a.formatMessage({id:"detail.remove.description",defaultMessage:"Permanently delete this integration and all collected data"})},a.formatMessage({id:"detail.remove.button",defaultMessage:"Remove"})),s().createElement(z,{...!r&&f,...i.paused_at&&g,key:"rename",to:(0,I.yS)(I._j.sourcesDetailRename.path,i.id),component:ae.Z},a.formatMessage({id:"detail.rename.button",defaultMessage:"Rename"}))]})},wt=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,l.v9)((({sources:e})=>e.appTypes),l.wU),n=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU);return s().createElement(bt.Z,null,s().createElement(Mt,null),s().createElement(vt.Flex,{className:"pf-v5-u-mb-sm"},s().createElement(vt.FlexItem,null,s().createElement(ge.Title,{headingLevel:"h1",size:"2xl"},t.name)),s().createElement(vt.FlexItem,null,(0,m.BN)(void 0,t,{appTypes:a,sourceTypes:n})),s().createElement(vt.FlexItem,{align:{default:"alignRight"}},s().createElement(Ct,null))),s().createElement(rt.TextContent,null,s().createElement(rt.Text,null,e.formatMessage({id:"detail.description",defaultMessage:"View details and manage connections for this integration."}))))};var _t=a(21081),Rt=a(49004),kt=a(34844),At=a(76678);const xt=e=>[{title:e.formatMessage({id:"resourceTable.resourceType",defaultMessage:"Resource type"}),props:{"aria-label":"Resource type"}},{title:e.formatMessage({id:"resourceTable.resourceValue",defaultMessage:"Value"}),props:{"aria-label":"Resource value"}}],Nt=(e,t,a)=>e.applications.reduce(((n,i)=>{const o=t.find((({id:e})=>e===i.application_type_id)),l=(r=$e(i.authentications?.filter((e=>Object.keys(e).length>1)),a,o?.name,i.id),c=De(e,a.product_name),r.flatMap((e=>e)).map((e=>!e.hideField&&[s().createElement(s().Fragment,{key:"label"},e.label),ke()(c,e.name)])).filter(Boolean));var r,c;return{...n,[i.id]:l}}),{}),St=(e,{type:t,intl:a,source:n,activeTab:s,appTypes:i,sourceType:o})=>{switch(t){case"loaded":return{...e,columns:xt(a),applicationsRows:Nt(n,i,o),loading:!1,activeTab:n.applications[0].id};case"switchTab":return{...e,activeTab:s};case"setLoading":return{...e,loading:!0};default:return e}},It=()=>{const e=(0,o.YB)(),t=(0,u.L)(),a=(0,Fe.W)(),{sourceTypes:i,appTypes:r,sourceTypesLoaded:c,appTypesLoaded:p}=(0,l.v9)((({sources:e})=>e),l.wU),[{activeTab:m,loading:f,columns:g,applicationsRows:h},E]=(0,n.useReducer)(St,(e=>({loading:Boolean(e.applications?.length),columns:[],applicationsRows:{},activeTab:0}))(t));return(0,n.useEffect)((()=>{t&&a&&p&&c&&t?.applications?.length&&(E({type:"setLoading"}),_e(t).then((t=>{const a=i.find((({id:e})=>e===t.source.source_type_id));E({type:"loaded",source:t,intl:e,sourceType:a,appTypes:r})})))}),[t?.applications?.length,a,p,c]),s().createElement(d.Card,{className:"pf-v5-u-m-lg pf-v5-u-mt-0"},s().createElement(d.CardTitle,null,e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"})),s().createElement(d.CardBody,null,f&&s().createElement(Me.Bullseye,{className:"pf-v5-u-m-2xl"},s().createElement(y.Spinner,null)),!f&&!t.applications.length&&s().createElement(Ee,null),!f&&t.applications.length>0&&s().createElement(s().Fragment,null,s().createElement(rt.Text,{className:"pf-v5-u-mb-md"},e.formatMessage({id:"resourceTable.description",defaultMessage:"View resources for your connected applications."})),s().createElement(At.Tabs,{isBox:!0,activeKey:m,onSelect:(e,t)=>E({type:"switchTab",activeTab:t})},t.applications.map((a=>{const n=r.find((({id:e})=>e===a.application_type_id))?.display_name||a.application_type_id,{description:i,...o}=a.paused_at?Se(e,n):{};return s().createElement(At.Tab,{eventKey:a.id,key:a.id,title:s().createElement(At.TabTitleText,null,n)},a.paused_at&&!t.paused_at&&s().createElement(Ve.Alert,{isInline:!0,className:"pf-v5-u-mt-lg",...o},i),h[a.id]?.length?s().createElement(_t.i,{"aria-label":e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"}),variant:"compact",cells:g,rows:h[a.id],className:"pf-v5-u-mt-md"},s().createElement(Rt.x,null),s().createElement(kt.R,null)):s().createElement(tt,{applicationName:n}))}))))))},Dt=()=>{const e=(0,o.YB)(),t=(0,D.E)(),a=(0,l.I0)(),n=(0,u.L)(),r=(0,l.v9)((({user:e})=>e.isOrgAdmin));return s().createElement(i.GridItem,{md:12,className:"pf-v5-u-m-lg pf-v5-u-mb-0"},s().createElement(Ve.Alert,{customIcon:s().createElement(x(),null),variant:"default",isInline:!0,title:e.formatMessage({id:"source.detail.pausedTitle",defaultMessage:"Integration paused"}),actionLinks:t?s().createElement(Ve.AlertActionLink,{onClick:()=>a((0,b.AX)(n.id,n.name,e))},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})):s().createElement(k.Tooltip,{content:(0,te.$)(e,r)},s().createElement(Ve.AlertActionLink,{isDisabled:!0},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})))},e.formatMessage({id:"source.detail.pausedDescription",defaultMessage:"No data is being collected for this integration. Turn the integration back on to reestablish connection and data collection. Previous credentials will be restored and application connections will continue as seen on this page."})))};var Zt=a(48947);const Ot=()=>{const e=(0,u.L)();if(!e)return s().createElement(s().Fragment,null,s().createElement(Et.X6,null),s().createElement(yt.Z,null));const t=(0,Z.Z)(e);return s().createElement("div",{className:"src-c-detail-page"},s().createElement(n.Suspense,{fallback:null},s().createElement(Zt.Outlet,{context:{backPath:(0,I.yS)(I._j.sourcesDetail.path,e.id)}})),s().createElement(wt,null),e.paused_at&&s().createElement(Dt,null),s().createElement(i.Grid,null,s().createElement(i.GridItem,{md:"6"},s().createElement(C,null)),s().createElement(i.GridItem,{md:"6"},s().createElement(me,null)),s().createElement(i.GridItem,{md:"12"},t?s().createElement(It,null):s().createElement(ht,null))))}},12567:(e,t,a)=>{"use strict";a.d(t,{W:()=>s,Z:()=>i});var n=a(75614);const s=(e,t)=>({supported_source_types:a})=>a.find((a=>e.find((({name:e})=>a===e))?.category===t)),i=e=>e.name!==n.M$&&e.name!==n.Qk},70642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(64072);const s=e=>e?.app_creation_workflow===n.b},58392:()=>{},8572:()=>{},98379:()=>{},91993:()=>{},44690:()=>{},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/sourceDetail.ae79dc7e0e239780089c2215ef7b9afa.js.map