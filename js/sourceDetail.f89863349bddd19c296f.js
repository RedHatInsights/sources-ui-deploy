(self.webpackChunksources=self.webpackChunksources||[]).push([[6818],{85490:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,n:()=>n});var s=a(90573);const n=e=>(0,s.Rj)().checkAvailabilitySource(e).catch((()=>{})),i=n},95290:(e,t,a)=>{"use strict";a.d(t,{K_:()=>i,yH:()=>o});var s=a(63367),n=a(90573);const i=e=>e.url||null===e.url?(e=>{if(null===e)return{scheme:null,host:null,port:null,path:null};if(!e)return{};try{const t=new URL(e),a=t.protocol.replace(/:$/,"");return{scheme:a,host:t.hostname,port:""===t.port?(0,s.bF)(a):t.port,path:t.pathname}}catch(e){return{}}})(e.url):e.endpoint?e.endpoint:e,o=(e,t,a)=>{const s=[];if(t.source&&s.push((0,n.Rj)().updateSource(e.source.id,t.source)),t.endpoint||t.url||null===t.url){const{scheme:a,host:o,port:l,path:r}=i(t),c=null===l?null:parseInt(l,10),d={scheme:a,host:o,path:r,port:null===c?null:isNaN(c)?void 0:c,...t.endpoint};s.push((0,n.Rj)().updateEndpoint(e.endpoints[0].id,d))}return t.authentications&&Object.keys(t.authentications).forEach((e=>{const a=e.replace("a","");s.push((0,n.Rj)().updateAuthentication(a,t.authentications[e]))})),t.applications&&Object.keys(t.applications).forEach((e=>{const t=e.replace("a","");s.push((0,n.Rj)().updateApplication(t,{extra:a.applications[e].extra}))})),Promise.all(s)}},5454:(e,t,a)=>{"use strict";a.d(t,{h:()=>n});var s=a(90573);const n=(e,t=1e4,a=1e3,n="showApplication",i)=>new Promise(((o,l)=>{const r=Date.now(),c=()=>(0,s.Rj)()[n](e).then((e=>{if(Date.now()-r>=t)return i?{...e,availability_status:null,availability_status_error:null}:e;if("available"===e.availability_status||"unavailable"===e.availability_status){if(i&&new Date(e.last_checked_at||e.updated_at)>i)return e;if(!i)return e}return((e,t)=>new Promise((t=>{setTimeout(t.bind(null,undefined),e)})))(a).then((()=>c()))}));return c().then((e=>o(e))).catch((e=>l(e)))}))},27552:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(28416),n=a.n(s),i=a(45697),o=a.n(i),l=a(44012),r=a(88087),c=a(11454),d=a(82404),p=a(78956),u=a(20211),m=a.n(u);const f=({onClose:e,returnButtonTitle:t,message:a,title:s,customText:i,primaryAction:o,secondaryActions:l,Component:c})=>n().createElement(r.Bullseye,null,n().createElement(d.EmptyState,{variant:d.EmptyStateVariant.full,className:"pf-u-mt-4xl"},n().createElement(d.EmptyStateIcon,{icon:m(),color:"var(--pf-global--danger-color--100)",className:"pf-u-mb-0"}),n().createElement(p.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},s),n().createElement(d.EmptyStateBody,{className:"src-c-wizard--step-text"},a||i),n().createElement(c,{variant:"primary",onClick:o||e},t),l&&n().createElement(d.EmptyStateActions,{className:"pf-u-mt-sm"},l)));f.propTypes={onClose:o().func.isRequired,returnButtonTitle:o().node,message:o().node,title:o().node,customText:o().node,primaryAction:o().func,secondaryActions:o().node,Component:o().elementType},f.defaultProps={title:n().createElement(l.Z,{id:"wizard.unsuccConfiguration",defaultMessage:"Something went wrong"}),customText:n().createElement(l.Z,{id:"wizard.errorText",defaultMessage:"There was a problem while trying to add your source. Please try again. If the error persists, open a support case."}),Component:c.Button};const g=f},26946:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var s=a(28416),n=a.n(s),i=a(45697),o=a.n(i),l=a(44012),r=a(88087),c=a(11454),d=a(82404),p=a(62693),u=a(78956);const m=({onClose:e,customText:t,cancelTitle:a,description:s})=>n().createElement(r.Bullseye,null,n().createElement(d.EmptyState,{variant:d.EmptyStateVariant.full,className:"pf-u-mt-4xl"},n().createElement(d.EmptyStateIcon,{icon:p.Spinner,className:"pf-u-mb-0"}),n().createElement(u.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},t),s&&n().createElement(d.EmptyStateBody,{className:"src-c-wizard--step-text"},s),e&&n().createElement(d.EmptyStateActions,{className:"pf-u-mt-xl"},n().createElement(c.Button,{variant:"link",onClick:e},a))));m.propTypes={onClose:o().func,customText:o().node,cancelTitle:o().node,description:o().node},m.defaultProps={customText:n().createElement(l.Z,{id:"wizard.loadingText",defaultMessage:"Loading, please wait."}),cancelTitle:n().createElement(l.Z,{id:"wizard.cancelText",defaultMessage:"Cancel"})};const f=m},84414:(e,t,a)=>{"use strict";a.d(t,{a:()=>i});var s=a(49881),n=a(78116);const i=()=>{const e=(0,s.useNavigate)();return(t,a)=>e((0,n.n)(t,n.d),a)}},57564:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Pt});var s=a(28416),n=a.n(s),i=a(53721),o=a(86896),l=a(86706),r=a(45697),c=a.n(r),d=a(89266),p=a(76541),u=a(97979),m=a(63367),f=a(78529),g=a.n(f),h=a(11454),y=a(62693),E=a(85490),b=a(31665);const v=({setCheckPending:e})=>{const t=(0,u.L)(),a=(0,o.Z)(),i=(0,l.I0)(),[r,c]=(0,s.useState)(!1);return n().createElement(h.Button,{variant:"plain","aria-label":a.formatMessage({id:"sources.checkavailability",defaultMessage:"Check source availability"}),onClick:async()=>{e&&e(),c(!0),await(0,E.Z)(t.id),c(!1),i((0,b.Hz)({title:a.formatMessage({id:"sources.checkavailability.notificationTitle",defaultMessage:"Request to check source status was sent"}),variant:"info",description:a.formatMessage({id:"sources.checkavailability.notificationDescription",defaultMessage:"Check this page later for updates"})}))},isDisabled:r},!r&&n().createElement(g(),{"data-testid":"RedoIcon"}),r&&n().createElement(y.Spinner,{size:"md"}))};v.propTypes={setCheckPending:c().func};const T=v,M=({term:e,description:t})=>n().createElement(p.DescriptionListGroup,null,n().createElement(p.DescriptionListTerm,null,e),n().createElement(p.DescriptionListDescription,null,t));M.propTypes={term:c().node,description:c().node};const C=()=>{const e=(0,l.I0)(),t=(0,o.Z)(),a=(0,u.L)(),s=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU),i=s.find((e=>e.id===a.source_type_id));let r;if("amazon"===i?.name){const e=a.authentications?.find((({authtype:e})=>e.includes("arn")));e?.username&&(r=e.username.match(/:\d+/)?.[0]?.replace(/:/g,""))}return n().createElement(d.Card,{className:"pf-m-selectable pf-m-selected src-c-card-summary pf-u-m-lg pf-u-mr-sm-on-md"},n().createElement(d.CardTitle,null,t.formatMessage({id:"detail.summary.title",defaultMessage:"Source summary"})),n().createElement(d.CardBody,null,n().createElement(p.DescriptionList,{columnModifier:{default:"2Col"}},n().createElement(M,{term:t.formatMessage({id:"detail.summary.type",defaultMessage:"Source type"}),description:(0,m.P5)(a.source_type_id,void 0,{sourceTypes:s})}),n().createElement(M,{term:t.formatMessage({id:"detail.summary.lastChecked",defaultMessage:"Last availability check"}),description:n().createElement(n().Fragment,null,a.isCheckPending||!a.last_checked_at&&!a.last_available_at?t.formatMessage({id:"detail.summary.waitingForUpdate",defaultMessage:"Waiting for update"}):(0,m.vh)(a.last_checked_at||a.last_available_at),n().createElement(T,{setCheckPending:()=>e((0,b.mE)(a.id))}))}),n().createElement(M,{term:t.formatMessage({id:"detail.summary.dateAdded",defaultMessage:"Date added"}),description:(0,m.vh)(a.created_at)}),n().createElement(M,{term:t.formatMessage({id:"detail.summary.lastModified",defaultMessage:"Last modified"}),description:(0,m.vh)(a.updated_at)}),a.app_creation_workflow&&n().createElement(M,{term:t.formatMessage({id:"detail.summary.configurationMode",defaultMessage:"Configuration mode"}),description:(0,m.Z3)(a.app_creation_workflow,a,{intl:t,sourceType:i})}),r&&n().createElement(M,{term:t.formatMessage({id:"detail.summary.awsAccountNumber",defaultMessage:"AWS account number"}),description:r}))))};var w=a(92092),_=a(45237),R=a(8618),k=a(31190),A=a(41303),x=a.n(A),Z=a(99240),S=a.n(Z),N=a(87281),I=a(82866),D=a(70642),O=a(90573),P=a(12567),F=a(65353),L=a(12744),B=a(41435),j=a(62472);const z=e=>{var{children:t,className:a,component:n="a",isDisabled:i=!1,isAriaDisabled:o=!1,isPlainText:l=!1,href:r,tooltip:c,tooltipProps:d={},listItemClassName:p,onClick:u,ref:m,additionalChild:f,customChild:g,tabIndex:h=-1,icon:y=null,autoFocus:E,description:b=null,styleChildren:v,ouiaId:T,ouiaSafe:M}=e,C=(0,F._T)(e,["children","className","component","isDisabled","isAriaDisabled","isPlainText","href","tooltip","tooltipProps","listItemClassName","onClick","ref","additionalChild","customChild","tabIndex","icon","autoFocus","description","styleChildren","ouiaId","ouiaSafe"]);const w=(0,j.useOUIAProps)(z.displayName,T,M);return s.createElement(B.e4.Consumer,null,(e=>s.createElement(L.n,Object.assign({context:e,role:"menuitem",tabIndex:h,className:a,component:n,isDisabled:i,isAriaDisabled:o,isPlainText:l,href:r,tooltip:c,tooltipProps:d,listItemClassName:p,onClick:u,additionalChild:f,customChild:g,icon:y,autoFocus:E,styleChildren:v,description:b},w,C),t)))};z.displayName="DropdownItem";var U=a(73699),W=a(38296),G=a(31051),$=a(80164);class K extends s.Component{constructor(){super(...arguments),this.refsCollection=[],this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onKeyDown)},this.onKeyDown=e=>{if(!this.props.isOpen||!Array.from(document.activeElement.classList).find((e=>K.validToggleClasses.concat(this.context.toggleClass).includes(e))))return;const t=this.refsCollection;if("ArrowDown"===e.key){const a=t.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled")));K.focusFirstRef(a),e.stopPropagation()}else if("ArrowUp"===e.key){const a=t.length,s=t.slice(a-1,a),n=s&&s[0];K.focusFirstRef(n),e.stopPropagation()}},this.childKeyHandler=(e,t,a,n=!1)=>{(0,$.qG)(e,t,a,this.refsCollection,this.props.isGrouped?this.refsCollection:s.Children.toArray(this.props.children),n)},this.sendRef=(e,t,a,s)=>{this.refsCollection[e]=[],t.map(((t,a)=>{t?t.getAttribute?this.refsCollection[e][a]=s?null:t:this.refsCollection[e][a]=G.findDOMNode(t):this.refsCollection[e][a]=null}))}}componentDidMount(){document.addEventListener("keydown",this.onKeyDown);const{autoFocus:e}=this.props;if(e){const e=this.refsCollection.find((e=>e&&e[0]&&!e[0].hasAttribute("disabled"))),t=e&&e[0];t&&t.focus&&setTimeout((()=>t.focus()))}}shouldComponentUpdate(){return this.refsCollection=[],!0}extendChildren(){const{children:e,isGrouped:t}=this.props;if(t){let t=0;return s.Children.map(e,(e=>{const a=e,n={};return a.props&&a.props.children&&(Array.isArray(a.props.children)?n.children=s.Children.map(a.props.children,(e=>s.cloneElement(e,{index:t++}))):n.children=s.cloneElement(a.props.children,{index:t++})),s.cloneElement(a,n)}))}return s.Children.map(e,((e,t)=>s.cloneElement(e,{index:t})))}render(){const e=this.props,{className:t,isOpen:a,position:n,children:i,component:o,isGrouped:l,setMenuComponentRef:r,alignments:c}=e,d=(0,F._T)(e,["className","isOpen","position","children","component","isGrouped","setMenuComponentRef","alignments"]);return s.createElement(B.e4.Provider,{value:{keyHandler:this.childKeyHandler,sendRef:this.sendRef}},"div"===o?s.createElement(B.Dl.Consumer,null,(({onSelect:e,menuClass:o})=>s.createElement("div",{className:(0,W.i)(o,n===B.ir.right&&U.Z.modifiers.alignRight,(0,$.wt)(c,U.Z,"align-"),t),hidden:!a,onClick:t=>e&&e(t),ref:r},i))):l&&s.createElement(B.Dl.Consumer,null,(({menuClass:e,menuComponent:i})=>{const o=i||"div";return s.createElement(o,Object.assign({},d,{className:(0,W.i)(e,n===B.ir.right&&U.Z.modifiers.alignRight,(0,$.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:r}),this.extendChildren())}))||s.createElement(B.Dl.Consumer,null,(({menuClass:e,menuComponent:i})=>{const l=i||o;return s.createElement(l,Object.assign({},d,{className:(0,W.i)(e,n===B.ir.right&&U.Z.modifiers.alignRight,(0,$.wt)(c,U.Z,"align-"),t),hidden:!a,role:"menu",ref:r}),this.extendChildren())})))}}K.displayName="DropdownMenu",K.defaultProps={className:"",isOpen:!0,autoFocus:!0,position:B.ir.left,component:"ul",isGrouped:!1,setMenuComponentRef:null},K.validToggleClasses=[U.Z.dropdownToggle,U.Z.dropdownToggleButton],K.focusFirstRef=e=>{e&&e[0]&&e[0].focus&&setTimeout((()=>e[0].focus()))},K.contextType=B.Dl;var V=a(69121);class H extends s.Component{constructor(e){super(e),this.openedOnEnter=!1,this.baseComponentRef=s.createRef(),this.menuComponentRef=s.createRef(),this.onEnter=()=>{this.openedOnEnter=!0},this.setMenuComponentRef=e=>{this.menuComponentRef=e},this.getMenuComponentRef=()=>this.menuComponentRef,e.dropdownItems&&e.dropdownItems.length>0&&e.children&&console.error("Children and dropdownItems props have been provided. Only the dropdownItems prop items will be rendered")}componentDidUpdate(){this.props.isOpen||(this.openedOnEnter=!1)}render(){const e=this.props,{children:t,className:a,direction:n,dropdownItems:i,isOpen:o,isPlain:l,isText:r,isGrouped:c,isFullHeight:d,onSelect:p,position:u,toggle:m,autoFocus:f,minWidth:g,menuAppendTo:h,isFlipEnabled:y,zIndex:E}=e,b=(0,F._T)(e,["children","className","direction","dropdownItems","isOpen","isPlain","isText","isGrouped","isFullHeight","onSelect","position","toggle","autoFocus","minWidth","menuAppendTo","isFlipEnabled","zIndex"]),v=m.props.id||"pf-dropdown-toggle-id-"+H.currentId++;let T,M,C=!1;i&&i.length>0?(T="ul",M=i,C=!0):(T="div",M=s.Children.toArray(t));const w=s.createRef(),_=this.openedOnEnter,R=y&&"inline"!==h;return s.createElement(B.Dl.Consumer,null,(({baseClass:e,baseComponent:t,id:i,ouiaId:p,ouiaComponentType:y,ouiaSafe:k,alignments:A})=>{const x=t,Z=s.createElement(K,{className:(0,W.i)(R&&U.Z.modifiers.static),setMenuComponentRef:this.setMenuComponentRef,component:T,isOpen:o,position:u,"aria-labelledby":i?`${i}-toggle`:v,isGrouped:c,autoFocus:_&&f,alignments:A},M),S=s.createElement("div",{className:(0,W.i)(e,n===B.dw.up&&U.Z.modifiers.top,u===B.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,a),ref:w},o&&Z),N=s.createElement(x,Object.assign({},b,{className:(0,W.i)(e,n===B.dw.up&&U.Z.modifiers.top,u===B.ir.right&&U.Z.modifiers.alignRight,o&&U.Z.modifiers.expanded,d&&U.Z.modifiers.fullHeight,a),ref:this.baseComponentRef},(0,j.getOUIAProps)(y,p,k)),s.Children.map(m,(e=>s.cloneElement(e,{parentRef:this.baseComponentRef,getMenuRef:this.getMenuComponentRef,isOpen:o,id:v,isPlain:l,isText:r,"aria-haspopup":C,onEnter:()=>{this.onEnter(),e.props.onEnter&&e.props.onEnter()}}))),"inline"===h&&o&&Z);return"inline"===h?N:s.createElement(V.Popper,{trigger:N,triggerRef:this.baseComponentRef,popper:S,popperRef:w,direction:n,position:u,appendTo:"parent"===h?(()=>this.baseComponentRef&&this.baseComponentRef.current?this.baseComponentRef.current.parentElement:null)():h,isVisible:o,zIndex:E,minWidth:void 0!==g?g:"revert"})}))}}H.displayName="DropdownWithContext",H.currentId=0,H.defaultProps={className:"",dropdownItems:[],isOpen:!1,isPlain:!1,isText:!1,isGrouped:!1,position:B.ir.left,direction:B.dw.down,onSelect:()=>{},autoFocus:!0,menuAppendTo:"inline",isFlipEnabled:!0};const q=e=>{var{onSelect:t,ref:a,ouiaId:n,ouiaSafe:i,alignments:o,contextProps:l,minWidth:r,menuAppendTo:c="inline",isFlipEnabled:d=!0,zIndex:p=9999}=e,u=(0,F._T)(e,["onSelect","ref","ouiaId","ouiaSafe","alignments","contextProps","minWidth","menuAppendTo","isFlipEnabled","zIndex"]);return s.createElement(B.Dl.Provider,{value:Object.assign({onSelect:e=>t&&t(e),toggleTextClass:U.Z.dropdownToggleText,toggleIconClass:U.Z.dropdownToggleImage,toggleIndicatorClass:U.Z.dropdownToggleIcon,menuClass:U.Z.dropdownMenu,itemClass:U.Z.dropdownMenuItem,toggleClass:U.Z.dropdownToggle,baseClass:U.Z.dropdown,baseComponent:"div",sectionClass:U.Z.dropdownGroup,sectionTitleClass:U.Z.dropdownGroupTitle,sectionComponent:"section",disabledClass:U.Z.modifiers.disabled,plainTextClass:U.Z.modifiers.text,ouiaId:(0,j.useOUIAId)(q.displayName,n),ouiaSafe:i,ouiaComponentType:q.displayName,alignments:o},l)},s.createElement(H,Object.assign({menuAppendTo:c,isFlipEnabled:d,zIndex:p,minWidth:r},u)))};q.displayName="Dropdown";var X=a(62165),Y=a(1774);const Q={default:"",primary:U.Z.modifiers.primary,secondary:U.Z.modifiers.secondary};class J extends s.Component{constructor(){super(...arguments),this.buttonRef=s.createRef(),this.componentDidMount=()=>{document.addEventListener("click",this.onDocClick),document.addEventListener("touchstart",this.onDocClick),document.addEventListener("keydown",this.onEscPress)},this.componentWillUnmount=()=>{document.removeEventListener("click",this.onDocClick),document.removeEventListener("touchstart",this.onDocClick),document.removeEventListener("keydown",this.onEscPress)},this.onDocClick=e=>{const{isOpen:t,parentRef:a,onToggle:s,getMenuRef:n}=this.props,i=n&&n(),o=a&&a.current&&a.current.contains(e.target),l=i&&i.contains&&i.contains(e.target);!t||o||l||null==s||s(e,!1)},this.onEscPress=e=>{var t,a,s;const{parentRef:n,getMenuRef:i}=this.props,o=i&&i(),l=n&&n.current&&n.current.contains(e.target),r=o&&o.contains&&o.contains(e.target);!this.props.isOpen||e.key!==Y.yu.Escape&&"Tab"!==e.key||!l&&!r||(null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!1),null===(s=this.buttonRef.current)||void 0===s||s.focus())},this.onKeyDown=e=>{var t,a,s,n,i,o;("Tab"!==e.key||this.props.isOpen)&&("Tab"!==e.key&&"Enter"!==e.key&&" "!==e.key||!this.props.isOpen?"Enter"!==e.key&&" "!==e.key||this.props.isOpen||(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(n=(s=this.props).onToggle)||void 0===n||n.call(s,e,!this.props.isOpen),null===(o=(i=this.props).onEnter)||void 0===o||o.call(i)):(this.props.bubbleEvent||e.stopPropagation(),e.preventDefault(),null===(a=(t=this.props).onToggle)||void 0===a||a.call(t,e,!this.props.isOpen)))}}render(){const e=this.props,{className:t,children:a,isOpen:n,isDisabled:i,isPlain:o,isText:l,isSplitButton:r,toggleVariant:c,onToggle:d,"aria-haspopup":p,isActive:u,bubbleEvent:m,onEnter:f,parentRef:g,getMenuRef:h,id:y,type:E}=e,b=(0,F._T)(e,["className","children","isOpen","isDisabled","isPlain","isText","isSplitButton","toggleVariant","onToggle","aria-haspopup","isActive","bubbleEvent","onEnter","parentRef","getMenuRef","id","type"]);return s.createElement(B.Dl.Consumer,null,(({toggleClass:e})=>s.createElement("button",Object.assign({},b,{id:y,ref:this.buttonRef,className:(0,W.i)(r?U.Z.dropdownToggleButton:e||U.Z.dropdownToggle,u&&U.Z.modifiers.active,o&&U.Z.modifiers.plain,l&&U.Z.modifiers.text,c&&Q[c],t),type:E||"button",onClick:e=>null==d?void 0:d(e,!n),"aria-expanded":n,"aria-haspopup":p,onKeyDown:e=>this.onKeyDown(e),disabled:i}),a)))}}J.displayName="Toggle",J.defaultProps={className:"",isOpen:!1,isActive:!1,isDisabled:!1,isPlain:!1,isText:!1,isSplitButton:!1,onToggle:()=>{},onEnter:()=>{},bubbleEvent:!1};const ee=e=>{var{id:t="",children:a=null,className:n="",isOpen:i=!1,"aria-label":o="Actions",parentRef:l=null,getMenuRef:r=null,isActive:c=!1,isPlain:d=!1,isDisabled:p=!1,bubbleEvent:u=!1,onToggle:m=(()=>{}),ref:f}=e,g=(0,F._T)(e,["id","children","className","isOpen","aria-label","parentRef","getMenuRef","isActive","isPlain","isDisabled","bubbleEvent","onToggle","ref"]);return s.createElement(J,Object.assign({id:t,className:n,isOpen:i,"aria-label":o,parentRef:l,getMenuRef:r,isActive:c,isPlain:d,isDisabled:p,onToggle:m,bubbleEvent:u},g),s.createElement(X.default,null))};ee.displayName="KebabToggle";var te=a(42399),ae=a(96380);const se=({app:e,removeApp:t,addApp:a})=>{const[i,r]=(0,s.useState)(!1),c=(0,o.Z)(),d=(0,u.L)(),p=(0,I.E)(),m=(0,l.v9)((({user:e})=>e.isOrgAdmin)),f=e=>()=>{r(!1),e()},g=(0,te.Z)(c,m),h=c.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),y={...g,tooltip:h,tooltipProps:{...g,content:h}},E=e.paused_at?n().createElement(z,{...d.paused_at&&y,...!p&&g,key:"resume",description:c.formatMessage({id:"app.kebab.resume.title",defaultMessage:"Resume data collection for this application."}),onClick:f(a)},c.formatMessage({id:"app.kebab.resume.button",defaultMessage:"Resume"})):n().createElement(z,{...d.paused_at&&y,...!p&&g,key:"pause",description:c.formatMessage({id:"app.kebab.pause.title",defaultMessage:"Temporarily stop this application from collecting data."}),onClick:f(t)},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Pause"})),b=n().createElement(z,{...d.paused_at&&y,...!p&&g,key:"remove",description:c.formatMessage({id:"app.kebab.remove.title",defaultMessage:"Permanently stop data collection for this application."}),to:(0,N.yS)(N._j.sourcesDetailRemoveApp.path,d.id).replace(":app_id",e.id),component:ae.Z},c.formatMessage({id:"app.kebab.pause.button",defaultMessage:"Remove"}));return n().createElement(q,{isPlain:!0,isOpen:i,position:"right",dropdownItems:[E,b],className:"src-c-dropdown__application_kebab",toggle:n().createElement(ee,{onToggle:()=>r((e=>!e))})})};se.propTypes={app:c().shape({id:c().string,paused_at:c().string}).isRequired,removeApp:c().func,addApp:c().func};const ne=se;var ie=a(5495),oe=a(69706),le=a(75614),re=a(84414);const ce={selectedApps:{}},de=(e,{type:t,id:a})=>{switch(t){case"addApp":return{...e,selectedApps:{...e.selectedApps,[a]:!0}};case"removeApp":return{...e,selectedApps:{...e.selectedApps,[a]:!1}};case"clean":return{...e,selectedApps:{...e.selectedApps,[a]:void 0}}}},pe=(e,t,a,s)=>{const i=s.find((t=>t.id===e))?.display_name;t((0,b.Hz)({title:a.formatMessage({id:"detail.applications.resumed.alert.title",defaultMessage:"{appName} connection resumed"},{appName:i}),variant:"default",customIcon:n().createElement(S(),null)}))},ue=(e,t,a,s)=>{const n={create:t.formatMessage({id:"detail.applications.add.error",defaultMessage:"Application create failed"}),pause:t.formatMessage({id:"detail.applications.pause.error",defaultMessage:"Application pause failed"}),resume:t.formatMessage({id:"detail.applications.resume.error",defaultMessage:"Application resume failed"})}[a];e((0,b.Hz)({title:n,description:(0,oe.Z)(t,(0,ie.Z)(s)),variant:"danger"}))},me=()=>{const e=(0,o.Z)(),t=(0,u.L)(),a=(0,re.a)(),i=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU),r=(0,l.v9)((({sources:e})=>e.appTypes),l.wU),c=(0,l.v9)((({sources:e})=>e.hcsEnrolled),l.wU),p=(0,l.v9)((({sources:e})=>e.hcsEnrolledLoaded),l.wU),f=(0,l.v9)((({user:e})=>e.isOrgAdmin)),g=(0,I.E)(),h=(0,l.I0)(),[{selectedApps:y},E]=(0,s.useReducer)(de,ce),v=i.find((e=>e.id===t.source_type_id)),T=v?.name,M=r.filter((e=>e.supported_source_types.includes(T))).filter(P.Z);let C=async(s,n)=>{if(n){if("boolean"!=typeof y[s]){E({type:"addApp",id:s});try{await(0,O.Rj)().unpauseApplication(n),pe(s,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"resume",t)}E({type:"clean",id:s})}}else a((0,N.yS)(N._j.sourcesDetailAddApp.path,t.id).replace(":app_type_id",s))};const A=async(t,a)=>{if("boolean"!=typeof y[a]){E({type:"removeApp",id:a});try{await(0,O.Rj)().pauseApplication(t),((e,t,a,s)=>{const i=s.find((t=>t.id===e))?.display_name;t((0,b.Hz)({title:a.formatMessage({id:"detail.applications.paused.alert.title",defaultMessage:"{appName} connection paused"},{appName:i}),description:a.formatMessage({id:"detail.applications.paused.alert.description",defaultMessage:"Your application will not reflect the most recent data until {appName} connection is resumed"},{appName:i}),variant:"default",customIcon:n().createElement(x(),null)}))})(a,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"pause",t)}E({type:"clean",id:a})}};return(0,D.Z)(t)&&(C=async(a,s)=>{if("boolean"!=typeof y[a]){if(E({type:"addApp",id:a}),s)try{await(0,O.Rj)().unpauseApplication(s),pe(a,h,e,r),await h((0,b.il)())}catch(t){ue(h,e,"resume",t)}else try{await(0,O.Cu)({source_id:t.id,application_type_id:a}),await h((0,b.il)())}catch(t){ue(h,e,"create",t)}E({type:"clean",id:a})}}),n().createElement(d.Card,{className:"src-c-card-applications pf-u-p-lg pf-u-pl-sm-on-md"},n().createElement(d.CardTitle,null,e.formatMessage({id:"detail.applications.title",defaultMessage:"Applications"})),n().createElement(d.CardBody,null,n().createElement("div",{className:"pf-v5-c-form src-c-applications_form"},M.map((a=>{const i=t.applications.find((e=>e.application_type_id===a.id)),o=Boolean(i),l=Boolean(i?.paused_at),r=!l&&o,d="boolean"==typeof y[a.id]?y[a.id]:r,u=g?n().Fragment:k.Tooltip;return n().createElement(w.FormGroup,{key:a.id},n().createElement("div",{className:"src-c-application_flex"},p?n().createElement(s.Fragment,null,n().createElement(u,{...!g&&{content:(0,te.$)(e,f)}},n().createElement(R.Switch,{className:"src-c-application_switch",id:`app-switch-${a.id}`,label:a.id===le.sC&&c?le.X0:a.display_name,isChecked:d,isDisabled:i?.isDeleting||!g||Boolean(t.paused_at),onChange:(e,t)=>t?C(a.id,i?.id):A(i.id,a.id)})),Boolean(i)&&n().createElement(m.c,{className:"pf-u-ml-sm src-m-clickable",app:i,showStatusText:!0}),(l||o)&&n().createElement(ne,{app:i,removeApp:()=>A(i.id,a.id),addApp:()=>C(a.id,i.id)})):n().createElement(_.Skeleton,{width:"75%"})))})))))};var fe=a(82404),ge=a(78956),he=a(94622),ye=a.n(he);const Ee=()=>{const e=(0,o.Z)();return n().createElement(fe.EmptyState,null,n().createElement(fe.EmptyStateIcon,{icon:ye()}),n().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.noapplications.title",defaultMessage:"No connected applications"})),n().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},e.formatMessage({id:"detail.noapplications.description",defaultMessage:"You have not connected any applications to this source. Use the switches above to add applications."})))};var be=a(94898),ve=a.n(be);const Te=()=>{const e=(0,o.Z)(),t=(0,l.v9)((({user:e})=>e?.isOrgAdmin));return n().createElement(fe.EmptyState,null,n().createElement(fe.EmptyStateIcon,{icon:ve()}),n().createElement(ge.Title,{headingLevel:"h4",size:"lg"},e.formatMessage({id:"detail.nopermissions.title",defaultMessage:"Missing permissions"})),n().createElement(fe.EmptyStateBody,{className:"src-c-empty-state__body"},(0,te.$)(e,t)))};var Me=a(88087),Ce=a(67850),we=a(85017);const _e=e=>Promise.all([(0,O.Rj)().showSource(e.id),(0,O.Rj)().listSourceEndpoints(e.id),(0,O.ye)(e.id)]).then((async([t,a,s])=>{const n=a&&a.data&&a.data[0],i=s?.sources[0]?.applications||[];let o={source:{...e,...t},applications:i};const l=[];let r;const c=[],d=[];return i.forEach((e=>{e?.authentications?.forEach((t=>{t?.id&&(l.push((0,O.Rj)().showAuthentication(t.id)),c.push(e.id),d.push(t.id))}))})),l.length>0&&(r=await Promise.all(l),c.forEach(((e,t)=>{o.applications.find((t=>t.id===e)).authentications.push(r[t])}))),n?(0,O.Rj)().listEndpointAuthentications(n.id).then((e=>({...o,endpoints:a.data,authentications:e.data.filter((({id:e})=>!d.includes(e)))}))):o}));var Re=a(27361),ke=a.n(Re),Ae=a(36968),xe=a.n(Ae),Ze=a(32321);const Se=(e,t)=>({title:e.formatMessage({id:"wizard.pausedApplication",defaultMessage:"{application} is paused"},{application:t}),description:e.formatMessage({id:"wizard.pausedApplicationDescription",defaultMessage:"To resume data collection for this application, switch {application} on in the <b>Applications</b> section of this page."},{application:t,b:Ze.S}),variant:"default",customIcon:n().createElement(x(),null)}),Ne="check-endpoint",Ie=({endpoints:e,authentications:t,applications:a,...s},n)=>{const i={},o=[...t||[],...a?.reduce(((e,t)=>[...e,...t.authentications]),[])||[]];let l,r;o.length>0&&o.forEach((e=>{i[`a${e.id}`]=e})),e&&e.length>0&&(l=e[0]),l&&(r=l.scheme||l.host||l.path||l.port?(0,m.Fd)(l):void 0);const c={};return a?.length>0&&a.forEach((e=>{e.extra&&Object.keys(e.extra).length>0&&(c[`a${e.id}`]={extra:e.extra})})),{source_type:n,endpoint:l,authentications:i,url:r,...Object.keys(c).length&&{applications:c},...s}},De=(e,t)=>!e.includes(t)&&e.push(t);var Oe=a(95290),Pe=a(5454);const Fe=async(e,t,a,s,n,i)=>{i({type:"submit",values:e,editing:t});const o=new Date;try{await(0,Oe.yH)(s,((e,t)=>{const a={};return Object.keys(t).filter((e=>t[e])).forEach((t=>{xe()(a,t,ke()(e,t))})),a})(e,t),e)}catch{return await a((0,b.il)()),void i({type:"submitFailed"})}(0,E.n)(s.source.id);let l={};const r=((e,t)=>{const a=[];return Object.keys(t).forEach((s=>{if(t[s]){const t=s.match(/.a\d+/)?.[0]?.replace(".a","");s.startsWith("applications")&&De(a,t),s.startsWith("authentications")&&e.applications.forEach((e=>e.authentications.forEach((({id:s,resource_type:n})=>n&&s===t&&De(a,"Application"===n?e.id:`${Ne}-${e.id}`))))),(s.startsWith("url")||s.startsWith("endpoint"))&&e.applications.forEach((e=>e.authentications.forEach((({resource_type:t})=>"Endpoint"===t&&De(a,`${Ne}-${e.id}`)))))}})),a.filter(Boolean)})(s,t),c=[];let d;if(r.forEach((e=>{e.includes(Ne)?c.push((0,Pe.h)(s.endpoints[0].id,void 0,void 0,"getEndpoint",o).then((t=>({...t,id:e.replace(`${Ne}-`,"")})))):c.push((0,Pe.h)(e,void 0,void 0,void 0,o))})),c.length>0){try{d=await Promise.all(c)}catch(e){return await a((0,b.il)()),void i({type:"submitFailed"})}d.forEach((({availability_status:e,availability_status_error:t,id:a})=>{e===m.Rl&&(l[a]={title:n.formatMessage({id:"wizard.successEditToastTitle",defaultMessage:"Application credentials were edited successfully."}),description:t,variant:"success"}),e===m.nZ&&(l[a]={title:n.formatMessage({id:"wizard.failEditToastTitle",defaultMessage:"Edit application credentials failed."}),description:t,variant:"danger"}),e&&e!==m.Bj||(l[a]={title:n.formatMessage({id:"wizard.timeoutEditToastTitle",defaultMessage:"Edit in progress"}),description:n.formatMessage({id:"wizard.timeoutEditToastDescription",defaultMessage:"We are still working to confirm your updated credentials. Changes will be reflected in this table when complete."}),variant:"warning"})}))}await a((0,b.il)()),i({type:"submitFinished",messages:l})};var Le=a(15185),Be=a(96354),je=a(64124),ze=a(44012),Ue=a(58647),We=a(50142);const Ge=e=>e.split(".").pop(),$e=(e,t,a,s="generic")=>ke()(We.Z,[e,"authentication",t,s,a],{}),Ke=(e,t)=>e?.fields?.filter((e=>t&&e.stepKey===t))||[],Ve=(e,t,a,s)=>e&&0!==e.length&&t.schema&&t.schema.authentication?e.map((e=>{const i=t?.schema?.authentication?.find((({type:t})=>t===e.authtype));if(!i)return[];const o=((e,t,a="generic")=>ke()(We.Z,[e,"authentication",t,a,"includeStepKeyFields"],[]))(t.name,e.authtype,a),l=((e,t,a="generic")=>ke()(We.Z,[e,"authentication",t,a,"additionalSteps"],[]))(t.name,e.authtype,a)?.map((e=>({...e,fields:[...e.fields,...Ke(i,e.name)]}))).map((({fields:e})=>e.map((({name:e})=>e)))).flatMap((e=>e));return((e,t,a)=>e.map((e=>{let s=e.name.startsWith("authentication")?((e,t)=>`authentications.a${t}.${e.replace("authentication.","")}`)(e.name,t):e.name.startsWith("application")?((e,t)=>`applications.a${t}.${e.replace("application.","")}`)(e.name,a):e.name;const i={...e,name:s},o="password"===Ge(i.name),l="bucket_region"===Ge(i.name)&&i.label.includes("AWS"),r="external_id"===Ge(i.name);return o&&(i.component="authentication"),l&&(i.loadOptions=()=>(0,Ue.j)().then((e=>e.map((e=>({value:e,label:e})))))),r&&(i.hideField=!1,i.label=n().createElement(ze.Z,{id:"cost.arn.externalId",defaultMessage:"External ID"}),i.component="clipboard-copy",i.isReadOnly=!0),i})))(i.fields.filter((e=>l.includes(e.name)||!l.length&&!e.stepKey||e.stepKey&&o.includes(e.stepKey))).map((s=>({...s,...$e(t.name,e.authtype,s.name,a)}))),e.id,s)})):[],He=(e,t)=>ke()(We.Z,[e,"endpoint",t],{});var qe=a(48880),Xe=a(4440);const Ye=({name:e})=>{const t=(0,qe.default)(),{variant:a,title:s,description:i,customIcon:o}=ke()(t.getState().values,e);return n().createElement(Xe.Alert,{variant:a,isInline:!0,title:s,customIcon:o},i)};Ye.propTypes={name:c().string.isRequired};const Qe=Ye;var Je=a(86929),et=a.n(Je);const tt=({applicationName:e,message:t,Icon:a})=>{const s=(0,o.Z)();return n().createElement(Me.Bullseye,null,n().createElement(fe.EmptyState,{variant:fe.EmptyStateVariant.small},n().createElement(fe.EmptyStateIcon,{icon:a}),n().createElement(ge.Title,{headingLevel:"h2",size:"lg"},s.formatMessage({id:"resourceTable.emptyStateTitle",defaultMessage:"No application resources"})),n().createElement(fe.EmptyStateBody,null,s.formatMessage(t,{applicationName:e}))))};tt.propTypes={applicationName:c().string.isRequired,message:c().shape({id:c().string.isRequired,defaultMessage:c().string.isRequired}),Icon:c().elementType},tt.defaultProps={message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will appear here when created."},Icon:et()};const at=tt,st=(e,t,a,s)=>[{component:Be.Z.TABS,name:"app-tabs",isBox:!0,fields:[...e.map((e=>{const n=a.find((({id:t})=>t===e.application_type_id));let i=((e,t,a)=>[{name:`messages.${a.id}`,component:"description",Content:Qe,condition:{when:({name:e})=>e,isNotEmpty:!0}},...Ve(a.authentications?.filter((e=>Object.keys(e).length>1)),t,e?.name,a.id)])(n,t,e);if(e.authentications.find((({resource_type:e})=>"Endpoint"===e))){const e=(e=>{if(!e.schema||!e.schema.endpoint||e.schema.endpoint.hidden)return;const t=e.schema.endpoint.fields.map((t=>({...t,...He(e.name,t.name)}))),a={component:Be.Z.SUB_FORM,name:"endpoint"};if("ansible-tower"===e.name){const e=t.find((({name:e})=>"url"===e));return{...a,fields:[{component:Be.Z.SUB_FORM,name:"receptor_node_group",condition:{when:"endpoint.receptor_node",isNotEmpty:!0},fields:[{...e,isRequired:!1,validate:e?.validate?.filter((e=>e.type!==je.Z.REQUIRED))}]},{component:Be.Z.SUB_FORM,name:"hostname_group",condition:{when:"endpoint.receptor_node",isEmpty:!0},fields:t}]}}return{...a,fields:t}})(t);i=[i[0],[...i[1]||[],...e?[e]:[]]]}return 1===i.length?i.push({component:"description",name:"no-credentials",Content:at,message:{id:"resourceTable.emptyStateDescription",defaultMessage:"{applicationName} resources will be added here when created."},applicationName:n?.display_name,Icon:ye()}):e.paused_at&&(i=[i[0],i[1].map((e=>({...e,isDisabled:!0})))]),{name:n?.id,title:n?.id===le.sC&&s?le.X0:n?.display_name,fields:i}}))]}],nt=(e,t,a,s,n)=>({description:s.formatMessage({id:"sources.editFormDescripiton",defaultMessage:"Use the form fields to edit application credentials."}),fields:st(e.applications,t,a,n)}),it={loading:!0,source:void 0,initialValues:{},sourceType:void 0,schema:void 0,isSubmitting:!1,initialLoad:!0,submitError:!1,submitMessages:void 0},ot=(e,{type:t,source:a,sourceType:s,appTypes:n,intl:i,values:o,editing:l,messages:r,hcsEnrolled:c})=>{switch(t){case"createForm":return{...e,sourceType:s,initialValues:Ie(e.source,s.product_name),schema:nt(e.source,s,n,i,c),loading:!1};case"setSource":return{...e,messages:{...r,...e.submitMessages},source:a,initialLoad:!1,submitMessages:void 0};case"submit":return{...e,isSubmitting:!0,submitError:!1,values:o,editing:l};case"submitFinished":return{...e,isSubmitting:!1,source:a,submitMessages:r};case"submitFailed":return{...e,isSubmitting:!1,submitError:!0,messages:void 0};case"sourceChanged":return{...e,initialLoad:!0,loading:!0};default:return e}};var lt=a(26946);const rt=()=>{const e=(0,o.Z)();return n().createElement(lt.Z,{customText:e.formatMessage({id:"sources.editSubmittingTitle",defaultMessage:"Validating edited source credentials"})})};var ct=a(64129),dt=a(27552);const pt=({onRetry:e})=>{const t=(0,o.Z)();return n().createElement(dt.Z,{onClose:e,customText:t.formatMessage({id:"sources.editErrorDescription",defaultMessage:"There was a problem while trying to edit your source. Please try again. If the error persists, open a support case."}),secondaryActions:n().createElement(ct.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},t.formatMessage({id:"sources.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:t.formatMessage({id:"sources.retryText",defaultMessage:"Retry"})})};pt.propTypes={onRetry:c().func.isRequired};const ut=pt;var mt=a(24503),ft=a(99875);mt.ClipboardCopy.propTypes={label:c().string};const gt=e=>{const{label:t,input:a}=(0,ft.Z)(e);return n().createElement(w.FormGroup,{label:t},n().createElement(mt.ClipboardCopy,{label:t,isReadOnly:!0},a.value))},ht=()=>{const[e,t]=(0,s.useReducer)(ot,it),a=(0,u.L)(),i=(0,Le.W)(),{loading:r,editing:c,source:d,initialValues:p,schema:f,isSubmitting:g,initialLoad:h,message:E,messages:b,submitError:v,values:T}=e,M=(0,o.Z)(),{sourceTypes:C,appTypes:w,sourceTypesLoaded:_,appTypesLoaded:R}=(0,l.v9)((({sources:e})=>e),l.wU),k=(0,l.v9)((({sources:e})=>e.hcsEnrolled),l.wU),A=(0,l.v9)((({sources:e})=>e.hcsEnrolledLoaded),l.wU),x=(0,l.I0)();(0,s.useEffect)((()=>{h||t({type:"sourceChanged"})}),[a,a?.applications?.length]),(0,s.useEffect)((()=>{a&&h&&R&&_e(a).then((e=>{const a=((e,t,a)=>{const s={};return e.applications.forEach((({id:e,application_type_id:n,availability_status_error:i,availability_status:o,paused_at:l})=>{if(l){const i=a.find((e=>e.id===n))?.display_name||e;s[e]=Se(t,i)}else o===m.nZ&&(s[e]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:i,variant:"danger"})})),e.endpoints?.[0]?.availability_status_error&&e.applications.map((e=>e.authentications.find((({resource_type:t})=>!e.paused_at&&"Endpoint"===t))?e.id:void 0)).filter(Boolean).forEach((a=>{s[a]={title:t.formatMessage({id:"wizard.failEditToastTitleBeforeEdit",defaultMessage:"This application is unavailable"}),description:e.endpoints?.[0]?.availability_status_error,variant:"danger"}})),s})(e,M,w);t({type:"setSource",source:e,messages:a})}))}),[a,i,R,h]),(0,s.useEffect)((()=>{if(d&&R&&_){const e=C.find((({id:e})=>e===d.source.source_type_id));t({type:"createForm",sourceType:e,source:d,appTypes:w,hcsEnrolled:k,intl:M})}}),[R,d,_,A]);const Z=!A||!R||!_||r;if(v)return n().createElement(ut,{onRetry:()=>Fe(T,c,x,d,M,t)});if(g)return n().createElement(rt,null);if(Z)return n().createElement(Me.Bullseye,{className:"pf-u-m-2xl"},n().createElement(y.Spinner,null));const S=d.source.paused_at||d.applications.every((({paused_at:e})=>e));return n().createElement(we.Z,{schema:f,onSubmit:(e,a)=>Fe(e,a.getState().dirtyFields,x,d,M,t),FormTemplate:e=>n().createElement(Ce.ZP,{canReset:!0,showFormControls:!S,submitLabel:"Save changes",disableSubmit:["pristine","invalid"],...e}),clearedValue:null,initialValues:{...p,...!a.paused_at&&{message:E},...!a.paused_at&&{messages:b}},componentMapper:{"clipboard-copy":gt}})},yt=()=>{const e=(0,o.Z)(),t=(0,u.L)(),a=(0,I.E)();return n().createElement(d.Card,{className:"card pf-u-m-lg pf-u-mt-0"},n().createElement(d.CardTitle,null,e.formatMessage({id:"detail.resources.title",defaultMessage:"Manage connected applications"})),n().createElement(d.CardBody,null,!a&&n().createElement(Te,null),a&&0===t.applications.length&&n().createElement(Ee,null),a&&t.applications.length>0&&n().createElement(ht,null)))};var Et=a(40423),bt=a(63663),vt=a(63456),Tt=a(36530),Mt=a(68822);const Ct=()=>{const e=(0,o.Z)(),t=(0,u.L)();return n().createElement(Mt.Breadcrumb,null,n().createElement(Mt.BreadcrumbItem,{component:({href:e,...t})=>n().createElement(ae.Z,{to:e,...t}),to:N._j.sources.path},e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})),n().createElement(Mt.BreadcrumbItem,{isActive:!0},t.name))},wt=()=>{const[e,t]=(0,s.useState)(!1),a=(0,o.Z)(),i=(0,u.L)(),r=(0,I.E)(),c=(0,l.I0)(),d=(0,l.v9)((({user:e})=>e.isOrgAdmin)),p=e=>()=>{t(!1),e()},m=a.formatMessage({id:"sources.pausedSourceAction",defaultMessage:"You cannot perform this action on a paused source."}),f=(0,te.Z)(a,d),g={...f,tooltip:m,tooltipProps:{...f.tooltipProps,content:m}};return n().createElement(q,{toggle:n().createElement(ee,{onToggle:()=>t(!e),id:"toggle-id-6"}),isOpen:e,isPlain:!0,position:"right",dropdownItems:[i.paused_at?n().createElement(z,{...!r&&f,key:"unpause",onClick:p((()=>c((0,b.AX)(i.id,i.name,a)))),description:a.formatMessage({id:"detail.resume.description",defaultMessage:"Unpause data collection for this source"})},a.formatMessage({id:"detail.resume.button",defaultMessage:"Resume"})):n().createElement(z,{...!r&&f,key:"pause",onClick:p((()=>c((0,b.xz)(i.id,i.name,a)))),description:a.formatMessage({id:"detail.pause.description",defaultMessage:"Temporarily disable data collection"})},a.formatMessage({id:"detail.pause.button",defaultMessage:"Pause"})),n().createElement(z,{...!r&&f,key:"remove",to:(0,N.yS)(N._j.sourcesDetailRemove.path,i.id),component:ae.Z,description:a.formatMessage({id:"detail.remove.description",defaultMessage:"Permanently delete this source and all collected data"})},a.formatMessage({id:"detail.remove.button",defaultMessage:"Remove"})),n().createElement(z,{...!r&&f,...i.paused_at&&g,key:"rename",to:(0,N.yS)(N._j.sourcesDetailRename.path,i.id),component:ae.Z},a.formatMessage({id:"detail.rename.button",defaultMessage:"Rename"}))]})},_t=()=>{const e=(0,o.Z)(),t=(0,u.L)(),a=(0,l.v9)((({sources:e})=>e.appTypes),l.wU),s=(0,l.v9)((({sources:e})=>e.sourceTypes),l.wU);return n().createElement(vt.Z,null,n().createElement(Ct,null),n().createElement(Tt.Flex,{className:"pf-u-mb-sm"},n().createElement(Tt.FlexItem,null,n().createElement(ge.Title,{headingLevel:"h1",size:"2xl"},t.name)),n().createElement(Tt.FlexItem,null,(0,m.BN)(void 0,t,{appTypes:a,sourceTypes:s})),n().createElement(Tt.FlexItem,{align:{default:"alignRight"}},n().createElement(wt,null))),n().createElement(ct.TextContent,null,n().createElement(ct.Text,null,e.formatMessage({id:"detail.description",defaultMessage:"View details and manage connections for this source."}))))};var Rt=a(21081),kt=a(49004),At=a(58027),xt=a(13822);const Zt=e=>[e.formatMessage({id:"resourceTable.resourceType",defaultMessage:"Resource type"}),e.formatMessage({id:"resourceTable.resourceValue",defaultMessage:"Value"})],St=(e,t,a)=>e.applications.reduce(((s,i)=>{const o=t.find((({id:e})=>e===i.application_type_id)),l=(r=Ve(i.authentications?.filter((e=>Object.keys(e).length>1)),a,o?.name,i.id),c=Ie(e,a.product_name),r.flatMap((e=>e)).map((e=>!e.hideField&&[n().createElement(n().Fragment,{key:"label"},e.label),ke()(c,e.name)])).filter(Boolean));var r,c;return{...s,[i.id]:l}}),{}),Nt=(e,{type:t,intl:a,source:s,activeTab:n,appTypes:i,sourceType:o})=>{switch(t){case"loaded":return{...e,columns:Zt(a),applicationsRows:St(s,i,o),loading:!1,activeTab:s.applications[0].id};case"switchTab":return{...e,activeTab:n};case"setLoading":return{...e,loading:!0}}},It=()=>{const e=(0,o.Z)(),t=(0,u.L)(),a=(0,Le.W)(),{sourceTypes:i,appTypes:r,sourceTypesLoaded:c,appTypesLoaded:p}=(0,l.v9)((({sources:e})=>e),l.wU),[{activeTab:m,loading:f,columns:g,applicationsRows:h},E]=(0,s.useReducer)(Nt,(e=>({loading:Boolean(e.applications?.length),columns:[],applicationsRows:{},activeTab:0}))(t));return(0,s.useEffect)((()=>{t&&a&&p&&c&&t?.applications?.length&&(E({type:"setLoading"}),_e(t).then((t=>{const a=i.find((({id:e})=>e===t.source.source_type_id));E({type:"loaded",source:t,intl:e,sourceType:a,appTypes:r})})))}),[t?.applications?.length,a,p,c]),n().createElement(d.Card,{className:"pf-u-m-lg pf-u-mt-0"},n().createElement(d.CardTitle,null,e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"})),n().createElement(d.CardBody,null,f&&n().createElement(Me.Bullseye,{className:"pf-u-m-2xl"},n().createElement(y.Spinner,null)),!f&&!t.applications.length&&n().createElement(Ee,null),!f&&t.applications.length>0&&n().createElement(n().Fragment,null,n().createElement(ct.Text,{className:"pf-u-mb-md"},e.formatMessage({id:"resourceTable.description",defaultMessage:"View resources for your connected applications."})),n().createElement(xt.Tabs,{isBox:!0,activeKey:m,onSelect:(e,t)=>E({type:"switchTab",activeTab:t})},t.applications.map((a=>{const s=r.find((({id:e})=>e===a.application_type_id))?.display_name||a.application_type_id,{description:i,...o}=a.paused_at?Se(e,s):{};return n().createElement(xt.Tab,{eventKey:a.id,key:a.id,title:n().createElement(xt.TabTitleText,null,s)},a.paused_at&&!t.paused_at&&n().createElement(Xe.Alert,{isInline:!0,className:"pf-u-mt-lg",...o},i),h[a.id]?.length?n().createElement(Rt.i,{"aria-label":e.formatMessage({id:"resourceTable.title",defaultMessage:"Connected application resources"}),variant:"compact",cells:g,rows:h[a.id],className:"pf-u-mt-md"},n().createElement(kt.x,null),n().createElement(At.R,null)):n().createElement(at,{applicationName:s}))}))))))},Dt=()=>{const e=(0,o.Z)(),t=(0,I.E)(),a=(0,l.I0)(),s=(0,u.L)(),r=(0,l.v9)((({user:e})=>e.isOrgAdmin));return n().createElement(i.GridItem,{md:12,className:"pf-u-m-lg pf-u-mb-0"},n().createElement(Xe.Alert,{customIcon:n().createElement(x(),null),variant:"default",isInline:!0,title:e.formatMessage({id:"source.detail.pausedTitle",defaultMessage:"Source paused"}),actionLinks:t?n().createElement(Xe.AlertActionLink,{onClick:()=>a((0,b.AX)(s.id,s.name,e))},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})):n().createElement(k.Tooltip,{content:(0,te.$)(e,r)},n().createElement(Xe.AlertActionLink,{isDisabled:!0},e.formatMessage({id:"source.detail.resumeConnection",defaultMessage:"Resume connection"})))},e.formatMessage({id:"source.detail.pausedDescription",defaultMessage:"No data is being collected for this source. Turn the source back on to reestablish connection and data collection. Previous credentials will be restored and application connections will continue as seen on this page."})))};var Ot=a(49881);const Pt=()=>{const e=(0,u.L)();if(!e)return n().createElement(n().Fragment,null,n().createElement(bt.X6,null),n().createElement(Et.Z,null));const t=(0,D.Z)(e);return n().createElement("div",{className:"src-c-detail-page"},n().createElement(s.Suspense,{fallback:null},n().createElement(Ot.Outlet,{context:{backPath:(0,N.yS)(N._j.sourcesDetail.path,e.id)}})),n().createElement(_t,null),e.paused_at&&n().createElement(Dt,null),n().createElement(i.Grid,null,n().createElement(i.GridItem,{md:"6"},n().createElement(C,null)),n().createElement(i.GridItem,{md:"6"},n().createElement(me,null)),n().createElement(i.GridItem,{md:"12"},t?n().createElement(It,null):n().createElement(yt,null))))}},12567:(e,t,a)=>{"use strict";a.d(t,{W:()=>n,Z:()=>i});var s=a(75614);const n=(e,t)=>({supported_source_types:a})=>a.find((a=>e.find((({name:e})=>a===e))?.category===t)),i=e=>e.name!==s.M$},70642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(64072);const n=e=>e?.app_creation_workflow===s.b},8572:()=>{},98379:()=>{},91993:()=>{},44690:()=>{},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/sourceDetail.aa7d03327a56d6fccf06eeb20a001f90.js.map