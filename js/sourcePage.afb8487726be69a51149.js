(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{266:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(36),c=n.n(o),i=n(0),s=n.n(i),u=n(28),l=n(9),d=n(54),f=n(71),p=n(70),m=n(747),b=n(12),O=n(527),y=n(590),g=n(591),j=n(24),h=n.n(j),v=n(423),E=n(300),w=n(499),S=n(498),M=n(78),P=n(296),T=n.n(P),B=n(312),D=n.n(B),k=n(2),C=n.n(k),N=n(358),A=n(506),_=n(82),R=n(313),x=n(357),L=function(){return s.a.createElement(x.Bullseye,{className:"ins-c-sources__sources-placeholder-loader"},s.a.createElement(R.Spinner,{size:"xl"}))},q=function(e){var t=e.row,n=t.isDeleting,r=D()(t,["isDeleting"]),a=D()(e,["row"]);return n?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:_.a},s.a.createElement(A.RowLoader,null))):s.a.createElement(N.a,T()({},a,{row:r,className:"ins-c-sources__row-vertical-centered"}))};q.propTypes={row:C.a.object.isRequired};var F=n(297),z=n(298),I=n(299),V=n(72),Y=n(121),H=n(332),J=n.n(H),W=function(){var e=Object(u.useDispatch)();return s.a.createElement(V.Bullseye,null,s.a.createElement(F.EmptyState,{variant:F.EmptyStateVariant.small},s.a.createElement(z.EmptyStateIcon,{icon:J.a}),s.a.createElement(Y.Title,{headingLevel:"h2",size:"lg"},s.a.createElement(b.a,{defaultMessage:"No sources found",id:"sources.noResultsFoundTitle"})),s.a.createElement(I.EmptyStateBody,null,s.a.createElement(b.a,{defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources.",id:"sources.noResultsFoundDescription"})),s.a.createElement(p.Button,{variant:"link",onClick:function(){return e(Object(f.c)())}},s.a.createElement(b.a,{defaultMessage:"Clear all filters",id:"sources.clearAllFilters"}))))},G=n(314),K=function(){return Object(u.useSelector)((function(e){return e.user.isOrgAdmin}))},Q=n(73);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e,t,n,r){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?Object(M.c)(t.formatter)(e[t.value],e,{sourceTypes:n,appTypes:r}):e[t.value]||""}}))},$=function(e,t,n,r){return e.filter((function(e){return!e.hidden})).reduce((function(e,a){return[].concat(h()(e),[X(X({},a),{},{isOpen:!!a.expanded,cells:Z(a,t,n,r),disableActions:!!a.isDeleting})])}),[])},ee=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return X({title:e.title||"",value:e.value,hidden:e.hidden},e.sortable&&{transforms:[v.a]})}))},te=function(e,t){return X(X({},e),t)},ne=function(e,t,n){return function(r){var a={tooltip:e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),isDisabled:!0,className:"ins-c-sources__disabled-drodpown-item",tabIndex:"0"},o=[X({title:e.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),onClick:function(e,n,r){var a=r.id;return t(Object(Q.b)(Q.c.sourceManageApps.path,a))}},n?{component:"button"}:a),X({title:e.formatMessage({id:"sources.delete",defaultMessage:"Delete"}),onClick:function(e,n,r){var a=r.id;return t(Object(Q.b)(Q.c.sourcesRemove.path,a))}},n?{component:"button"}:a)];return!r.imported&&function(e,t,n,r,a){e.splice(1,0,X({title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,r){var a=r.id;return n(Object(Q.b)(Q.c.sourcesEdit.path,a))}},r?{component:"button"}:a))}(o,e,t,n,a),o}},re=function(){var e,t=Object(l.f)().push,n=Object(m.a)(),r=Object(G.a)(),a=K(),o=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),d=o.appTypes,p=o.entities,b=o.sourceTypes,O=o.sourceTypesLoaded,y=o.appTypesLoaded,g=o.sortBy,j=o.sortDirection,h=o.numberOfEntities,v=Object(u.useDispatch)(),M=0===h||!r,P=Object(i.useReducer)(te,(e=Object(_.b)(n,M),{rows:[],sortBy:{},isLoaded:!1,cells:ee(e)})),T=c()(P,2),B=T[0],D=T[1],k=function(){var e=Object(_.b)(n,M);return D({rows:$(p,e,b,d),cells:ee(e)})};Object(i.useEffect)((function(){r&&O&&y?(D({isLoaded:!0}),k()):(D({isLoaded:!1}),function(){var e=Object(_.b)(n,M);D({cells:ee(e)})}())}),[r,O,y]),Object(i.useEffect)((function(){B.isLoaded&&k()}),[p]);var C=B.rows;return 0===h&&B.isLoaded?C=[{heightAuto:!0,cells:[{props:{colSpan:_.a},title:s.a.createElement(W,null)}]}]:r&&y&&O||(C=[{heightAuto:!0,cells:[{props:{colSpan:_.a,className:"sources-placeholder-row"},title:s.a.createElement(L,null)}]}]),s.a.createElement(E.b,{gridBreakPoint:"grid-lg","aria-label":n.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,n){return v(Object(f.k)(B.cells[t].value,n))},sortBy:{index:B.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(g),direction:j},rows:C,cells:B.cells,actionResolver:r&&h>0?ne(n,t,a):void 0,rowWrapper:q},s.a.createElement(w.a,null),s.a.createElement(S.a,null))},ae=n(525),oe=n.n(ae),ce=function(e){var t=e.title,n=e.body,r=K();return s.a.createElement(V.Bullseye,null,s.a.createElement(F.EmptyState,{className:"ins-c-sources__empty-state"},s.a.createElement(z.EmptyStateIcon,{icon:oe.a}),s.a.createElement(Y.Title,{headingLevel:"h5",size:"lg"},t||s.a.createElement(b.a,{id:"sources.emptyStateTitle",defaultMessage:"No sources"})),s.a.createElement(I.EmptyStateBody,null,n||r&&s.a.createElement(b.a,{id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!r&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement(b.a,{id:"sources.emptyStateBodyNotAdmin",defaultMessage:"You do not have permission to define sources."}))),r?s.a.createElement(d.b,{to:Q.c.sourcesNew.path},s.a.createElement(p.Button,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary"},s.a.createElement(b.a,{id:"sources.emptyStateButton",defaultMessage:"Add source"}))):s.a.createElement(p.Button,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary",isDisabled:!0},s.a.createElement(b.a,{id:"sources.emptyStateButton",defaultMessage:"Add source"}))))};ce.propTypes={title:C.a.node,body:C.a.node};var ie=ce,se=n(743),ue=n(369);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=Object(se.a)((function(e){return e()}),500),pe={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},me=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},be=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},Oe=function(e,t,n){return n(Object(f.d)(a()({},e,t)))},ye=function(e,t,n){return Object.keys(e).map((function(r){return e[r]&&e[r].length>0?function(e,t,n,r){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(r,e,t,n)():void 0})).filter(Boolean)},ge=function(e,t){return t&&e.length>0?e:void 0},je=n(96),he=function(){return s.a.createElement("div",{className:"ins-c-sources__pagination-loader-wrapper"},s.a.createElement(je.a,{height:30,width:200,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},s.a.createElement("rect",{x:"0",y:"0",rx:"6",ry:"6",width:"200",height:"30"})))},ve=function(){var e=Object(m.a)(),t=K(),n=Object(u.useDispatch)();if(!1===t){var r=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."});return n(Object(f.b)(r,"danger",a)),s.a.createElement(l.a,{to:Q.c.sources.path})}return null},Ee=n(282),we=n(14),Se=function(){var e=Object(l.h)().id,t=Object(m.a)(),n=Object(G.a)(),r=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),a=r.appTypesLoaded,o=r.sourceTypesLoaded,d=Object(u.useDispatch)(),p=Object(i.useState)(!1),b=c()(p,2),O=b[0],y=b[1];return Object(i.useEffect)((function(){n&&a&&o&&Object(we.h)(e).then((function(e){var t=c()(e.sources,1)[0];return d(Object(f.a)(t))})).then((function(){y(!0)}))}),[n,a,o]),O?(d(Object(f.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),s.a.createElement(l.a,{to:Q.c.sources.path})):null},Me=function(e){var t=e.route,n=e.children;return!(t.redirectNoId?Object(Ee.a)():void 0)&&t.redirectNoId?s.a.createElement(Se,null):s.a.createElement(s.a.Fragment,null,t.writeAccess&&s.a.createElement(ve,null),n)};Me.propTypes={route:C.a.shape({path:C.a.string.isRequired,redirectNoId:C.a.bool,writeAccess:C.a.bool}).isRequired,children:C.a.node.isRequired};var Pe=function(e){var t=e.route,n=e.componentProps,r=e.Component,a=D()(e,["route","componentProps","Component"]);return s.a.createElement(l.b,T()({},a,{path:t.path}),s.a.createElement(Me,{route:t},s.a.createElement(r,n)))};Pe.propTypes={route:C.a.shape({path:C.a.string.isRequired,redirectNoId:C.a.bool,writeAccess:C.a.bool}).isRequired,componentProps:C.a.any,Component:C.a.oneOfType([C.a.func,C.a.object]).isRequired};var Te=Pe,Be=n(107),De=n(43);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5)]).then(n.bind(null,749))})),Ae=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,748))})),_e=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8),n.e(4)]).then(n.bind(null,750))})),Re=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.t.bind(null,280,7)).then((function(e){return{default:e.AddSourceWizard}}))}));t.default=function(){var e=Object(i.useState)(!1),t=c()(e,2),n=t[0],r=t[1],o=Object(i.useState)(!1),j=c()(o,2),h=j[0],v=j[1],E=Object(i.useState)(),w=c()(E,2),S=w[0],M=w[1],P=Object(G.a)(),T=K(),B=Object(l.f)(),D=Object(l.g)(),k=Object(m.a)(),C=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),N=C.filterValue,A=C.numberOfEntities,_=C.appTypes,R=C.pageSize,x=C.pageNumber,L=C.fetchingError,q=C.sourceTypes,F=C.paginationClicked,z=C.appTypesLoaded,I=C.sourceTypesLoaded,V=Object(u.useDispatch)();Object(i.useEffect)((function(){Promise.all([V(Object(f.g)()),V(Object(f.e)()),V(Object(f.f)(Object(Be.a)()))]).then((function(){return v(!0)}))}),[]);var Y=Object.entries(N).map((function(e){var t=c()(e,2);t[0];return t[1]})).filter(Boolean).length>0;Object(i.useEffect)((function(){h&&(r(P&&0===A&&!Y),Object(Be.b)(C))}),[D,h]),Object(i.useEffect)((function(){S!==N.name&&M(N.name)}),[N.name]),Object(i.useEffect)((function(){h&&P&&r(0===A&&!Y)}),[P]);var H=function(e,t){return V(Object(f.h)(t,R))},J=Math.ceil(A/R);Object(i.useEffect)((function(){P&&A>0&&x>Math.max(J,1)&&H(0,J)}));var W={itemCount:A,page:x,perPage:R,onSetPage:H,onPerPageSelect:function(e,t){return V(Object(f.h)(1,t))}},U=Ce(Ce({},W),{},{dropDirection:"up",variant:"bottom",isCompact:!1}),X=!(P&&z&&I||F);return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.Suspense,{fallback:null},s.a.createElement(Te,{exact:!0,route:Q.c.sourceManageApps,Component:_e}),s.a.createElement(Te,{exact:!0,route:Q.c.sourcesRemove,Component:Ae}),s.a.createElement(Te,{exact:!0,route:Q.c.sourcesNew,Component:Re,componentProps:{sourceTypes:ge(q,I),applicationTypes:ge(_,z),isOpen:!0,onClose:function(){return B.push(Q.c.sources.path)},afterSuccess:function(e){return function(e,t){Object(ue.a)(t.id),e(Object(f.f)(pe))}(V,e)},hideSourcesButton:!0}}),s.a.createElement(Te,{exact:!0,route:Q.c.sourcesEdit,Component:Ne})),s.a.createElement(y.PageHeader,null,s.a.createElement(y.PageHeaderTitle,{title:k.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),s.a.createElement(g.Section,{type:"content"},n||L?s.a.createElement(ie,{title:L?L.title:void 0,body:L?L.detail:void 0}):s.a.createElement(s.a.Fragment,null,s.a.createElement(O.PrimaryToolbar,{pagination:X?s.a.createElement(he,null):A>0?W:void 0,actionsConfig:T?{actions:[s.a.createElement(d.b,{to:Q.c.sourcesNew.path,key:"addSourceButton"},s.a.createElement(p.Button,{variant:"primary",id:"addSourceButton"},s.a.createElement(b.a,{id:"sources.addSource",defaultMessage:"Add source"})))]}:{actions:[s.a.createElement(De.Tooltip,{content:k.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),key:"addSourceButton"},s.a.createElement("span",{tabIndex:"0"},s.a.createElement(p.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},s.a.createElement(b.a,{id:"sources.addSource",defaultMessage:"Add source"}))))]},filterConfig:{items:[{label:k.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":k.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){M(t),fe((function(){return Oe("name",t,V)}))},value:S}},{label:k.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return Oe("source_type_id",t,V)},items:me(q||[]),value:N.source_type_id}},{label:k.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return Oe("applications",t,V)},items:be(_||[]),value:N.applications}}]},activeFiltersConfig:{filters:ye(N,q,_),onDelete:function(e,t,n){return V(Object(f.d)(function(e,t,n){if(n)return Object.keys(t).reduce((function(e,t){return de(de({},e),{},a()({},t,void 0))}),{});var r=e[0];return de(de({},t),{},a()({},r.key,r.chips?t[r.key].filter((function(e){return e!==r.chips[0].value})):void 0))}(t,N,n)))}}}),s.a.createElement(re,null),s.a.createElement(O.PrimaryToolbar,{pagination:X?s.a.createElement(he,null):A>0?U:void 0}))))}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(28),a=n(9),o=function(){var e=Object(a.h)().id;return Object(r.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},314:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(28),a=function(){return Object(r.useSelector)((function(e){return e.sources.loaded}))<=0}},369:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),a=function(e){return Object(r.j)().checkAvailabilitySource(e).catch((function(){}))}}}]);
//# sourceMappingURL=../sourcemaps/sourcePage.js.map