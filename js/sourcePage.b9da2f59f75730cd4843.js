(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{436:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),o=r(54),c=r.n(o),s=r(0),i=r.n(s),u=r(48),l=r(14),f=r(114),d=r(146),p=r(274),m=r(802),b=r(135),g=r(186),O=r(150),y=r(36),j=r.n(y),h=r(635),v=r(496),E=r(490),M=r(722),S=r(723),w=r(159),P=r(100),T=r(459),B=r(453),k=r(466),A=r(234),D=r(147),N=r(518),C=r.n(N),_=function(){var e=Object(p.a)(),t=Object(u.useDispatch)();return i.a.createElement(A.Bullseye,null,i.a.createElement(T.EmptyState,{variant:T.EmptyStateVariant.small},i.a.createElement(B.EmptyStateIcon,{icon:C.a}),i.a.createElement(D.Title,{headingLevel:"h2",size:"lg"},e.formatMessage({id:"sources.noResultsFoundTitle",defaultMessage:"No sources found"})),i.a.createElement(k.EmptyStateBody,null,e.formatMessage({id:"sources.noResultsFoundDescription",defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources."})),i.a.createElement(d.Button,{variant:"link",onClick:function(){return t(Object(O.c)())}},e.formatMessage({id:"sources.clearAllFilters",defaultMessage:"Clear all filters"}))))},L=r(519),R=function(){var e=Object(u.useSelector)((function(e){var t=e.user;return{orgAdmin:null==t?void 0:t.isOrgAdmin,writePermissions:null==t?void 0:t.writePermissions}})),t=e.orgAdmin,r=e.writePermissions;if("boolean"==typeof t||"boolean"==typeof r)return!!t||!!r},x=r(151);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e,t,r,n){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?t.formatter(e[t.value],e,{sourceTypes:r,appTypes:n}):e[t.value]||""}}))},I=function(e,t,r,n,a){return e.filter((function(e){return!e.hidden})).reduce((function(e,o){var c=a.includes(o.id);return[].concat(j()(e),[q(q({},o),{},{isOpen:!!o.expanded,cells:F(o,t,r,n),disableActions:c,isDeleting:c})])}),[])},V=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return q({title:e.title||"",value:e.value,hidden:e.hidden},e.sortable&&{transforms:[h.a,v.e]})}))},H=function(e,t){return q(q({},e),t)},J=function(e,t,r){return function(n){var a={tooltip:e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must be granted write permissions from your Organization Administrator."}),isDisabled:!0,className:"ins-c-sources__disabled-drodpown-item"},o=[q({title:e.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),onClick:function(e,r,n){var a=n.id;return t(Object(x.b)(x.c.sourceManageApps.path,a))}},r?{component:"button"}:a),q({title:e.formatMessage({id:"sources.remove",defaultMessage:"Remove"}),onClick:function(e,r,n){var a=n.id;return t(Object(x.b)(x.c.sourcesRemove.path,a))}},r?{component:"button"}:a)];return!n.imported&&function(e,t,r,n,a){e.splice(1,0,q({title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,n){var a=n.id;return r(Object(x.b)(x.c.sourcesEdit.path,a))}},n?{component:"button"}:a))}(o,e,t,r,a),o}},W=function(){var e,t=Object(l.k)().push,r=Object(p.a)(),n=Object(L.a)(),a=R(),o=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),f=o.appTypes,d=o.entities,m=o.sourceTypes,b=o.sourceTypesLoaded,g=o.appTypesLoaded,y=o.sortBy,j=o.sortDirection,h=o.numberOfEntities,v=o.removingSources,T=Object(u.useDispatch)(),B=0===h||!n,k=Object(s.useReducer)(H,(e=Object(P.b)(r,B),{rows:[],sortBy:{},isLoaded:!1,cells:V(e)})),A=c()(k,2),D=A[0],N=A[1],C=function(){var e=Object(P.b)(r,B);return N({rows:I(d,e,m,f,v),cells:V(e)})};Object(s.useEffect)((function(){n&&b&&g?(N({isLoaded:!0}),C()):(N({isLoaded:!1}),function(){var e=Object(P.b)(r,B);N({cells:V(e)})}())}),[n,b,g]),Object(s.useEffect)((function(){D.isLoaded&&C()}),[d,v]);var x=D.rows;return 0===h&&D.isLoaded?x=[{heightAuto:!0,cells:[{props:{colSpan:P.a},title:i.a.createElement(_,null)}]}]:n&&g&&b||(x=[{heightAuto:!0,cells:[{props:{colSpan:P.a,className:"sources-placeholder-row"},title:i.a.createElement(w.c,null)}]}]),i.a.createElement(E.c,{gridBreakPoint:"grid-lg","aria-label":r.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,r){return T(Object(O.k)(D.cells[t].value,r))},sortBy:{index:D.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(y),direction:j},rows:x,cells:D.cells,actionResolver:n&&h>0?J(r,t,a):void 0,rowWrapper:w.d},i.a.createElement(M.a,null),i.a.createElement(S.a,null))},G=r(526),K=r.n(G),Q=function(){var e=R(),t=Object(p.a)();return i.a.createElement(A.Bullseye,null,i.a.createElement(T.EmptyState,{className:"ins-c-sources__empty-state"},i.a.createElement(B.EmptyStateIcon,{icon:K.a}),i.a.createElement(D.Title,{headingLevel:"h5",size:"lg"},t.formatMessage({id:"sources.emptyStateTitle",defaultMessage:"No sources"})),i.a.createElement(k.EmptyStateBody,null,e&&t.formatMessage({id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!e&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),t.formatMessage({id:"sources.emptyStateBodyNotAdmin",defaultMessage:"To add a source, you must be granted write permissions from your Organization Administrator."}))),e?i.a.createElement(f.Link,{to:x.c.sourcesNew.path},i.a.createElement(d.Button,{className:"pf-u-mt-xl",variant:"primary"},t.formatMessage({id:"sources.emptyStateButton",defaultMessage:"Add source"}))):i.a.createElement(d.Button,{variant:"primary",isDisabled:!0},t.formatMessage({id:"sources.emptyStateButton",defaultMessage:"Add source"}))))},U=r(47),X=r(243),Y=r.n(X),Z=function(){var e=Object(p.a)();return i.a.createElement(A.Bullseye,null,i.a.createElement(T.EmptyState,{className:"ins-c-sources__empty-state"},i.a.createElement(B.EmptyStateIcon,{icon:Y.a,color:"var(--pf-global--danger-color--100)"}),i.a.createElement(D.Title,{headingLevel:"h5",size:"lg"},e.formatMessage({id:"sources.errorStateTitle",defaultMessage:"Something went wrong"})),i.a.createElement(k.EmptyStateBody,null,e.formatMessage({id:"sources.errorStateBody",defaultMessage:"There was a problem processing the request. Try refreshing the page. If the problem persists, contact <a>Red Hat support.</a>"},{a:function(e){return i.a.createElement(U.Text,{key:"link",component:"a",href:"https://access.redhat.com/support",target:"_blank",rel:"noopener noreferrer"},e)}})),i.a.createElement(d.Button,{className:"pf-u-mt-xl",variant:"primary",component:"a",href:window.location.href},e.formatMessage({id:"sources.retry",defaultMessage:"Retry"}))))},$=r(566);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=Object($.default)((function(e){return e()}),500),ne={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},ae=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},oe=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},ce=function(e,t,r){return r(Object(O.d)(a()({},e,t)))},se=function(e,t,r){return Object.keys(e).map((function(n){return e[n]&&e[n].length>0?function(e,t,r,n){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(n,e,t,r)():void 0})).filter(Boolean)},ie=function(e,t){return t&&e.length>0?e:void 0},ue=r(154),le=r.n(ue),fe=r(119),de=r.n(fe),pe=r(13),me=r.n(pe),be=function(){var e=Object(p.a)(),t=R(),r=Object(u.useDispatch)();return Object(s.useEffect)((function(){if(!1===t){var n=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must be granted write permissions from your Organization Administrator."});r(Object(O.b)(n,"danger",a))}}),[t]),!1===t?i.a.createElement(l.c,{to:x.c.sources.path}):null},ge=r(472),Oe=r(43),ye=function(){var e=Object(l.m)().id,t=Object(p.a)(),r=Object(L.a)(),n=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),a=n.appTypesLoaded,o=n.sourceTypesLoaded,f=Object(u.useDispatch)(),d=Object(s.useState)(!1),m=c()(d,2),b=m[0],g=m[1];return Object(s.useEffect)((function(){r&&a&&o&&Object(Oe.i)(e).then((function(e){var t=c()(e.sources,1)[0];return f(Object(O.a)(t))})).then((function(){f(Object(O.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),g(!0)}))}),[r,a,o]),b?i.a.createElement(l.c,{to:x.c.sources.path}):null},je=function(e){var t=e.route,r=e.children;return!(t.redirectNoId&&Object(ge.a)())&&t.redirectNoId?i.a.createElement(ye,null):i.a.createElement(i.a.Fragment,null,t.writeAccess&&i.a.createElement(be,null),r)};je.propTypes={route:me.a.shape({path:me.a.string.isRequired,redirectNoId:me.a.bool,writeAccess:me.a.bool}).isRequired,children:me.a.node.isRequired};var he=function(e){var t=e.route,r=e.componentProps,n=e.Component,a=de()(e,["route","componentProps","Component"]);return i.a.createElement(l.d,le()({},a,{path:t.path}),i.a.createElement(je,{route:t},i.a.createElement(n,r)))};he.propTypes={route:me.a.shape({path:me.a.string.isRequired,redirectNoId:me.a.bool,writeAccess:me.a.bool}).isRequired,componentProps:me.a.any,Component:me.a.oneOfType([me.a.func,me.a.object]).isRequired};var ve=he,Ee=r(196),Me=r(94);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(4)]).then(r.bind(null,963))})),Te=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,965))})),Be=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(7),r.e(3)]).then(r.bind(null,964))})),ke=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(8)]).then(r.t.bind(null,962,7)).then((function(e){return{default:e.AddSourceWizard}}))}));t.default=function(){var e=Object(s.useState)(!1),t=c()(e,2),r=t[0],n=t[1],o=Object(s.useState)(!1),y=c()(o,2),j=y[0],h=y[1],v=Object(s.useState)(),E=c()(v,2),M=E[0],S=E[1],P=Object(s.useState)(),T=c()(P,2),B=T[0],k=T[1],A=Object(L.a)(),D=R(),N=Object(l.k)(),C=Object(l.l)(),_=Object(p.a)(),z=Object(u.useSelector)((function(e){return e.sources}),u.shallowEqual),q=z.filterValue,F=z.numberOfEntities,I=z.appTypes,V=z.pageSize,H=z.pageNumber,J=z.fetchingError,G=z.sourceTypes,K=z.paginationClicked,U=z.appTypesLoaded,X=z.sourceTypesLoaded,Y=Object(u.useDispatch)();Object(s.useEffect)((function(){Promise.all([Y(Object(O.g)()),Y(Object(O.e)()),Y(Object(O.f)(Object(Ee.a)()))]).then((function(){return h(!0)})).catch((function(e){return k(e)}))}),[]);var $=Object.entries(q).map((function(e){var t=c()(e,2);t[0];return t[1]})).filter(Boolean).length>0;Object(s.useEffect)((function(){j&&(n(A&&0===F&&!$),Object(Ee.b)(z))}),[C,j]),Object(s.useEffect)((function(){M!==q.name&&S(q.name)}),[q.name]),Object(s.useEffect)((function(){j&&A&&n(0===F&&!$)}),[A]);var ee=function(e,t){return Y(Object(O.h)(t,V))},ue=Math.ceil(F/V);Object(s.useEffect)((function(){A&&F>0&&H>Math.max(ue,1)&&ee(0,ue)}));var le={itemCount:F,page:H,perPage:V,onSetPage:ee,onPerPageSelect:function(e,t){return Y(Object(O.h)(1,t))},className:"top-pagination"},fe=we(we({},le),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"bottom-pagination"}),de=!(A&&U&&X||K),pe=B||J;return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Suspense,{fallback:null},i.a.createElement(ve,{exact:!0,route:x.c.sourceManageApps,Component:Be}),i.a.createElement(ve,{exact:!0,route:x.c.sourcesRemove,Component:Te}),i.a.createElement(ve,{exact:!0,route:x.c.sourcesNew,Component:ke,componentProps:{sourceTypes:ie(G,X),applicationTypes:ie(I,U),isOpen:!0,onClose:function(){return N.push(x.c.sources.path)},afterSuccess:function(e){return function(e){return e(Object(O.f)(ne))}(Y)},hideSourcesButton:!0}}),i.a.createElement(ve,{exact:!0,route:x.c.sourcesEdit,Component:Pe})),i.a.createElement(b.PageHeader,null,i.a.createElement(b.PageHeaderTitle,{title:_.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),i.a.createElement(g.Section,{type:"content"},r&&i.a.createElement(Q,null),pe&&i.a.createElement(Z,null),!r&&!pe&&i.a.createElement(i.a.Fragment,null,i.a.createElement(m.PrimaryToolbar,{pagination:de?i.a.createElement(w.b,null):F>0?le:void 0,actionsConfig:D?{actions:[i.a.createElement(f.Link,{to:x.c.sourcesNew.path,key:"addSourceButton"},i.a.createElement(d.Button,{variant:"primary",id:"addSourceButton"},_.formatMessage({id:"sources.addSource",defaultMessage:"Add source"})))]}:{actions:[i.a.createElement(Me.Tooltip,{content:_.formatMessage({id:"sources.notAdminAddButton",defaultMessage:"To add a source, you must be granted write permissions from your Organization Administrator."}),key:"addSourceButton"},i.a.createElement("span",{tabIndex:"0"},i.a.createElement(d.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},_.formatMessage({id:"sources.addSource",defaultMessage:"Add source"}))))]},filterConfig:{items:[{label:_.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":_.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){S(t),re((function(){return ce("name",t,Y)}))},value:M}},{label:_.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return ce("source_type_id",t,Y)},items:ae(G||[]),value:q.source_type_id}},{label:_.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return ce("applications",t,Y)},items:oe(I||[]),value:q.applications}}]},activeFiltersConfig:{filters:se(q,G,I),onDelete:function(e,t,r){return Y(Object(O.d)(function(e,t,r){if(r)return Object.keys(t).reduce((function(e,t){return te(te({},e),{},a()({},t,void 0))}),{});var n=e[0];return te(te({},t),{},a()({},n.key,n.chips?t[n.key].filter((function(e){return e!==n.chips[0].value})):void 0))}(t,q,r)))}}}),i.a.createElement(W,null),i.a.createElement(m.PrimaryToolbar,{pagination:de?i.a.createElement(w.b,null):F>0?fe:void 0}))))}},472:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(48),a=r(14),o=function(){var e=Object(a.m)().id;return Object(n.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},519:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(48),a=function(){return Object(n.useSelector)((function(e){return e.sources.loaded}))<=0}}}]);
//# sourceMappingURL=../sourcemaps/sourcePage.js.map