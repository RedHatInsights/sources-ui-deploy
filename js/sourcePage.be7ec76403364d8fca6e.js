(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{358:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(44),c=n.n(o),s=n(0),u=n.n(s),i=n(34),l=n(11),f=n(72),d=n(102),p=n(99),m=n(202),b=n(617),O=n(91),g=n(139),y=n(26),j=n.n(y),h=n(531),v=n(405),E=n(598),M=n(597),S=n(111),w=n(114),P=n(62),T=n(396),k=n(397),B=n(404),D=n(168),C=n(100),A=n(420),N=n.n(A),L=function(){var e=Object(m.a)(),t=Object(i.useDispatch)();return u.a.createElement(D.Bullseye,null,u.a.createElement(T.EmptyState,{variant:T.EmptyStateVariant.small},u.a.createElement(k.EmptyStateIcon,{icon:N.a}),u.a.createElement(C.Title,{headingLevel:"h2",size:"lg"},e.formatMessage({id:"sources.noResultsFoundTitle",defaultMessage:"No sources found"})),u.a.createElement(B.EmptyStateBody,null,e.formatMessage({id:"sources.noResultsFoundDescription",defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources."})),u.a.createElement(p.Button,{variant:"link",onClick:function(){return t(Object(d.c)())}},e.formatMessage({id:"sources.clearAllFilters",defaultMessage:"Clear all filters"}))))},_=n(421),R=function(){return Object(i.useSelector)((function(e){return e.user.isOrgAdmin}))},x=n(103);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e,t,n,r){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?Object(S.c)(t.formatter)(e[t.value],e,{sourceTypes:n,appTypes:r}):e[t.value]||""}}))},I=function(e,t,n,r){return e.filter((function(e){return!e.hidden})).reduce((function(e,a){return[].concat(j()(e),[q(q({},a),{},{isOpen:!!a.expanded,cells:z(a,t,n,r),disableActions:!!a.isDeleting})])}),[])},V=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return q({title:e.title||"",value:e.value,hidden:e.hidden},e.sortable&&{transforms:[h.a]})}))},Y=function(e,t){return q(q({},e),t)},H=function(e,t,n){return function(r){var a={tooltip:e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),isDisabled:!0,className:"ins-c-sources__disabled-drodpown-item"},o=[q({title:e.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),onClick:function(e,n,r){var a=r.id;return t(Object(x.b)(x.c.sourceManageApps.path,a))}},n?{component:"button"}:a),q({title:e.formatMessage({id:"sources.delete",defaultMessage:"Delete"}),onClick:function(e,n,r){var a=r.id;return t(Object(x.b)(x.c.sourcesRemove.path,a))}},n?{component:"button"}:a)];return!r.imported&&function(e,t,n,r,a){e.splice(1,0,q({title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,r){var a=r.id;return n(Object(x.b)(x.c.sourcesEdit.path,a))}},r?{component:"button"}:a))}(o,e,t,n,a),o}},J=function(){var e,t=Object(l.k)().push,n=Object(m.a)(),r=Object(_.a)(),a=R(),o=Object(i.useSelector)((function(e){return e.sources}),i.shallowEqual),f=o.appTypes,p=o.entities,b=o.sourceTypes,O=o.sourceTypesLoaded,g=o.appTypesLoaded,y=o.sortBy,j=o.sortDirection,h=o.numberOfEntities,S=Object(i.useDispatch)(),T=0===h||!r,k=Object(s.useReducer)(Y,(e=Object(P.b)(n,T),{rows:[],sortBy:{},isLoaded:!1,cells:V(e)})),B=c()(k,2),D=B[0],C=B[1],A=function(){var e=Object(P.b)(n,T);return C({rows:I(p,e,b,f),cells:V(e)})};Object(s.useEffect)((function(){r&&O&&g?(C({isLoaded:!0}),A()):(C({isLoaded:!1}),function(){var e=Object(P.b)(n,T);C({cells:V(e)})}())}),[r,O,g]),Object(s.useEffect)((function(){D.isLoaded&&A()}),[p]);var N=D.rows;return 0===h&&D.isLoaded?N=[{heightAuto:!0,cells:[{props:{colSpan:P.a},title:u.a.createElement(L,null)}]}]:r&&g&&O||(N=[{heightAuto:!0,cells:[{props:{colSpan:P.a,className:"sources-placeholder-row"},title:u.a.createElement(w.c,null)}]}]),u.a.createElement(v.b,{gridBreakPoint:"grid-lg","aria-label":n.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,n){return S(Object(d.k)(D.cells[t].value,n))},sortBy:{index:D.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(y),direction:j},rows:N,cells:D.cells,actionResolver:r&&h>0?H(n,t,a):void 0,rowWrapper:w.d},u.a.createElement(E.a,null),u.a.createElement(M.a,null))},W=n(9),G=n.n(W),K=n(487),Q=n.n(K),U=function(e){var t=e.title,n=e.body,r=R(),a=Object(m.a)();return u.a.createElement(D.Bullseye,null,u.a.createElement(T.EmptyState,{className:"ins-c-sources__empty-state"},u.a.createElement(k.EmptyStateIcon,{icon:Q.a}),u.a.createElement(C.Title,{headingLevel:"h5",size:"lg"},t||a.formatMessage({id:"sources.emptyStateTitle",defaultMessage:"No sources"})),u.a.createElement(B.EmptyStateBody,null,n||r&&a.formatMessage({id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!r&&u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),a.formatMessage({id:"sources.emptyStateBodyNotAdmin",defaultMessage:"You do not have permission to define sources."}))),r?u.a.createElement(f.Link,{to:x.c.sourcesNew.path},u.a.createElement(p.Button,{className:"pf-u-mt-xl",variant:"primary"},a.formatMessage({id:"sources.emptyStateButton",defaultMessage:"Add source"}))):u.a.createElement(p.Button,{variant:"primary",isDisabled:!0},a.formatMessage({id:"sources.emptyStateButton",defaultMessage:"Add source"}))))};U.propTypes={title:G.a.node,body:G.a.node};var X=U,Z=n(474),$=n(488);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=Object(Z.default)((function(e){return e()}),500),re={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},ae=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},oe=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},ce=function(e,t,n){return n(Object(d.d)(a()({},e,t)))},se=function(e,t,n){return Object.keys(e).map((function(r){return e[r]&&e[r].length>0?function(e,t,n,r){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(r,e,t,n)():void 0})).filter(Boolean)},ue=function(e,t){return t&&e.length>0?e:void 0},ie=n(105),le=n.n(ie),fe=n(75),de=n.n(fe),pe=function(){var e=Object(m.a)(),t=R(),n=Object(i.useDispatch)();return Object(s.useEffect)((function(){if(!1===t){var r=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."});n(Object(d.b)(r,"danger",a))}}),[]),!1===t?u.a.createElement(l.c,{to:x.c.sources.path}):null},me=n(398),be=n(16),Oe=function(){var e=Object(l.m)().id,t=Object(m.a)(),n=Object(_.a)(),r=Object(i.useSelector)((function(e){return e.sources}),i.shallowEqual),a=r.appTypesLoaded,o=r.sourceTypesLoaded,f=Object(i.useDispatch)(),p=Object(s.useState)(!1),b=c()(p,2),O=b[0],g=b[1];return Object(s.useEffect)((function(){n&&a&&o&&Object(be.h)(e).then((function(e){var t=c()(e.sources,1)[0];return f(Object(d.a)(t))})).then((function(){f(Object(d.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),g(!0)}))}),[n,a,o]),O?u.a.createElement(l.c,{to:x.c.sources.path}):null},ge=function(e){var t=e.route,n=e.children;return!(t.redirectNoId?Object(me.a)():void 0)&&t.redirectNoId?u.a.createElement(Oe,null):u.a.createElement(u.a.Fragment,null,t.writeAccess&&u.a.createElement(pe,null),n)};ge.propTypes={route:G.a.shape({path:G.a.string.isRequired,redirectNoId:G.a.bool,writeAccess:G.a.bool}).isRequired,children:G.a.node.isRequired};var ye=function(e){var t=e.route,n=e.componentProps,r=e.Component,a=de()(e,["route","componentProps","Component"]);return u.a.createElement(l.d,le()({},a,{path:t.path}),u.a.createElement(ge,{route:t},u.a.createElement(r,n)))};ye.propTypes={route:G.a.shape({path:G.a.string.isRequired,redirectNoId:G.a.bool,writeAccess:G.a.bool}).isRequired,componentProps:G.a.any,Component:G.a.oneOfType([G.a.func,G.a.object]).isRequired};var je=ye,he=n(152),ve=n(57);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=Object(s.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,805))})),we=Object(s.lazy)((function(){return n.e(5).then(n.bind(null,807))})),Pe=Object(s.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(3)]).then(n.bind(null,806))})),Te=Object(s.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.t.bind(null,804,7)).then((function(e){return{default:e.AddSourceWizard}}))}));t.default=function(){var e=Object(s.useState)(!1),t=c()(e,2),n=t[0],r=t[1],o=Object(s.useState)(!1),y=c()(o,2),j=y[0],h=y[1],v=Object(s.useState)(),E=c()(v,2),M=E[0],S=E[1],P=Object(_.a)(),T=R(),k=Object(l.k)(),B=Object(l.l)(),D=Object(m.a)(),C=Object(i.useSelector)((function(e){return e.sources}),i.shallowEqual),A=C.filterValue,N=C.numberOfEntities,L=C.appTypes,F=C.pageSize,q=C.pageNumber,z=C.fetchingError,I=C.sourceTypes,V=C.paginationClicked,Y=C.appTypesLoaded,H=C.sourceTypesLoaded,W=Object(i.useDispatch)();Object(s.useEffect)((function(){Promise.all([W(Object(d.g)()),W(Object(d.e)()),W(Object(d.f)(Object(he.a)()))]).then((function(){return h(!0)}))}),[]);var G=Object.entries(A).map((function(e){var t=c()(e,2);t[0];return t[1]})).filter(Boolean).length>0;Object(s.useEffect)((function(){j&&(r(P&&0===N&&!G),Object(he.b)(C))}),[B,j]),Object(s.useEffect)((function(){M!==A.name&&S(A.name)}),[A.name]),Object(s.useEffect)((function(){j&&P&&r(0===N&&!G)}),[P]);var K=function(e,t){return W(Object(d.h)(t,F))},Q=Math.ceil(N/F);Object(s.useEffect)((function(){P&&N>0&&q>Math.max(Q,1)&&K(0,Q)}));var U={itemCount:N,page:q,perPage:F,onSetPage:K,onPerPageSelect:function(e,t){return W(Object(d.h)(1,t))}},Z=Me(Me({},U),{},{dropDirection:"up",variant:"bottom",isCompact:!1}),ee=!(P&&Y&&H||V);return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.Suspense,{fallback:null},u.a.createElement(je,{exact:!0,route:x.c.sourceManageApps,Component:Pe}),u.a.createElement(je,{exact:!0,route:x.c.sourcesRemove,Component:we}),u.a.createElement(je,{exact:!0,route:x.c.sourcesNew,Component:Te,componentProps:{sourceTypes:ue(I,H),applicationTypes:ue(L,Y),isOpen:!0,onClose:function(){return k.push(x.c.sources.path)},afterSuccess:function(e){return function(e,t){(null==t?void 0:t.id)&&Object($.a)(t.id),e(Object(d.f)(re))}(W,e)},hideSourcesButton:!0}}),u.a.createElement(je,{exact:!0,route:x.c.sourcesEdit,Component:Se})),u.a.createElement(O.PageHeader,null,u.a.createElement(O.PageHeaderTitle,{title:D.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),u.a.createElement(g.Section,{type:"content"},n||z?u.a.createElement(X,{title:z?z.title:void 0,body:z?z.detail:void 0}):u.a.createElement(u.a.Fragment,null,u.a.createElement(b.PrimaryToolbar,{pagination:ee?u.a.createElement(w.b,null):N>0?U:void 0,actionsConfig:T?{actions:[u.a.createElement(f.Link,{to:x.c.sourcesNew.path,key:"addSourceButton"},u.a.createElement(p.Button,{variant:"primary",id:"addSourceButton"},D.formatMessage({id:"sources.addSource",defaultMessage:"Add source"})))]}:{actions:[u.a.createElement(ve.Tooltip,{content:D.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),key:"addSourceButton"},u.a.createElement("span",{tabIndex:"0"},u.a.createElement(p.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},D.formatMessage({id:"sources.addSource",defaultMessage:"Add source"}))))]},filterConfig:{items:[{label:D.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":D.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){S(t),ne((function(){return ce("name",t,W)}))},value:M}},{label:D.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return ce("source_type_id",t,W)},items:ae(I||[]),value:A.source_type_id}},{label:D.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return ce("applications",t,W)},items:oe(L||[]),value:A.applications}}]},activeFiltersConfig:{filters:se(A,I,L),onDelete:function(e,t,n){return W(Object(d.d)(function(e,t,n){if(n)return Object.keys(t).reduce((function(e,t){return te(te({},e),{},a()({},t,void 0))}),{});var r=e[0];return te(te({},t),{},a()({},r.key,r.chips?t[r.key].filter((function(e){return e!==r.chips[0].value})):void 0))}(t,A,n)))}}}),u.a.createElement(J,null),u.a.createElement(b.PrimaryToolbar,{pagination:ee?u.a.createElement(w.b,null):N>0?Z:void 0}))))}},398:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(34),a=n(11),o=function(){var e=Object(a.m)().id;return Object(r.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(34),a=function(){return Object(r.useSelector)((function(e){return e.sources.loaded}))<=0}},488:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(16),a=function(e){return Object(r.j)().checkAvailabilitySource(e).catch((function(){}))}}}]);
//# sourceMappingURL=../sourcemaps/sourcePage.js.map