(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{318:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(39),c=n.n(o),u=n(0),i=n.n(u),s=n(30),l=n(10),d=n(63),f=n(90),p=n(88),m=n(312),b=n(13),O=n(561),y=n(80),g=n(121),j=n(25),h=n.n(j),v=n(479),E=n(361),S=n(547),M=n(546),w=n(100),P=n(102),T=n(55),B=n(352),D=n(353),k=n(354),C=n(152),A=n(89),N=n(377),_=n.n(N),L=function(){var e=Object(s.useDispatch)();return i.a.createElement(C.Bullseye,null,i.a.createElement(B.EmptyState,{variant:B.EmptyStateVariant.small},i.a.createElement(D.EmptyStateIcon,{icon:_.a}),i.a.createElement(A.Title,{headingLevel:"h2",size:"lg"},i.a.createElement(b.a,{defaultMessage:"No sources found",id:"sources.noResultsFoundTitle"})),i.a.createElement(k.EmptyStateBody,null,i.a.createElement(b.a,{defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources.",id:"sources.noResultsFoundDescription"})),i.a.createElement(p.Button,{variant:"link",onClick:function(){return e(Object(f.c)())}},i.a.createElement(b.a,{defaultMessage:"Clear all filters",id:"sources.clearAllFilters"}))))},R=n(378),x=function(){return Object(s.useSelector)((function(e){return e.user.isOrgAdmin}))},F=n(91);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e,t,n,r){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?Object(w.c)(t.formatter)(e[t.value],e,{sourceTypes:n,appTypes:r}):e[t.value]||""}}))},V=function(e,t,n,r){return e.filter((function(e){return!e.hidden})).reduce((function(e,a){return[].concat(h()(e),[z(z({},a),{},{isOpen:!!a.expanded,cells:I(a,t,n,r),disableActions:!!a.isDeleting})])}),[])},Y=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return z({title:e.title||"",value:e.value,hidden:e.hidden},e.sortable&&{transforms:[v.a]})}))},H=function(e,t){return z(z({},e),t)},J=function(e,t,n){return function(r){var a={tooltip:e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),isDisabled:!0,className:"ins-c-sources__disabled-drodpown-item"},o=[z({title:e.formatMessage({id:"sources.manageApps",defaultMessage:"Manage applications"}),onClick:function(e,n,r){var a=r.id;return t(Object(F.b)(F.c.sourceManageApps.path,a))}},n?{component:"button"}:a),z({title:e.formatMessage({id:"sources.delete",defaultMessage:"Delete"}),onClick:function(e,n,r){var a=r.id;return t(Object(F.b)(F.c.sourcesRemove.path,a))}},n?{component:"button"}:a)];return!r.imported&&function(e,t,n,r,a){e.splice(1,0,z({title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,r){var a=r.id;return n(Object(F.b)(F.c.sourcesEdit.path,a))}},r?{component:"button"}:a))}(o,e,t,n,a),o}},W=function(){var e,t=Object(l.f)().push,n=Object(m.a)(),r=Object(R.a)(),a=x(),o=Object(s.useSelector)((function(e){return e.sources}),s.shallowEqual),d=o.appTypes,p=o.entities,b=o.sourceTypes,O=o.sourceTypesLoaded,y=o.appTypesLoaded,g=o.sortBy,j=o.sortDirection,h=o.numberOfEntities,v=Object(s.useDispatch)(),w=0===h||!r,B=Object(u.useReducer)(H,(e=Object(T.b)(n,w),{rows:[],sortBy:{},isLoaded:!1,cells:Y(e)})),D=c()(B,2),k=D[0],C=D[1],A=function(){var e=Object(T.b)(n,w);return C({rows:V(p,e,b,d),cells:Y(e)})};Object(u.useEffect)((function(){r&&O&&y?(C({isLoaded:!0}),A()):(C({isLoaded:!1}),function(){var e=Object(T.b)(n,w);C({cells:Y(e)})}())}),[r,O,y]),Object(u.useEffect)((function(){k.isLoaded&&A()}),[p]);var N=k.rows;return 0===h&&k.isLoaded?N=[{heightAuto:!0,cells:[{props:{colSpan:T.a},title:i.a.createElement(L,null)}]}]:r&&y&&O||(N=[{heightAuto:!0,cells:[{props:{colSpan:T.a,className:"sources-placeholder-row"},title:i.a.createElement(P.c,null)}]}]),i.a.createElement(E.b,{gridBreakPoint:"grid-lg","aria-label":n.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,n){return v(Object(f.k)(k.cells[t].value,n))},sortBy:{index:k.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(g),direction:j},rows:N,cells:k.cells,actionResolver:r&&h>0?J(n,t,a):void 0,rowWrapper:P.d},i.a.createElement(S.a,null),i.a.createElement(M.a,null))},G=n(1),K=n.n(G),Q=n(559),U=n.n(Q),X=function(e){var t=e.title,n=e.body,r=x();return i.a.createElement(C.Bullseye,null,i.a.createElement(B.EmptyState,{className:"ins-c-sources__empty-state"},i.a.createElement(D.EmptyStateIcon,{icon:U.a}),i.a.createElement(A.Title,{headingLevel:"h5",size:"lg"},t||i.a.createElement(b.a,{id:"sources.emptyStateTitle",defaultMessage:"No sources"})),i.a.createElement(k.EmptyStateBody,null,n||r&&i.a.createElement(b.a,{id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(b.a,{id:"sources.emptyStateBodyNotAdmin",defaultMessage:"You do not have permission to define sources."}))),r?i.a.createElement(d.b,{to:F.c.sourcesNew.path},i.a.createElement(p.Button,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary"},i.a.createElement(b.a,{id:"sources.emptyStateButton",defaultMessage:"Add source"}))):i.a.createElement(p.Button,{style:{marginTop:"var(--pf-c-empty-state--c-button--MarginTop)"},variant:"primary",isDisabled:!0},i.a.createElement(b.a,{id:"sources.emptyStateButton",defaultMessage:"Add source"}))))};X.propTypes={title:K.a.node,body:K.a.node};var Z=X,$=n(426),ee=n(438);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=Object($.default)((function(e){return e()}),500),ae={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},oe=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},ce=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},ue=function(e,t,n){return n(Object(f.d)(a()({},e,t)))},ie=function(e,t,n){return Object.keys(e).map((function(r){return e[r]&&e[r].length>0?function(e,t,n,r){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(r,e,t,n)():void 0})).filter(Boolean)},se=function(e,t){return t&&e.length>0?e:void 0},le=n(92),de=n.n(le),fe=n(68),pe=n.n(fe),me=function(){var e=Object(m.a)(),t=x(),n=Object(s.useDispatch)();return Object(u.useEffect)((function(){if(!1===t){var r=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."});n(Object(f.b)(r,"danger",a))}}),[]),!1===t?i.a.createElement(l.a,{to:F.c.sources.path}):null},be=n(355),Oe=n(15),ye=function(){var e=Object(l.h)().id,t=Object(m.a)(),n=Object(R.a)(),r=Object(s.useSelector)((function(e){return e.sources}),s.shallowEqual),a=r.appTypesLoaded,o=r.sourceTypesLoaded,d=Object(s.useDispatch)(),p=Object(u.useState)(!1),b=c()(p,2),O=b[0],y=b[1];return Object(u.useEffect)((function(){n&&a&&o&&Object(Oe.h)(e).then((function(e){var t=c()(e.sources,1)[0];return d(Object(f.a)(t))})).then((function(){d(Object(f.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),y(!0)}))}),[n,a,o]),O?i.a.createElement(l.a,{to:F.c.sources.path}):null},ge=function(e){var t=e.route,n=e.children;return!(t.redirectNoId?Object(be.a)():void 0)&&t.redirectNoId?i.a.createElement(ye,null):i.a.createElement(i.a.Fragment,null,t.writeAccess&&i.a.createElement(me,null),n)};ge.propTypes={route:K.a.shape({path:K.a.string.isRequired,redirectNoId:K.a.bool,writeAccess:K.a.bool}).isRequired,children:K.a.node.isRequired};var je=function(e){var t=e.route,n=e.componentProps,r=e.Component,a=pe()(e,["route","componentProps","Component"]);return i.a.createElement(l.b,de()({},a,{path:t.path}),i.a.createElement(ge,{route:t},i.a.createElement(r,n)))};je.propTypes={route:K.a.shape({path:K.a.string.isRequired,redirectNoId:K.a.bool,writeAccess:K.a.bool}).isRequired,componentProps:K.a.any,Component:K.a.oneOfType([K.a.func,K.a.object]).isRequired};var he=je,ve=n(133),Ee=n(50);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.bind(null,757))})),Pe=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,759))})),Te=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8),n.e(4)]).then(n.bind(null,758))})),Be=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.t.bind(null,756,7)).then((function(e){return{default:e.AddSourceWizard}}))}));t.default=function(){var e=Object(u.useState)(!1),t=c()(e,2),n=t[0],r=t[1],o=Object(u.useState)(!1),j=c()(o,2),h=j[0],v=j[1],E=Object(u.useState)(),S=c()(E,2),M=S[0],w=S[1],T=Object(R.a)(),B=x(),D=Object(l.f)(),k=Object(l.g)(),C=Object(m.a)(),A=Object(s.useSelector)((function(e){return e.sources}),s.shallowEqual),N=A.filterValue,_=A.numberOfEntities,L=A.appTypes,q=A.pageSize,z=A.pageNumber,I=A.fetchingError,V=A.sourceTypes,Y=A.paginationClicked,H=A.appTypesLoaded,J=A.sourceTypesLoaded,G=Object(s.useDispatch)();Object(u.useEffect)((function(){Promise.all([G(Object(f.g)()),G(Object(f.e)()),G(Object(f.f)(Object(ve.a)()))]).then((function(){return v(!0)}))}),[]);var K=Object.entries(N).map((function(e){var t=c()(e,2);t[0];return t[1]})).filter(Boolean).length>0;Object(u.useEffect)((function(){h&&(r(T&&0===_&&!K),Object(ve.b)(A))}),[k,h]),Object(u.useEffect)((function(){M!==N.name&&w(N.name)}),[N.name]),Object(u.useEffect)((function(){h&&T&&r(0===_&&!K)}),[T]);var Q=function(e,t){return G(Object(f.h)(t,q))},U=Math.ceil(_/q);Object(u.useEffect)((function(){T&&_>0&&z>Math.max(U,1)&&Q(0,U)}));var X={itemCount:_,page:z,perPage:q,onSetPage:Q,onPerPageSelect:function(e,t){return G(Object(f.h)(1,t))}},$=Me(Me({},X),{},{dropDirection:"up",variant:"bottom",isCompact:!1}),te=!(T&&H&&J||Y);return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.Suspense,{fallback:null},i.a.createElement(he,{exact:!0,route:F.c.sourceManageApps,Component:Te}),i.a.createElement(he,{exact:!0,route:F.c.sourcesRemove,Component:Pe}),i.a.createElement(he,{exact:!0,route:F.c.sourcesNew,Component:Be,componentProps:{sourceTypes:se(V,J),applicationTypes:se(L,H),isOpen:!0,onClose:function(){return D.push(F.c.sources.path)},afterSuccess:function(e){return function(e,t){Object(ee.a)(t.id),e(Object(f.f)(ae))}(G,e)},hideSourcesButton:!0}}),i.a.createElement(he,{exact:!0,route:F.c.sourcesEdit,Component:we})),i.a.createElement(y.PageHeader,null,i.a.createElement(y.PageHeaderTitle,{title:C.formatMessage({id:"sources.sources",defaultMessage:"Sources"})})),i.a.createElement(g.Section,{type:"content"},n||I?i.a.createElement(Z,{title:I?I.title:void 0,body:I?I.detail:void 0}):i.a.createElement(i.a.Fragment,null,i.a.createElement(O.PrimaryToolbar,{pagination:te?i.a.createElement(P.b,null):_>0?X:void 0,actionsConfig:B?{actions:[i.a.createElement(d.b,{to:F.c.sourcesNew.path,key:"addSourceButton"},i.a.createElement(p.Button,{variant:"primary",id:"addSourceButton"},i.a.createElement(b.a,{id:"sources.addSource",defaultMessage:"Add source"})))]}:{actions:[i.a.createElement(Ee.Tooltip,{content:C.formatMessage({id:"sources.notAdminButton",defaultMessage:"You do not have permission to perform this action."}),key:"addSourceButton"},i.a.createElement("span",{tabIndex:"0"},i.a.createElement(p.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},i.a.createElement(b.a,{id:"sources.addSource",defaultMessage:"Add source"}))))]},filterConfig:{items:[{label:C.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":C.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){w(t),re((function(){return ue("name",t,G)}))},value:M}},{label:C.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return ue("source_type_id",t,G)},items:oe(V||[]),value:N.source_type_id}},{label:C.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return ue("applications",t,G)},items:ce(L||[]),value:N.applications}}]},activeFiltersConfig:{filters:ie(N,V,L),onDelete:function(e,t,n){return G(Object(f.d)(function(e,t,n){if(n)return Object.keys(t).reduce((function(e,t){return ne(ne({},e),{},a()({},t,void 0))}),{});var r=e[0];return ne(ne({},t),{},a()({},r.key,r.chips?t[r.key].filter((function(e){return e!==r.chips[0].value})):void 0))}(t,N,n)))}}}),i.a.createElement(W,null),i.a.createElement(O.PrimaryToolbar,{pagination:te?i.a.createElement(P.b,null):_>0?$:void 0}))))}},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(30),a=n(10),o=function(){var e=Object(a.h)().id;return Object(r.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},378:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(30),a=function(){return Object(r.useSelector)((function(e){return e.sources.loaded}))<=0}},438:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(15),a=function(e){return Object(r.j)().checkAvailabilitySource(e).catch((function(){}))}}}]);
//# sourceMappingURL=../sourcemaps/sourcePage.js.map