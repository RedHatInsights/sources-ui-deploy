"use strict";(self.webpackChunksources_ui=self.webpackChunksources_ui||[]).push([[593],{91011:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(87462),a=r(92950),o=r.n(a),i=r(49881),s=r(16959),c=r(45697),u=r.n(c),l=function(e){return o().createElement(i.Navigate,(0,n.Z)({},e,{to:(0,s.n)(e.to,s.d)}))};l.displayName="AppNavigate",l.propTypes={to:u().oneOfType([u().string,u().object])};const d=l},80254:(e,t,r)=>{r.d(t,{Z:()=>T});var n=r(87462),a=r(45987),o=r(92950),i=r.n(o),s=r(49881),c=r(45697),u=r.n(c),l=r(60566),d=r(86706),f=r(86896),p=r(89372),m=r(58185),v=r(38181),g=r(16946),y=r(91011);const b=function(){var e=(0,f.Z)(),t=(0,m.E)(),r=(0,d.v9)((function(e){return e.user.isOrgAdmin})),n=(0,d.I0)();return(0,o.useEffect)((function(){if(!1===t){var a=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),o=(0,g.$)(e,r);n((0,p.Hz)({title:a,variant:"danger",description:o}))}}),[t]),!1===t?i().createElement(y.Z,{to:v._j.sources.path}):null};var h=r(60409);const E=function(){var e=(0,f.Z)(),t=(0,l.L)(),r=(0,d.I0)();return(0,o.useEffect)((function(){t.paused_at&&r((0,p.Hz)({title:e.formatMessage({id:"sources.sourcePausedRedirect",defaultMessage:"Source is paused"}),variant:"danger",description:e.formatMessage({id:"sources.sourcePausedRedirectDescription",defaultMessage:"You cannot perform this action on a paused source."})}))}),[t.paused_at]),t.paused_at?i().createElement(y.Z,{to:(0,v.yS)(v._j.sourcesDetail.path,t.id)}):null};var S=["route","componentProps","Component"],M=function(e){var t=e.route,r=e.children;return t.redirectNoId&&(0,l.L)()||!t.redirectNoId?i().createElement(i().Fragment,null,t.noPaused&&i().createElement(E,null),t.writeAccess&&i().createElement(b,null),r):i().createElement(h.Z,null)};M.propTypes={route:u().shape({path:u().string.isRequired,redirectNoId:u().bool,writeAccess:u().bool,noPaused:u().bool}).isRequired,children:u().node.isRequired};var O=function(e){var t=e.route,r=e.componentProps,o=e.Component,c=(0,a.Z)(e,S);return i().createElement(s.Routes,null,i().createElement(s.Route,(0,n.Z)({},c,{path:t.path,element:i().createElement(M,{route:t},i().createElement(o,r))})))};O.propTypes={route:u().shape({path:u().string.isRequired,redirectNoId:u().bool,writeAccess:u().bool,noPaused:u().bool}).isRequired,componentProps:u().any,Component:u().oneOfType([u().func,u().object]).isRequired};const T=O},60409:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(29439),a=r(92950),o=r.n(a),i=r(86706),s=r(49881),c=r(86896),u=r(89372),l=r(48815),d=r(59824),f=r(38181),p=r(60566),m=r(91011);const v=function(){var e=(0,s.useParams)().id,t=(0,c.Z)(),r=(0,p.L)(),v=(0,d.W)(),g=(0,i.v9)((function(e){return e.sources}),i.wU),y=g.appTypesLoaded,b=g.sourceTypesLoaded,h=(0,i.I0)(),E=(0,a.useState)(!1),S=(0,n.Z)(E,2),M=S[0],O=S[1];return(0,a.useEffect)((function(){v&&y&&b&&(0,l.oI)(e).then((function(e){var t=(0,n.Z)(e.sources,1)[0];return h((0,u._B)(t)),t})).then((function(r){r||h((0,u.Hz)({title:t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),variant:"danger",description:t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e})})),O(!0)}))}),[v,y,b]),M&&!r?o().createElement(m.Z,{to:f._j.sources.path}):null}},93736:(e,t,r)=>{r.d(t,{a:()=>o});var n=r(49881),a=r(16959),o=function(){var e=(0,n.useNavigate)();return function(t,r){return e((0,a.n)(t,a.d),r)}}},58185:(e,t,r)=>{r.d(t,{E:()=>a});var n=r(86706),a=function(){var e=(0,n.v9)((function(e){var t=e.user;return null==t?void 0:t.writePermissions}));if("boolean"==typeof e)return!!e}},59824:(e,t,r)=>{r.d(t,{W:()=>a});var n=r(86706),a=function(){return(0,n.v9)((function(e){return e.sources.loaded}))<=0}},60566:(e,t,r)=>{r.d(t,{L:()=>o});var n=r(86706),a=r(49881),o=function(){var e=(0,a.useParams)().id;return(0,n.v9)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},75490:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ie});var n=r(29439),a=r(4942),o=r(92950),i=r.n(o),s=r(86706),c=r(28347),u=r(6848),l=r(86896),d=r(93736),f=r(7887),p=r(44873),m=r(2443),v=r(78596),g=r(11549),y=r(35240),b=r(89372),h=r(93433),E=r(4259),S=r(98583),M=r(30567),O=r(80810);const T=function(){var e=(0,l.Z)(),t=(0,s.I0)();return i().createElement(u.Bullseye,null,i().createElement(u.EmptyState,{variant:u.EmptyStateVariant.small},i().createElement(u.EmptyStateIcon,{icon:O.ZP}),i().createElement(u.Title,{headingLevel:"h2",size:"lg"},e.formatMessage({id:"sources.noResultsFoundTitle",defaultMessage:"No sources found"})),i().createElement(u.EmptyStateBody,null,e.formatMessage({id:"sources.noResultsFoundDescription",defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources."})),i().createElement(u.Button,{variant:"link",onClick:function(){return t((0,b.K5)())}},e.formatMessage({id:"sources.clearAllFilters",defaultMessage:"Clear all filters"}))))};var w=r(59824),k=r(58185),Z=r(38181),j=r(16946);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(e,t,r,n){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?t.formatter(e[t.value],e,{sourceTypes:r,appTypes:n}):e[t.value]||""}}))},N=function(e,t,r,n,a){return e.filter((function(e){return!e.hidden})).reduce((function(e,o){var i=a.includes(o.id);return[].concat((0,h.Z)(e),[_(_({},o),{},{originalName:o.name,isOpen:!!o.expanded,cells:C(o,t,r,n),disableActions:i,isDeleting:i})])}),[])},z=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return _({title:e.title||"",value:e.value,hidden:e.hidden,transforms:[E.wrappable]},e.sortable&&{transforms:[E.sortable,E.wrappable]})}))},A=function(e,t){return _(_(_({},e),t),{},{key:e.key+1})},D=function(e,t,r,n,a){return function(o){var i=(0,j.Z)(e,a),s=[];return o.paused_at?s.push(_({title:e.formatMessage({id:"sources.resume",defaultMessage:"Resume"}),description:e.formatMessage({id:"sources.resume.description",defaultMessage:"Unpause data collection for this source"}),onClick:function(t,r,a){var i=a.id;return n((0,b.AX)(i,o.originalName,e))}},r?{component:"button"}:i)):s.push(_({title:e.formatMessage({id:"sources.pause",defaultMessage:"Pause"}),description:e.formatMessage({id:"sources.pause.description",defaultMessage:"Temporarily disable data collection"}),onClick:function(t,r,a){var i=a.id;return n((0,b.xz)(i,o.originalName,e))}},r?{component:"button"}:i)),s.push(_({title:e.formatMessage({id:"sources.remove",defaultMessage:"Remove"}),description:e.formatMessage({id:"sources.remove.description",defaultMessage:"Permanently delete this source and all collected data"}),onClick:function(e,r,n){var a=n.id;return t((0,Z.yS)(Z._j.sourcesRemove.path,a))}},r?{component:"button"}:i)),s.push(_({title:o.paused_at?e.formatMessage({id:"sources.viewDetails",defaultMessage:"View details"}):e.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,r,n){var a=n.id;return t((0,Z.yS)(Z._j.sourcesDetail.path,a))}},r?{component:"button"}:i)),s}};const I=function(){var e,t=(0,d.a)(),r=(0,l.Z)(),a=(0,w.W)(),c=(0,k.E)(),u=(0,s.v9)((function(e){return e.user.isOrgAdmin})),f=(0,s.v9)((function(e){return e.sources}),s.wU),p=f.appTypes,m=f.entities,v=f.sourceTypes,g=f.sourceTypesLoaded,y=f.appTypesLoaded,h=f.sortBy,O=f.sortDirection,Z=f.numberOfEntities,j=f.removingSources,P=(0,s.I0)(),_=0===Z||!a,C=(0,o.useReducer)(A,(e=(0,M.E)(r,_),{rows:[],sortBy:{},isLoaded:!1,cells:z(e),key:0})),I=(0,n.Z)(C,2),B=I[0],R=I[1],L=function(){var e=(0,M.E)(r,_);return R({rows:N(m,e,v,p,j),cells:z(e)})};(0,o.useEffect)((function(){a&&g&&y?(R({isLoaded:!0}),L()):(R({isLoaded:!1}),function(){var e=(0,M.E)(r,_);R({cells:z(e)})}())}),[a,g,y]),(0,o.useEffect)((function(){B.isLoaded&&L()}),[m,j]);var x=B.rows;return 0===Z&&B.isLoaded?x=[{heightAuto:!0,cells:[{props:{colSpan:M.W},title:i().createElement(T,null)}]}]:a&&y&&g||(x=[{heightAuto:!0,cells:[{props:{colSpan:M.W,className:"sources-placeholder-row"},title:i().createElement(S.mI,null)}]}]),i().createElement(E.Table,{gridBreakPoint:"grid-lg","aria-label":r.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,r){return P((0,b.Bb)(B.cells[t].value,r))},sortBy:{index:B.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(h),direction:O},key:B.key,rows:x,cells:B.cells,actionResolver:a&&Z>0?D(r,t,c,P,u):void 0,rowWrapper:S.sk,className:0===Z&&B.isLoaded?"ins-c-table-empty-state":""},i().createElement(E.TableHeader,null),i().createElement(E.TableBody,null))};var B=r(99166),R=r(4833),L=r(86482),x=r(36488);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=(0,B.Z)((function(e){return e()}),500),H={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},q=function(e){return e.map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},U=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},G=function(e,t,r){return r((0,b.OU)((0,a.Z)({},e,t)))},J=function(e,t,r,n){return Object.keys(e).map((function(a){return e[a]&&e[a].length>0?function(e,t,r,n,a){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}},availability_status:function(){return{category:"Status",key:e,chips:[{value:t[e][0],name:t[e][0]===R.Rl?a.formatMessage({id:"sources.available",defaultMessage:"Available"}):a.formatMessage({id:"sources.unavailable",defaultMessage:"Unavailable"})}]}}}[e]||function(){return{name:e}}}(a,e,t,r,n)():void 0})).filter(Boolean)},K=function(e,t){return t&&e.length>0?e:void 0},$=r(80254),X=r(7995),Q=r(84866),Y=r(45697),ee=r.n(Y),te=r(87462),re=r(45987),ne=["src"],ae=function(e){var t=e.src,r=(0,re.Z)(e,ne),a=(0,o.useState)(!1),s=(0,n.Z)(a,2),c=s[0],u=s[1];return i().createElement(i().Fragment,null,!c&&i().createElement(S.aN,(0,te.Z)({height:"40px",width:"110px"},r)),i().createElement("img",(0,te.Z)({src:t,"data-testid":"ImageWithPlaceholder",onLoad:function(){return u(!0)},style:{display:c?"initial":"none"}},r)))};ae.propTypes={src:ee().string.isRequired};const oe=ae,ie=function(e){var t=(0,l.Z)(),r=(0,s.v9)((function(e){return e.user.isOrgAdmin})),n=(0,j.$)(t,r);return i().createElement(u.Tooltip,{content:n},i().createElement("div",{className:"disabled-tile-with-tooltip"},i().createElement(u.Tile,(0,te.Z)({},e,{isDisabled:!0}))))};var se=r(78205),ce=function(e){var t=e.setSelectedType,r=e.mapper,n=(0,s.v9)((function(e){return e.sources.sourceTypes}),s.wU),a=(0,s.v9)((function(e){return e.sources.activeCategory})),o=(0,d.a)(),i=(0,k.E)(),c=function(e){t(e),o(Z._j.sourcesNew.path)},l=i?u.Tile:ie;return n.filter((0,se.j)(a)).sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){var t=e.name;return r(t,c,l)}))};ce.propTypes={setSelectedType:ee().func.isRequired,mapper:ee().func.isRequired};const ue=ce;var le=function(e,t,r){return{amazon:i().createElement(r,{isStacked:!0,key:e,title:"Amazon Web Services",onClick:function(){return t("amazon")},className:"tile pf-u-mr-md pf-u-mt-md",icon:i().createElement(oe,{className:"provider-icon pf-u-mb-sm",src:"/apps/frontend-assets/partners-icons/aws.svg",alt:"aws logo"})}),google:i().createElement(r,{isStacked:!0,key:e,title:"Google Cloud",className:"tile pf-u-mr-md pf-u-mt-md",onClick:function(){return t("google")},icon:i().createElement(oe,{className:"provider-icon pf-u-mb-sm",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg",alt:"google logo"})}),azure:i().createElement(r,{isStacked:!0,key:e,title:"Microsoft Azure",onClick:function(){return t("azure")},className:"tile pf-u-mr-md pf-u-mt-md",icon:i().createElement(oe,{className:"provider-icon pf-u-mb-sm",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg",alt:"azure logo"})}),ibm:i().createElement(r,{isStacked:!0,key:e,title:"IBM Cloud",onClick:function(){return t("ibm")},className:"tile pf-u-mr-md pf-u-mt-md",icon:i().createElement(oe,{className:"provider-icon pf-u-mb-sm",src:"/apps/frontend-assets/partners-icons/ibm-cloud.svg",alt:"ibm logo"})}),"oracle-cloud-infrastructure":i().createElement(r,{isStacked:!0,key:e,title:"Oracle Cloud Infrastructure",onClick:function(){return t("oracle-cloud-infrastructure")},className:"tile pf-u-mr-md pf-u-mt-md",icon:i().createElement(oe,{className:"provider-icon pf-u-mb-sm",src:"/apps/frontend-assets/partners-icons/oracle-short.svg",alt:"oracle logo"})})}[e]};const de=function(e){return i().createElement(ue,(0,te.Z)({},e,{mapper:le}))};var fe=function(e){var t=e.setSelectedType,r=(0,l.Z)();return i().createElement(u.Card,{className:"src-c-card__cloud-empty-state pf-u-mt-md pf-u-mt-0-on-md"},i().createElement(u.CardTitle,null,r.formatMessage({id:"cloud.emptystate.cardTitle",defaultMessage:"Get started by connecting to your public clouds"})),i().createElement(u.CardBody,null,i().createElement(u.Text,null,r.formatMessage({id:"cloud.emptystate.cardDescription",defaultMessage:"Select an available provider."})),i().createElement("div",{className:"provider-tiles pf-u-mt-md pf-u-mb-lg"},i().createElement(de,{setSelectedType:t}))),i().createElement(u.CardFooter,{className:"cloud-footer"},i().createElement(u.Text,{className:"catalog-link pf-u-mt-lg"},r.formatMessage({id:"cloud.emptystate.catalogLink",defaultMessage:"Looking for a different provider? <a>See all Red Hat Certified Cloud and Service Providers</a>"},{a:function(e){return i().createElement(u.Text,{key:"link",component:"a",href:"https://catalog.redhat.com/cloud",target:"_blank",rel:"noopener noreferrer"},e)}}))))};fe.propTypes={setSelectedType:ee().func.isRequired};const pe=fe;var me=i().createElement(oe,{className:"redhat-icon",src:"/apps/frontend-assets/red-hat-logos/stacked.svg",alt:"red hat logo"}),ve=function(e,t,r){return{openshift:i().createElement(r,{isStacked:!0,key:e,title:"OpenShift Container Platform",className:"tile pf-u-mr-md-on-md pf-u-mt-md pf-u-mt-0-on-md",onClick:function(){return t("openshift")},icon:me})}[e]};const ge=function(e){return i().createElement(ue,(0,te.Z)({},e,{mapper:ve}))};var ye=function(e){var t=e.setSelectedType,r=(0,l.Z)();return i().createElement(u.Card,{className:"src-c-card__cloud-empty-state pf-u-mt-md pf-u-mt-0-on-md"},i().createElement(u.CardTitle,null,r.formatMessage({id:"redhat.emptystate.cardTitle",defaultMessage:"Get started by connecting to your Red Hat applications"})),i().createElement(u.CardBody,null,i().createElement(u.Text,null,r.formatMessage({id:"redhat.emptystate.cardDescription",defaultMessage:"Select an available application."})),i().createElement("div",{className:"provider-tiles pf-u-mt-md pf-u-mb-lg"},i().createElement(ge,{setSelectedType:t}))))};ye.propTypes={setSelectedType:ee().func.isRequired};const be=ye;var he=r(64673),Ee=r(89376),Se=r(39173),Me=r(10817),Oe=r(46071);const Te=function(){var e=(0,l.Z)(),t=(0,s.I0)(),r=(0,s.v9)((function(e){return e.sources.activeCategory}));return i().createElement(u.Tabs,{activeKey:r,onSelect:function(e,r){return t((0,b.Qr)(r))},className:"pf-u-mt-md"},i().createElement(u.Tab,{eventKey:Q.JL,title:i().createElement(i().Fragment,null,i().createElement(u.TabTitleIcon,null,i().createElement(Oe.ZP,{"aria-label":"Cloud Icon"})),i().createElement(u.TabTitleText,null,e.formatMessage({id:"sources.cloudSources",defaultMessage:"Cloud sources"})))}),i().createElement(u.Tab,{eventKey:Q.B0,title:i().createElement(i().Fragment,null,i().createElement(u.TabTitleIcon,null,i().createElement(Me.ZP,{"aria-label":"Red Hat Icon"})),i().createElement(u.TabTitleText,null,e.formatMessage({id:"sources.redhatSources",defaultMessage:"Red Hat sources"})))}))};var we=function(){var e=(0,l.Z)();return i().createElement(Ee.Z,{className:"pf-u-pb-0"},i().createElement(Se.Z,{title:e.formatMessage({id:"sources.sources",defaultMessage:"Sources"})}),i().createElement(Te,null))};const ke=i().memo(we),Ze=function(e,t,r,n){var a;switch(e){case"applications":return t.map((function(e){var t,n=e.application_type_id;return null===(t=r.find((function(e){return e.id===n})))||void 0===t?void 0:t.display_name})).join(",");case"source_type_id":return null===(a=n.find((function(e){return e.id===t})))||void 0===a?void 0:a.product_name;default:return t}};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=(0,o.lazy)((function(){return r.e(490).then(r.bind(r,55997))})),ze=(0,o.lazy)((function(){return Promise.all([r.e(697),r.e(135),r.e(192),r.e(494),r.e(728),r.e(199)]).then(r.bind(r,58012)).then((function(e){return{default:e.AddSourceWizard}}))})),Ae={filter:void 0,selectedType:void 0,wizardInitialState:void 0,wizardInitialValues:void 0},De=function(e,t){var r=t.type,n=t.value,a=t.selectedType,o=t.initialValues,i=t.initialState;switch(r){case"setFilterValue":return Ce(Ce({},e),{},{filter:n});case"setSelectedType":return Ce(Ce({},e),{},{selectedType:a});case"retryWizard":return Ce(Ce({},e),{},{wizardInitialState:i,wizardInitialValues:o});case"closeWizard":return Ce(Ce({},e),{},{selectedType:void 0,wizardInitialState:void 0,wizardInitialValues:void 0})}};const Ie=function(){var e=(0,o.useReducer)(De,Ae),t=(0,n.Z)(e,2),r=t[0],E=r.filter,O=r.selectedType,T=r.wizardInitialState,j=r.wizardInitialValues,P=t[1],_=(0,w.W)(),C=(0,k.E)(),N=(0,s.v9)((function(e){return e.user.isOrgAdmin})),z=(0,d.a)(),A=(0,l.Z)(),D=(0,v.Z)(),B=(0,s.v9)((function(e){return e.sources}),s.wU),F=B.filterValue,Y=B.numberOfEntities,ee=B.appTypes,te=B.pageSize,re=B.pageNumber,ne=B.fetchingError,ae=B.sourceTypes,oe=B.paginationClicked,ie=B.appTypesLoaded,ce=B.sourceTypesLoaded,ue=B.activeCategory,le=B.entities,de=_&&ce&&ie,fe=(0,s.I0)();(0,o.useEffect)((function(){E!==F.name&&P({type:"setFilterValue",value:F.name})}),[F.name]);var me=function(e,t){return fe((0,b.zm)(t,te))},ve=Math.ceil(Y/te);(0,o.useEffect)((function(){de&&Y>0&&re>Math.max(ve,1)&&me(0,ve)}));var ge,ye={itemCount:Y,page:re,perPage:te,onSetPage:me,onPerPageSelect:function(e,t){return fe((0,b.zm)(1,t))},className:"top-pagination"},Ee=Ce(Ce({},ye),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"bottom-pagination"}),Se=!(de&&ie&&ce||oe),Me=ae.filter((0,se.j)(ue,!0)),Oe=A.formatMessage({id:"sources.addSource",defaultMessage:"Add source"}),Te=N?A.formatMessage({id:"sources.notAdminAddButton",defaultMessage:"To add a source, you must add Sources Administrator permissions to your user."}):A.formatMessage({id:"sources.notPermissionsAddButton",defaultMessage:"To add a source, your Organization Administrator must grant you Sources Administrator permissions."});(0,g.Z)(D)&&(ge={dropdownProps:{position:"right"},actions:C?[{label:Oe,props:{to:Z._j.sourcesNew.path,component:c.Z}}]:[{label:Oe,props:{component:"div",isDisabled:!0,tooltip:Te,className:"src-m-dropdown-item-disabled"}}]});var we=Object.entries(F).map((function(e){var t=(0,n.Z)(e,2),r=(t[0],t[1]);return r&&(!Array.isArray(r)||Array.isArray(r)&&r.length>0)})).filter(Boolean).length>0,je=de&&0===Y&&!we,_e=ue===Q.JL&&!je,Ie=function(e){return P({type:"setSelectedType",selectedType:e})};return i().createElement(i().Fragment,null,i().createElement(o.Suspense,{fallback:null},i().createElement($.Z,{route:Z._j.sourcesRemove,Component:Ne}),i().createElement($.Z,{route:Z._j.sourcesNew,Component:ze,componentProps:{sourceTypes:K(ae,ce),applicationTypes:K(ee,ie),isOpen:!0,onClose:function(){P({type:"closeWizard"}),z(Z._j.sources.path)},afterSuccess:function(e){return function(e){return e((0,b.il)(H))}(fe)},hideSourcesButton:!0,selectedType:O,submitCallback:function(e){return function(e,t,r,n,a){var o,s,c,l,d,f="sources-wizard-notification-".concat(Date.now());if(location.pathname.split("/").filter(Boolean).pop()!==Z._j.sourcesNew.path.split("/").pop())if(e.isErrored){var p=e.wizardState,m=p.activeStep,v=p.activeStepIndex,g=p.maxStepIndex,y=p.prevSteps,h=p.registeredFieldsHistory;t((0,b.Hz)({title:n.formatMessage({id:"alert.error.title",defaultMessage:"Error adding source"}),description:n.formatMessage({id:"alert.error.description",defaultMessage:"There was a problem while trying to add source {name}. Please try again. If the error persists, open a support case."},{name:i().createElement("b",null,e.values.source.name)}),variant:"danger",id:f,actionLinks:i().createElement(u.AlertActionLink,{onClick:function(){a({type:"retryWizard",initialValues:e.values,initialState:{activeStep:m,activeStepIndex:v,maxStepIndex:g,prevSteps:y,registeredFieldsHistory:h}}),t((0,b.Gd)(f)),r(Z._j.sourcesNew.path)}},n.formatMessage({id:"alert.error.link",defaultMessage:"Retry"}))}))}else switch((0,L.Z)(e.createdSource)){case"unavailable":t((0,b.Hz)({title:n.formatMessage({id:"alert.error.title",defaultMessage:"Source configuration unsuccessful"}),description:n.formatMessage({id:"error.notification",defaultMessage:"{error} [<b>{name}</b>]"},{error:(null===(o=e.createdSource.applications)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.availability_status_error)||(null===(c=e.createdSource.endpoint)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.availability_status_error)||n.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"}),name:e.createdSource.name,b:x.S}),variant:"danger",id:f,actionLinks:i().createElement(u.AlertActionLink,{onClick:function(){t((0,b.Gd)(f)),r((0,Z.yS)(Z._j.sourcesDetail.path,e.createdSource.id))}},n.formatMessage({id:"alert.unavailable.link",defaultMessage:"Edit source"}))}));break;case"timeout":t((0,b.Hz)({title:n.formatMessage({id:"alert.timeout.title",defaultMessage:"Source configuration in progress"}),description:n.formatMessage({id:"alert.timeout.description",defaultMessage:"We are still working to confirm credentials for source {name}. To track progress, check the Status column in the Sources table."},{name:i().createElement("b",null,e.createdSource.name)}),variant:"info"}));break;default:t((0,b.Hz)({title:n.formatMessage({id:"alert.success.title",defaultMessage:"{type} connection successful"},{type:null===(d=e.sourceTypes.find((function(t){return t.id===e.createdSource.source_type_id})))||void 0===d?void 0:d.product_name}),description:n.formatMessage({id:"alert.success.description",defaultMessage:"Source {name} was successfully added"},{name:i().createElement("b",null,e.createdSource.name)}),variant:"success",id:f,actionLinks:i().createElement(u.AlertActionLink,{onClick:function(){t((0,b.Gd)(f)),r((0,Z.yS)(Z._j.sourcesDetail.path,e.createdSource.id))}},n.formatMessage({id:"alert.success.link",defaultMessage:"View source details"}))}))}}(e,fe,z,A,P)},initialValues:j,initialWizardState:T,activeCategory:ue}})),i().createElement(ke,null),i().createElement(p.Z,{type:"content"},_e&&i().createElement(X.Z,null),ne&&i().createElement(m.Z,null),!ne&&je&&ue===Q.JL&&i().createElement(pe,{setSelectedType:Ie}),!ne&&je&&ue===Q.B0&&i().createElement(be,{setSelectedType:Ie}),!ne&&!je&&i().createElement(i().Fragment,null,i().createElement(f.Z,{useMobileLayout:!0,pagination:Se?i().createElement(S.Xf,null):Y>0?ye:void 0,actionsConfig:ge||{dropdownProps:{position:"right"},actions:C?[i().createElement(c.Z,{to:Z._j.sourcesNew.path,key:"addSourceButton"},i().createElement(u.Button,{"data-hcc-index":"true","data-hcc-title":Oe,"data-hcc-alt":"create source;add cloud provider",variant:"primary",id:"addSourceButton"},Oe))]:[i().createElement(u.Tooltip,{content:Te,key:"addSourceButton"},i().createElement("span",{tabIndex:"0"},i().createElement(u.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},Oe)))]},filterConfig:{items:[{label:A.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":A.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){P({type:"setFilterValue",value:t}),V((function(){return G("name",t,fe)}))},value:E}},{label:A.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return G("source_type_id",t,fe)},items:q(Me),value:F.source_type_id}},{label:A.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return G("applications",t,fe)},items:U((null==ee?void 0:ee.filter((0,he.W)(Me,ue)))||[]),value:F.applications}},{label:A.formatMessage({id:"sources.availabilityStatus",defaultMessage:"Status"}),type:"checkbox",filterValues:{onChange:function(e,t,r){return G("availability_status",e.target.checked?[r]:[],fe)},items:[{label:A.formatMessage({id:"sources.available",defaultMessage:"Available"}),value:R.Rl},{label:A.formatMessage({id:"sources.unavailable",defaultMessage:"Unavailable"}),value:R.nZ}],value:F.availability_status}}]},activeFiltersConfig:{filters:J(F,ae,ee,A),onDelete:function(e,t,r){return fe((0,b.OU)(function(e,t,r){if(r)return Object.keys(t).reduce((function(e,t){return W(W({},e),{},(0,a.Z)({},t,void 0))}),{});var n=e[0];return W(W({},t),{},(0,a.Z)({},n.key,n.chips?t[n.key].filter((function(e){return e!==n.chips[0].value})):void 0))}(t,F,r)))}},exportConfig:Ce(Ce({},g.Z&&{position:"right"}),{},{isDisabled:!de,onSelect:function(e,t){var r="csv"===t?function(e,t,r,n){var a=(0,M.E)(t).filter((function(e){return!e.hidden}));return[a.map((function(e){return e.title}))].concat((0,h.Z)(e.map((function(e){return a.map((function(t){var a=t.value;return Ze(a,e[a],r,n)})).map((function(e){return null!=e&&e.includes(",")?'"'.concat(e,'"'):e}))})))).map((function(e){return e.join(",")})).join("\n")}(le,A,ee,ae):function(e,t,r,n){var o=(0,M.E)(t).filter((function(e){return!e.hidden})),i=e.map((function(e){return function(e,t,r,n){return e.reduce((function(e,o){return Pe(Pe({},e),{},(0,a.Z)({},o.title,Ze(o.value,t[o.value],r,n)))}),{})}(o,e,r,n)}));return JSON.stringify(i,null,2)}(le,A,ee,ae);(0,y.Sv)(r,"sources-".concat((new Date).toISOString()),t)}})}),i().createElement(I,null),i().createElement(f.Z,{pagination:Se?i().createElement(S.Xf,null):Y>0?Ee:void 0}))))}},86482:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(93433);const a=function(e){var t,r,a,o=(null===(t=e.applications)||void 0===t?void 0:t.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],i=(null===(r=e.endpoint)||void 0===r?void 0:r.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],s=(null===(a=e.authentications)||void 0===a?void 0:a.filter(Boolean).map((function(e){return e.availability_status||"timeout"})))||[],c=[].concat((0,n.Z)(o),(0,n.Z)(i),(0,n.Z)(s));return c.includes("unavailable")?"unavailable":c.length>0&&c.every((function(e){return"available"===e}))?"available":c.includes("timeout")?"timeout":"finished"}},16946:(e,t,r)=>{r.d(t,{$:()=>n,Z:()=>a});var n=function(e,t){return t?e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must add Sources Administrator permissions to your user."}):e.formatMessage({id:"sources.notWritePermissionButton",defaultMessage:"To perform this action, your Organization Administrator must grant you Sources Administrator permissions."})};const a=function(e,t){return{tooltip:n(e,t),isDisabled:!0,className:"src-m-dropdown-item-disabled"}}},64673:(e,t,r)=>{r.d(t,{W:()=>a,Z:()=>o});var n=r(84866),a=function(e,t){return function(r){return r.supported_source_types.find((function(r){var n;return(null===(n=e.find((function(e){var t=e.name;return r===t})))||void 0===n?void 0:n.category)===t}))}};const o=function(e){return e.name!==n.M$}},78205:(e,t,r)=>{r.d(t,{Z:()=>i,j:()=>o});var n=r(84866),a=[n.OH,n.N9],o=function(e,t){return function(r){var n=r.category,o=r.name;return t?n===e:n===e&&!a.includes(o)}};const i=function(e){return e.schema}}}]);
//# sourceMappingURL=../sourcemaps/sourcesPage.27021901cb1241e0d7cebf2e78d8f8ce.js.map