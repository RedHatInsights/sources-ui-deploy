(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{443:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),o=r(46),c=r.n(o),s=r(0),u=r.n(s),i=r(36),l=r(13),d=r(67),f=r(152),m=r(278),p=r(818),b=r(106),g=r(190),y=r(68),O=r(37),v=r.n(O),h=r(640),j=r(502),E=r(493),M=r(728),S=r(729),w=r(162),T=r(105),P=r(470),B=r(471),k=r(475),D=r(240),N=r(153),A=r(518),C=r.n(A),R=function(){var e=Object(m.a)(),t=Object(i.useDispatch)();return u.a.createElement(D.Bullseye,null,u.a.createElement(P.EmptyState,{variant:P.EmptyStateVariant.small},u.a.createElement(B.EmptyStateIcon,{icon:C.a}),u.a.createElement(N.Title,{headingLevel:"h2",size:"lg"},e.formatMessage({id:"sources.noResultsFoundTitle",defaultMessage:"No sources found"})),u.a.createElement(k.EmptyStateBody,null,e.formatMessage({id:"sources.noResultsFoundDescription",defaultMessage:"No sources match the filter criteria. Remove all filters or clear all filters to show sources."})),u.a.createElement(f.Button,{variant:"link",onClick:function(){return t(Object(y.c)())}},e.formatMessage({id:"sources.clearAllFilters",defaultMessage:"Clear all filters"}))))},_=r(492),L=r(478),x=r(83);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e,t,r,n){return t.filter((function(e){return e.title||e.hidden})).map((function(t){return{title:t.formatter?t.formatter(e[t.value],e,{sourceTypes:r,appTypes:n}):e[t.value]||""}}))},z=function(e,t,r,n,a){return e.filter((function(e){return!e.hidden})).reduce((function(e,o){var c=a.includes(o.id);return[].concat(v()(e),[I(I({},o),{},{isOpen:!!o.expanded,cells:q(o,t,r,n),disableActions:c,isDeleting:c})])}),[])},V=function(e){return e.filter((function(e){return e.title||e.hidden})).map((function(e){return I({title:e.title||"",value:e.value,hidden:e.hidden},e.sortable&&{transforms:[h.a,j.e]})}))},H=function(e,t){return I(I({},e),t)},K=function(e,t,r){return function(n){var a={tooltip:e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must be granted write permissions from your Organization Administrator."}),isDisabled:!0,className:"ins-c-sources__disabled-drodpown-item"},o=[];return!n.imported&&function(e,t,r,n,a){e.splice(1,0,I({title:t.formatMessage({id:"sources.edit",defaultMessage:"Edit"}),onClick:function(e,t,n){var a=n.id;return r(Object(x.b)(x.c.sourcesDetail.path,a))}},n?{component:"button"}:a))}(o,e,t,r,a),o.push(I({title:e.formatMessage({id:"sources.remove",defaultMessage:"Remove"}),onClick:function(e,r,n){var a=n.id;return t(Object(x.b)(x.c.sourcesRemove.path,a))}},r?{component:"button"}:a)),o}},J=function(){var e,t=Object(l.k)().push,r=Object(m.a)(),n=Object(_.a)(),a=Object(L.a)(),o=Object(i.useSelector)((function(e){return e.sources}),i.shallowEqual),d=o.appTypes,f=o.entities,p=o.sourceTypes,b=o.sourceTypesLoaded,g=o.appTypesLoaded,O=o.sortBy,v=o.sortDirection,h=o.numberOfEntities,j=o.removingSources,P=Object(i.useDispatch)(),B=0===h||!n,k=Object(s.useReducer)(H,(e=Object(T.b)(r,B),{rows:[],sortBy:{},isLoaded:!1,cells:V(e)})),D=c()(k,2),N=D[0],A=D[1],C=function(){var e=Object(T.b)(r,B);return A({rows:z(f,e,p,d,j),cells:V(e)})};Object(s.useEffect)((function(){n&&b&&g?(A({isLoaded:!0}),C()):(A({isLoaded:!1}),function(){var e=Object(T.b)(r,B);A({cells:V(e)})}())}),[n,b,g]),Object(s.useEffect)((function(){N.isLoaded&&C()}),[f,j]);var x=N.rows;return 0===h&&N.isLoaded?x=[{heightAuto:!0,cells:[{props:{colSpan:T.a},title:u.a.createElement(R,null)}]}]:n&&g&&b||(x=[{heightAuto:!0,cells:[{props:{colSpan:T.a,className:"sources-placeholder-row"},title:u.a.createElement(w.d,null)}]}]),u.a.createElement(E.c,{gridBreakPoint:"grid-lg","aria-label":r.formatMessage({id:"sources.list",defaultMessage:"List of Sources"}),onSort:function(e,t,r){return P(Object(y.m)(N.cells[t].value,r))},sortBy:{index:N.cells.map((function(e){return e.hidden?"hidden":e.value})).indexOf(O),direction:v},rows:x,cells:N.cells,actionResolver:n&&h>0?K(r,t,a):void 0,rowWrapper:w.e},u.a.createElement(M.a,null),u.a.createElement(S.a,null))},W=r(594),G=r.n(W),Q=function(){var e=Object(L.a)(),t=Object(m.a)();return u.a.createElement(D.Bullseye,null,u.a.createElement(P.EmptyState,{className:"ins-c-sources__empty-state"},u.a.createElement(B.EmptyStateIcon,{icon:G.a}),u.a.createElement(N.Title,{headingLevel:"h5",size:"lg"},t.formatMessage({id:"sources.emptyStateTitle",defaultMessage:"No sources"})),u.a.createElement(k.EmptyStateBody,null,e&&t.formatMessage({id:"sources.emptyStateBody",defaultMessage:"No sources have been defined. To start define a source."}),!e&&u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),t.formatMessage({id:"sources.emptyStateBodyNotAdmin",defaultMessage:"To add a source, you must be granted write permissions from your Organization Administrator."}))),e&&u.a.createElement(d.Link,{to:x.c.sourcesNew.path},u.a.createElement(f.Button,{className:"pf-u-mt-xl",variant:"primary"},t.formatMessage({id:"sources.emptyStateButton",defaultMessage:"Add source"})))))},U=r(60),X=r(251),Y=r.n(X),Z=function(){var e=Object(m.a)();return u.a.createElement(D.Bullseye,null,u.a.createElement(P.EmptyState,{className:"ins-c-sources__empty-state"},u.a.createElement(B.EmptyStateIcon,{icon:Y.a,color:"var(--pf-global--danger-color--100)"}),u.a.createElement(N.Title,{headingLevel:"h5",size:"lg"},e.formatMessage({id:"sources.errorStateTitle",defaultMessage:"Something went wrong"})),u.a.createElement(k.EmptyStateBody,null,e.formatMessage({id:"sources.errorStateBody",defaultMessage:"There was a problem processing the request. Try refreshing the page. If the problem persists, contact <a>Red Hat support.</a>"},{a:function(e){return u.a.createElement(U.Text,{key:"link",component:"a",href:"https://access.redhat.com/support",target:"_blank",rel:"noopener noreferrer"},e)}})),u.a.createElement(f.Button,{className:"pf-u-mt-xl",variant:"primary",component:"a",href:window.location.href},e.formatMessage({id:"sources.retry",defaultMessage:"Retry"}))))},$=r(533),ee=r(39);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=Object($.default)((function(e){return e()}),500),ae={pageNumber:1,sortBy:"created_at",sortDirection:"desc"},oe=function(e,t){return e.filter((function(e){var r=e.vendor;return t===ee.b?ee.c.includes(r):r===ee.d})).map((function(e){var t=e.id;return{label:e.product_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},ce=function(e){return e.map((function(e){var t=e.id;return{label:e.display_name,value:t}})).sort((function(e,t){return e.label.localeCompare(t.label)}))},se=function(e,t,r){return r(Object(y.d)(a()({},e,t)))},ue=function(e,t,r){return Object.keys(e).map((function(n){return e[n]&&e[n].length>0?function(e,t,r,n){return{name:function(){return{name:t[e],key:e}},source_type_id:function(){return{category:"Source Type",key:e,chips:t[e].map((function(e){var t=r.find((function(t){return t.id===e}));return{name:t?t.product_name:e,value:e}}))}},applications:function(){return{category:"Application",key:e,chips:t[e].map((function(e){var t=n.find((function(t){return t.id===e}));return{name:t?t.display_name:e,value:e}}))}}}[e]||function(){return{name:e}}}(n,e,t,r)():void 0})).filter(Boolean)},ie=function(e,t){return t&&e.length>0?e:void 0},le=r(635),de=r(99),fe=r(545),me=r(597),pe=r(815),be=r(598),ge=r(817),ye=r.n(ge),Oe=r(816),ve=r.n(Oe),he=function(){var e=Object(m.a)(),t=Object(i.useDispatch)(),r=Object(i.useSelector)((function(e){return e.sources.activeVendor}));return u.a.createElement(fe.Tabs,{activeKey:r,onSelect:function(e,r){return t(Object(y.l)(r))},className:"pf-u-mt-md",isFilled:!0},u.a.createElement(me.Tab,{eventKey:ee.b,title:u.a.createElement(u.a.Fragment,null,u.a.createElement(pe.TabTitleIcon,null,u.a.createElement(ve.a,null)),u.a.createElement(be.TabTitleText,null,e.formatMessage({id:"sources.cloudSources",defaultMessage:"Cloud sources"})))}),u.a.createElement(me.Tab,{eventKey:ee.d,title:u.a.createElement(u.a.Fragment,null,u.a.createElement(pe.TabTitleIcon,null,u.a.createElement(ye.a,null)),u.a.createElement(be.TabTitleText,null,e.formatMessage({id:"sources.redhatSources",defaultMessage:"Red Hat sources"})))}))};function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,973))})),Se=Object(s.lazy)((function(){return Promise.all([r.e(0),r.e(3),r.e(1),r.e(14)]).then(r.t.bind(null,980,7)).then((function(e){return{default:e.AddSourceWizard}}))}));t.default=function(){var e=Object(s.useState)(),t=c()(e,2),r=t[0],n=t[1],o=Object(_.a)(),O=Object(L.a)(),v=Object(l.k)(),h=Object(m.a)(),j=Object(i.useSelector)((function(e){return e.sources}),i.shallowEqual),E=j.filterValue,M=j.numberOfEntities,S=j.appTypes,T=j.pageSize,P=j.pageNumber,B=j.fetchingError,k=j.sourceTypes,D=j.paginationClicked,N=j.appTypesLoaded,A=j.sourceTypesLoaded,C=j.activeVendor,R=o&&A&&N,F=Object(i.useDispatch)();Object(s.useEffect)((function(){r!==E.name&&n(E.name)}),[E.name]);var I=function(e,t){return F(Object(y.h)(t,T))},q=Math.ceil(M/T);Object(s.useEffect)((function(){R&&M>0&&P>Math.max(q,1)&&I(0,q)}));var z={itemCount:M,page:P,perPage:T,onSetPage:I,onPerPageSelect:function(e,t){return F(Object(y.h)(1,t))},className:"top-pagination"},V=Ee(Ee({},z),{},{dropDirection:"up",variant:"bottom",isCompact:!1,className:"bottom-pagination"}),H=!(R&&N&&A||D),K=Object.entries(E).map((function(e){var t=c()(e,2);t[0];return t[1]})).filter(Boolean).length>0,W=R&&!K&&0===M;return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.Suspense,{fallback:null},u.a.createElement(le.a,{exact:!0,route:x.c.sourcesRemove,Component:Me}),u.a.createElement(le.a,{exact:!0,route:x.c.sourcesNew,Component:Se,componentProps:{sourceTypes:ie(k,A),applicationTypes:ie(S,N),isOpen:!0,onClose:function(){return v.push(x.c.sources.path)},afterSuccess:function(e){return function(e){return e(Object(y.f)(ae))}(F)},hideSourcesButton:!0}})),u.a.createElement(b.PageHeader,{className:"pf-u-pb-0"},u.a.createElement(b.PageHeaderTitle,{title:h.formatMessage({id:"sources.sources",defaultMessage:"Sources"})}),u.a.createElement(he,null)),u.a.createElement(g.Section,{type:"content"},W&&u.a.createElement(Q,null),B&&u.a.createElement(Z,null),!W&&!B&&u.a.createElement(u.a.Fragment,null,u.a.createElement(p.PrimaryToolbar,{pagination:H?u.a.createElement(w.c,null):M>0?z:void 0,actionsConfig:O?{actions:[u.a.createElement(d.Link,{to:x.c.sourcesNew.path,key:"addSourceButton"},u.a.createElement(f.Button,{variant:"primary",id:"addSourceButton"},h.formatMessage({id:"sources.addSource",defaultMessage:"Add source"})))]}:{actions:[u.a.createElement(de.Tooltip,{content:h.formatMessage({id:"sources.notAdminAddButton",defaultMessage:"To add a source, you must be granted write permissions from your Organization Administrator."}),key:"addSourceButton"},u.a.createElement("span",{tabIndex:"0"},u.a.createElement(f.Button,{variant:"primary",isDisabled:!0,id:"addSourceButton"},h.formatMessage({id:"sources.addSource",defaultMessage:"Add source"}))))]},filterConfig:{items:[{label:h.formatMessage({id:"sources.name",defaultMessage:"Name"}),filterValues:{"aria-label":h.formatMessage({id:"sources.filterByName",defaultMessage:"Filter by name"}),onChange:function(e,t){n(t),ne((function(){return se("name",t,F)}))},value:r}},{label:h.formatMessage({id:"sources.type",defaultMessage:"Type"}),type:"checkbox",filterValues:{onChange:function(e,t){return se("source_type_id",t,F)},items:oe(k||[],C),value:E.source_type_id}},{label:h.formatMessage({id:"sources.application",defaultMessage:"Application"}),type:"checkbox",filterValues:{onChange:function(e,t){return se("applications",t,F)},items:ce(S||[]),value:E.applications}}]},activeFiltersConfig:{filters:ue(E,k,S),onDelete:function(e,t,r){return F(Object(y.d)(function(e,t,r){if(r)return Object.keys(t).reduce((function(e,t){return re(re({},e),{},a()({},t,void 0))}),{});var n=e[0];return re(re({},t),{},a()({},n.key,n.chips?t[n.key].filter((function(e){return e!==n.chips[0].value})):void 0))}(t,E,r)))}}}),u.a.createElement(J,null),u.a.createElement(p.PrimaryToolbar,{pagination:H?u.a.createElement(w.c,null):M>0?V:void 0}))))}},454:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(36),a=r(13),o=function(){var e=Object(a.m)().id;return Object(n.useSelector)((function(t){return t.sources.entities.find((function(t){return t.id===e}))}))}},478:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(36),a=function(){var e=Object(n.useSelector)((function(e){var t=e.user;return{orgAdmin:null==t?void 0:t.isOrgAdmin,writePermissions:null==t?void 0:t.writePermissions}})),t=e.orgAdmin,r=e.writePermissions;if("boolean"==typeof t||"boolean"==typeof r)return!!t||!!r}},492:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(36),a=function(){return Object(n.useSelector)((function(e){return e.sources.loaded}))<=0}},544:function(e,t,r){"use strict";var n=r(46),a=r.n(n),o=r(0),c=r.n(o),s=r(36),u=r(13),i=r(278),l=r(68),d=r(44),f=r(492),m=r(83),p=r(454);t.a=function(){var e=Object(u.m)().id,t=Object(i.a)(),r=Object(p.a)(),n=Object(f.a)(),b=Object(s.useSelector)((function(e){return e.sources}),s.shallowEqual),g=b.appTypesLoaded,y=b.sourceTypesLoaded,O=Object(s.useDispatch)(),v=Object(o.useState)(!1),h=a()(v,2),j=h[0],E=h[1];return Object(o.useEffect)((function(){n&&g&&y&&Object(d.h)(e).then((function(e){var t=a()(e.sources,1)[0];return O(Object(l.a)(t)),t})).then((function(r){r||O(Object(l.b)(t.formatMessage({id:"sources.sourceNotFoundTitle",defaultMessage:"Requested source was not found"}),"danger",t.formatMessage({id:"sources.sourceNotFoundTitleDescription",defaultMessage:"Source with { id } was not found. Try it again later."},{id:e}))),E(!0)}))}),[n,g,y]),j&&!r?c.a.createElement(u.c,{to:m.c.sources.path}):null}},635:function(e,t,r){"use strict";var n=r(156),a=r.n(n),o=r(123),c=r.n(o),s=r(0),u=r.n(s),i=r(13),l=r(14),d=r.n(l),f=r(36),m=r(278),p=r(68),b=r(478),g=r(83),y=function(){var e=Object(m.a)(),t=Object(b.a)(),r=Object(f.useDispatch)();return Object(s.useEffect)((function(){if(!1===t){var n=e.formatMessage({id:"sources.insufficietnPerms",defaultMessage:"Insufficient permissions"}),a=e.formatMessage({id:"sources.notAdminButton",defaultMessage:"To perform this action, you must be granted write permissions from your Organization Administrator."});r(Object(p.b)(n,"danger",a))}}),[t]),!1===t?u.a.createElement(i.c,{to:g.c.sources.path}):null},O=r(454),v=r(544),h=function(e){var t=e.route,r=e.children;return!(t.redirectNoId&&Object(O.a)())&&t.redirectNoId?u.a.createElement(v.a,null):u.a.createElement(u.a.Fragment,null,t.writeAccess&&u.a.createElement(y,null),r)};h.propTypes={route:d.a.shape({path:d.a.string.isRequired,redirectNoId:d.a.bool,writeAccess:d.a.bool}).isRequired,children:d.a.node.isRequired};var j=function(e){var t=e.route,r=e.componentProps,n=e.Component,o=c()(e,["route","componentProps","Component"]);return u.a.createElement(i.d,a()({},o,{path:t.path}),u.a.createElement(h,{route:t},u.a.createElement(n,r)))};j.propTypes={route:d.a.shape({path:d.a.string.isRequired,redirectNoId:d.a.bool,writeAccess:d.a.bool}).isRequired,componentProps:d.a.any,Component:d.a.oneOfType([d.a.func,d.a.object]).isRequired};t.a=j}}]);
//# sourceMappingURL=../sourcemaps/sourcesPage.js.map