(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~addSource"],{

/***/ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/addSourceWizard.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/addSourceWizard.js ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(/*! ./_commonjsHelpers-32c5d30b.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/_commonjsHelpers-32c5d30b.js");var sourceFormRenderer=__webpack_require__(/*! ./index-c1a9c4aa.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/index-c1a9c4aa.js"),objectWithoutProperties=__webpack_require__(/*! ./objectWithoutProperties-9e2b4e81.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/objectWithoutProperties-9e2b4e81.js"),slicedToArray=__webpack_require__(/*! ./slicedToArray-a77d6bb6.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/slicedToArray-a77d6bb6.js"),defineProperty=__webpack_require__(/*! ./defineProperty-cf06dcaa.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/defineProperty-cf06dcaa.js"),React=__webpack_require__(/*! react */ "./node_modules/react/index.js"),React__default=_interopDefault(React),Button_js=__webpack_require__(/*! @patternfly/react-core/dist/js/components/Button/Button.js */ "./node_modules/@patternfly/react-core/dist/js/components/Button/Button.js"),PropTypes=_interopDefault(__webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js")),isEmpty=_interopDefault(__webpack_require__(/*! lodash/isEmpty */ "./node_modules/lodash/isEmpty.js")),reactIntl=__webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.js"),Wizard_js=__webpack_require__(/*! @patternfly/react-core/dist/js/components/Wizard/Wizard.js */ "./node_modules/@patternfly/react-core/dist/js/components/Wizard/Wizard.js");__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/form-renderer */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/form-renderer.js"),__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/component-types */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/component-types.js"),__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/validator-types */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/validator-types.js"),__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/validator-mapper */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/validator-mapper.js"),__webpack_require__(/*! @data-driven-forms/pf4-component-mapper/dist/cjs/form-template */ "./node_modules/@data-driven-forms/pf4-component-mapper/dist/cjs/form-template.js"),__webpack_require__(/*! @data-driven-forms/pf4-component-mapper/dist/cjs/component-mapper */ "./node_modules/@data-driven-forms/pf4-component-mapper/dist/cjs/component-mapper.js"),__webpack_require__(/*! ./toConsumableArray-b90a35b5.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/toConsumableArray-b90a35b5.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Alert/Alert.js */ "./node_modules/@patternfly/react-core/dist/js/components/Alert/Alert.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/DescriptionList/DescriptionListGroup.js */ "./node_modules/@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListGroup.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/DescriptionList/DescriptionListTerm.js */ "./node_modules/@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListTerm.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/DescriptionList/DescriptionListDescription.js */ "./node_modules/@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListDescription.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/DescriptionList/DescriptionList.js */ "./node_modules/@patternfly/react-core/dist/js/components/DescriptionList/DescriptionList.js"),__webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Form/FormHelperText.js */ "./node_modules/@patternfly/react-core/dist/js/components/Form/FormHelperText.js"),__webpack_require__(/*! @patternfly/react-icons/dist/js/icons/question-circle-icon */ "./node_modules/@patternfly/react-icons/dist/js/icons/question-circle-icon.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Popover/Popover.js */ "./node_modules/@patternfly/react-core/dist/js/components/Popover/Popover.js");var Text_js=__webpack_require__(/*! @patternfly/react-core/dist/js/components/Text/Text.js */ "./node_modules/@patternfly/react-core/dist/js/components/Text/Text.js");__webpack_require__(/*! @patternfly/react-core/dist/js/components/Text/TextContent.js */ "./node_modules/@patternfly/react-core/dist/js/components/Text/TextContent.js"),__webpack_require__(/*! ./hardcodedSchemas.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/hardcodedSchemas.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Text/TextList.js */ "./node_modules/@patternfly/react-core/dist/js/components/Text/TextList.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Text/TextListItem.js */ "./node_modules/@patternfly/react-core/dist/js/components/Text/TextListItem.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/ClipboardCopy/ClipboardCopy.js */ "./node_modules/@patternfly/react-core/dist/js/components/ClipboardCopy/ClipboardCopy.js");var stringConstants=__webpack_require__(/*! ./stringConstants-06af2ce2.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/stringConstants-06af2ce2.js");__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/use-form-api */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/use-form-api.js"),__webpack_require__(/*! @redhat-cloud-services/frontend-components-utilities/files/cjs/interceptors */ "./node_modules/@redhat-cloud-services/frontend-components-utilities/files/cjs/interceptors.js");var constants=__webpack_require__(/*! ./constants.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/constants.js"),index=__webpack_require__(/*! ./index-1eff31c6.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/index-1eff31c6.js");__webpack_require__(/*! ./schemaBuilder-79f062d4.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/schemaBuilder-79f062d4.js"),__webpack_require__(/*! ./SourceWizardSummary.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/SourceWizardSummary.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Card/Card.js */ "./node_modules/@patternfly/react-core/dist/js/components/Card/Card.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Card/CardBody.js */ "./node_modules/@patternfly/react-core/dist/js/components/Card/CardBody.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Form/FormGroup.js */ "./node_modules/@patternfly/react-core/dist/js/components/Form/FormGroup.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/layouts/Grid/Grid.js */ "./node_modules/@patternfly/react-core/dist/js/layouts/Grid/Grid.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/layouts/Grid/GridItem.js */ "./node_modules/@patternfly/react-core/dist/js/layouts/Grid/GridItem.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/layouts/Bullseye/Bullseye.js */ "./node_modules/@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Card/CardTitle.js */ "./node_modules/@patternfly/react-core/dist/js/components/Card/CardTitle.js"),__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/use-field-api */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/use-field-api.js"),__webpack_require__(/*! ./CardSelect.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/CardSelect.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Radio/Radio.js */ "./node_modules/@patternfly/react-core/dist/js/components/Radio/Radio.js"),__webpack_require__(/*! ./AuthSelect.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/AuthSelect.js"),__webpack_require__(/*! @data-driven-forms/pf4-component-mapper/dist/cjs/select */ "./node_modules/@data-driven-forms/pf4-component-mapper/dist/cjs/select.js"),__webpack_require__(/*! @data-driven-forms/pf4-component-mapper/dist/cjs/radio */ "./node_modules/@data-driven-forms/pf4-component-mapper/dist/cjs/radio.js"),__webpack_require__(/*! ./asyncToGenerator-a32dc547.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/asyncToGenerator-a32dc547.js"),__webpack_require__(/*! awesome-debounce-promise */ "./node_modules/awesome-debounce-promise/dist/index.es.js");var SourceAddSchema=__webpack_require__(/*! ./SourceAddSchema.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/SourceAddSchema.js");__webpack_require__(/*! ./handleError.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/handleError.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Spinner/Spinner.js */ "./node_modules/@patternfly/react-core/dist/js/components/Spinner/Spinner.js"),__webpack_require__(/*! @data-driven-forms/react-form-renderer/dist/cjs/form-spy */ "./node_modules/@data-driven-forms/react-form-renderer/dist/cjs/form-spy.js"),__webpack_require__(/*! ./validated.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/validated.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/EmptyState/EmptyState.js */ "./node_modules/@patternfly/react-core/dist/js/components/EmptyState/EmptyState.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/EmptyState/EmptyStateSecondaryActions.js */ "./node_modules/@patternfly/react-core/dist/js/components/EmptyState/EmptyStateSecondaryActions.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon.js */ "./node_modules/@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon.js"),__webpack_require__(/*! @patternfly/react-core/dist/js/components/Title/Title.js */ "./node_modules/@patternfly/react-core/dist/js/components/Title/Title.js");var LoadingStep=__webpack_require__(/*! ./LoadingStep.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/LoadingStep.js"),filterApps=__webpack_require__(/*! ./filterApps.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/filterApps.js"),filterTypes=__webpack_require__(/*! ./filterTypes.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/filterTypes.js");__webpack_require__(/*! @patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody.js */ "./node_modules/@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody.js"),__webpack_require__(/*! @patternfly/react-icons/dist/js/icons/check-circle-icon */ "./node_modules/@patternfly/react-icons/dist/js/icons/check-circle-icon.js");var FinishedStep=__webpack_require__(/*! ./FinishedStep-490967d7.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/FinishedStep-490967d7.js");__webpack_require__(/*! @patternfly/react-icons/dist/js/icons/exclamation-circle-icon */ "./node_modules/@patternfly/react-icons/dist/js/icons/exclamation-circle-icon.js");var ErroredStep=__webpack_require__(/*! ./ErroredStep.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/ErroredStep.js");__webpack_require__(/*! @patternfly/react-icons/dist/js/icons/wrench-icon */ "./node_modules/@patternfly/react-icons/dist/js/icons/wrench-icon.js");var TimeoutStep=__webpack_require__(/*! ./TimeoutStep.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/TimeoutStep.js"),computeSourceStatus=__webpack_require__(/*! ./computeSourceStatus.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/computeSourceStatus.js"),reactRouterDom=__webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");__webpack_require__(/*! ./costManagementAuthentication.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/costManagementAuthentication.js"),__webpack_require__(/*! ./getApplicationStatus.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/getApplicationStatus.js");var createSource=__webpack_require__(/*! ./createSource.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/createSource.js");__webpack_require__(/*! @patternfly/react-core/dist/js/components/Modal/Modal.js */ "./node_modules/@patternfly/react-core/dist/js/components/Modal/Modal.js"),__webpack_require__(/*! @patternfly/react-icons/dist/js/icons/exclamation-triangle-icon */ "./node_modules/@patternfly/react-icons/dist/js/icons/exclamation-triangle-icon.js");var CloseModal=__webpack_require__(/*! ./CloseModal.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/CloseModal.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty._defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var initialValues={schema:{},sourceTypes:[],isLoading:!0},reducer=function reducer(e,r){var t=r.type,s=r.sourceTypes,o=r.applicationTypes,i=r.container,a=r.disableAppSelection,n=r.intl;switch(t){case"loaded":return _objectSpread({},e,{schema:SourceAddSchema.default(s.filter(filterTypes.default).filter(filterTypes.filterVendorTypes),o.filter(filterApps.default).filter(filterApps.filterVendorAppTypes(s)),a,i,n),isLoading:!1,sourceTypes:s})}},SourceAddModal=function SourceAddModal(e){var r=e.sourceTypes,t=e.applicationTypes,s=e.disableAppSelection,o=e.isCancelling,i=e.onCancel,a=e.values,n=e.onSubmit,c=React.useReducer(reducer,initialValues),u=slicedToArray._slicedToArray(c,2),p=u[0],d=p.schema,l=p.sourceTypes,f=p.isLoading,y=u[1],m=React.useRef(!1),j=React.useRef(document.createElement("div")),S=reactIntl.useIntl();return React.useEffect((function(){m.current=!0;var e=[];return r||e.push(index.doLoadSourceTypes()),t||e.push(index.doLoadApplicationTypes()),Promise.all(e).then((function(e){var o=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),i=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));m.current&&y({type:"loaded",sourceTypes:r||o.sourceTypes,applicationTypes:t||i.applicationTypes,disableAppSelection:s,container:j.current,intl:S})})),function(){m.current=!1}}),[]),React.useEffect((function(){j.current.hidden=o}),[o]),f?React__default.createElement(Wizard_js.Wizard,{isOpen:!0,onClose:i,title:stringConstants.WIZARD_TITLE(),description:stringConstants.WIZARD_DESCRIPTION(),steps:[{name:"Loading",component:React__default.createElement(LoadingStep.default,{onClose:function onClose(){return i()}}),isFinishedStep:!0}]}):React__default.createElement(sourceFormRenderer.SourcesFormRenderer,{initialValues:a,schema:d,onSubmit:function onSubmit(e){return n(e,l)},onCancel:i})};SourceAddModal.propTypes={onCancel:PropTypes.func.isRequired,onSubmit:PropTypes.func.isRequired,sourceTypes:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,name:PropTypes.string.isRequired,product_name:PropTypes.string.isRequired,schema:PropTypes.shape({authentication:PropTypes.array,endpoint:PropTypes.object})})),applicationTypes:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,name:PropTypes.string.isRequired,display_name:PropTypes.string.isRequired})),values:PropTypes.object,disableAppSelection:PropTypes.bool,isCancelling:PropTypes.bool},SourceAddModal.defaultProps={values:{},disableAppSelection:!1};var EditLink=function EditLink(e){var r=e.id,t=reactIntl.useIntl().formatMessage({id:"wizard.editSource",defaultMessage:"Edit source"});return"sources"===insights.chrome.getApp()?React__default.createElement(reactRouterDom.Link,{to:"/sources/detail/".concat(r)},React__default.createElement(Button_js.Button,{variant:"primary",className:"pf-u-mt-xl"},t)):React__default.createElement(Button_js.Button,{variant:"primary",className:"pf-u-mt-xl",component:"a",target:"_blank",href:"".concat(FinishedStep.computeSourcesUrl(),"/detail/").concat(r),rel:"noopener noreferrer"},t)};EditLink.propTypes={id:PropTypes.string.isRequired};var FinalWizard=function FinalWizard(e){var r,t,s,o,i,a=e.afterSubmit,n=e.afterError,c=e.isFinished,u=e.isErrored,p=e.successfulMessage,d=e.hideSourcesButton,l=e.returnButtonTitle,f=e.reset,y=e.createdSource,m=void 0===y?{}:y,j=e.tryAgain,S=e.afterSuccess,T=React.useState(),g=slicedToArray._slicedToArray(T,2),_=g[0],q=g[1],b=React.useState(),P=slicedToArray._slicedToArray(b,2),v=P[0],h=P[1],R=reactIntl.useIntl(),E=React__default.createElement(Button_js.Button,{variant:"link",onClick:f},R.formatMessage({id:"wizard.addAnotherSource",defaultMessage:"Add another source"}));if(v)i=React__default.createElement(FinishedStep.FinishedStep,{onClose:a,title:R.formatMessage({id:"wizard.removeSourceSuccessTitle",defaultMessage:"Removing successful"}),successfulMessage:R.formatMessage({id:"wizard.removeSourceSuccessDescription",defaultMessage:"Source was successfully removed."}),hideSourcesButton:d,returnButtonTitle:l,secondaryActions:E});else if(_)i=React__default.createElement(LoadingStep.default,{customText:R.formatMessage({id:"wizard.removingSource",defaultMessage:"Removing source"})});else if(c)switch(computeSourceStatus.default(m)){case"unavailable":i=React__default.createElement(ErroredStep.default,{onClose:a,secondaryActions:React__default.createElement(Button_js.Button,{variant:"link",onClick:function removeSource(){return q(!0),index.getSourcesApi().removeSource(m.id).then((function(){S&&S(),h(!0)})).catch((function(){return q(!1)}))}},R.formatMessage({id:"wizard.removeSource",defaultMessage:"Remove source"})),Component:function Component(){return React__default.createElement(EditLink,{id:m.id})},message:(null===(r=m.applications)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.availability_status_error)||(null===(s=m.endpoint)||void 0===s?void 0:null===(o=s[0])||void 0===o?void 0:o.availability_status_error)||R.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"}),title:R.formatMessage({id:"wizard.configurationUnsuccessful",defaultMessage:"Configuration unsuccessful"})});break;case"timeout":i=React__default.createElement(TimeoutStep.default,{onClose:a,returnButtonTitle:l,secondaryActions:E});break;default:i=React__default.createElement(FinishedStep.FinishedStep,{onClose:a,successfulMessage:p,hideSourcesButton:d,returnButtonTitle:l,secondaryActions:E})}else i=u?React__default.createElement(ErroredStep.default,{onClose:n,primaryAction:j,secondaryActions:React__default.createElement(Text_js.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},R.formatMessage({id:"wizard.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:R.formatMessage({id:"wizard.retryText",defaultMessage:"Retry"})}):React__default.createElement(LoadingStep.default,{customText:R.formatMessage({id:"wizard.loadingText",defaultMessage:"Validating source credentials"}),onClose:n,cancelTitle:R.formatMessage({id:"wizard.close",defaultMessage:"Close"})});return(React__default.createElement(Wizard_js.Wizard,{isOpen:!0,onClose:c?a:n,title:stringConstants.WIZARD_TITLE(),description:stringConstants.WIZARD_DESCRIPTION(),steps:[{name:"Finish",component:i,isFinishedStep:!0}]}))};function ownKeys$1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function _objectSpread$1(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys$1(Object(t),!0).forEach((function(r){defineProperty._defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}FinalWizard.propTypes={afterSubmit:PropTypes.func.isRequired,afterError:PropTypes.func.isRequired,isFinished:PropTypes.bool.isRequired,isErrored:PropTypes.bool.isRequired,successfulMessage:PropTypes.node.isRequired,hideSourcesButton:PropTypes.bool,returnButtonTitle:PropTypes.node.isRequired,errorMessage:PropTypes.node,reset:PropTypes.func,createdSource:PropTypes.object,tryAgain:PropTypes.func,afterSuccess:PropTypes.func};var prepareInitialValues=function prepareInitialValues(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0}},reducer$1=function reducer(e,r){var t=r.type,s=r.values,o=r.data,i=r.error,a=r.initialValues,n=r.sourceTypes;switch(t){case"reset":return prepareInitialValues(a);case"prepareSubmitState":return _objectSpread$1({},e,{isFinished:!1,isErrored:!1,error:void 0,isSubmitted:!0,values:s,sourceTypes:n});case"setSubmitted":return _objectSpread$1({},e,{isFinished:!0,createdSource:o});case"setErrored":return _objectSpread$1({},e,{isErrored:!0,error:i.toString()});case"onStay":return _objectSpread$1({},e,{isCancelling:!1});case"showCancelModal":return _objectSpread$1({},e,{isCancelling:!0,values:s})}},AddSourceWizard=function AddSourceWizard(e){var r=e.successfulMessage,t=e.isOpen,s=e.sourceTypes,o=e.applicationTypes,i=e.disableAppSelection,a=e.hideSourcesButton,n=e.returnButtonTitle,c=e.initialValues,u=e.onClose,p=e.afterSuccess,d=React.useReducer(reducer$1,prepareInitialValues(c)),l=slicedToArray._slicedToArray(d,2),f=l[0],y=f.isErrored,m=f.isFinished,j=f.isSubmitted,S=f.values,T=f.error,g=f.isCancelling,_=f.createdSource,q=objectWithoutProperties._objectWithoutProperties(f,["isErrored","isFinished","isSubmitted","values","error","isCancelling","createdSource"]),b=l[1],P=function onSubmit(e,r){return b({type:"prepareSubmitState",values:e,sourceTypes:r}),createSource.doCreateSource(e,r,constants.timeoutedApps(o)).then((function(e){p&&p(e),b({type:"setSubmitted",data:e})})).catch((function(e){b({type:"setErrored",error:e})}))};return t?j?React__default.createElement(FinalWizard,{afterSubmit:function afterSubmit(){u(void 0,_),b({type:"reset",initialValues:c})},afterError:function afterError(){return u({})},isFinished:m,isErrored:y,successfulMessage:r,hideSourcesButton:a,returnButtonTitle:n,errorMessage:T,reset:function reset(){return b({type:"reset",initialValues:c})},createdSource:_,tryAgain:function tryAgain(){return P(S,q.sourceTypes)},afterSuccess:p}):React__default.createElement(React__default.Fragment,null,React__default.createElement(CloseModal.default,{isOpen:g,onExit:function onExit(){return u(S)},onStay:function onStay(){return b({type:"onStay"})}}),React__default.createElement(SourceAddModal,{isCancelling:g,values:S,onSubmit:P,onCancel:function onCancelBeforeExit(e){return isEmpty(e)?u({}):b({type:"showCancelModal",values:e})},sourceTypes:s,applicationTypes:o,disableAppSelection:i})):null};AddSourceWizard.propTypes={afterSuccess:PropTypes.func,sourceTypes:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,name:PropTypes.string.isRequired,product_name:PropTypes.string.isRequired,schema:PropTypes.shape({authentication:PropTypes.array,endpoint:PropTypes.object})})),applicationTypes:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,name:PropTypes.string.isRequired,display_name:PropTypes.string.isRequired})),onClose:PropTypes.func.isRequired,isOpen:PropTypes.bool.isRequired,successfulMessage:PropTypes.node,initialValues:PropTypes.shape(defineProperty._defineProperty({},PropTypes.string,PropTypes.oneOf([PropTypes.string,PropTypes.array,PropTypes.number,PropTypes.bool]))),disableAppSelection:PropTypes.bool,hideSourcesButton:PropTypes.bool,returnButtonTitle:PropTypes.node},AddSourceWizard.defaultProps={successfulMessage:React__default.createElement(reactIntl.FormattedMessage,{id:"wizard.successfulMessage",defaultMessage:"Your source was successfully added."}),initialValues:{},returnButtonTitle:React__default.createElement(reactIntl.FormattedMessage,{id:"wizard.goBackToSources",defaultMessage:"Go back to Sources"})};var AddSourceButton=function AddSourceButton(e){var r=React.useState(!1),t=slicedToArray._slicedToArray(r,2),s=t[0],o=t[1];return(React__default.createElement(React__default.Fragment,null,React__default.createElement(Button_js.Button,{variant:"primary",onClick:function onClick(){return o(!0)}},stringConstants.WIZARD_TITLE()),React__default.createElement(AddSourceWizard,sourceFormRenderer._extends({isOpen:s,onClose:function onClose(){return o(!1)}},e))))};exports.AddSourceButton=AddSourceButton,exports.AddSourceWizard=AddSourceWizard;


/***/ }),

/***/ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/createSource.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/createSource.js ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(/*! ./_commonjsHelpers-32c5d30b.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/_commonjsHelpers-32c5d30b.js"),__webpack_require__(/*! ./objectWithoutProperties-9e2b4e81.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/objectWithoutProperties-9e2b4e81.js");var slicedToArray=__webpack_require__(/*! ./slicedToArray-a77d6bb6.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/slicedToArray-a77d6bb6.js"),defineProperty=__webpack_require__(/*! ./defineProperty-cf06dcaa.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/defineProperty-cf06dcaa.js");__webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js"),__webpack_require__(/*! @redhat-cloud-services/frontend-components-utilities/files/cjs/interceptors */ "./node_modules/@redhat-cloud-services/frontend-components-utilities/files/cjs/interceptors.js"),__webpack_require__(/*! ./constants.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/constants.js");var index=__webpack_require__(/*! ./index-1eff31c6.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/index-1eff31c6.js"),asyncToGenerator=__webpack_require__(/*! ./asyncToGenerator-a32dc547.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/asyncToGenerator-a32dc547.js"),handleError=__webpack_require__(/*! ./handleError.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/handleError.js"),costManagementAuthentication=__webpack_require__(/*! ./costManagementAuthentication.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/costManagementAuthentication.js"),getApplicationStatus=__webpack_require__(/*! ./getApplicationStatus.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/getApplicationStatus.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty._defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var parseUrl=function parseUrl(e){if(!e)return{};try{var r=new URL(e);return{scheme:r.protocol.replace(/:$/,""),host:r.hostname,port:r.port,path:r.pathname}}catch(e){return console.log(e),{}}},urlOrHost=function urlOrHost(e){return e.url?parseUrl(e.url):e},handleErrorWrapper=function handleErrorWrapper(e){return function(){var r=asyncToGenerator._asyncToGenerator(asyncToGenerator._regeneratorRuntime.mark((function _callee(r){return asyncToGenerator._regeneratorRuntime.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,handleError.handleError(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee)})));return function(e){return r.apply(this,arguments)}}()},doCreateSource=function(){var e=asyncToGenerator._asyncToGenerator(asyncToGenerator._regeneratorRuntime.mark((function _callee2(e,r){var t,n,o,i,a,c,s,p,u,l,d,h,y,v,f,_,b,j,g,m,A,S,x,O,P,w,E,T,q,G=arguments;return asyncToGenerator._regeneratorRuntime.wrap((function _callee2$(k){for(;;)switch(k.prev=k.next){case 0:return t=G.length>2&&void 0!==G[2]?G[2]:[],k.prev=1,a=r.find((function(r){return r.name===e.source_type})).id,k.next=5,index.getSourcesApi().createSource(_objectSpread({},e.source,{source_type_id:a}));case 5:return n=k.sent,c=[],e.endpoint?(s=urlOrHost(e),p=s.scheme,u=s.host,l=s.port,d=s.path,h=parseInt(l,10),y=_objectSpread({},e.endpoint,{default:!0,source_id:n.id,scheme:p,host:u,port:isNaN(h)?void 0:h,path:d}),c.push(index.getSourcesApi().createEndpoint(y))):c.push(Promise.resolve(void 0)),e.application&&e.application.application_type_id?(v=_objectSpread({},e.application,{source_id:n.id}),c.push(index.getSourcesApi().createApplication(v))):c.push(Promise.resolve(void 0)),k.next=11,Promise.all(c);case 11:if(f=k.sent,_=slicedToArray._slicedToArray(f,2),b=_[0],j=_[1],!(b||e.authentication&&(null===(o=j)||void 0===o?void 0:o.id))){k.next=20;break}return x=_objectSpread({},e.authentication,{resource_id:(null===(m=b)||void 0===m?void 0:m.id)||(null===(A=j)||void 0===A?void 0:A.id),resource_type:(null===(S=b)||void 0===S?void 0:S.id)?"Endpoint":"Application"}),k.next=19,index.getSourcesApi().createAuthentication(x);case 19:g=k.sent;case 20:return O=[],e.credentials||e.billing_source?(P=e.credentials,w=e.billing_source,E={},E=P?{authentication:{credentials:P}}:{},E=w?_objectSpread({},E,{billing_source:w}):E,O.push(costManagementAuthentication.patchSource(_objectSpread({id:n.id},E)))):c.push(Promise.resolve(void 0)),g&&j?(T={application_id:j.id,authentication_id:g.id},O.push(index.getSourcesApi().createAuthApp(T))):c.push(Promise.resolve(void 0)),k.next=25,Promise.all(O);case 25:if((null===(i=n)||void 0===i?void 0:i.id)&&index.getSourcesApi().checkAvailabilitySource(n.id),!j){k.next=31;break}return q=t.includes(j.application_type_id)?1e4:0,k.next=30,getApplicationStatus.checkAppAvailability(j.id,q);case 30:j=k.sent;case 31:if(!b){k.next=35;break}return k.next=34,getApplicationStatus.checkAppAvailability(b.id,void 0,void 0,"getEndpoint");case 34:b=k.sent;case 35:return k.abrupt("return",_objectSpread({},n,{endpoint:[b],applications:[j]}));case 38:return k.prev=38,k.t0=k.catch(1),k.next=42,handleError.handleError(k.t0,n?n.id:void 0);case 42:throw k.sent;case 44:case"end":return k.stop()}}),_callee2,null,[[1,38]])})));return function doCreateSource(r,t){return e.apply(this,arguments)}}();exports.doCreateSource=doCreateSource,exports.handleErrorWrapper=handleErrorWrapper,exports.parseUrl=parseUrl,exports.urlOrHost=urlOrHost;


/***/ }),

/***/ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/filterTypes.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/filterTypes.js ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(/*! react */ "./node_modules/react/index.js"),__webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.js");var stringConstants=__webpack_require__(/*! ./stringConstants-06af2ce2.js */ "./node_modules/@redhat-cloud-services/frontend-components-sources/cjs/stringConstants-06af2ce2.js"),filterTypes=function filterTypes(e){var t,r;return(null===(t=e.schema)||void 0===t?void 0:t.authentication)&&(null===(r=e.schema)||void 0===r?void 0:r.endpoint)},filterVendorTypes=function filterVendorTypes(e){var t=e.vendor;return stringConstants.getActiveVendor()===stringConstants.CLOUD_VENDOR?t!==stringConstants.REDHAT_VENDOR:t===stringConstants.REDHAT_VENDOR};exports.default=filterTypes,exports.filterVendorTypes=filterVendorTypes;


/***/ })

}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map