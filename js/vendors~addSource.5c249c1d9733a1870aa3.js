(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{432:function(e,t,r){"use strict";var n=r(384).createCommonjsModule((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new A(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=T(i,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?f:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function h(){}function y(){}function g(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(j([])));w&&w!==r&&n.call(w,o)&&(v=w);var E=g.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,s){var c=u(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=u(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:x}}function x(){return{value:t,done:!0}}return y.prototype=E.constructor=g,g.constructor=y,g[s]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(_.prototype),_.prototype[i]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new _(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(E),E[s]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function a(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var o=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)}))}};t._asyncToGenerator=o,t._regeneratorRuntime=n},433:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(0)),o=n(r(9)),i=r(98),s=r(366),c=r(173),u=n(r(382)),l=function(e){var t=e.validating,r=i.useIntl();return a.createElement(s.FormHelperText,{isHidden:!t},a.createElement(c.Spinner,{size:"md",className:"pf-u-mr-md"}),r.formatMessage({id:"wizard.validating",defaultMessage:"Validating"}))};l.propTypes={validating:o.bool.isRequired};t.ValidatingSpinner=l,t.default=function(e,t){var r=t.meta;return r.validating?{helperText:a.createElement(u,null,(function(e){var t=e.validating;return a.createElement(l,{validating:t})}))}:r.valid?{validated:"success",FormGroupProps:{validated:"success"}}:{}}},513:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(384),r(370);var a=r(375);r(376);var o=r(0),i=n(o),s=n(r(9)),c=r(98),u=n(r(359)),l=n(r(361)),d=r(385),p=r(50);r(377),r(378),r(363),r(366),r(106),r(107);var f=r(28),m=r(387);r(388);var h=n(r(360));r(372),r(367);var y=r(371),g=r(403),v=r(432),b=n(r(475)),w=r(419);r(173),r(382);var E=r(433),S=function(e){var t=e.name,r=h();return o.useEffect((function(){return setTimeout((function(){return r.change(t,"1")})),function(){return r.change(t,"")}}),[]),null};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){a._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}S.propTypes={name:s.string.isRequired};var O,M=(O=v._asyncToGenerator(v._regeneratorRuntime.mark((function e(t){var r,n,a,o=arguments;return v._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2?o[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,y.findSource(t);case 7:a=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(w.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!a.data.sources.find((function(e){return e.id!==r}))){e.next=16;break}throw n.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return O.apply(this,arguments)}),A=!0,j=function(e){return A=e},x=function(){return A},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,r)}(M),R=function(e){return x()?(j(!1),function(t,r){return t?M(t,r,e):void 0}):P},C=function(e){return d._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},k=function(e){return[{label:i.createElement(c.FormattedMessage,{id:"wizard.None",defaultMessage:"None"}),key:"none"}].concat(d._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},F=function(e){return function(t,r){if(!t.value)return t;var n=r.getState().values.source_type,a=e.find((function(e){return e.display_name===t.label})),o=!n||a.supported_source_types.includes(n);return T({},t,{isDisabled:!o})}},L=function(e,t){return function(r,n){var a=n.getState().values.application?n.getState().values.application.application_type_id:void 0,o=e.find((function(e){return e.id===a})),i=!o||o.supported_source_types.includes(t.find((function(e){return e.product_name===r.label})).name);return T({},r,{isDisabled:!i})}},D=function(e){return function(t){var r=e.find((function(e){return e.name===t}));return r&&r.icon_url?function(){return i.createElement("img",{src:r.icon_url,alt:r.product_name,className:"ins-c-sources__wizard--icon"})}:null}},z=function(e){var t=e.values,r=t.application,n=t.source_type,a=r&&r.application_type_id;return a?"".concat(n,"-").concat(a):n},B=function(e,t,r,n){return{title:i.createElement(c.FormattedMessage,{id:"wizard.ChooseApplicationAndSourceType",defaultMessage:"Choose application and source type"}),name:"types_step",nextStep:z,fields:[{component:"enhanced-select",name:"application.application_type_id",label:i.createElement(c.FormattedMessage,{id:"wizard.ASelectYourApplication",defaultMessage:"A. Select your application"}),options:k(t),mutator:F(t),description:i.createElement(c.FormattedMessage,{id:"wizard.SelectingAnApplicationWillLimitTheAvailableSourceTypesYouCanAssignAnApplicationToYourSourceNowOrAfterAddingYourSource",defaultMessage:"Selecting an application will limit the available source types. You can assign an application to your source now or after adding your source."}),isDisabled:r,placeholder:n.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"})},{component:"card-select",name:"source_type",isRequired:!0,label:i.createElement(c.FormattedMessage,{id:"wizard.BSelectYourSourceType",defaultMessage:"B. Select your source type"}),iconMapper:D(e),validate:[{type:l.REQUIRED}],options:C(e),mutator:L(t,e)},{component:"description",name:"fixasyncvalidation",Content:S}]}},I=function(){return i.createElement(p.TextContent,{key:"step1"},i.createElement(f.Text,{component:f.TextVariants.p},i.createElement(c.FormattedMessage,{id:"wizard.ToImportDataForAnApplicationYouNeedToConnectToADataSourceEnterANameThenProceedToSelectYourApplicationAndSourceType",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},N=function(e){return{title:i.createElement(c.FormattedMessage,{id:"wizard.EnterSourceName",defaultMessage:"Enter source name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:I},{component:u.TEXT_FIELD,name:"source.name",type:"text",label:i.createElement(c.FormattedMessage,{id:"wizard.Name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return R(e)(t,void 0,e)},{type:l.REQUIRED}],resolveProps:E.default}]}},q=function(){return i.createElement(p.TextContent,null,i.createElement(f.Text,{component:f.TextVariants.p},i.createElement(c.FormattedMessage,{id:"wizard.ReviewTheInformationBelowAndClickAddToAddYourSourceUseTheBackButtonToMakeChanges",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},V=function(e,t){return{fields:[{component:"description",name:"description-summary",Content:q},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:i.createElement(c.FormattedMessage,{id:"wizard.ReviewDetails",defaultMessage:"Review details"})}};t.NameDescription=I,t.SummaryDescription=q,t.appMutator=F,t.asyncValidator=M,t.asyncValidatorDebounced=P,t.asyncValidatorDebouncedWrapper=R,t.default=function(e,t,r,n,a){return j(!0),{fields:[{component:u.WIZARD,name:"wizard",title:m.WIZARD_TITLE,inModal:!0,description:m.WIZARD_DESCRIPTION,buttonLabels:{submit:i.createElement(c.FormattedMessage,{id:"sources.addButton",defaultMessage:"Add"}),back:i.createElement(c.FormattedMessage,{id:"wizard.Back",defaultMessage:"Back"}),cancel:i.createElement(c.FormattedMessage,{id:"wizard.Cancel",defaultMessage:"Cancel"}),next:i.createElement(c.FormattedMessage,{id:"wizard.Next",defaultMessage:"Next"})},container:n,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[N(a),B(e,t,r,a)].concat(d._toConsumableArray(g.schemaBuilder(e,t)),[V(e,t)])}]}},t.getFirstValidated=x,t.iconMapper=D,t.nextStep=z,t.setFirstValidated=j,t.sourceTypeMutator=L},799:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(384),r(370);var n=r(375);r(376),r(363),r(372),r(367);var a=r(371),o=r(432),i=r(419),s=r(470),c=r(520);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){n._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,p=function(e){if(!e)return{};try{var t=new URL(e);return{scheme:t.protocol.replace(/:$/,""),host:t.hostname,port:t.port,path:t.pathname}}catch(e){return console.log(e),{}}},f=function(e){return e.url?p(e.url):e},m=(d=o._asyncToGenerator(o._regeneratorRuntime.mark((function e(t,r){var u,d,p,m,h,y,g,v,b,w,E,S,_,T,O,M,A,j,x,P,R,C,k,F,L=arguments;return o._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=L.length>2&&void 0!==L[2]?L[2]:[],e.prev=1,p=r.find((function(e){return e.name===t.source_type})).id,e.next=5,a.getSourcesApi().createSource(l({},t.source,{source_type_id:p}));case 5:return d=e.sent,m=[],t.endpoint?(h=f(t),y=h.scheme,g=h.host,v=h.port,b=h.path,w=parseInt(v,10),E=l({},t.endpoint,{default:!0,source_id:d.id,scheme:y,host:g,port:isNaN(w)?void 0:w,path:b}),m.push(a.getSourcesApi().createEndpoint(E))):m.push(Promise.resolve(void 0)),t.application&&t.application.application_type_id?(S=l({},t.application,{source_id:d.id}),m.push(a.getSourcesApi().createApplication(S))):m.push(Promise.resolve(void 0)),e.next=11,Promise.all(m);case 11:if(_=e.sent,T=n._slicedToArray(_,2),O=T[0],M=T[1],!O){e.next=20;break}return j=l({},t.authentication,{resource_id:O.id,resource_type:"Endpoint"}),e.next=19,a.getSourcesApi().createAuthentication(j);case 19:A=e.sent;case 20:return x=[],t.credentials||t.billing_source?(P=t.credentials,R=t.billing_source,C={},C=P?{authentication:{credentials:P}}:{},C=R?l({},C,{billing_source:R}):C,x.push(s.patchSource(l({id:d.id},C)))):m.push(Promise.resolve(void 0)),A&&M?(k={application_id:M.id,authentication_id:A.id},x.push(a.getSourcesApi().createAuthApp(k))):m.push(Promise.resolve(void 0)),e.next=25,Promise.all(x);case 25:if(!M){e.next=30;break}return F=u.includes(M.application_type_id)?1e4:0,e.next=29,c.checkAppAvailability(M.id,F);case 29:M=e.sent;case 30:return e.abrupt("return",l({},d,{endpoint:[O],applications:[M]}));case 33:return e.prev=33,e.t0=e.catch(1),e.next=37,i.handleError(e.t0,d?d.id:void 0);case 37:throw e.sent;case 39:case"end":return e.stop()}}),e,null,[[1,33]])}))),function(e,t){return d.apply(this,arguments)});t.doCreateSource=m,t.handleErrorWrapper=function(e){return t=o._asyncToGenerator(o._regeneratorRuntime.mark((function t(r){return o._regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.handleError(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t},t.parseUrl=p,t.urlOrHost=f},805:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(384);var a=r(508),o=r(370),i=r(375);r(376);var s=r(0),c=n(s),u=r(99),l=n(r(9)),d=n(r(581)),p=r(98),f=r(577);r(413),r(359),r(361),r(401),r(391),r(415),r(385),r(50),r(377),r(378),r(363),r(366),r(106),r(107);var m=r(28),h=r(387);r(388),r(360),r(372);var y=r(367),g=r(371);r(403),r(449),r(178),r(179),r(365),r(368),r(369),r(168),r(456),r(364),r(455),r(390),r(457),r(458),r(432),r(475);var v=r(513);r(419),r(173),r(382),r(433),r(397),r(434),r(398),r(100);var b=r(572),w=r(570),E=r(72);r(405),r(79);var S=r(574);r(185);var _=r(573);r(488);var T=r(575);r(470),r(520);var O=r(799);r(420),r(74);var M=r(571);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j={schema:{},sourceTypes:[],isLoading:!0},x=function(e,t){var r=t.type,n=t.sourceTypes,a=t.applicationTypes,o=t.container,s=t.disableAppSelection,c=t.intl;switch(r){case"loaded":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){i._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{schema:v.default(n.filter((function(e){return e.schema})),a.filter(w.default),s,o,c),isLoading:!1,sourceTypes:n})}},P=function(e){var t=e.sourceTypes,r=e.applicationTypes,n=e.disableAppSelection,o=e.isCancelling,u=e.onCancel,l=e.values,d=e.onSubmit,m=s.useReducer(x,j),y=i._slicedToArray(m,2),v=y[0],w=v.schema,E=v.sourceTypes,S=v.isLoading,_=y[1],T=s.useRef(!1),O=s.useRef(document.createElement("div")),M=p.useIntl();return s.useEffect((function(){T.current=!0;var e=[];return t||e.push(g.doLoadSourceTypes()),r||e.push(g.doLoadApplicationTypes()),Promise.all(e).then((function(e){var a=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),o=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));T.current&&_({type:"loaded",sourceTypes:t||a.sourceTypes,applicationTypes:r||o.applicationTypes,disableAppSelection:n,container:O.current,intl:M})})),function(){T.current=!1}}),[]),s.useEffect((function(){O.current.hidden=o}),[o]),S?c.createElement(f.Wizard,{isOpen:!0,onClose:u,title:h.WIZARD_TITLE,description:h.WIZARD_DESCRIPTION,steps:[{name:"Loading",component:c.createElement(b.default,{onClose:function(){return u()}}),isFinishedStep:!0}]}):c.createElement(a.SourcesFormRenderer,{initialValues:l,schema:w,onSubmit:function(e){return d(e,E)},onCancel:u})};P.propTypes={onCancel:l.func.isRequired,onSubmit:l.func.isRequired,sourceTypes:l.arrayOf(l.shape({id:l.string.isRequired,name:l.string.isRequired,product_name:l.string.isRequired,schema:l.shape({authentication:l.array,endpoint:l.object})})),applicationTypes:l.arrayOf(l.shape({id:l.string.isRequired,name:l.string.isRequired,display_name:l.string.isRequired})),values:l.object,disableAppSelection:l.bool,isCancelling:l.bool},P.defaultProps={values:{},disableAppSelection:!1};var R=function(e){var t,r=e.afterSubmit,n=e.afterError,a=e.isFinished,o=e.isErrored,l=e.successfulMessage,d=e.hideSourcesButton,y=e.returnButtonTitle,v=e.reset,w=e.createdSource,O=void 0===w?{}:w,M=e.tryAgain,A=e.afterSuccess,j=s.useState(),x=i._slicedToArray(j,2),P=x[0],R=x[1],C=s.useState(),k=i._slicedToArray(C,2),F=k[0],L=k[1],D=p.useIntl();if(F)t=c.createElement(S.default,{onClose:r,title:D.formatMessage({id:"wizard.removeSourceSuccessTitle",defaultMessage:"Removing successful"}),successfulMessage:D.formatMessage({id:"wizard.removeSourceSuccessDescription",defaultMessage:"Source was successfully removed."}),hideSourcesButton:d,returnButtonTitle:y,secondaryActions:c.createElement(u.Button,{variant:"link",onClick:v},c.createElement(p.FormattedMessage,{id:"wizard.addAnotherSource",defaultMessage:"Add another source"}))});else if(P)t=c.createElement(b.default,{customText:c.createElement(p.FormattedMessage,{id:"wizard.removingSource",defaultMessage:"Removing source"})});else if(a){var z,B;if("available"===(null===(z=O.applications[0])||void 0===z?void 0:z.availability_status))t=c.createElement(S.default,{onClose:r,successfulMessage:l,hideSourcesButton:d,returnButtonTitle:y,secondaryActions:c.createElement(u.Button,{variant:"link",onClick:v},c.createElement(p.FormattedMessage,{id:"wizard.addAnotherSource",defaultMessage:"Add another source"}))});else if("unavailable"===(null===(B=O.applications[0])||void 0===B?void 0:B.availability_status)){var I;t=c.createElement(_.default,{onClose:r,secondaryActions:c.createElement(u.Button,{variant:"link",onClick:function(){return R(!0),g.getSourcesApi().removeSource(O.id).then((function(){A&&A(),L(!0)})).catch((function(){return R(!1)}))}},D.formatMessage({id:"wizard.removeSource",defaultMessage:"Remove source"})),Component:function(){return c.createElement(E.Link,{to:"/sources/edit/".concat(O.id)},c.createElement(u.Button,{variant:"primary",className:"pf-u-mt-xl"},D.formatMessage({id:"wizard.editSource",defaultMessage:"Edit source"})))},message:(null===(I=O.applications[0])||void 0===I?void 0:I.availability_status_error)||D.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"}),title:D.formatMessage({id:"wizard.configurationUnsuccessful",defaultMessage:"Configuration unsuccessful"})})}else t=O.applications[0]?c.createElement(T.default,{onClose:r,returnButtonTitle:y,secondaryActions:c.createElement(u.Button,{variant:"link",onClick:v},c.createElement(p.FormattedMessage,{id:"wizard.addAnotherSource",defaultMessage:"Add another source"}))}):c.createElement(S.default,{onClose:r,successfulMessage:l,hideSourcesButton:d,returnButtonTitle:y,secondaryActions:c.createElement(u.Button,{variant:"link",onClick:v},c.createElement(p.FormattedMessage,{id:"wizard.addAnotherSource",defaultMessage:"Add another source"}))})}else t=o?c.createElement(_.default,{onClose:n,primaryAction:M,secondaryActions:c.createElement(m.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},D.formatMessage({id:"wizard.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:c.createElement(p.FormattedMessage,{id:"wizard.retryText",defaultMessage:"Retry"})}):c.createElement(b.default,{customText:c.createElement(p.FormattedMessage,{id:"wizard.loadingText",defaultMessage:"Validating source credentials"}),onClose:n,cancelTitle:D.formatMessage({id:"wizard.close",defaultMessage:"Close"})});return c.createElement(f.Wizard,{isOpen:!0,onClose:a?r:n,title:h.WIZARD_TITLE,description:h.WIZARD_DESCRIPTION,steps:[{name:"Finish",component:t,isFinishedStep:!0}]})};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){i._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}R.propTypes={afterSubmit:l.func.isRequired,afterError:l.func.isRequired,isFinished:l.bool.isRequired,isErrored:l.bool.isRequired,successfulMessage:l.node.isRequired,hideSourcesButton:l.bool,returnButtonTitle:l.node.isRequired,errorMessage:l.node,reset:l.func,createdSource:l.object,tryAgain:l.func,afterSuccess:l.func};var F=function(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0}},L=function(e,t){var r=t.type,n=t.values,a=t.data,o=t.error,i=t.initialValues,s=t.sourceTypes;switch(r){case"reset":return F(i);case"prepareSubmitState":return k({},e,{isFinished:!1,isErrored:!1,error:void 0,isSubmitted:!0,values:n,sourceTypes:s});case"setSubmitted":return k({},e,{isFinished:!0,createdSource:a});case"setErrored":return k({},e,{isErrored:!0,error:o.toString()});case"onStay":return k({},e,{isCancelling:!1});case"showCancelModal":return k({},e,{isCancelling:!0,values:n})}},D=function(e){var t=e.successfulMessage,r=e.isOpen,n=e.sourceTypes,a=e.applicationTypes,u=e.disableAppSelection,l=e.hideSourcesButton,p=e.returnButtonTitle,f=e.initialValues,m=e.onClose,h=e.afterSuccess,g=s.useReducer(L,F(f)),v=i._slicedToArray(g,2),b=v[0],w=b.isErrored,E=b.isFinished,S=b.isSubmitted,_=b.values,T=b.error,A=b.isCancelling,j=b.createdSource,x=o._objectWithoutProperties(b,["isErrored","isFinished","isSubmitted","values","error","isCancelling","createdSource"]),C=v[1],k=function(e,t){return C({type:"prepareSubmitState",values:e,sourceTypes:t}),O.doCreateSource(e,t,y.timeoutedApps(a)).then((function(e){h&&h(e),C({type:"setSubmitted",data:e})})).catch((function(e){C({type:"setErrored",error:e})}))};return r?S?c.createElement(R,{afterSubmit:function(){m(void 0,j),C({type:"reset",initialValues:f})},afterError:function(){return m({})},isFinished:E,isErrored:w,successfulMessage:t,hideSourcesButton:l,returnButtonTitle:p,errorMessage:T,reset:function(){return C({type:"reset",initialValues:f})},createdSource:j,tryAgain:function(){return k(_,x.sourceTypes)},afterSuccess:h}):c.createElement(c.Fragment,null,c.createElement(M.default,{isOpen:A,onExit:function(){return m(_)},onStay:function(){return C({type:"onStay"})}}),c.createElement(P,{isCancelling:A,values:_,onSubmit:k,onCancel:function(e){return d(e)?m({}):C({type:"showCancelModal",values:e})},sourceTypes:n,applicationTypes:a,disableAppSelection:u})):null};D.propTypes={afterSuccess:l.func,sourceTypes:l.arrayOf(l.shape({id:l.string.isRequired,name:l.string.isRequired,product_name:l.string.isRequired,schema:l.shape({authentication:l.array,endpoint:l.object})})),applicationTypes:l.arrayOf(l.shape({id:l.string.isRequired,name:l.string.isRequired,display_name:l.string.isRequired})),onClose:l.func.isRequired,isOpen:l.bool.isRequired,successfulMessage:l.node,initialValues:l.shape(i._defineProperty({},l.string,l.oneOf([l.string,l.array,l.number,l.bool]))),disableAppSelection:l.bool,hideSourcesButton:l.bool,returnButtonTitle:l.node},D.defaultProps={successfulMessage:c.createElement(p.FormattedMessage,{id:"wizard.successfulMessage",defaultMessage:"Your source was successfully added."}),initialValues:{},returnButtonTitle:c.createElement(p.FormattedMessage,{id:"wizard.goBackToSources",defaultMessage:"Go back to Sources"})};t.AddSourceButton=function(e){var t=s.useState(!1),r=i._slicedToArray(t,2),n=r[0],o=r[1];return c.createElement(c.Fragment,null,c.createElement(u.Button,{variant:"primary",onClick:function(){return o(!0)}},h.WIZARD_TITLE),c.createElement(D,a._extends({isOpen:n,onClose:function(){return o(!1)}},e)))},t.AddSourceWizard=D}}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map