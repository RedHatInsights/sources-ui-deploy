(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{513:function(e,t,n){"use strict";var r=n(459).createCommonjsModule((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(e,t,n){var r=u;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw i;return B()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?f:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function h(){}function y(){}function g(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,S=b&&b(b(M([])));S&&S!==n&&r.call(S,i)&&(v=S);var E=g.prototype=h.prototype=Object.create(v);function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e,t){var n;this._invoke=function(a,i){function o(){return new t((function(n,o){!function n(a,i,o,s){var c=l(e[a],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}(a,i,n,o)}))}return n=n?n.then(o,o):o()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function M(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:B}}function B(){return{value:t,done:!0}}return y.prototype=E.constructor=g,g.constructor=y,g[s]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[o]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new w(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(E),E[s]="Generator",E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function a(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var i=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}};t._asyncToGenerator=i,t._regeneratorRuntime=r},596:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(459),n(430),n(441);var a=n(431),i=n(0),o=r(i),s=r(n(13)),c=n(220),l=r(n(422)),u=r(n(421)),d=n(460),p=n(222);n(444),n(445),n(426),n(440),n(461),n(446);var f=n(221),m=n(462);n(463);var h=r(n(420));n(433),n(427);var y=n(432),g=n(471),v=n(513),b=r(n(546)),S=n(493);n(232),n(457);var E=n(492),T=function(e){var t=e.name,n=h();return i.useEffect((function(){return setTimeout((function(){return n.change(t,"1")})),function(){return n.change(t,"")}}),[]),null};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){a._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}T.propTypes={name:s.string.isRequired};var x,O=(x=v._asyncToGenerator(v._regeneratorRuntime.mark((function e(t){var n,r,a,i=arguments;return v._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:void 0,r=i.length>2?i[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,y.findSource(t);case 7:a=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(S.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!a.data.sources.find((function(e){return e.id!==n}))){e.next=16;break}throw r.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return x.apply(this,arguments)}),C=!0,M=function(e){return C=e},B=function(){return C},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,n)}(O),A=function(e){return B()?(M(!1),function(t,n){return t?O(t,n,e):void 0}):k},N=function(e){return d._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},z=function(e,t){return[{label:t.formatMessage({id:"wizard.none",defaultMessage:"None"}),key:"none"}].concat(d._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},P=function(e){return function(t,n){if(!t.value)return t;var r=n.getState().values.source_type,a=e.find((function(e){return e.display_name===t.label})),i=!r||a.supported_source_types.includes(r);return _({},t,{isDisabled:!i})}},j=function(e,t){return function(n,r){var a=r.getState().values.application?r.getState().values.application.application_type_id:void 0,i=e.find((function(e){return e.id===a})),o=!i||i.supported_source_types.includes(t.find((function(e){return e.product_name===n.label})).name);return _({},n,{isDisabled:!o})}},I=function(e){return function(t){var n=e.find((function(e){return e.name===t}));return n&&n.icon_url?function(){return o.createElement("img",{src:n.icon_url,alt:n.product_name,className:"ins-c-sources__wizard--icon"})}:null}},L=function(e){var t=e.values,n=t.application,r=t.source_type,a=n&&n.application_type_id;return a?"".concat(r,"-").concat(a):r},R=function(e,t,n,r){return{title:r.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Application and source type"}),name:"types_step",nextStep:L,fields:[{component:"enhanced-select",name:"application.application_type_id",label:r.formatMessage({id:"wizard.selectYourApplication",defaultMessage:"A. Select application"}),options:z(t,r),mutator:P(t),description:r.formatMessage({id:"wizard.selectAppWarning",defaultMessage:"Selecting an application will limit the available source types. You can attach an application to this source using the dropdown below, or by clicking ‘Manage applications’ after source creation."}),isDisabled:n,placeholder:r.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"})},{component:"card-select",name:"source_type",isRequired:!0,label:r.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"B. Select source type"}),iconMapper:I(e),validate:[{type:u.REQUIRED}],options:N(e),mutator:j(t,e)},{component:"description",name:"fixasyncvalidation",Content:T}]}},F=function(){var e=c.useIntl();return o.createElement(p.TextContent,{key:"step1"},o.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.nameDescription",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},D=function(e){return{title:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:F},{component:l.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return A(e)(t,void 0,e)},{type:u.REQUIRED}],resolveProps:E.default}]}},W=function(){var e=c.useIntl();return o.createElement(p.TextContent,null,o.createElement(f.Text,{component:f.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},q=function(e,t,n){return{fields:[{component:"description",name:"description-summary",Content:W},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:n.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}};t.NameDescription=F,t.SummaryDescription=W,t.appMutator=P,t.asyncValidator=O,t.asyncValidatorDebounced=k,t.asyncValidatorDebouncedWrapper=A,t.default=function(e,t,n,r,a){return M(!0),{fields:[{component:l.WIZARD,name:"wizard",title:m.WIZARD_TITLE,inModal:!0,description:m.WIZARD_DESCRIPTION,buttonLabels:{submit:a.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:a.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:a.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:a.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:r,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[D(a),R(e,t,n,a)].concat(d._toConsumableArray(g.schemaBuilder(e,t)),[q(e,t,a)])}]}},t.getFirstValidated=B,t.iconMapper=I,t.nextStep=L,t.setFirstValidated=M,t.sourceTypeMutator=j},599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TOPOLOGY_INV_NAME="/insights/platform/topological-inventory",t.default=function(e){return"/insights/platform/topological-inventory"!==e.name}},600:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(134),o=r(n(13)),s=n(220),c=n(223),l=n(472),u=r(n(225)),d=function(e){var t=e.onExit,n=e.onStay,r=e.isOpen,o=e.title,d=e.exitTitle,p=e.stayTitle,f=e.description,m=s.useIntl();return a.createElement(l.Modal,{variant:"small",title:o,"aria-label":m.formatMessage({id:"wizard.closeAriaLabel",defaultMessage:"Close add source wizard"}),header:a.createElement(c.Title,{headingLevel:"h1",size:"2xl"},a.createElement(u,{size:"sm",className:"ins-c-source__warning-icon"}),o),isOpen:r,onClose:n,actions:[a.createElement(i.Button,{key:"confirm",variant:"primary",id:"on-exit-button",onClick:t},d),a.createElement(i.Button,{key:"cancel",variant:"link",id:"on-stay-button",onClick:n},p)]},f)};d.propTypes={onExit:o.func.isRequired,onStay:o.func.isRequired,isOpen:o.bool.isRequired,title:o.node,exitTitle:o.node,stayTitle:o.node,description:o.node},d.defaultProps={title:a.createElement(s.FormattedMessage,{id:"wizard.closeTitle",defaultMessage:"Exit source creation?"}),exitTitle:a.createElement(s.FormattedMessage,{id:"wizard.exitText",defaultMessage:"Exit"}),stayTitle:a.createElement(s.FormattedMessage,{id:"wizard.stayText",defaultMessage:"Stay"}),description:a.createElement(s.FormattedMessage,{id:"wizard.closeWarning",defaultMessage:"All inputs will be discarded."})},t.default=d},601:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(0)),i=n(134),o=r(n(13)),s=n(220),c=n(224),l=n(435),u=n(464),d=n(429),p=n(223),f=n(442),m=r(n(230)),h=function(){return insights.chrome.isBeta()?"/beta/settings/sources":"/settings/sources"},y=function(e){var t=e.onClose,n=e.successfulMessage,r=e.hideSourcesButton,o=e.returnButtonTitle,s=e.title,y=e.linkText,g=e.secondaryActions;return a.createElement(c.Bullseye,null,a.createElement(l.EmptyState,{variant:l.EmptyStateVariant.full,className:"pf-u-mt-4xl"},a.createElement(d.EmptyStateIcon,{icon:m,color:"var(--pf-global--success-color--100)",className:"pf-u-mb-0"}),a.createElement(p.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},s),a.createElement(f.EmptyStateBody,{className:"ins-c-sources__wizard--step-text"},n),a.createElement(i.Button,{variant:"primary",onClick:t,className:"pf-u-mt-xl"},o),!r&&a.createElement(u.EmptyStateSecondaryActions,null,a.createElement(i.Button,{variant:"link",component:"a",target:"_blank",rel:"noopener noreferrer",href:h()},y)),g&&a.createElement(u.EmptyStateSecondaryActions,null,g)))};y.propTypes={onClose:o.func.isRequired,successfulMessage:o.node.isRequired,hideSourcesButton:o.bool,returnButtonTitle:o.node.isRequired,title:o.node,linkText:o.node,secondaryActions:o.node},y.defaultProps={title:a.createElement(s.FormattedMessage,{id:"wizard.succConfiguration",defaultMessage:"Configuration successful"}),linkText:a.createElement(s.FormattedMessage,{id:"wizard.toSources",defaultMessage:"Take me to sources"})},t.FinishedStep=y,t.computeSourcesUrl=h},602:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(134),o=r(n(13)),s=n(220),c=n(224),l=n(435),u=n(464),d=n(429),p=n(223),f=n(442),m=r(n(506)),h=function(e){var t=e.onClose,n=e.returnButtonTitle,r=e.title,o=e.secondaryActions,h=s.useIntl();return a.createElement(c.Bullseye,null,a.createElement(l.EmptyState,{variant:l.EmptyStateVariant.full,className:"pf-u-mt-4xl"},a.createElement(d.EmptyStateIcon,{icon:m,color:"var(--pf-global--Color--200)",className:"pf-u-mb-0"}),a.createElement(p.Title,{headingLevel:"h2",size:"xl",className:"pf-u-mt-xl"},r),a.createElement(f.EmptyStateBody,null,h.formatMessage({id:"wizard.uncompleteConfigurationDescription",defaultMessage:"We are still working to confirm credentials and app settings.{newLine}To track progress, check the Status column in the Sources table."},{newLine:a.createElement("br",{key:"br"})})),a.createElement(i.Button,{variant:"primary",onClick:t,className:"pf-u-mt-xl"},n),o&&a.createElement(u.EmptyStateSecondaryActions,null,o)))};h.propTypes={onClose:o.func.isRequired,returnButtonTitle:o.node.isRequired,title:o.node,secondaryActions:o.node},h.defaultProps={title:a.createElement(s.FormattedMessage,{id:"wizard.uncompleteConfigurationTitle",defaultMessage:"Configuration not yet complete"})},t.default=h},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t,n,r,a,i,o,s,c,l=null===(t=e.applications)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.availability_status,u=null===(r=e.endpoint)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.availability_status;return[l,u].includes("unavailable")?"unavailable":"available"===l&&!(null===(i=e.endpoint)||void 0===i?void 0:i[0])||"available"===u&&!(null===(o=e.applications)||void 0===o?void 0:o[0])||"available"===l&&"available"===u?"available":(null===(s=e.applications)||void 0===s?void 0:s[0])||(null===(c=e.endpoint)||void 0===c?void 0:c[0])?"timeout":"finished"};t.computeSourceStatus=r,t.default=r},604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wizard=void 0;const r=n(2),a=r.__importStar(n(0)),i=n(62),o=n(5),s=r.__importDefault(n(454)),c=n(494),l=n(605),u=n(606),d=n(531),p=n(534),f=n(607),m=n(532);class h extends a.Component{constructor(e){super(e),this.handleKeyClicks=e=>{e.keyCode===i.KEY_CODES.ESCAPE_KEY&&(this.state.isNavOpen?this.setState({isNavOpen:!this.state.isNavOpen}):this.props.isOpen&&this.props.onClose())},this.onNext=()=>{const{onNext:e,onClose:t,onSave:n}=this.props,{currentStep:r}=this.state,a=this.getFlattenedSteps();if(r>=a.length)return n?n():t();{const t=r+1;this.setState({currentStep:t});const{id:n,name:i}=a[r-1],{id:o,name:s}=a[t-1];return e&&e({id:o,name:s},{prevId:n,prevName:i})}},this.onBack=()=>{const{onBack:e}=this.props,{currentStep:t}=this.state,n=this.getFlattenedSteps();if(!(n.length<t)){const r=t-1<=0?0:t-1;this.setState({currentStep:r});const{id:a,name:i}=n[r],{id:o,name:s}=n[r-1];return e&&e({id:o,name:s},{prevId:a,prevName:i})}{const e=n.length;this.setState({currentStep:e})}},this.goToStep=e=>{const{onGoToStep:t}=this.props,{currentStep:n}=this.state,r=this.getFlattenedSteps(),a=r.length;e<1?e=1:e>a&&(e=a),this.setState({currentStep:e,isNavOpen:!1});const{id:i,name:o}=r[n-1],{id:s,name:c}=r[e-1];return t&&t({id:s,name:c},{prevId:i,prevName:o})},this.goToStepById=e=>{const t=this.getFlattenedSteps();let n;for(let r=0;r<t.length;r++)if(t[r].id===e){n=r+1;break}n&&this.setState({currentStep:n})},this.goToStepByName=e=>{const t=this.getFlattenedSteps();let n;for(let r=0;r<t.length;r++)if(t[r].name===e){n=r+1;break}n&&this.setState({currentStep:n})},this.getFlattenedSteps=()=>{const{steps:e}=this.props,t=[];for(const n of e)if(n.steps)for(const e of n.steps)t.push(e);else t.push(n);return t},this.getFlattenedStepsIndex=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].name===t)return n+1;return 0},this.initSteps=e=>{for(let t=0;t<e.length;t++){if(e[t].steps)for(let n=0;n<e[t].steps.length;n++)e[t].steps[n]=Object.assign({canJumpTo:!0},e[t].steps[n]);e[t]=Object.assign({canJumpTo:!0},e[t])}return e},this.getElement=e=>"function"==typeof e?e():e||document.body;const t=h.currentId++;this.titleId=e.titleId||"pf-wizard-title-"+t,this.descriptionId=e.descriptionId||"pf-wizard-description-"+t,this.state={currentStep:this.props.startAtStep&&Number.isInteger(this.props.startAtStep)?this.props.startAtStep:1,isNavOpen:!1}}componentDidMount(){const e="undefined"!=typeof document?document.body:null;e&&e.addEventListener("keydown",this.handleKeyClicks,!1)}componentWillUnmount(){const e="undefined"!=typeof document&&document.body||null;e&&e.removeEventListener("keydown",this.handleKeyClicks,!1)}render(){const e=this.props,{width:t,height:n,title:i,description:h,onClose:y,onSave:g,onBack:v,onNext:b,onGoToStep:S,className:E,steps:T,startAtStep:w,nextButtonText:_="Next",backButtonText:x="Back",cancelButtonText:O="Cancel",hideClose:C,closeButtonAriaLabel:M="Close",navAriaLabel:B,navAriaLabelledBy:k,mainAriaLabel:A,mainAriaLabelledBy:N,hasNoBodyPadding:z,footer:P,appendTo:j,isOpen:I,titleId:L,descriptionId:R}=e,F=r.__rest(e,["width","height","title","description","onClose","onSave","onBack","onNext","onGoToStep","className","steps","startAtStep","nextButtonText","backButtonText","cancelButtonText","hideClose","closeButtonAriaLabel","navAriaLabel","navAriaLabelledBy","mainAriaLabel","mainAriaLabelledBy","hasNoBodyPadding","footer","appendTo","isOpen","titleId","descriptionId"]),{currentStep:D}=this.state,W=this.getFlattenedSteps(),q=W.length<D?W.length:D,V=W[q-1],G=this.initSteps(T),U=V===W[0],Y=!V||void 0===V.enableNext||V.enableNext,Z={goToStepById:this.goToStepById,goToStepByName:this.goToStepByName,onNext:this.onNext,onBack:this.onBack,onClose:y,activeStep:V},J=a.createElement(f.WizardContextProvider,{value:Z},a.createElement("div",Object.assign({},F,{className:o.css(s.default.wizard,V&&V.isFinishedStep&&"pf-m-finished",E)},n&&{style:{height:n}}),i&&a.createElement(m.WizardHeader,{titleId:this.titleId,descriptionId:this.descriptionId,onClose:y,title:i,description:h,closeButtonAriaLabel:M,hideClose:C}),a.createElement(u.WizardToggle,{mainAriaLabel:A,isInPage:void 0===I,mainAriaLabelledBy:(i||N)&&(N||this.titleId),isNavOpen:this.state.isNavOpen,onNavToggle:e=>this.setState({isNavOpen:e}),nav:e=>{const t={isOpen:e,"aria-label":B,"aria-labelledby":(i||k)&&(k||this.titleId)};return a.createElement(d.WizardNav,Object.assign({},t),G.map((e,n)=>{if(e.isFinishedStep)return;let r,i;if(e.steps){let o=!1,s=!1;for(const t of e.steps)V.name===t.name&&(o=!0),t.canJumpTo&&(s=!0);return i=this.getFlattenedStepsIndex(W,e.steps[0].name),a.createElement(p.WizardNavItem,{key:n,content:e.name,isCurrent:o,isDisabled:!s,step:i,onNavItemClick:this.goToStep},a.createElement(d.WizardNav,Object.assign({},t,{returnList:!0}),e.steps.map((e,t)=>{if(!e.isFinishedStep)return i=this.getFlattenedStepsIndex(W,e.name),r=e.canJumpTo,a.createElement(p.WizardNavItem,{key:"child_"+t,content:e.name,isCurrent:V.name===e.name,isDisabled:!r,step:i,onNavItemClick:this.goToStep})})))}return i=this.getFlattenedStepsIndex(W,e.name),r=e.canJumpTo,a.createElement(p.WizardNavItem,Object.assign({},e.stepNavItemProps,{key:n,content:e.name,isCurrent:V.name===e.name,isDisabled:!r,step:i,onNavItemClick:this.goToStep}))}))},steps:T,activeStep:V,hasNoBodyPadding:z},P||a.createElement(l.WizardFooterInternal,{onNext:this.onNext,onBack:this.onBack,onClose:y,isValid:Y,firstStep:U,activeStep:V,nextButtonText:V&&V.nextButtonText||_,backButtonText:x,cancelButtonText:O}))));return void 0!==I?a.createElement(c.Modal,{isOpen:I,variant:c.ModalVariant.large,"aria-labelledby":this.titleId,"aria-describedby":this.descriptionId,showClose:!1,hasNoBodyWrapper:!0},J):J}}t.Wizard=h,h.displayName="Wizard",h.currentId=0,h.defaultProps={title:null,description:"",className:"",startAtStep:1,nextButtonText:"Next",backButtonText:"Back",cancelButtonText:"Cancel",hideClose:!1,closeButtonAriaLabel:"Close",navAriaLabel:null,navAriaLabelledBy:null,mainAriaLabel:null,mainAriaLabelledBy:null,hasNoBodyPadding:!1,onBack:null,onNext:null,onGoToStep:null,width:null,height:null,footer:null,onClose:()=>{},appendTo:null,isOpen:void 0}},605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WizardFooterInternal=void 0;const r=n(2),a=r.__importStar(n(0)),i=n(5),o=r.__importDefault(n(454)),s=n(136);t.WizardFooterInternal=({onNext:e,onBack:t,onClose:n,isValid:r,firstStep:c,activeStep:l,nextButtonText:u,backButtonText:d,cancelButtonText:p})=>a.createElement("footer",{className:i.css(o.default.wizardFooter)},a.createElement(s.Button,{variant:s.ButtonVariant.primary,type:"submit",onClick:e,isDisabled:!r},u),!l.hideBackButton&&a.createElement(s.Button,{variant:s.ButtonVariant.secondary,onClick:t,className:i.css(c&&"pf-m-disabled")},d),!l.hideCancelButton&&a.createElement(s.Button,{variant:s.ButtonVariant.link,onClick:n},p)),t.WizardFooterInternal.displayName="WizardFooterInternal"},606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WizardToggle=void 0;const r=n(2),a=r.__importStar(n(0)),i=n(5),o=r.__importDefault(n(454)),s=r.__importDefault(n(227)),c=r.__importDefault(n(226)),l=n(533);t.WizardToggle=({isNavOpen:e,onNavToggle:t,nav:n,steps:r,activeStep:u,children:d,hasNoBodyPadding:p=!1,"aria-label":f="Wizard Toggle",mainAriaLabelledBy:m=null,mainAriaLabel:h=null,isInPage:y=!0})=>{let g,v,b;for(let e=0;e<r.length;e++){if(u.id&&r[e].id===u.id||r[e].name===u.name){g=e+1,v=r[e].name;break}if(r[e].steps)for(const t of r[e].steps)if(u.id&&t.id===u.id||t.name===u.name){g=e+1,v=r[e].name,b=t.name;break}}return a.createElement(a.Fragment,null,a.createElement("button",{onClick:()=>t(!e),className:i.css(o.default.wizardToggle,e&&"pf-m-expanded"),"aria-label":f,"aria-expanded":e},a.createElement("ol",{className:i.css(o.default.wizardToggleList)},a.createElement("li",{className:i.css(o.default.wizardToggleListItem)},a.createElement("span",{className:i.css(o.default.wizardToggleNum)},g)," ",v,b&&a.createElement(s.default,{className:i.css(o.default.wizardToggleSeparator),"aria-hidden":"true"})),b&&a.createElement("li",{className:i.css(o.default.wizardToggleListItem)},b)),a.createElement("span",{className:i.css(o.default.wizardToggleIcon)},a.createElement(c.default,{"aria-hidden":"true"}))),a.createElement("div",{className:i.css(o.default.wizardOuterWrap)},a.createElement("div",{className:i.css(o.default.wizardInnerWrap)},n(e),a.createElement(l.WizardBody,{mainComponent:y?"div":"main","aria-label":h,"aria-labelledby":m,hasNoBodyPadding:p},u.component)),d))},t.WizardToggle.displayName="WizardToggle"},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WizardContextConsumer=t.WizardContextProvider=t.WizardContext=void 0;const r=n(2).__importStar(n(0));t.WizardContext=r.createContext({goToStepById:()=>null,goToStepByName:()=>null,onNext:()=>null,onBack:()=>null,onClose:()=>null,activeStep:{name:null}}),t.WizardContextProvider=t.WizardContext.Provider,t.WizardContextConsumer=t.WizardContext.Consumer},608:function(e,t,n){var r=n(573),a=n(479),i=n(521),o=n(449),s=n(477),c=n(478),l=n(502),u=n(503),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||i(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},954:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,n;return(null===(t=e.schema)||void 0===t?void 0:t.authentication)&&(null===(n=e.schema)||void 0===n?void 0:n.endpoint)}},955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(459),n(430);var r=n(441),a=n(431);n(426),n(433),n(427);var i=n(432),o=n(513),s=n(493),c=n(544),l=n(543);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p,f=function(e){if(!e)return{};try{var t=new URL(e);return{scheme:t.protocol.replace(/:$/,""),host:t.hostname,port:t.port,path:t.pathname}}catch(e){return console.log(e),{}}},m=function(e){return e.url?f(e.url):e},h=(p=o._asyncToGenerator(o._regeneratorRuntime.mark((function e(t,n){var a,u,p,f,h,y,g,v,b,S,E,T,w,_,x,O,C,M,B,k,A,N,z,P,j,I,L,R,F,D=arguments;return o._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D.length>2&&void 0!==D[2]?D[2]:[],e.prev=1,h=n.find((function(e){return e.name===t.source_type})).id,e.next=5,i.getSourcesApi().createSource(d({},t.source,{source_type_id:h}));case 5:return u=e.sent,y=[],t.endpoint?(g=m(t),v=g.scheme,b=g.host,S=g.port,E=g.path,T=parseInt(S,10),w=d({},t.endpoint,{default:!0,source_id:u.id,scheme:v,host:b,port:isNaN(T)?void 0:T,path:E}),y.push(i.getSourcesApi().createEndpoint(w))):y.push(Promise.resolve(void 0)),t.application&&t.application.application_type_id?(_=d({},t.application,{source_id:u.id}),y.push(i.getSourcesApi().createApplication(_))):y.push(Promise.resolve(void 0)),e.next=11,Promise.all(y);case 11:if(x=e.sent,O=r._slicedToArray(x,2),C=O[0],M=O[1],!(C||t.authentication&&(null===(p=M)||void 0===p?void 0:p.id))){e.next=20;break}return z=d({},t.authentication,{resource_id:(null===(k=C)||void 0===k?void 0:k.id)||(null===(A=M)||void 0===A?void 0:A.id),resource_type:(null===(N=C)||void 0===N?void 0:N.id)?"Endpoint":"Application"}),e.next=19,i.getSourcesApi().createAuthentication(z);case 19:B=e.sent;case 20:return P=[],t.credentials||t.billing_source?(j=t.credentials,I=t.billing_source,L={},L=j?{authentication:{credentials:j}}:{},L=I?d({},L,{billing_source:I}):L,P.push(c.patchSource(d({id:u.id},L)))):y.push(Promise.resolve(void 0)),B&&M?(R={application_id:M.id,authentication_id:B.id},P.push(i.getSourcesApi().createAuthApp(R))):y.push(Promise.resolve(void 0)),e.next=25,Promise.all(P);case 25:if((null===(f=u)||void 0===f?void 0:f.id)&&i.getSourcesApi().checkAvailabilitySource(u.id),!M){e.next=31;break}return F=a.includes(M.application_type_id)?1e4:0,e.next=30,l.checkAppAvailability(M.id,F);case 30:M=e.sent;case 31:if(!C){e.next=35;break}return e.next=34,l.checkAppAvailability(C.id,void 0,void 0,"getEndpoint");case 34:C=e.sent;case 35:return e.abrupt("return",d({},u,{endpoint:[C],applications:[M]}));case 38:return e.prev=38,e.t0=e.catch(1),e.next=42,s.handleError(e.t0,u?u.id:void 0);case 42:throw e.sent;case 44:case"end":return e.stop()}}),e,null,[[1,38]])}))),function(e,t){return p.apply(this,arguments)});t.doCreateSource=h,t.handleErrorWrapper=function(e){return t=o._asyncToGenerator(o._regeneratorRuntime.mark((function t(n){return o._regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.handleError(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t},t.parseUrl=f,t.urlOrHost=m},962:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(459);var a=n(592),i=n(430),o=n(441),s=n(431),c=n(0),l=r(c),u=n(134),d=r(n(13)),p=r(n(608)),f=n(220),m=n(604);n(484),n(422),n(421),n(511),n(466),n(489),n(460),n(222),n(444),n(445),n(229),n(426),n(440),n(461),n(446);var h=n(221),y=n(462);n(463),n(420),n(433);var g=n(427),v=n(432);n(471),n(535),n(241),n(242),n(425),n(437),n(438),n(224),n(538),n(424),n(537),n(453),n(539),n(540),n(513),n(546);var b=n(596);n(493),n(232),n(457),n(492),n(435),n(464),n(429),n(223);var S=n(597),E=n(599),T=n(954);n(442),n(230);var w=n(601);n(235);var _=n(598);n(506);var x=n(602),O=n(603),C=n(104);n(544),n(543);var M=n(955);n(472),n(225);var B=n(600);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A={schema:{},sourceTypes:[],isLoading:!0},N=function(e,t){var n=t.type,r=t.sourceTypes,a=t.applicationTypes,i=t.container,o=t.disableAppSelection,c=t.intl;switch(n){case"loaded":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){s._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{schema:b.default(r.filter(T.default),a.filter(E.default),o,i,c),isLoading:!1,sourceTypes:r})}},z=function(e){var t=e.sourceTypes,n=e.applicationTypes,r=e.disableAppSelection,i=e.isCancelling,s=e.onCancel,u=e.values,d=e.onSubmit,p=c.useReducer(N,A),h=o._slicedToArray(p,2),g=h[0],b=g.schema,E=g.sourceTypes,T=g.isLoading,w=h[1],_=c.useRef(!1),x=c.useRef(document.createElement("div")),O=f.useIntl();return c.useEffect((function(){_.current=!0;var e=[];return t||e.push(v.doLoadSourceTypes()),n||e.push(v.doLoadApplicationTypes()),Promise.all(e).then((function(e){var a=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),i=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));_.current&&w({type:"loaded",sourceTypes:t||a.sourceTypes,applicationTypes:n||i.applicationTypes,disableAppSelection:r,container:x.current,intl:O})})),function(){_.current=!1}}),[]),c.useEffect((function(){x.current.hidden=i}),[i]),T?l.createElement(m.Wizard,{isOpen:!0,onClose:s,title:y.WIZARD_TITLE,description:y.WIZARD_DESCRIPTION,steps:[{name:"Loading",component:l.createElement(S.default,{onClose:function(){return s()}}),isFinishedStep:!0}]}):l.createElement(a.SourcesFormRenderer,{initialValues:u,schema:b,onSubmit:function(e){return d(e,E)},onCancel:s})};z.propTypes={onCancel:d.func.isRequired,onSubmit:d.func.isRequired,sourceTypes:d.arrayOf(d.shape({id:d.string.isRequired,name:d.string.isRequired,product_name:d.string.isRequired,schema:d.shape({authentication:d.array,endpoint:d.object})})),applicationTypes:d.arrayOf(d.shape({id:d.string.isRequired,name:d.string.isRequired,display_name:d.string.isRequired})),values:d.object,disableAppSelection:d.bool,isCancelling:d.bool},z.defaultProps={values:{},disableAppSelection:!1};var P=function(e){var t=e.id,n=f.useIntl().formatMessage({id:"wizard.editSource",defaultMessage:"Edit source"});return"sources"===insights.chrome.getApp()?l.createElement(C.Link,{to:"/sources/edit/".concat(t)},l.createElement(u.Button,{variant:"primary",className:"pf-u-mt-xl"},n)):l.createElement(u.Button,{variant:"primary",className:"pf-u-mt-xl",component:"a",target:"_blank",href:"".concat(w.computeSourcesUrl(),"/edit/").concat(t),rel:"noopener noreferrer"},n)};P.propTypes={id:d.string.isRequired};var j=function(e){var t,n,r,a,i,s=e.afterSubmit,d=e.afterError,p=e.isFinished,g=e.isErrored,b=e.successfulMessage,E=e.hideSourcesButton,T=e.returnButtonTitle,C=e.reset,M=e.createdSource,B=void 0===M?{}:M,k=e.tryAgain,A=e.afterSuccess,N=c.useState(),z=o._slicedToArray(N,2),j=z[0],I=z[1],L=c.useState(),R=o._slicedToArray(L,2),F=R[0],D=R[1],W=f.useIntl(),q=l.createElement(u.Button,{variant:"link",onClick:C},W.formatMessage({id:"wizard.addAnotherSource",defaultMessage:"Add another source"}));if(F)i=l.createElement(w.FinishedStep,{onClose:s,title:W.formatMessage({id:"wizard.removeSourceSuccessTitle",defaultMessage:"Removing successful"}),successfulMessage:W.formatMessage({id:"wizard.removeSourceSuccessDescription",defaultMessage:"Source was successfully removed."}),hideSourcesButton:E,returnButtonTitle:T,secondaryActions:q});else if(j)i=l.createElement(S.default,{customText:W.formatMessage({id:"wizard.removingSource",defaultMessage:"Removing source"})});else if(p)switch(O.default(B)){case"unavailable":i=l.createElement(_.default,{onClose:s,secondaryActions:l.createElement(u.Button,{variant:"link",onClick:function(){return I(!0),v.getSourcesApi().removeSource(B.id).then((function(){A&&A(),D(!0)})).catch((function(){return I(!1)}))}},W.formatMessage({id:"wizard.removeSource",defaultMessage:"Remove source"})),Component:function(){return l.createElement(P,{id:B.id})},message:(null===(t=B.applications)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.availability_status_error)||(null===(r=B.endpoint)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.availability_status_error)||W.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"}),title:W.formatMessage({id:"wizard.configurationUnsuccessful",defaultMessage:"Configuration unsuccessful"})});break;case"timeout":i=l.createElement(x.default,{onClose:s,returnButtonTitle:T,secondaryActions:q});break;default:i=l.createElement(w.FinishedStep,{onClose:s,successfulMessage:b,hideSourcesButton:E,returnButtonTitle:T,secondaryActions:q})}else i=g?l.createElement(_.default,{onClose:d,primaryAction:k,secondaryActions:l.createElement(h.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},W.formatMessage({id:"wizard.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:W.formatMessage({id:"wizard.retryText",defaultMessage:"Retry"})}):l.createElement(S.default,{customText:W.formatMessage({id:"wizard.loadingText",defaultMessage:"Validating source credentials"}),onClose:d,cancelTitle:W.formatMessage({id:"wizard.close",defaultMessage:"Close"})});return l.createElement(m.Wizard,{isOpen:!0,onClose:p?s:d,title:y.WIZARD_TITLE,description:y.WIZARD_DESCRIPTION,steps:[{name:"Finish",component:i,isFinishedStep:!0}]})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s._defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}j.propTypes={afterSubmit:d.func.isRequired,afterError:d.func.isRequired,isFinished:d.bool.isRequired,isErrored:d.bool.isRequired,successfulMessage:d.node.isRequired,hideSourcesButton:d.bool,returnButtonTitle:d.node.isRequired,errorMessage:d.node,reset:d.func,createdSource:d.object,tryAgain:d.func,afterSuccess:d.func};var R=function(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0}},F=function(e,t){var n=t.type,r=t.values,a=t.data,i=t.error,o=t.initialValues,s=t.sourceTypes;switch(n){case"reset":return R(o);case"prepareSubmitState":return L({},e,{isFinished:!1,isErrored:!1,error:void 0,isSubmitted:!0,values:r,sourceTypes:s});case"setSubmitted":return L({},e,{isFinished:!0,createdSource:a});case"setErrored":return L({},e,{isErrored:!0,error:i.toString()});case"onStay":return L({},e,{isCancelling:!1});case"showCancelModal":return L({},e,{isCancelling:!0,values:r})}},D=function(e){var t=e.successfulMessage,n=e.isOpen,r=e.sourceTypes,a=e.applicationTypes,s=e.disableAppSelection,u=e.hideSourcesButton,d=e.returnButtonTitle,f=e.initialValues,m=e.onClose,h=e.afterSuccess,y=c.useReducer(F,R(f)),v=o._slicedToArray(y,2),b=v[0],S=b.isErrored,E=b.isFinished,T=b.isSubmitted,w=b.values,_=b.error,x=b.isCancelling,O=b.createdSource,C=i._objectWithoutProperties(b,["isErrored","isFinished","isSubmitted","values","error","isCancelling","createdSource"]),k=v[1],A=function(e,t){return k({type:"prepareSubmitState",values:e,sourceTypes:t}),M.doCreateSource(e,t,g.timeoutedApps(a)).then((function(e){h&&h(e),k({type:"setSubmitted",data:e})})).catch((function(e){k({type:"setErrored",error:e})}))};return n?T?l.createElement(j,{afterSubmit:function(){m(void 0,O),k({type:"reset",initialValues:f})},afterError:function(){return m({})},isFinished:E,isErrored:S,successfulMessage:t,hideSourcesButton:u,returnButtonTitle:d,errorMessage:_,reset:function(){return k({type:"reset",initialValues:f})},createdSource:O,tryAgain:function(){return A(w,C.sourceTypes)},afterSuccess:h}):l.createElement(l.Fragment,null,l.createElement(B.default,{isOpen:x,onExit:function(){return m(w)},onStay:function(){return k({type:"onStay"})}}),l.createElement(z,{isCancelling:x,values:w,onSubmit:A,onCancel:function(e){return p(e)?m({}):k({type:"showCancelModal",values:e})},sourceTypes:r,applicationTypes:a,disableAppSelection:s})):null};D.propTypes={afterSuccess:d.func,sourceTypes:d.arrayOf(d.shape({id:d.string.isRequired,name:d.string.isRequired,product_name:d.string.isRequired,schema:d.shape({authentication:d.array,endpoint:d.object})})),applicationTypes:d.arrayOf(d.shape({id:d.string.isRequired,name:d.string.isRequired,display_name:d.string.isRequired})),onClose:d.func.isRequired,isOpen:d.bool.isRequired,successfulMessage:d.node,initialValues:d.shape(s._defineProperty({},d.string,d.oneOf([d.string,d.array,d.number,d.bool]))),disableAppSelection:d.bool,hideSourcesButton:d.bool,returnButtonTitle:d.node},D.defaultProps={successfulMessage:l.createElement(f.FormattedMessage,{id:"wizard.successfulMessage",defaultMessage:"Your source was successfully added."}),initialValues:{},returnButtonTitle:l.createElement(f.FormattedMessage,{id:"wizard.goBackToSources",defaultMessage:"Go back to Sources"})};t.AddSourceButton=function(e){var t=c.useState(!1),n=o._slicedToArray(t,2),r=n[0],i=n[1];return l.createElement(l.Fragment,null,l.createElement(u.Button,{variant:"primary",onClick:function(){return i(!0)}},y.WIZARD_TITLE),l.createElement(D,a._extends({isOpen:r,onClose:function(){return i(!1)}},e)))},t.AddSourceWizard=D}}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map