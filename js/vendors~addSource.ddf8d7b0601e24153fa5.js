(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{387:function(e,t,r){"use strict";var n=r(323).createCommonjsModule((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new R(n||[]);return i._invoke=function(e,t,r){var n=p;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?f:l,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",l="suspendedYield",d="executing",f="completed",y={};function h(){}function m(){}function v(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf,T=b&&b(b(j([])));T&&T!==r&&n.call(T,i)&&(g=T);var P=v.prototype=h.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var p=c.arg,l=p.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){p.value=e,a(p)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function w(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,w(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return m.prototype=P.constructor=v,v.constructor=m,v[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},S(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(P),P[s]="Generator",P[i]=function(){return this},P.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function o(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var i=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,c,"next",e)}function c(e){o(a,n,i,s,c,"throw",e)}s(void 0)}))}};t._asyncToGenerator=i,t._regeneratorRuntime=n},466:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(323),r(334);var o=r(329),i=r(0),a=n(i),s=r(326),c=n(r(316)),u=n(r(318)),p=r(338),l=r(45);r(331),r(332),r(320),r(90),r(91);var d=r(28),f=r(340);r(341);var y=n(r(317));r(330);var h=r(355),m=r(387),v=n(r(431));r(372);var g=r(373),b=r(374),T=function(e){var t=e.name,r=y();return i.useEffect((function(){return setTimeout((function(){return r.change(t,"1")})),function(){return r.change(t,"")}}),[]),null};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){o._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}T.propTypes={name:s.PropTypes.string.isRequired};var _,w=(_=m._asyncToGenerator(m._regeneratorRuntime.mark((function e(t){var r,n,o=arguments;return m._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,e.prev=1,e.next=4,g.findSource(t);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(b.handleError(e.t0)),e.abrupt("return",void 0);case 11:if(!n.data.sources.find((function(e){return e.id!==r}))){e.next=13;break}throw"Name has already been taken";case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e){return _.apply(this,arguments)}),O=!0,E=function(e){return O=e},R=function(){return O},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return v(e,t,r)}(w),x=function(){return R()?(E(!1),function(e,t){return e?w(e,t):"Required"}):j},A=function(e){return p._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},L=function(e){return[{label:"None"}].concat(p._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},C=function(e){return function(t,r){if(!t.value)return t;var n=r.getState().values.source_type,o=e.find((function(e){return e.display_name===t.label})),i=!n||o.supported_source_types.includes(n);return S({},t,{isDisabled:!i})}},D=function(e,t){return function(r,n){var o=n.getState().values.application?n.getState().values.application.application_type_id:void 0,i=e.find((function(e){return e.id===o})),a=!i||i.supported_source_types.includes(t.find((function(e){return e.product_name===r.label})).name);return S({},r,{isDisabled:!a})}},q=function(e){return function(t){var r=e.find((function(e){return e.name===t}));return r&&r.icon_url?function(){return a.createElement("img",{src:r.icon_url,alt:r.product_name,className:"ins-c-sources__wizard--icon"})}:null}},I=function(e){var t=e.values,r=t.application,n=t.source_type,o=r&&r.application_type_id;return o?"".concat(n,"-").concat(o):n},k=function(e,t,r){return{title:"Choose application and source type",name:"types_step",nextStep:I,fields:[{component:"enhanced-select",name:"application.application_type_id",label:"A. Select your application",options:L(t),mutator:C(t),description:"Selecting an application will limit the available source types. You can assign an application to your source now or after adding your source.",isDisabled:r,placeholder:"Choose application"},{component:"card-select",name:"source_type",isRequired:!0,label:"B. Select your source type",iconMapper:q(e),validate:[{type:u.REQUIRED}],options:A(e),mutator:D(t,e)},{component:"description",name:"fixasyncvalidation",Content:T}]}},F=function(){return a.createElement(l.TextContent,{key:"step1"},a.createElement(d.Text,{component:d.TextVariants.p},"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."))},M=function(){return a.createElement(l.TextContent,null,a.createElement(d.Text,{component:d.TextVariants.p},"Review the information below and click Add to add your source. Use the Back button to make changes."))},B=function(e,t){return{fields:[{component:"description",name:"description-summary",Content:M},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:"Review details"}};t.NameDescription=F,t.SummaryDescription=M,t.appMutator=C,t.asyncValidator=w,t.asyncValidatorDebounced=j,t.asyncValidatorDebouncedWrapper=x,t.default=function(e,t,r,n){return E(!0),{fields:[{component:c.WIZARD,name:"wizard",title:f.WIZARD_TITLE,inModal:!0,description:f.WIZARD_DESCRIPTION,buttonLabels:{submit:"Add"},container:n,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[{title:"Enter source name",name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:F},{component:c.TEXT_FIELD,name:"source.name",type:"text",label:"Name",placeholder:"Source_1",isRequired:!0,validate:[function(e){return x()(e)},{type:u.REQUIRED}]}]},k(e,t,r)].concat(p._toConsumableArray(h.schemaBuilder(e,t)),[B(e,t)])}]}},t.getFirstValidated=R,t.iconMapper=q,t.nextStep=I,t.setFirstValidated=E,t.sourceTypeMutator=D},751:function(e,t,r){"use strict";var n=r(334),o=r(329),i=r(387),a=r(373),s=r(374),c=r(485);var u=function(e){if(Array.isArray(e))return e};var p=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}};var l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var d=function(e,t){return u(e)||p(e,t)||n.unsupportedIterableToArray(e,t)||l()};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){o._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h,m=function(e){if(!e)return{};try{var t=new URL(e);return{scheme:t.protocol.replace(/:$/,""),host:t.hostname,port:t.port,path:t.pathname}}catch(e){return console.log(e),{}}},v=function(e){return e.url?m(e.url):e},g=(h=i._asyncToGenerator(i._regeneratorRuntime.mark((function e(t,r){var n,o,u,p,l,f,h,m,g,b,T,P,S,_,w,O,E,R,j,x,A,L,C,D,q,I,k,F=arguments;return i._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=F.length>2&&void 0!==F[2]?F[2]:function(){},e.prev=1,u=r.find((function(e){return e.name===t.source_type})).id,e.next=5,a.getSourcesApi().createSource(y({},t.source,{source_type_id:u}));case 5:return o=e.sent,n(),p=[],t.endpoint?(l=v(t),f=l.scheme,h=l.host,m=l.port,g=l.path,b=parseInt(m,10),T=y({},t.endpoint,{default:!0,source_id:o.id,scheme:f,host:h,port:isNaN(b)?void 0:b,path:g}),p.push(a.getSourcesApi().createEndpoint(T))):p.push(Promise.resolve(void 0)),t.application&&t.application.application_type_id?(P=y({},t.application,{source_id:o.id}),p.push(a.getSourcesApi().createApplication(P))):p.push(Promise.resolve(void 0)),e.next=12,Promise.all(p);case 12:if(S=e.sent,_=d(S,2),w=_[0],O=_[1],(w||O)&&n(),!w){e.next=23;break}return R=y({},t.authentication,{resource_id:w.id,resource_type:"Endpoint"}),e.next=21,a.getSourcesApi().createAuthentication(R);case 21:E=e.sent,n();case 23:return j=[],t.credentials||t.billing_source?(x=t.credentials,A=t.billing_source,L={},L=x?{authentication:{credentials:x}}:{},L=A?y({},L,{billing_source:A}):L,j.push(c.patchSource(y({id:o.id},L)))):p.push(Promise.resolve(void 0)),E&&O?(C={application_id:O.id,authentication_id:E.id},j.push(a.getSourcesApi().createAuthApp(C))):p.push(Promise.resolve(void 0)),e.next=28,Promise.all(j);case 28:return D=e.sent,q=d(D,2),I=q[0],k=q[1],(I||k)&&n(),e.abrupt("return",y({},o,{endpoint:[w],applications:[O]}));case 36:return e.prev=36,e.t0=e.catch(1),e.next=40,s.handleError(e.t0,o?o.id:void 0);case 40:throw e.sent;case 42:case"end":return e.stop()}}),e,null,[[1,36]])}))),function(e,t){return h.apply(this,arguments)});t._slicedToArray=d,t.doCreateSource=g,t.handleErrorWrapper=function(e){return t=i._asyncToGenerator(i._regeneratorRuntime.mark((function t(r){return i._regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.handleError(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t},t.parseUrl=m,t.urlOrHost=v},755:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(323);var o=r(462),i=r(751);r(334);var a=r(329),s=r(0),c=n(s),u=r(84),p=r(326),l=n(r(486)),d=r(549);r(365),r(316),r(318),r(353),r(346),r(367),r(338),r(45),r(331),r(332),r(320),r(90),r(91),r(28);var f=r(340);r(341),r(317),r(330),r(355),r(404),r(157),r(158),r(322),r(324),r(325),r(150),r(411),r(321),r(410),r(345),r(369),r(412),r(413),r(387),r(431);var y=r(466);r(372);var h=r(373);r(374),r(357),r(359),r(428),r(172),r(429),r(358);var m=r(545),v=r(543);r(85),r(69);var g=r(547);r(92);var b=r(546);r(485),r(375),r(66);var T=r(544);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var S={schema:{},sourceTypes:[],isLoading:!0},_=function(e,t){var r=t.type,n=t.sourceTypes,o=t.applicationTypes,i=t.container,s=t.disableAppSelection;switch(r){case"loaded":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){a._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{schema:y.default(n.filter((function(e){return e.schema})),o.filter(v.default),s,i),isLoading:!1,sourceTypes:n})}},w=function(e){var t=e.sourceTypes,r=e.applicationTypes,n=e.disableAppSelection,a=e.isCancelling,u=e.onCancel,p=e.values,l=e.onSubmit,y=s.useReducer(_,S),v=i._slicedToArray(y,2),g=v[0],b=g.schema,T=g.sourceTypes,P=g.isLoading,w=v[1],O=s.useRef(!1),E=s.useRef(document.createElement("div"));return s.useEffect((function(){O.current=!0;var e=[];return t||e.push(h.doLoadSourceTypes()),r||e.push(h.doLoadApplicationTypes()),Promise.all(e).then((function(e){var o=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),i=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));O.current&&w({type:"loaded",sourceTypes:t||o.sourceTypes,applicationTypes:r||i.applicationTypes,disableAppSelection:n,container:E.current})})),function(){O.current=!1}}),[]),s.useEffect((function(){E.current.hidden=a}),[a]),P?c.createElement(d.Wizard,{isOpen:!0,onClose:u,title:f.WIZARD_TITLE,description:f.WIZARD_DESCRIPTION,steps:[{name:"Loading",component:c.createElement(m.default,{onClose:function(){return u()}}),isFinishedStep:!0}]}):c.createElement(o.SourcesFormRenderer,{initialValues:p,schema:b,onSubmit:function(e){return l(e,T)},onCancel:u})};w.propTypes={onCancel:p.PropTypes.func.isRequired,onSubmit:p.PropTypes.func.isRequired,sourceTypes:p.PropTypes.arrayOf(p.PropTypes.shape({id:p.PropTypes.string.isRequired,name:p.PropTypes.string.isRequired,product_name:p.PropTypes.string.isRequired,schema:p.PropTypes.shape({authentication:p.PropTypes.array,endpoint:p.PropTypes.object})})),applicationTypes:p.PropTypes.arrayOf(p.PropTypes.shape({id:p.PropTypes.string.isRequired,name:p.PropTypes.string.isRequired,display_name:p.PropTypes.string.isRequired})),values:p.PropTypes.object,disableAppSelection:p.PropTypes.bool,isCancelling:p.PropTypes.bool},w.defaultProps={values:{},disableAppSelection:!1};var O=function(e){var t=e.afterSubmit,r=e.afterError,n=e.isFinished,o=e.isErrored,i=e.onRetry,a=e.successfulMessage,s=e.hideSourcesButton,u=e.returnButtonTitle,p=e.errorMessage,l=e.progressStep,y=e.progressTexts;return c.createElement(d.Wizard,{isOpen:!0,onClose:n?t:r,title:f.WIZARD_TITLE,description:f.WIZARD_DESCRIPTION,steps:[{name:"Finish",component:n?c.createElement(g.default,{onClose:t,successfulMessage:a,hideSourcesButton:s,returnButtonTitle:u,progressStep:l,progressTexts:y}):o?c.createElement(b.default,{onRetry:i,onClose:r,returnButtonTitle:u,message:p,progressStep:l,progressTexts:y}):c.createElement(m.default,{customText:"Source is being created",progressStep:l,progressTexts:y}),isFinishedStep:!0}]})};O.propTypes={afterSubmit:p.PropTypes.func.isRequired,afterError:p.PropTypes.func.isRequired,onRetry:p.PropTypes.func.isRequired,isFinished:p.PropTypes.bool.isRequired,isErrored:p.PropTypes.bool.isRequired,successfulMessage:p.PropTypes.node.isRequired,hideSourcesButton:p.PropTypes.bool,returnButtonTitle:p.PropTypes.node.isRequired,errorMessage:p.PropTypes.node,progressStep:p.PropTypes.number.isRequired,progressTexts:p.PropTypes.arrayOf(p.PropTypes.string).isRequired};var E=function(e){var t=[],r=1,n=e.endpoint&&e.application&&e.application.application_type_id;return t.push("Step 1: sending source data"),n?t.push("Step ".concat(++r,": sending endpoint and application data")):!e.endpoint||e.application&&e.application.application_type_id?!e.endpoint&&e.application&&e.application.application_type_id&&t.push("Step ".concat(++r,": sending application data")):t.push("Step ".concat(++r,": sending endpoint data")),e.endpoint&&t.push("Step ".concat(++r,": sending authentication data")),e.credentials||e.billing_source?t.push("Step ".concat(++r,": sending cost management data and connecting authentication and application")):n&&t.push("Step ".concat(++r,": connecting authentication and application")),t.push("Completed"),t};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){a._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0,progressStep:0,progressTexts:[]}},A=function(e,t){var r=t.type,n=t.values,o=t.data,i=t.error,a=t.initialValues;switch(r){case"reset":return x(a);case"prepareSubmitState":return j({},e,{isSubmitted:!0,values:n,progressTexts:E(n),progressStep:0});case"increaseProgressStep":return j({},e,{progressStep:e.progressStep+1});case"setSubmitted":return j({},e,{isFinished:!0,createdSource:o});case"setErrored":return j({},e,{isErrored:!0,error:i.toString()});case"onRetry":return j({},e,{isErrored:!1,isSubmitted:!1,error:void 0});case"onStay":return j({},e,{isCancelling:!1});case"showCancelModal":return j({},e,{isCancelling:!0,values:n})}},L=function(e){var t=e.successfulMessage,r=e.isOpen,n=e.sourceTypes,o=e.applicationTypes,a=e.disableAppSelection,u=e.hideSourcesButton,p=e.returnButtonTitle,d=e.initialValues,f=e.onClose,y=e.afterSuccess,h=s.useReducer(A,x(d)),m=i._slicedToArray(h,2),v=m[0],g=v.isErrored,b=v.isFinished,P=v.isSubmitted,S=v.values,_=v.error,E=v.progressStep,R=v.progressTexts,j=v.isCancelling,L=v.createdSource,C=m[1];return r?P?c.createElement(O,{afterSubmit:function(){f(void 0,L),C({type:"reset",initialValues:d})},afterError:function(){return f({})},isFinished:b,isErrored:g,onRetry:function(){return C({type:"onRetry"})},successfulMessage:t,hideSourcesButton:u,returnButtonTitle:p,errorMessage:_,progressStep:E,progressTexts:R}):c.createElement(c.Fragment,null,c.createElement(T.default,{isOpen:j,onExit:function(){return f(S)},onStay:function(){return C({type:"onStay"})}}),c.createElement(w,{isCancelling:j,values:S,onSubmit:function(e,t){return C({type:"prepareSubmitState",values:e}),i.doCreateSource(e,t,(function(){return C({type:"increaseProgressStep"})})).then((function(e){y&&y(e),C({type:"setSubmitted",data:e})})).catch((function(e){C({type:"setErrored",error:e})}))},onCancel:function(e){return l(e)?f({}):C({type:"showCancelModal",values:e})},sourceTypes:n,applicationTypes:o,disableAppSelection:a})):null};L.propTypes={afterSuccess:p.PropTypes.func,sourceTypes:p.PropTypes.arrayOf(p.PropTypes.shape({id:p.PropTypes.string.isRequired,name:p.PropTypes.string.isRequired,product_name:p.PropTypes.string.isRequired,schema:p.PropTypes.shape({authentication:p.PropTypes.array,endpoint:p.PropTypes.object})})),applicationTypes:p.PropTypes.arrayOf(p.PropTypes.shape({id:p.PropTypes.string.isRequired,name:p.PropTypes.string.isRequired,display_name:p.PropTypes.string.isRequired})),onClose:p.PropTypes.func.isRequired,isOpen:p.PropTypes.bool.isRequired,successfulMessage:p.PropTypes.node,initialValues:p.PropTypes.shape(a._defineProperty({},p.PropTypes.string,p.PropTypes.oneOf([p.PropTypes.string,p.PropTypes.array,p.PropTypes.number,p.PropTypes.bool]))),disableAppSelection:p.PropTypes.bool,hideSourcesButton:p.PropTypes.bool,returnButtonTitle:p.PropTypes.node},L.defaultProps={successfulMessage:"Your source has been successfully added.",initialValues:{},returnButtonTitle:"Go back to sources"};t.AddSourceButton=function(e){var t=s.useState(!1),r=i._slicedToArray(t,2),n=r[0],a=r[1];return c.createElement(c.Fragment,null,c.createElement(u.Button,{variant:"primary",onClick:function(){return a(!0)}},f.WIZARD_TITLE),c.createElement(L,o._extends({isOpen:n,onClose:function(){return a(!1)}},e)))},t.AddSourceWizard=L}}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map