(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{387:function(e,t,r){"use strict";var n=r(322).createCommonjsModule((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),i=new R(n||[]);return a._invoke=function(e,t,r){var n=p;return function(o,a){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return M()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=_(i,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?f:l,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",l="suspendedYield",d="executing",f="completed",y={};function h(){}function m(){}function g(){}var v={};v[a]=function(){return this};var b=Object.getPrototypeOf,T=b&&b(b(A([])));T&&T!==r&&n.call(T,a)&&(v=T);var w=g.prototype=h.prototype=Object.create(v);function P(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e,t){var r;this._invoke=function(o,a){function i(){return new t((function(r,i){!function r(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var p=c.arg,l=p.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){p.value=e,i(p)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}(o,a,r,i)}))}return r=r?r.then(i,i):i()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return m.prototype=w.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},P(E.prototype),E.prototype[i]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function o(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var a=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}};t._asyncToGenerator=a,t._regeneratorRuntime=n},466:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(322);var o=r(329);r(330);var a=r(0),i=n(a),s=r(326),c=r(83),u=n(r(315)),p=n(r(317)),l=r(340),d=r(45);r(334),r(335),r(319),r(325),r(90),r(91);var f=r(29),y=r(342);r(343);var h=n(r(316));r(333);var m=r(332);r(331);var g=r(357),v=r(387),b=n(r(430)),T=r(373),w=function(e){var t=e.name,r=h();return a.useEffect((function(){return setTimeout((function(){return r.change(t,"1")})),function(){return r.change(t,"")}}),[]),null};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){o._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}w.propTypes={name:s.PropTypes.string.isRequired};var _,S=(_=v._asyncToGenerator(v._regeneratorRuntime.mark((function e(t){var r,n,o,a=arguments;return v._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2?a[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,m.findSource(t);case 7:o=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(T.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!o.data.sources.find((function(e){return e.id!==r}))){e.next=16;break}throw n.formatMessage({defaultMessage:"Name has already been taken",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return _.apply(this,arguments)}),O=!0,R=function(e){return O=e},A=function(){return O},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,r)}(S),j=function(e){return A()?(R(!1),function(t,r){return t?S(t,r,e):void 0}):M},x=function(e){return l._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},C=function(e){return[{label:i.createElement(c.FormattedMessage,{id:"wizard.None",defaultMessage:"None"}),key:"none"}].concat(l._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},L=function(e){return function(t,r){if(!t.value)return t;var n=r.getState().values.source_type,o=e.find((function(e){return e.display_name===t.label})),a=!n||o.supported_source_types.includes(n);return E({},t,{isDisabled:!a})}},F=function(e,t){return function(r,n){var o=n.getState().values.application?n.getState().values.application.application_type_id:void 0,a=e.find((function(e){return e.id===o})),i=!a||a.supported_source_types.includes(t.find((function(e){return e.product_name===r.label})).name);return E({},r,{isDisabled:!i})}},D=function(e){return function(t){var r=e.find((function(e){return e.name===t}));return r&&r.icon_url?function(){return i.createElement("img",{src:r.icon_url,alt:r.product_name,className:"ins-c-sources__wizard--icon"})}:null}},k=function(e){var t=e.values,r=t.application,n=t.source_type,o=r&&r.application_type_id;return o?"".concat(n,"-").concat(o):n},B=function(e,t,r,n){return{title:i.createElement(c.FormattedMessage,{id:"wizard.ChooseApplicationAndSourceType",defaultMessage:"Choose application and source type"}),name:"types_step",nextStep:k,fields:[{component:"enhanced-select",name:"application.application_type_id",label:i.createElement(c.FormattedMessage,{id:"wizard.ASelectYourApplication",defaultMessage:"A. Select your application"}),options:C(t),mutator:L(t),description:i.createElement(c.FormattedMessage,{id:"wizard.SelectingAnApplicationWillLimitTheAvailableSourceTypesYouCanAssignAnApplicationToYourSourceNowOrAfterAddingYourSource",defaultMessage:"Selecting an application will limit the available source types. You can assign an application to your source now or after adding your source."}),isDisabled:r,placeholder:n.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"})},{component:"card-select",name:"source_type",isRequired:!0,label:i.createElement(c.FormattedMessage,{id:"wizard.BSelectYourSourceType",defaultMessage:"B. Select your source type"}),iconMapper:D(e),validate:[{type:p.REQUIRED}],options:x(e),mutator:F(t,e)},{component:"description",name:"fixasyncvalidation",Content:w}]}},I=function(){return i.createElement(d.TextContent,{key:"step1"},i.createElement(f.Text,{component:f.TextVariants.p},i.createElement(c.FormattedMessage,{id:"wizard.ToImportDataForAnApplicationYouNeedToConnectToADataSourceEnterANameThenProceedToSelectYourApplicationAndSourceType",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},q=function(e){return{title:i.createElement(c.FormattedMessage,{id:"wizard.EnterSourceName",defaultMessage:"Enter source name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:I},{component:u.TEXT_FIELD,name:"source.name",type:"text",label:i.createElement(c.FormattedMessage,{id:"wizard.Name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return j(e)(t,void 0,e)},{type:p.REQUIRED}]}]}},N=function(){return i.createElement(d.TextContent,null,i.createElement(f.Text,{component:f.TextVariants.p},i.createElement(c.FormattedMessage,{id:"wizard.ReviewTheInformationBelowAndClickAddToAddYourSourceUseTheBackButtonToMakeChanges",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},z=function(e,t){return{fields:[{component:"description",name:"description-summary",Content:N},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:i.createElement(c.FormattedMessage,{id:"wizard.ReviewDetails",defaultMessage:"Review details"})}};t.NameDescription=I,t.SummaryDescription=N,t.appMutator=L,t.asyncValidator=S,t.asyncValidatorDebounced=M,t.asyncValidatorDebouncedWrapper=j,t.default=function(e,t,r,n,o){return R(!0),{fields:[{component:u.WIZARD,name:"wizard",title:y.WIZARD_TITLE,inModal:!0,description:y.WIZARD_DESCRIPTION,buttonLabels:{submit:i.createElement(c.FormattedMessage,{id:"sources.addButton",defaultMessage:"Add"}),back:i.createElement(c.FormattedMessage,{id:"wizard.Back",defaultMessage:"Back"}),cancel:i.createElement(c.FormattedMessage,{id:"wizard.Cancel",defaultMessage:"Cancel"}),next:i.createElement(c.FormattedMessage,{id:"wizard.Next",defaultMessage:"Next"})},container:n,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[q(o),B(e,t,r,o)].concat(l._toConsumableArray(g.schemaBuilder(e,t)),[z(e,t)])}]}},t.getFirstValidated=A,t.iconMapper=D,t.nextStep=k,t.setFirstValidated=R,t.sourceTypeMutator=F},745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(322);var n=r(329);r(330),r(319),r(333);var o=r(332);r(331);var a=r(387),i=r(373),s=r(483);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p,l=function(e){if(!e)return{};try{var t=new URL(e);return{scheme:t.protocol.replace(/:$/,""),host:t.hostname,port:t.port,path:t.pathname}}catch(e){return console.log(e),{}}},d=function(e){return e.url?l(e.url):e},f=(p=a._asyncToGenerator(a._regeneratorRuntime.mark((function e(t,r){var c,p,l,f,y,h,m,g,v,b,T,w,P,E,_,S,O,R,A,M,j,x;return a._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p=r.find((function(e){return e.name===t.source_type})).id,e.next=4,o.getSourcesApi().createSource(u({},t.source,{source_type_id:p}));case 4:return c=e.sent,l=[],t.endpoint?(f=d(t),y=f.scheme,h=f.host,m=f.port,g=f.path,v=parseInt(m,10),b=u({},t.endpoint,{default:!0,source_id:c.id,scheme:y,host:h,port:isNaN(v)?void 0:v,path:g}),l.push(o.getSourcesApi().createEndpoint(b))):l.push(Promise.resolve(void 0)),t.application&&t.application.application_type_id?(T=u({},t.application,{source_id:c.id}),l.push(o.getSourcesApi().createApplication(T))):l.push(Promise.resolve(void 0)),e.next=10,Promise.all(l);case 10:if(w=e.sent,P=n._slicedToArray(w,2),E=P[0],_=P[1],!E){e.next=19;break}return O=u({},t.authentication,{resource_id:E.id,resource_type:"Endpoint"}),e.next=18,o.getSourcesApi().createAuthentication(O);case 18:S=e.sent;case 19:return R=[],t.credentials||t.billing_source?(A=t.credentials,M=t.billing_source,j={},j=A?{authentication:{credentials:A}}:{},j=M?u({},j,{billing_source:M}):j,R.push(s.patchSource(u({id:c.id},j)))):l.push(Promise.resolve(void 0)),S&&_?(x={application_id:_.id,authentication_id:S.id},R.push(o.getSourcesApi().createAuthApp(x))):l.push(Promise.resolve(void 0)),e.next=24,Promise.all(R);case 24:return e.abrupt("return",u({},c,{endpoint:[E],applications:[_]}));case 27:return e.prev=27,e.t0=e.catch(0),e.next=31,i.handleError(e.t0,c?c.id:void 0);case 31:throw e.sent;case 33:case"end":return e.stop()}}),e,null,[[0,27]])}))),function(e,t){return p.apply(this,arguments)});t.doCreateSource=f,t.handleErrorWrapper=function(e){return t=a._asyncToGenerator(a._regeneratorRuntime.mark((function t(r){return a._regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.handleError(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t},t.parseUrl=l,t.urlOrHost=d},749:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(322);var o=r(461),a=r(329);r(330);var i=r(0),s=n(i),c=r(84),u=r(326),p=n(r(550)),l=r(83),d=r(546);r(367),r(315),r(317),r(355),r(347),r(369),r(340),r(45),r(334),r(335),r(319),r(325),r(90),r(91),r(29);var f=r(342);r(343),r(316),r(333);var y=r(332);r(331),r(357),r(404),r(158),r(159),r(321),r(323),r(324),r(150),r(411),r(320),r(410),r(346),r(412),r(413),r(387),r(430);var h=r(466);r(373),r(359),r(428),r(174),r(360),r(85);var m=r(542),g=r(540);r(376),r(69);var v=r(544);r(166);var b=r(543);r(483);var T=r(745);r(374),r(65);var w=r(541);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var E={schema:{},sourceTypes:[],isLoading:!0},_=function(e,t){var r=t.type,n=t.sourceTypes,o=t.applicationTypes,i=t.container,s=t.disableAppSelection,c=t.intl;switch(r){case"loaded":return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){a._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{schema:h.default(n.filter((function(e){return e.schema})),o.filter(g.default),s,i,c),isLoading:!1,sourceTypes:n})}},S=function(e){var t=e.sourceTypes,r=e.applicationTypes,n=e.disableAppSelection,c=e.isCancelling,u=e.onCancel,p=e.values,h=e.onSubmit,g=i.useReducer(_,E),v=a._slicedToArray(g,2),b=v[0],T=b.schema,w=b.sourceTypes,P=b.isLoading,S=v[1],O=i.useRef(!1),R=i.useRef(document.createElement("div")),A=l.useIntl();return i.useEffect((function(){O.current=!0;var e=[];return t||e.push(y.doLoadSourceTypes()),r||e.push(y.doLoadApplicationTypes()),Promise.all(e).then((function(e){var o=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),a=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));O.current&&S({type:"loaded",sourceTypes:t||o.sourceTypes,applicationTypes:r||a.applicationTypes,disableAppSelection:n,container:R.current,intl:A})})),function(){O.current=!1}}),[]),i.useEffect((function(){R.current.hidden=c}),[c]),P?s.createElement(d.Wizard,{isOpen:!0,onClose:u,title:f.WIZARD_TITLE,description:f.WIZARD_DESCRIPTION,steps:[{name:"Loading",component:s.createElement(m.default,{onClose:function(){return u()}}),isFinishedStep:!0}]}):s.createElement(o.SourcesFormRenderer,{initialValues:p,schema:T,onSubmit:function(e){return h(e,w)},onCancel:u})};S.propTypes={onCancel:u.PropTypes.func.isRequired,onSubmit:u.PropTypes.func.isRequired,sourceTypes:u.PropTypes.arrayOf(u.PropTypes.shape({id:u.PropTypes.string.isRequired,name:u.PropTypes.string.isRequired,product_name:u.PropTypes.string.isRequired,schema:u.PropTypes.shape({authentication:u.PropTypes.array,endpoint:u.PropTypes.object})})),applicationTypes:u.PropTypes.arrayOf(u.PropTypes.shape({id:u.PropTypes.string.isRequired,name:u.PropTypes.string.isRequired,display_name:u.PropTypes.string.isRequired})),values:u.PropTypes.object,disableAppSelection:u.PropTypes.bool,isCancelling:u.PropTypes.bool},S.defaultProps={values:{},disableAppSelection:!1};var O=function(e){var t=e.afterSubmit,r=e.afterError,n=e.isFinished,o=e.isErrored,a=e.onRetry,i=e.successfulMessage,u=e.hideSourcesButton,p=e.returnButtonTitle,y=e.errorMessage,h=e.reset;return s.createElement(d.Wizard,{isOpen:!0,onClose:n?t:r,title:f.WIZARD_TITLE,description:f.WIZARD_DESCRIPTION,steps:[{name:"Finish",component:n?s.createElement(v.default,{onClose:t,successfulMessage:i,hideSourcesButton:u,returnButtonTitle:p,secondaryActions:s.createElement(c.Button,{variant:"link",onClick:h},s.createElement(l.FormattedMessage,{id:"wizard.addAnotherSource",defaultMessage:"Add another source"}))}):o?s.createElement(b.default,{onRetry:a,onClose:r,returnButtonTitle:p,message:y}):s.createElement(m.default,{customText:s.createElement(l.FormattedMessage,{id:"wizard.loadingText",defaultMessage:"Validating source credentials"}),cancelTitle:s.createElement(l.FormattedMessage,{id:"wizard.cancel",defaultMessage:"Cancel"})}),isFinishedStep:!0}]})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){a._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}O.propTypes={afterSubmit:u.PropTypes.func.isRequired,afterError:u.PropTypes.func.isRequired,onRetry:u.PropTypes.func.isRequired,isFinished:u.PropTypes.bool.isRequired,isErrored:u.PropTypes.bool.isRequired,successfulMessage:u.PropTypes.node.isRequired,hideSourcesButton:u.PropTypes.bool,returnButtonTitle:u.PropTypes.node.isRequired,errorMessage:u.PropTypes.node,reset:u.PropTypes.func};var M=function(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0}},j=function(e,t){var r=t.type,n=t.values,o=t.data,a=t.error,i=t.initialValues;switch(r){case"reset":return M(i);case"prepareSubmitState":return A({},e,{isSubmitted:!0,values:n});case"setSubmitted":return A({},e,{isFinished:!0,createdSource:o});case"setErrored":return A({},e,{isErrored:!0,error:a.toString()});case"onRetry":return A({},e,{isErrored:!1,isSubmitted:!1,error:void 0});case"onStay":return A({},e,{isCancelling:!1});case"showCancelModal":return A({},e,{isCancelling:!0,values:n})}},x=function(e){var t=e.successfulMessage,r=e.isOpen,n=e.sourceTypes,o=e.applicationTypes,c=e.disableAppSelection,u=e.hideSourcesButton,l=e.returnButtonTitle,d=e.initialValues,f=e.onClose,y=e.afterSuccess,h=i.useReducer(j,M(d)),m=a._slicedToArray(h,2),g=m[0],v=g.isErrored,b=g.isFinished,P=g.isSubmitted,E=g.values,_=g.error,R=g.isCancelling,A=g.createdSource,x=m[1];return r?P?s.createElement(O,{afterSubmit:function(){f(void 0,A),x({type:"reset",initialValues:d})},afterError:function(){return f({})},isFinished:b,isErrored:v,onRetry:function(){return x({type:"onRetry"})},successfulMessage:t,hideSourcesButton:u,returnButtonTitle:l,errorMessage:_,reset:function(){return x({type:"reset",initialValues:d})}}):s.createElement(s.Fragment,null,s.createElement(w.default,{isOpen:R,onExit:function(){return f(E)},onStay:function(){return x({type:"onStay"})}}),s.createElement(S,{isCancelling:R,values:E,onSubmit:function(e,t){return x({type:"prepareSubmitState",values:e}),T.doCreateSource(e,t).then((function(e){y&&y(e),x({type:"setSubmitted",data:e})})).catch((function(e){x({type:"setErrored",error:e})}))},onCancel:function(e){return p(e)?f({}):x({type:"showCancelModal",values:e})},sourceTypes:n,applicationTypes:o,disableAppSelection:c})):null};x.propTypes={afterSuccess:u.PropTypes.func,sourceTypes:u.PropTypes.arrayOf(u.PropTypes.shape({id:u.PropTypes.string.isRequired,name:u.PropTypes.string.isRequired,product_name:u.PropTypes.string.isRequired,schema:u.PropTypes.shape({authentication:u.PropTypes.array,endpoint:u.PropTypes.object})})),applicationTypes:u.PropTypes.arrayOf(u.PropTypes.shape({id:u.PropTypes.string.isRequired,name:u.PropTypes.string.isRequired,display_name:u.PropTypes.string.isRequired})),onClose:u.PropTypes.func.isRequired,isOpen:u.PropTypes.bool.isRequired,successfulMessage:u.PropTypes.node,initialValues:u.PropTypes.shape(a._defineProperty({},u.PropTypes.string,u.PropTypes.oneOf([u.PropTypes.string,u.PropTypes.array,u.PropTypes.number,u.PropTypes.bool]))),disableAppSelection:u.PropTypes.bool,hideSourcesButton:u.PropTypes.bool,returnButtonTitle:u.PropTypes.node},x.defaultProps={successfulMessage:s.createElement(l.FormattedMessage,{id:"wizard.successfulMessage",defaultMessage:"Your source has been successfully added."}),initialValues:{},returnButtonTitle:s.createElement(l.FormattedMessage,{id:"wizard.goBackToSources",defaultMessage:"Go back to Sources"})};t.AddSourceButton=function(e){var t=i.useState(!1),r=a._slicedToArray(t,2),n=r[0],u=r[1];return s.createElement(s.Fragment,null,s.createElement(c.Button,{variant:"primary",onClick:function(){return u(!0)}},f.WIZARD_TITLE),s.createElement(x,o._extends({isOpen:n,onClose:function(){return u(!1)}},e)))},t.AddSourceWizard=x}}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map