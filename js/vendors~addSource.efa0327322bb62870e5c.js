(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{485:function(e,t,r){"use strict";var n=r(441).createCommonjsModule((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new A(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?f:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",p="suspendedYield",d="executing",f="completed",y={};function m(){}function h(){}function v(){}var g={};g[i]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(R([])));_&&_!==r&&n.call(_,i)&&(g=_);var w=v.prototype=m.prototype=Object.create(g);function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function E(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return h.prototype=w.constructor=v,v.constructor=h,v[s]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},T(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(w),w[s]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function o(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var i=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,c,"next",e)}function c(e){o(a,n,i,s,c,"throw",e)}s(void 0)}))}};t._asyncToGenerator=i,t._regeneratorRuntime=n},607:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(441),r(411),r(423);var o=r(415),i=r(0),a=n(i);r(125);var s=n(r(7)),c=r(91),u=n(r(398)),l=n(r(400)),p=r(433);r(401),r(422),r(449),r(95);var d=r(34),f=r(92);r(434),r(416),r(417),r(450);var y=r(424),m=n(r(397));r(405),r(404);var h=r(412),v=r(465),g=r(485),b=n(r(486)),_=r(466);r(197),r(438);var w=r(484),T=function(e){var t=e.name,r=m();return i.useEffect((function(){return setTimeout((function(){return r.change(t,"1")})),function(){return r.change(t,"")}}),[]),null};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){o._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}T.propTypes={name:s.string.isRequired};var O,M=(O=g._asyncToGenerator(g._regeneratorRuntime.mark((function e(t){var r,n,o,i=arguments;return g._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:void 0,n=i.length>2?i[2]:void 0,t){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.prev=4,e.next=7,h.findSource(t);case 7:o=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(_.handleError(e.t0)),e.abrupt("return",void 0);case 14:if(!o.data.sources.find((function(e){return e.id!==r}))){e.next=16;break}throw n.formatMessage({defaultMessage:"That name is taken. Try another.",id:"wizard.nameTaken"});case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e){return O.apply(this,arguments)}),A=!0,R=function(e){return A=e},x=function(){return A},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return b(e,t,r)}(M),j=function(e){return x()?(R(!1),function(t,r){return t?M(t,r,e):void 0}):P},C=function(e){return p._toConsumableArray(e.sort((function(e,t){return e.product_name.localeCompare(t.product_name)})).map((function(e){return{value:e.name,label:e.product_name}})))},D=function(e,t){return[].concat(p._toConsumableArray(y.getActiveVendor()!==y.REDHAT_VENDOR?[{label:t.formatMessage({id:"wizard.none",defaultMessage:"None"}),key:"none"}]:[]),p._toConsumableArray(e.sort((function(e,t){return e.display_name.localeCompare(t.display_name)})).map((function(e){return{value:e.id,label:e.display_name}}))))},k=function(e){return function(t,r){if(!t.value)return t;var n=r.getState().values.source_type,o=e.find((function(e){return e.display_name===t.label})),i=!n||o.supported_source_types.includes(n);return E({},t,{isDisabled:!i})}},L=function(e){return function(t,r){var n=r.getState().values.source_type,o=e.find((function(e){return e.display_name===t.label}));if(!n||o.supported_source_types.includes(n))return t}},z=function(e,t){return function(r,n){var o=n.getState().values.application?n.getState().values.application.application_type_id:void 0,i=e.find((function(e){return e.id===o})),a=!i||i.supported_source_types.includes(t.find((function(e){return e.product_name===r.label})).name);return E({},r,{isDisabled:!a})}},I=function(e){return function(t){var r=e.find((function(e){return e.name===t}));return r&&r.icon_url?function(){return a.createElement("img",{src:r.icon_url,alt:r.product_name,className:"ins-c-sources__wizard--icon"})}:null}},q=function(e){var t=e.values,r=t.application,n=t.source_type,o=r&&r.application_type_id;return o?"".concat(n,"-").concat(o):n},B=function(e){var t=e.intl,r=e.sourceTypes;return e.applicationTypes,{component:"card-select",name:"source_type",isRequired:!0,label:t.formatMessage({id:"wizard.selectYourSourceType",defaultMessage:"A. Select your source type"}),iconMapper:I(r),validate:[{type:l.REQUIRED}],options:C(r)}},F=function(e){var t=e.intl,r=e.sourceTypes,n=e.applicationTypes,o=e.disableAppSelection;return[E({},B({intl:t,sourceTypes:r,applicationTypes:n}),{mutator:z(n,r)}),{component:"enhanced-select",name:"application.application_type_id",label:t.formatMessage({id:"wizard.selectYourApplication",defaultMessage:"B. Select an application"}),options:D(n,t),mutator:k(n),isDisabled:o,placeholder:t.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"}),menuIsPortal:!0}]},N=function(e){var t=e.intl,r=e.sourceTypes,n=e.applicationTypes,o=e.disableAppSelection;return[B({intl:t,sourceTypes:r,applicationTypes:n}),{component:"enhanced-radio",name:"application.application_type_id",label:t.formatMessage({id:"wizard.selectApplication",defaultMessage:"B. Application"}),options:D(n,t),mutator:L(n),isDisabled:o,isRequired:!0,validate:[{type:l.REQUIRED}],condition:{when:"source_type",isNotEmpty:!0}}]},V=function(e,t,r){return{name:"types_step",title:r.formatMessage({id:"wizard.Application",defaultMessage:"Application"}),nextStep:q,fields:[{component:u.PLAIN_TEXT,name:"app-description",label:r.formatMessage({id:"wizard.applicationDescription",defaultMessage:"Select an application to configure this source. You can connect additional applications after source creation."})},{component:"enhanced-select",name:"application.application_type_id",label:r.formatMessage({id:"wizard.selectYourApplicationNoPoint",defaultMessage:"Select an application"}),options:D(e.filter((function(e){return e.supported_source_types.includes(t)})),r),mutator:k(e),placeholder:r.formatMessage({id:"wizard.chooseApp",defaultMessage:"Choose application"}),menuIsPortal:!0},{component:u.TEXT_FIELD,name:"source_type",hideField:!0}]}},W=function(e,t,r,n){return{title:n.formatMessage({id:"wizard.chooseAppAndType",defaultMessage:"Source type and application"}),name:"types_step",nextStep:q,fields:[].concat(p._toConsumableArray(y.getActiveVendor()===y.REDHAT_VENDOR?N({intl:n,sourceTypes:e,applicationTypes:t,disableAppSelection:r}):F({intl:n,sourceTypes:e,applicationTypes:t,disableAppSelection:r})),[{component:"description",name:"fixasyncvalidation",Content:T}])}},G=function(){var e=c.useIntl();return a.createElement(f.TextContent,{key:"step1"},a.createElement(d.Text,{component:d.TextVariants.p},e.formatMessage({id:"wizard.nameDescription",defaultMessage:"To import data for an application, you need to connect to a data source. Enter a name, then proceed to select your application and source type."})))},U=function(e){return{title:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),name:"name_step",nextStep:"types_step",fields:[{component:"description",name:"description-summary",Content:G},{component:u.TEXT_FIELD,name:"source.name",type:"text",label:e.formatMessage({id:"wizard.name",defaultMessage:"Name"}),placeholder:"Source_1",isRequired:!0,validate:[function(t){return j(e)(t,void 0,e)},{type:l.REQUIRED}],resolveProps:w.default}]}},Z=function(){var e=c.useIntl();return a.createElement(f.TextContent,null,a.createElement(d.Text,{component:d.TextVariants.p},e.formatMessage({id:"wizard.summaryDescription",defaultMessage:"Review the information below and click Add to add your source. Use the Back button to make changes."})))},Y=function(e,t,r){return{fields:[{component:"description",name:"description-summary",Content:Z},{name:"summary",component:"summary",sourceTypes:e,applicationTypes:t}],name:"summary",title:r.formatMessage({id:"wizard.reviewDetails",defaultMessage:"Review details"})}};t.NameDescription=G,t.SummaryDescription=Z,t.appMutator=k,t.appMutatorRedHat=L,t.applicationStep=V,t.asyncValidator=M,t.asyncValidatorDebounced=P,t.asyncValidatorDebouncedWrapper=j,t.compileAllApplicationComboOptions=D,t.default=function(e,t,r,n,o,i){return R(!0),{fields:[{component:u.WIZARD,name:"wizard",title:y.WIZARD_TITLE(),inModal:!0,description:y.WIZARD_DESCRIPTION(),buttonLabels:{submit:o.formatMessage({id:"sources.add",defaultMessage:"Add"}),back:o.formatMessage({id:"wizard.back",defaultMessage:"Back"}),cancel:o.formatMessage({id:"wizard.cancel",defaultMessage:"Cancel"}),next:o.formatMessage({id:"wizard.next",defaultMessage:"Next"})},container:n,showTitles:!0,crossroads:["application.application_type_id","source_type","auth_select"],fields:[U(o),i?V(t,i,o):W(e,t,r,o)].concat(p._toConsumableArray(v.schemaBuilder(e,t)),[Y(e,t,o)])}]}},t.getFirstValidated=x,t.iconMapper=I,t.nextStep=q,t.setFirstValidated=R,t.sourceTypeMutator=z,t.typesStep=W},922:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(0),r(91);var n=r(424);t.default=function(e){var t,r;return(null===(t=e.schema)||void 0===t?void 0:t.authentication)&&(null===(r=e.schema)||void 0===r?void 0:r.endpoint)},t.filterVendorTypes=function(e){var t=e.vendor;return n.getActiveVendor()===n.CLOUD_VENDOR?t!==n.REDHAT_VENDOR:t===n.REDHAT_VENDOR}},923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(441),r(411);var n=r(423),o=r(415);r(401),r(405),r(404);var i=r(412),a=r(485),s=r(466),c=r(533),u=r(532);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){o._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,f=function(e){if(!e)return{};try{var t=new URL(e);return{scheme:t.protocol.replace(/:$/,""),host:t.hostname,port:t.port,path:t.pathname}}catch(e){return console.log(e),{}}},y=function(e){return e.url?f(e.url):e},m=(d=a._asyncToGenerator(a._regeneratorRuntime.mark((function e(t,r){var o,l,d,f,m,h,v,g,b,_,w,T,S,E,O,M,A,R,x,P,j,C,D,k,L,z,I,q,B,F=arguments;return a._regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=F.length>2&&void 0!==F[2]?F[2]:[],e.prev=1,m=r.find((function(e){return e.name===t.source_type})).id,e.next=5,i.getSourcesApi().createSource(p({},t.source,{source_type_id:m}));case 5:return l=e.sent,h=[],t.endpoint?(v=y(t),g=v.scheme,b=v.host,_=v.port,w=v.path,T=parseInt(_,10),S=p({},t.endpoint,{default:!0,source_id:l.id,scheme:g,host:b,port:isNaN(T)?void 0:T,path:w}),h.push(i.getSourcesApi().createEndpoint(S))):h.push(Promise.resolve(void 0)),t.application&&t.application.application_type_id?(E=p({},t.application,{source_id:l.id}),h.push(i.getSourcesApi().createApplication(E))):h.push(Promise.resolve(void 0)),e.next=11,Promise.all(h);case 11:if(O=e.sent,M=n._slicedToArray(O,2),A=M[0],R=M[1],!(A||t.authentication&&(null===(d=R)||void 0===d?void 0:d.id))){e.next=20;break}return D=p({},t.authentication,{resource_id:(null===(P=A)||void 0===P?void 0:P.id)||(null===(j=R)||void 0===j?void 0:j.id),resource_type:(null===(C=A)||void 0===C?void 0:C.id)?"Endpoint":"Application",source_id:l.id}),e.next=19,i.getSourcesApi().createAuthentication(D);case 19:x=e.sent;case 20:return k=[],t.credentials||t.billing_source?(L=t.credentials,z=t.billing_source,I={},I=L?{authentication:{credentials:L}}:{},I=z?p({},I,{billing_source:z}):I,k.push(c.patchSource(p({id:l.id},I)))):h.push(Promise.resolve(void 0)),x&&R?(q={application_id:R.id,authentication_id:x.id},k.push(i.getSourcesApi().createAuthApp(q))):h.push(Promise.resolve(void 0)),e.next=25,Promise.all(k);case 25:if((null===(f=l)||void 0===f?void 0:f.id)&&i.getSourcesApi().checkAvailabilitySource(l.id),!R){e.next=31;break}return B=o.includes(R.application_type_id)?1e4:0,e.next=30,u.checkAppAvailability(R.id,B);case 30:R=e.sent;case 31:if(!A){e.next=35;break}return e.next=34,u.checkAppAvailability(A.id,void 0,void 0,"getEndpoint");case 34:A=e.sent;case 35:return e.abrupt("return",p({},l,{endpoint:[A],applications:[R]}));case 38:return e.prev=38,e.t0=e.catch(1),e.next=42,s.handleError(e.t0,l?l.id:void 0);case 42:throw e.sent;case 44:case"end":return e.stop()}}),e,null,[[1,38]])}))),function(e,t){return d.apply(this,arguments)});t.doCreateSource=m,t.handleErrorWrapper=function(e){return t=a._asyncToGenerator(a._regeneratorRuntime.mark((function t(r){return a._regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.handleError(r,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t},t.parseUrl=f,t.urlOrHost=y},958:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),r(441);var o=r(681),i=r(411),a=r(423),s=r(415),c=r(0),u=n(c),l=r(125),p=n(r(7)),d=n(r(606)),f=r(91),y=r(693);r(520),r(398),r(400),r(524),r(447),r(525),r(433),r(194),r(517),r(518),r(519),r(515),r(78),r(401),r(422),r(449),r(95);var m=r(34);r(92),r(434),r(416),r(417),r(450);var h=r(424);r(397),r(405);var v=r(404),g=r(412);r(465),r(600),r(42),r(56),r(399),r(65),r(37),r(73),r(96),r(402),r(601),r(446),r(602),r(603),r(530),r(485),r(486);var b=r(607);r(466),r(197),r(438),r(484),r(406),r(451),r(407),r(127),r(408);var _=r(604),w=r(488),T=r(922);r(199);var S=r(694);r(204);var E=r(605);r(695);var O=r(696),M=r(697),A=r(698),R=r(52);r(533),r(532);var x=r(923);r(452),r(195);var P=r(699);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){s._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={schema:{},sourceTypes:[],isLoading:!0},k=function(e,t){var r=t.type,n=t.sourceTypes,o=t.applicationTypes,i=t.container,a=t.disableAppSelection,s=t.intl,c=t.selectedType;switch(r){case"loaded":return C({},e,{schema:b.default(n.filter(T.default).filter(T.filterVendorTypes),o.filter(w.default).filter(w.filterVendorAppTypes(n)),a,i,s,c),isLoading:!1,sourceTypes:n})}},L=function(e){var t=e.sourceTypes,r=e.applicationTypes,n=e.disableAppSelection,i=e.isCancelling,s=e.onCancel,l=e.values,p=e.onSubmit,d=e.selectedType,m=c.useReducer(k,D),v=a._slicedToArray(m,2),b=v[0],w=b.schema,T=b.sourceTypes,S=b.isLoading,E=v[1],O=c.useRef(!1),M=c.useRef(document.createElement("div")),A=f.useIntl();return c.useEffect((function(){O.current=!0;var e=[];return t||e.push(g.doLoadSourceTypes()),r||e.push(g.doLoadApplicationTypes()),Promise.all(e).then((function(e){var o=e.find((function(e){return e.hasOwnProperty("sourceTypes")})),i=e.find((function(e){return e.hasOwnProperty("applicationTypes")}));O.current&&E({type:"loaded",sourceTypes:t||o.sourceTypes,applicationTypes:r||i.applicationTypes,disableAppSelection:n,container:M.current,intl:A,selectedType:d})})),function(){O.current=!1}}),[]),c.useEffect((function(){M.current.hidden=i}),[i]),S?u.createElement(y.Wizard,{isOpen:!0,onClose:s,title:h.WIZARD_TITLE(),description:h.WIZARD_DESCRIPTION(),steps:[{name:"Loading",component:u.createElement(_.default,{onClose:function(){return s()}}),isFinishedStep:!0}]}):u.createElement(o.SourcesFormRenderer,{initialValues:C({},l,{},d&&{source_type:d}),schema:w,onSubmit:function(e){return p(e,T)},onCancel:s})};L.propTypes={onCancel:p.func.isRequired,onSubmit:p.func.isRequired,sourceTypes:p.arrayOf(p.shape({id:p.string.isRequired,name:p.string.isRequired,product_name:p.string.isRequired,schema:p.shape({authentication:p.array,endpoint:p.object})})),applicationTypes:p.arrayOf(p.shape({id:p.string.isRequired,name:p.string.isRequired,display_name:p.string.isRequired})),values:p.object,disableAppSelection:p.bool,isCancelling:p.bool,selectedType:p.string},L.defaultProps={values:{},disableAppSelection:!1};var z=function(e){var t=e.id,r=f.useIntl().formatMessage({id:"wizard.editSource",defaultMessage:"Edit source"});return"sources"===insights.chrome.getApp()?u.createElement(R.Link,{to:"/sources/detail/".concat(t)},u.createElement(l.Button,{variant:"primary",className:"pf-u-mt-xl"},r)):u.createElement(l.Button,{variant:"primary",className:"pf-u-mt-xl",component:"a",target:"_blank",href:"".concat(S.computeSourcesUrl(),"/detail/").concat(t),rel:"noopener noreferrer"},r)};z.propTypes={id:p.string.isRequired};var I=function(e){var t,r,n,o,i,s,p=e.afterSubmit,d=e.afterError,v=e.isFinished,b=e.isErrored,w=e.successfulMessage,T=e.hideSourcesButton,R=e.returnButtonTitle,x=e.reset,P=e.createdSource,j=void 0===P?{}:P,C=e.tryAgain,D=e.afterSuccess,k=e.sourceTypes,L=c.useState(),I=a._slicedToArray(L,2),q=I[0],B=I[1],F=c.useState(),N=a._slicedToArray(F,2),V=N[0],W=N[1],G=f.useIntl(),U=u.createElement(l.Button,{variant:"link",onClick:x},G.formatMessage({id:"wizard.addAnotherSource",defaultMessage:"Add another source"}));if(V)s=u.createElement(S.FinishedStep,{onClose:p,title:G.formatMessage({id:"wizard.removeSourceSuccessTitle",defaultMessage:"Removing successful"}),successfulMessage:G.formatMessage({id:"wizard.removeSourceSuccessDescription",defaultMessage:"Source was successfully removed."}),hideSourcesButton:T,returnButtonTitle:R,secondaryActions:U});else if(q)s=u.createElement(_.default,{customText:G.formatMessage({id:"wizard.removingSource",defaultMessage:"Removing source"})});else if(v)switch(A.default(j)){case"unavailable":s=u.createElement(E.default,{onClose:p,secondaryActions:u.createElement(l.Button,{variant:"link",onClick:function(){return B(!0),g.getSourcesApi().removeSource(j.id).then((function(){D&&D(),W(!0)})).catch((function(){return B(!1)}))}},G.formatMessage({id:"wizard.removeSource",defaultMessage:"Remove source"})),Component:function(){return u.createElement(z,{id:j.id})},message:(null===(t=j.applications)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.availability_status_error)||(null===(n=j.endpoint)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.availability_status_error)||G.formatMessage({id:"wizard.unknownError",defaultMessage:"Unknown error"}),title:G.formatMessage({id:"wizard.configurationUnsuccessful",defaultMessage:"Configuration unsuccessful"})});break;case"timeout":s=u.createElement(O.default,{onClose:p,returnButtonTitle:R,secondaryActions:U});break;default:s=j.source_type_id===(null===(i=k.find((function(e){return"amazon"===e.name})))||void 0===i?void 0:i.id)?u.createElement(M.default,{onClose:p}):u.createElement(S.FinishedStep,{onClose:p,successfulMessage:w,hideSourcesButton:T,returnButtonTitle:R,secondaryActions:U})}else s=b?u.createElement(E.default,{onClose:d,primaryAction:C,secondaryActions:u.createElement(m.Text,{component:"a",target:"_blank",href:"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true",rel:"noopener noreferrer"},G.formatMessage({id:"wizard.openTicket",defaultMessage:"Open a support case"})),returnButtonTitle:G.formatMessage({id:"wizard.retryText",defaultMessage:"Retry"})}):u.createElement(_.default,{customText:G.formatMessage({id:"wizard.loadingText",defaultMessage:"Validating credentials"}),description:G.formatMessage({id:"wizard.loadingDescription",defaultMessage:"This could take a minute. If you prefer not to wait, close this dialog and the process will continue."}),onClose:d,cancelTitle:G.formatMessage({id:"wizard.close",defaultMessage:"Close"})});return u.createElement(y.Wizard,{isOpen:!0,onClose:v?p:d,title:h.WIZARD_TITLE(),description:h.WIZARD_DESCRIPTION(),steps:[{name:"Finish",component:s,isFinishedStep:!0}]})};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){s._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}I.propTypes={afterSubmit:p.func.isRequired,afterError:p.func.isRequired,isFinished:p.bool.isRequired,isErrored:p.bool.isRequired,successfulMessage:p.node.isRequired,hideSourcesButton:p.bool,returnButtonTitle:p.node.isRequired,errorMessage:p.node,reset:p.func,createdSource:p.object,tryAgain:p.func,afterSuccess:p.func,sourceTypes:p.arrayOf(p.shape({id:p.string.isRequired,name:p.string.isRequired}))};var F=function(e){return{isSubmitted:!1,isFinished:!1,isErrored:!1,isCancelling:!1,values:e,createdSource:{},error:void 0}},N=function(e,t){var r=t.type,n=t.values,o=t.data,i=t.error,a=t.initialValues,s=t.sourceTypes;switch(r){case"reset":return F(a);case"prepareSubmitState":return B({},e,{isFinished:!1,isErrored:!1,error:void 0,isSubmitted:!0,values:n,sourceTypes:s});case"setSubmitted":return B({},e,{isFinished:!0,createdSource:o});case"setErrored":return B({},e,{isErrored:!0,error:i.toString()});case"onStay":return B({},e,{isCancelling:!1});case"showCancelModal":return B({},e,{isCancelling:!0,values:n})}},V=function(e){var t=e.successfulMessage,r=e.isOpen,n=e.sourceTypes,o=e.applicationTypes,s=e.disableAppSelection,l=e.hideSourcesButton,p=e.returnButtonTitle,f=e.initialValues,y=e.onClose,m=e.afterSuccess,h=e.selectedType,g=c.useReducer(N,F(f)),b=a._slicedToArray(g,2),_=b[0],w=_.isErrored,T=_.isFinished,S=_.isSubmitted,E=_.values,O=_.error,M=_.isCancelling,A=_.createdSource,R=i._objectWithoutProperties(_,["isErrored","isFinished","isSubmitted","values","error","isCancelling","createdSource"]),j=b[1],C=function(e,t){return j({type:"prepareSubmitState",values:e,sourceTypes:t}),x.doCreateSource(e,t,v.timeoutedApps(o)).then((function(e){m&&m(e),j({type:"setSubmitted",data:e})})).catch((function(e){j({type:"setErrored",error:e})}))};return r?S?u.createElement(I,{afterSubmit:function(){y(void 0,A),j({type:"reset",initialValues:f})},afterError:function(){return y({})},isFinished:T,isErrored:w,successfulMessage:t,hideSourcesButton:l,returnButtonTitle:p,errorMessage:O,reset:function(){return j({type:"reset",initialValues:f})},createdSource:A,tryAgain:function(){return C(E,R.sourceTypes)},afterSuccess:m,sourceTypes:R.sourceTypes}):u.createElement(u.Fragment,null,u.createElement(P.default,{isOpen:M,onExit:function(){return y(E)},onStay:function(){return j({type:"onStay"})}}),u.createElement(L,{isCancelling:M,values:E,onSubmit:C,onCancel:function(e){return d(e)?y({}):j({type:"showCancelModal",values:e})},sourceTypes:n,applicationTypes:o,disableAppSelection:s,selectedType:h})):null};V.propTypes={afterSuccess:p.func,sourceTypes:p.arrayOf(p.shape({id:p.string.isRequired,name:p.string.isRequired,product_name:p.string.isRequired,schema:p.shape({authentication:p.array,endpoint:p.object})})),applicationTypes:p.arrayOf(p.shape({id:p.string.isRequired,name:p.string.isRequired,display_name:p.string.isRequired})),onClose:p.func.isRequired,isOpen:p.bool.isRequired,successfulMessage:p.node,initialValues:p.shape(s._defineProperty({},p.string,p.oneOf([p.string,p.array,p.number,p.bool]))),disableAppSelection:p.bool,hideSourcesButton:p.bool,returnButtonTitle:p.node,selectedType:p.string},V.defaultProps={successfulMessage:u.createElement(f.FormattedMessage,{id:"wizard.successfulMessage",defaultMessage:"Your source was successfully added."}),initialValues:{},returnButtonTitle:u.createElement(f.FormattedMessage,{id:"wizard.goBackToSources",defaultMessage:"Go back to Sources"})};t.AddSourceButton=function(e){var t=c.useState(!1),r=a._slicedToArray(t,2),n=r[0],i=r[1];return u.createElement(u.Fragment,null,u.createElement(l.Button,{variant:"primary",onClick:function(){return i(!0)}},h.WIZARD_TITLE()),u.createElement(V,o._extends({isOpen:n,onClose:function(){return i(!1)}},e)))},t.AddSourceWizard=V}}]);
//# sourceMappingURL=../sourcemaps/vendors~addSource.js.map