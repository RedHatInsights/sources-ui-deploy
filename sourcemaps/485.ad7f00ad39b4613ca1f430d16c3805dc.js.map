{"version":3,"file":"js/485.1648215109609.91e89a33ef94a3af5162.js","mappings":"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","sources":["webpack:///./src/components/TilesShared/ImageWithPlaceholder.js","webpack:///./src/marketplace/MarketplaceCard.js","webpack:///./src/marketplace/constants.js","webpack:///./src/marketplace/api.js","webpack:///./src/marketplace/SkeletonMarketplaceCard.js","webpack:///./src/marketplace/MarketplaceModal.js","webpack:///./src/marketplace/SeeMoreCard.js","webpack:///./src/marketplace/RecommendedServices.js"],"sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Loader } from '../SourcesTable/loaders';\n\nconst ImageWithPlaceholder = ({ src, ...rest }) => {\n  const [loaded, setLoaded] = useState(false);\n\n  return (\n    <React.Fragment>\n      {!loaded && <Loader height=\"40px\" width=\"110px\" {...rest} />}\n      <img src={src} onLoad={() => setLoaded(true)} style={{ display: loaded ? 'initial' : 'none' }} {...rest} />\n    </React.Fragment>\n  );\n};\n\nImageWithPlaceholder.propTypes = {\n  src: PropTypes.string.isRequired,\n};\n\nexport default ImageWithPlaceholder;\n","import React from 'react';\nimport { Card, CardTitle, CardBody, CardFooter, Label, Button } from '@patternfly/react-core';\nimport { DatabaseIcon, ExternalLinkAltIcon } from '@patternfly/react-icons';\nimport ImageWithPlaceholder from '../components/TilesShared/ImageWithPlaceholder';\n\nconst MarketplaceCard = (product) => (\n  <Card isFlat className=\"marketplace-card\">\n    <CardTitle className=\"pf-u-pl-md pf-u-pr-md\">\n      <ImageWithPlaceholder src={product.logo_url} className=\"marketplace-card-icon\" />\n      <br />\n      {product.title}\n      <br />\n      <Label className=\"pf-u-mt-sm marketplace-label\" icon={<DatabaseIcon />}>\n        {product.primary_category.display_name}\n      </Label>\n    </CardTitle>\n    <CardBody className=\"marketplace-card-body pf-u-mb-md pf-u-pl-md pf-u-pr-md\" isFilled>\n      {product.description_short}\n    </CardBody>\n    <CardFooter className=\"pf-u-pl-md pf-u-pr-md pf-u-pb-md\">\n      <Button\n        variant=\"link\"\n        isInline\n        icon={<ExternalLinkAltIcon />}\n        iconPosition=\"right\"\n        component=\"a\"\n        href={product.product_page_url}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        Add{' '}\n      </Button>\n    </CardFooter>\n  </Card>\n);\n\nexport default MarketplaceCard;\n","export const MARKETPLACE_URL = 'https://sandbox.marketplace.redhat.com';\nexport const MARKETPLACE_API_BASE = '/api/marketplace-gateway/v1';\n","import { axiosInstance } from '../api/entities';\nimport { MARKETPLACE_API_BASE } from './constants';\n\nexport const getProducts = async (config = { perPage: 10, page: 1 }) =>\n  axiosInstance.get(`${MARKETPLACE_API_BASE}/unstable`, {\n    params: {\n      limit: config.perPage,\n      offset: (config.page - 1) * config.perPage,\n    },\n  });\nexport const getCategories = async () => axiosInstance.get(`${MARKETPLACE_API_BASE}/categories`);\n","import React from 'react';\nimport { Card, CardTitle, CardBody, CardFooter, Skeleton } from '@patternfly/react-core';\n\nconst SkeletonMarketplaceCard = () => (\n  <Card isFlat className=\"marketplace-card\">\n    <CardTitle>\n      <Skeleton role=\"progressbar\" />\n    </CardTitle>\n    <CardBody>\n      <Skeleton role=\"progressbar\" />\n    </CardBody>\n    <CardFooter>\n      <Skeleton role=\"progressbar\" />\n    </CardFooter>\n  </Card>\n);\n\nexport default SkeletonMarketplaceCard;\n","import React, { useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Modal } from '@patternfly/react-core';\nimport { ExternalLinkAltIcon } from '@patternfly/react-icons';\n\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar/PrimaryToolbar';\n\nimport MarketplaceCard from './MarketplaceCard';\nimport { MARKETPLACE_URL } from './constants';\nimport { getCategories, getProducts } from './api';\nimport SkeletonMarketplaceCard from './SkeletonMarketplaceCard';\n\nconst init = (data) => ({\n  page: 1,\n  perPage: 10,\n  itemCount: data?.length || 0,\n  filters: {\n    type: ['database'],\n  },\n  categories: null,\n  isLoading: true,\n  data,\n  loaded: 0,\n});\n\nconst reducer = (state, { type, payload, meta }) => {\n  switch (type) {\n    case 'SET_PAGE':\n      return { ...state, page: payload };\n    case 'SET_PER_PAGE':\n      return { ...state, page: 1, perPage: payload };\n    case 'LOAD_CATEGORIES':\n      return { ...state, categories: payload, isLoading: false };\n    case 'SET_LOADING_DATA':\n      return { ...state, loaded: state.loaded + 1 };\n    case 'LOAD_DATA':\n      return { ...state, loaded: Math.max(state.loaded - 1, 0), data: payload, itemCount: meta.count };\n  }\n};\n\nconst valuesMapper = (value) =>\n  ({\n    database: 'Database',\n  }[value] || value);\n\nexport const chipFormatters = (key, filter) =>\n  ({\n    type: {\n      category: 'Type',\n      chips: filter.map((value) => ({ name: valuesMapper(value) })),\n    },\n  }[key] || { category: key, chips: filter.map((value) => ({ name: value })) });\n\nconst generateChips = (filters) =>\n  Object.keys(filters)\n    .map((key) => (!filters[key] || filters[key]?.length === 0 ? null : chipFormatters(key, filters[key])))\n    .filter(Boolean);\n\nconst MarketplaceModal = ({ data, isOpen, onClose }) => {\n  const [config, dispatch] = useReducer(reducer, data, init);\n\n  const isLoadingData = config.loaded > 0;\n\n  useEffect(() => {\n    isOpen && getCategories().then(({ data }) => dispatch({ type: 'LOAD_CATEGORIES', payload: data }));\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch({ type: 'SET_LOADING_DATA' });\n      getProducts({ perPage: config.perPage, page: config.page }).then(({ data, meta }) =>\n        dispatch({ type: 'LOAD_DATA', payload: data, meta })\n      );\n    }\n  }, [config.page, config.perPage]);\n\n  return (\n    <Modal\n      className=\"sources\"\n      onClose={onClose}\n      isOpen={isOpen}\n      title=\"Browse catalog\"\n      description={\n        <span>\n          A curated selection of offerings available for purchase from{' '}\n          <a href={MARKETPLACE_URL} target=\"_blank\" rel=\"noopener noreferrer\">\n            Red Hat Marketplace <ExternalLinkAltIcon />\n          </a>\n        </span>\n      }\n      variant=\"large\"\n    >\n      {config.isLoading && (\n        <div className=\"pf-u-mb-md marketplace-flex\">\n          <SkeletonMarketplaceCard />\n          <SkeletonMarketplaceCard />\n        </div>\n      )}\n      {!config.isLoading && (\n        <React.Fragment>\n          <PrimaryToolbar\n            useMobileLayout\n            className=\"marketplace-modal-toolbar\"\n            pagination={{\n              itemCount: config.itemCount,\n              page: config.page,\n              perPage: config.perPage,\n              onSetPage: (_e, page) => dispatch({ type: 'SET_PAGE', payload: page }),\n              onPerPageSelect: (_e, perPage) => dispatch({ type: 'SET_PER_PAGE', payload: perPage }),\n              'data-testid': 'pagination',\n            }}\n            filterConfig={{\n              items: [\n                {\n                  label: 'Type',\n                  placeholder: 'Filter by product type',\n                  type: 'checkbox',\n                  filterValues: {\n                    //onChange: (_event, value) => console.log(value),\n                    value: ['database'],\n                    items: config.categories.map((category) => ({\n                      label: category.display_name,\n                      value: category.page_name,\n                      isDisabled: true,\n                    })),\n                  },\n                },\n              ],\n            }}\n            activeFiltersConfig={{\n              showDeleteButton: false,\n              filters: generateChips(config.filters),\n              // onDelete: (_event, chips, deleteAll) => console.log(chips, deleteAll),\n            }}\n          />\n          <div className=\"pf-u-mb-md marketplace-flex\">\n            {!isLoadingData && data.map((product) => <MarketplaceCard key={product.id} {...product} />)}\n            {isLoadingData && (\n              <React.Fragment>\n                <SkeletonMarketplaceCard />\n                <SkeletonMarketplaceCard />\n              </React.Fragment>\n            )}\n          </div>\n        </React.Fragment>\n      )}\n    </Modal>\n  );\n};\n\nMarketplaceModal.propTypes = {\n  data: PropTypes.array,\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func,\n};\n\nexport default MarketplaceModal;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, CardBody, CardFooter, Button } from '@patternfly/react-core';\n\nimport MarketplaceModal from './MarketplaceModal';\n\nconst SeeMoreCard = ({ data }) => {\n  const [isOpen, setOpen] = useState(false);\n\n  return (\n    <React.Fragment>\n      <MarketplaceModal onClose={() => setOpen(false)} data={data} isOpen={isOpen} />\n      <Card isFlat className=\"marketplace-card marketplace-seemore-card\">\n        <CardBody isFilled className=\"pf-u-pl-md pf-u-pr-md card-text\">\n          Not what you’re looking for? Browse the catalog to see more offerings from Red Hat Marketplace.\n        </CardBody>\n        <CardFooter className=\"pf-u-pl-md pf-u-pr-md pf-u-pb-md\">\n          <Button variant=\"primary\" onClick={() => setOpen(true)}>\n            See more databases\n          </Button>\n        </CardFooter>\n      </Card>\n    </React.Fragment>\n  );\n};\n\nSeeMoreCard.propTypes = {\n  data: PropTypes.array,\n};\n\nexport default SeeMoreCard;\n","import React, { useEffect, useState } from 'react';\nimport { Title } from '@patternfly/react-core';\n\nimport './marketplace.scss';\n\nimport MarketplaceCard from './MarketplaceCard';\nimport { getProducts } from './api';\nimport SeeMoreCard from './SeeMoreCard';\nimport SkeletonMarketplaceCard from './SkeletonMarketplaceCard';\n\nconst RecommendedServices = () => {\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    getProducts().then(({ data }) => setData(data));\n  }, []);\n\n  if (data) {\n    return (\n      <div className=\"sources\">\n        <Title headingLevel=\"h4\" size=\"xl\" className=\"pf-u-mb-md\">\n          Recommended services\n        </Title>\n        <div className=\"pf-u-mb-md marketplace-flex\">\n          <MarketplaceCard\n            {...(data.find((product) => product?.product_page_name === 'mongodb-enterprise-advanced') || data[0])}\n          />\n          <SeeMoreCard data={data} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pf-u-mb-md marketplace-flex\">\n      <SkeletonMarketplaceCard />\n      <SkeletonMarketplaceCard />\n    </div>\n  );\n};\n\nexport default RecommendedServices;\n"],"names":["ImageWithPlaceholder","src","rest","useState","loaded","setLoaded","height","width","onLoad","style","display","propTypes","PropTypes","product","Card","isFlat","className","CardTitle","logo_url","title","Label","icon","DatabaseIcon","primary_category","display_name","CardBody","isFilled","description_short","CardFooter","Button","variant","isInline","ExternalLinkAltIcon","iconPosition","component","href","product_page_url","rel","target","MARKETPLACE_API_BASE","getProducts","config","perPage","page","axiosInstance","params","limit","offset","getCategories","Skeleton","role","init","data","itemCount","length","filters","type","categories","isLoading","reducer","state","payload","meta","Math","max","count","valuesMapper","value","database","MarketplaceModal","isOpen","onClose","useReducer","dispatch","isLoadingData","useEffect","then","Modal","description","useMobileLayout","pagination","onSetPage","_e","onPerPageSelect","filterConfig","items","label","placeholder","filterValues","map","category","page_name","isDisabled","activeFiltersConfig","showDeleteButton","Object","keys","key","filter","chips","name","chipFormatters","Boolean","id","SeeMoreCard","setOpen","onClick","setData","Title","headingLevel","size","find","product_page_name"],"sourceRoot":""}