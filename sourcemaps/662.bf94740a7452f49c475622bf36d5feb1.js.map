{"version":3,"file":"js/662.b4cd16ea8f7166811d2f.js","mappings":"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","sources":["webpack:///./src/components/RedirectNoWriteAccess/RedirectNoWriteAccess.js","webpack:///./src/components/RedirectNoPaused/RedirectNoPaused.js","webpack:///./src/components/CustomRoute/CustomRoute.js","webpack:///./src/components/RedirectNoId/RedirectNoId.js","webpack:///./src/hooks/useHasWritePermissions.js","webpack:///./src/hooks/useIsLoaded.js","webpack:///./src/hooks/useSource.js","webpack:///./src/utilities/disabledTooltipProps.js","webpack:///./src/utilities/filterApps.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { addMessage } from '../../redux/sources/actions';\nimport { useHasWritePermissions } from '../../hooks/useHasWritePermissions';\nimport { routes } from '../../Routes';\nimport { disabledMessage } from '../../utilities/disabledTooltipProps';\n\nconst RedirectNoWriteAccess = () => {\n  const intl = useIntl();\n\n  const writePermissions = useHasWritePermissions();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (writePermissions === false) {\n      const title = intl.formatMessage({\n        id: 'sources.insufficietnPerms',\n        defaultMessage: 'Insufficient permissions',\n      });\n      const description = disabledMessage(intl);\n\n      dispatch(addMessage({ title, variant: 'danger', description }));\n    }\n  }, [writePermissions]);\n\n  if (writePermissions === false) {\n    return <Redirect to={routes.sources.path} />;\n  }\n\n  return null;\n};\n\nexport default RedirectNoWriteAccess;\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { addMessage } from '../../redux/sources/actions';\nimport { replaceRouteId, routes } from '../../Routes';\nimport { useSource } from '../../hooks/useSource';\n\nconst RedirectNoPaused = () => {\n  const intl = useIntl();\n  const source = useSource();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (source.paused_at) {\n      dispatch(\n        addMessage({\n          title: intl.formatMessage({\n            id: 'sources.sourcePausedRedirect',\n            defaultMessage: 'Source is paused',\n          }),\n          variant: 'danger',\n          description: intl.formatMessage({\n            id: 'sources.sourcePausedRedirectDescription',\n            defaultMessage: 'You cannot perform this action on a paused source.',\n          }),\n        })\n      );\n    }\n  }, [source.paused_at]);\n\n  if (source.paused_at) {\n    return <Redirect to={replaceRouteId(routes.sourcesDetail.path, source.id)} />;\n  }\n\n  return null;\n};\n\nexport default RedirectNoPaused;\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport { useSource } from '../../hooks/useSource';\nimport RedirectNoWriteAccess from '../RedirectNoWriteAccess/RedirectNoWriteAccess';\nimport RedirectNoId from '../RedirectNoId/RedirectNoId';\nimport RedirectNoPaused from '../RedirectNoPaused/RedirectNoPaused';\n\nconst CustomRouteInternal = ({ route, children }) => {\n  const source = route.redirectNoId && useSource();\n\n  if (!source && route.redirectNoId) {\n    return <RedirectNoId />;\n  }\n\n  return (\n    <React.Fragment>\n      {route.noPaused && <RedirectNoPaused />}\n      {route.writeAccess && <RedirectNoWriteAccess />}\n      {children}\n    </React.Fragment>\n  );\n};\n\nCustomRouteInternal.propTypes = {\n  route: PropTypes.shape({\n    path: PropTypes.string.isRequired,\n    redirectNoId: PropTypes.bool,\n    writeAccess: PropTypes.bool,\n    noPaused: PropTypes.bool,\n  }).isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nconst CustomRoute = ({ route, componentProps, Component, ...props }) => (\n  <Route {...props} path={route.path}>\n    <CustomRouteInternal route={route}>\n      <Component {...componentProps} />\n    </CustomRouteInternal>\n  </Route>\n);\n\nCustomRoute.propTypes = {\n  route: PropTypes.shape({\n    path: PropTypes.string.isRequired,\n    redirectNoId: PropTypes.bool,\n    writeAccess: PropTypes.bool,\n    noPaused: PropTypes.bool,\n  }).isRequired,\n  componentProps: PropTypes.any,\n  Component: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).isRequired,\n};\n\nexport default CustomRoute;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { useParams, Redirect } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { addMessage, addHiddenSource } from '../../redux/sources/actions';\nimport { doLoadSource } from '../../api/entities';\nimport { useIsLoaded } from '../../hooks/useIsLoaded';\nimport { routes } from '../../Routes';\nimport { useSource } from '../../hooks/useSource';\n\nconst RedirectNoId = () => {\n  const { id } = useParams();\n  const intl = useIntl();\n  const source = useSource();\n\n  const loaded = useIsLoaded();\n\n  const { appTypesLoaded, sourceTypesLoaded } = useSelector(({ sources }) => sources, shallowEqual);\n  const dispatch = useDispatch();\n\n  const [applicationIsLoaded, setIsApplicationLoaded] = useState(false);\n\n  useEffect(() => {\n    if (loaded && appTypesLoaded && sourceTypesLoaded) {\n      doLoadSource(id)\n        .then(({ sources: [source] }) => {\n          dispatch(addHiddenSource(source));\n          return source;\n        })\n        .then((source) => {\n          if (!source) {\n            dispatch(\n              addMessage({\n                title: intl.formatMessage({\n                  id: 'sources.sourceNotFoundTitle',\n                  defaultMessage: 'Requested source was not found',\n                }),\n                variant: 'danger',\n                description: intl.formatMessage(\n                  {\n                    id: 'sources.sourceNotFoundTitleDescription',\n                    defaultMessage: 'Source with { id } was not found. Try it again later.',\n                  },\n                  { id }\n                ),\n              })\n            );\n          }\n\n          setIsApplicationLoaded(true);\n        });\n    }\n  }, [loaded, appTypesLoaded, sourceTypesLoaded]);\n\n  if (applicationIsLoaded && !source) {\n    return <Redirect to={routes.sources.path} />;\n  }\n\n  return null;\n};\n\nexport default RedirectNoId;\n","import { useSelector } from 'react-redux';\n\nexport const useHasWritePermissions = () => {\n  const writePermissions = useSelector(({ user }) => user?.writePermissions);\n\n  if (typeof writePermissions !== 'boolean') {\n    return undefined;\n  }\n\n  return !!writePermissions;\n};\n","import { useSelector } from 'react-redux';\n\nexport const useIsLoaded = () => {\n  const isLoaded = useSelector(({ sources }) => sources.loaded);\n\n  return isLoaded <= 0;\n};\n","import { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nexport const useSource = () => {\n  const { id } = useParams();\n  const source = useSelector(({ sources }) => sources.entities.find((source) => source.id === id));\n\n  return source;\n};\n","export const disabledMessage = (intl) =>\n  intl.formatMessage({\n    id: 'sources.notAdminButton',\n    defaultMessage:\n      'To perform this action, you must be granted Sources Administrator permissions from your Organization Administrator.',\n  });\n\nconst disabledTooltipProps = (intl) => ({\n  tooltip: disabledMessage(intl),\n  isDisabled: true,\n  className: 'src-m-dropdown-item-disabled',\n});\n\nexport default disabledTooltipProps;\n","import { CLOUD_VENDOR, REDHAT_VENDOR, TOPOLOGY_INV_NAME } from './constants';\n\nconst filterApps = (type) => type.name !== TOPOLOGY_INV_NAME;\n\nexport const filterVendorAppTypes =\n  (sourceTypes, activeVendor) =>\n  ({ supported_source_types }) =>\n    supported_source_types.find((type) =>\n      activeVendor === CLOUD_VENDOR\n        ? (sourceTypes.find(({ name }) => type === name)?.vendor || REDHAT_VENDOR) !== REDHAT_VENDOR\n        : sourceTypes.find(({ name }) => type === name)?.vendor === REDHAT_VENDOR\n    );\n\nexport default filterApps;\n"],"names":["intl","useIntl","writePermissions","useHasWritePermissions","dispatch","useDispatch","useEffect","title","formatMessage","id","defaultMessage","description","disabledMessage","addMessage","variant","Redirect","to","routes","source","useSource","paused_at","replaceRouteId","CustomRouteInternal","route","children","redirectNoId","noPaused","writeAccess","RedirectNoId","propTypes","PropTypes","path","isRequired","CustomRoute","componentProps","Component","props","Route","useParams","loaded","useIsLoaded","useSelector","sources","shallowEqual","appTypesLoaded","sourceTypesLoaded","useState","applicationIsLoaded","setIsApplicationLoaded","doLoadSource","then","addHiddenSource","user","entities","find","tooltip","isDisabled","className","filterVendorAppTypes","sourceTypes","activeVendor","supported_source_types","type","CLOUD_VENDOR","name","vendor","REDHAT_VENDOR","TOPOLOGY_INV_NAME"],"sourceRoot":""}