{"version":3,"sources":["webpack:///./src/components/EditField/EditField.js","webpack:///./src/utilities/SourcesFormRenderer.js","webpack:///./src/components/AddApplication/RemoveAppModal.js","webpack:///./src/components/ApplicationsList/ApplicationList.js","webpack:///./src/components/AddApplication/AddApplicationDescription.js","webpack:///./src/components/AddApplication/AuthTypeSetter.js","webpack:///./src/components/AddApplication/AuthTypeCleaner.js","webpack:///./src/components/AddApplication/AddApplicationSchema.js","webpack:///./src/components/AddApplication/steps/LoadingStep.js","webpack:///./src/components/AddApplication/steps/ErroredStep.js","webpack:///./src/components/AddApplication/steps/FinishedStep.js","webpack:///./src/components/AddApplication/WizardBody.js","webpack:///./src/components/AddApplication/steps/createProgressTextsApp.js","webpack:///./src/api/doAttachApp.js","webpack:///./src/components/AddApplication/reducer.js","webpack:///./src/components/AddApplication/AddApplication.js"],"names":["EDIT_FIELD_NAME","EditField","props","useFieldApi","isRequired","label","helperText","hideLabel","meta","input","type","setEdit","error","showError","touched","value","emptyText","name","includes","fieldId","isValid","helperTextInvalid","onClick","undefined","tabIndex","onKeyPress","e","charCode","preventDefault","className","propTypes","PropTypes","node","bool","func","string","SourcesFormRenderer","FormTemplate","componentMapper","mapperExtension","componentTypes","SWITCH","validatorMapper","validatorTypes","REQUIRED","PATTERN","MIN_LENGTH","URL","RemoveAppModal","app","onCancel","intl","useIntl","appTypes","useSelector","sources","source","useSource","dispatch","useDispatch","dependentApps","dependent_applications","map","appName","appType","find","sourceAppsNames","display_name","filter","x","Modal","title","isOpen","isSmall","onClose","isFooterLeftAligned","actions","Button","id","key","variant","titleSuccess","formatMessage","defaultMessage","titleError","removeApplication","Split","gutter","SplitItem","size","isFilled","Stack","TextContent","Text","component","TextVariants","p","values","length","apps","shape","arrayOf","ApplicationList","setApplicationToRemove","breakpoints","namePrefix","applications","application_type_id","isDeleting","sort","a","b","localeCompare","GridItem","md","style","marginBottom","remove","ButtonVariant","link","isInline","number","defaultProps","AddApplicationDescription","useState","removingApp","sourceTypes","sourceType","source_type_id","Fragment","Grid","h4","product_name","AuthTypeSetter","authenticationValues","modifiedValues","formOptions","useFormApi","selectedAuthentication","getState","initialValue","setInitialValue","useEffect","authentication","newAuthenticationValues","merge","cloneDeep","change","innerSetter","object","AuthTypeCleaner","selectedAppId","get","batch","NoAvailableApplicationDescription","ApplicationSummary","SelectAuthenticationDescription","applicationTypeName","authenticationTypeName","hasAlreadySupportedAuthType","authValues","sourceTypeName","authtype","generateAuthSelectionOptions","applicationTypes","supportedAuthTypeName","supportedAuthType","authentications","includeUsername","username","includeAppName","selectAuthenticationStep","fields","Content","hideField","forEach","push","SUB_FORM","condition","when","is","RADIO","validate","options","nextStep","application","appId","container","hasAvailableApps","authenticationFields","imported","appendEndpoint","schema","endpoint","hidden","hasEndpointStep","supported_source_types","schemaBuilder","createSpecificAuthTypeSelection","auth","appAdditionalSteps","getAdditionalSteps","createAdditionalSteps","createEndpointStep","applicationSelection","DefaultIcon","selectionSteps","WIZARD","inModal","predictSteps","showTitles","crossroads","description","buttonLabels","submit","cancel","back","LoadingStep","customText","progressStep","progressTexts","Bullseye","EmptyState","EmptyStateVariant","full","EmptyStateIcon","icon","Spinner","color","EmptyStateBody","Progress","min","max","valueText","EmptyStateSecondaryActions","ErroredStepAttach","onReset","goToSources","TimesCircleIcon","Title","headingLevel","h6","FinishedStepAttach","CheckCircleIcon","WizardBodyAttach","step","Wizard","steps","isFinishedStep","createProgressTextsApp","filteredValues","allFormValues","progressText","isEmpty","removeEmpty","obj","Object","keys","doAttachApp","formApi","authenticationInitialValues","initialValues","setState","formState","selectedAuthId","authInitialValues","valuesWithoutAuth","newAddedValues","addedDiff","updatedValues","updatedDiff","newAddedAuthValues","updatedAuthValues","sourceId","endpointId","promises","getSourcesApi","updateSource","Promise","resolve","hasModifiedEndpoint","hasModifiedUrl","url","urlOrHost","scheme","host","port","path","endPointPort","parseInt","endpointData","isNaN","updateEndpoint","createEndpointData","default","source_id","createEndpoint","updateAuthentication","authenticationData","resource_id","resource_type","createAuthentication","doCreateApplication","all","authenticationDataOut","applicationDataOut","authenticationId","promisesSecondRound","authAppData","application_id","authentication_id","createAuthApp","credentials","billing_source","data","patchSource","handleError","initialState","state","authenticationsValues","sourceAppsLength","isCancelling","reducer","selectedApp","saveSelectedApp","onSubmit","then","checkSourceStatus","loadEntities","FormTemplateWrapper","showFormControls","AddApplication","history","useHistory","loaded","useIsLoaded","shallowEqual","sourceTypesLoaded","appTypesLoaded","useReducer","useRef","document","createElement","removeAppAction","endpoints","listEndpointAuthentications","endpointToUrl","routes","WizardBody","shownStep","FinishedStep","ErroredStep","appIds","reduce","acc","filteredAppTypes","filterApps","availableAppTypes","hasDeletingApp","isDisabled","createSchema","current","onSubmitFinal","finalValues","onStay","onExit","subscription","debug","clearedValue"],"mappings":"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","file":"js/addApp.214168f7c2541a4ea605.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport PencilAltIcon from '@patternfly/react-icons/dist/js/icons/pencil-alt-icon';\n\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/dist/cjs/use-field-api';\n\nexport const EDIT_FIELD_NAME = 'edit-field';\n\nconst EditField = (props) => {\n    const { isRequired, label, helperText, hideLabel, meta, input, type, setEdit } = useFieldApi(props);\n\n    const { error, touched } = meta;\n    const showError = touched && error;\n\n    let value = input.value;\n\n    if (typeof value === 'boolean') {\n        value = value ? 'True' : 'False';\n    }\n\n    const isPassword = type === 'password' || input.name.includes('password');\n    const emptyText = isPassword ? 'Click to edit' : 'Click to add';\n\n    return (\n        <FormGroup\n            isRequired={ isRequired }\n            label={ !hideLabel && label }\n            fieldId={ input.name }\n            isValid={ !showError }\n            helperText={ helperText }\n            helperTextInvalid={ error }\n            onClick={setEdit ? () => setEdit(input.name) : undefined}\n            tabIndex={0}\n            onKeyPress={(e) => {\n                if (e.charCode === 32 && setEdit) {\n                    e.preventDefault();\n                    setEdit(input.name);\n                }\n            }}\n        >\n            <div className={`pf-c-form__horizontal-group ins-c-sources__edit-field-group ${setEdit ? 'clickable' : ''}`}>\n                <TextContent className={`ins-c-sources__edit-field-group-text-content ${setEdit ? 'clickable' : ''}`}>\n                    <span className=\"ins-c-sources__edit-field-value pf-u-mr-sm\">\n                        {value ? value : setEdit ? emptyText : ''}\n                    </span>\n                    {setEdit && <PencilAltIcon />}\n                </TextContent>\n            </div>\n        </FormGroup>\n    );\n};\n\nEditField.propTypes = {\n    label: PropTypes.node,\n    isRequired: PropTypes.bool,\n    helperText: PropTypes.node,\n    hideLabel: PropTypes.bool,\n    setEdit: PropTypes.func,\n    type: PropTypes.string\n};\n\nexport default EditField;\n","import React from 'react';\n\nimport FormRenderer from '@data-driven-forms/react-form-renderer/dist/cjs/form-renderer';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\nimport validatorMapper from '@data-driven-forms/react-form-renderer/dist/cjs/validator-mapper';\n\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/dist/cjs/component-mapper';\n\nimport { mapperExtension } from '@redhat-cloud-services/frontend-components-sources';\n\nimport EditField from '../components/EditField/EditField';\n\nconst SourcesFormRenderer = props => (\n    <FormRenderer\n        FormTemplate={FormTemplate}\n        componentMapper={{\n            ...componentMapper,\n            ...mapperExtension,\n            'edit-field': EditField,\n            'switch-field': componentMapper[componentTypes.SWITCH]\n        }}\n        validatorMapper={{\n            'required-validator': validatorMapper[validatorTypes.REQUIRED],\n            'pattern-validator': validatorMapper[validatorTypes.PATTERN],\n            'min-length-validator': validatorMapper[validatorTypes.MIN_LENGTH],\n            'url-validator': validatorMapper[validatorTypes.URL]\n        }}\n        {...props}\n    />\n);\n\nexport default SourcesFormRenderer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useIntl, FormattedMessage } from 'react-intl';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { Split } from '@patternfly/react-core/dist/js/layouts/Split/Split';\nimport { SplitItem } from '@patternfly/react-core/dist/js/layouts/Split/SplitItem';\nimport { Stack } from '@patternfly/react-core/dist/js/layouts/Stack/Stack';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal/Modal';\n\nimport ExclamationTriangleIcon from '@patternfly/react-icons/dist/js/icons/exclamation-triangle-icon';\n\nimport { removeApplication } from '../../redux/sources/actions';\nimport { useSource } from '../../hooks/useSource';\n\nconst RemoveAppModal = ({ app, onCancel }) => {\n    const intl = useIntl();\n\n    const appTypes = useSelector(({ sources }) => sources.appTypes);\n    const source = useSource();\n\n    const dispatch = useDispatch();\n\n    const dependentApps = app.dependent_applications.map(appName => {\n        const appType = appTypes.find(({ name }) => name === appName);\n\n        return appType ? app.sourceAppsNames.includes(appType.display_name) ? appType.display_name : undefined : undefined;\n    }).filter(x => x);\n\n    const onSubmit = () => {\n        const titleSuccess = intl.formatMessage({\n            id: 'sources.removeAppWarning',\n            defaultMessage: `{ name } was removed from this source.`\n        },\n        {\n            name: app.display_name\n        });\n        const titleError = intl.formatMessage({\n            id: 'sources.removeAppError',\n            defaultMessage: `Removing of { name } application from this source was unsuccessful.`\n        }, {\n            name: app.display_name\n        });\n        onCancel();\n        return dispatch(removeApplication(app.id, source.id, titleSuccess, titleError));\n    };\n\n    return (\n        <Modal\n            className=\"ins-c-sources__dialog--warning\"\n            title={`Remove ${app.display_name} application`}\n            isOpen={true}\n            isSmall\n            onClose={onCancel}\n            isFooterLeftAligned\n            actions={[\n                <Button\n                    id=\"deleteSubmit\" key=\"submit\" variant=\"danger\" type=\"button\" onClick={ onSubmit }\n                >\n                    <FormattedMessage\n                        id=\"sources.remove\"\n                        defaultMessage=\"Remove\"\n                    />\n                </Button>,\n                <Button id=\"deleteCancel\" key=\"cancel\" variant=\"link\" type=\"button\" onClick={ onCancel }>\n                    <FormattedMessage\n                        id=\"sources.cancel\"\n                        defaultMessage=\"Cancel\"\n                    />\n                </Button>\n            ]}\n        >\n            <Split gutter=\"md\">\n                <SplitItem><ExclamationTriangleIcon size=\"xl\" className=\"ins-m-alert ins-c-source__delete-icon\" /></SplitItem>\n                <SplitItem isFilled>\n                    <Stack gutter=\"md\">\n                        <TextContent>\n                            <Text component={TextVariants.p}>\n                                <FormattedMessage\n                                    id=\"sources.deleteAppWarning\"\n                                    defaultMessage={`Are you sure to remove { appName } from this source?`}\n                                    values={{\n                                        appName: app.display_name\n                                    }}\n                                />\n                            </Text>\n                            {dependentApps.length > 0 && <Text component={TextVariants.p}>\n                                <FormattedMessage\n                                    id=\"sources.deleteAppDetails\"\n                                    defaultMessage={`This change will affect these applications: { apps }.`}\n                                    values={{\n                                        apps: dependentApps\n                                    }}\n                                />\n                            </Text>}\n                        </TextContent>\n                    </Stack>\n                </SplitItem>\n            </Split>\n        </Modal>\n    );\n};\n\nRemoveAppModal.propTypes = {\n    app: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        display_name: PropTypes.string.isRequired,\n        dependent_applications: PropTypes.arrayOf(PropTypes.string),\n        sourceAppsNames: PropTypes.arrayOf(PropTypes.string)\n    }).isRequired,\n    onCancel: PropTypes.func.isRequired\n};\n\nexport default RemoveAppModal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { Button, ButtonVariant } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { Grid } from '@patternfly/react-core/dist/js/layouts/Grid/Grid';\nimport { GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/GridItem';\n\nimport { useSource } from '../../hooks/useSource';\n\nconst ApplicationList = ({ setApplicationToRemove, breakpoints, namePrefix }) => {\n    const appTypes = useSelector(({ sources }) => sources.appTypes);\n    const source = useSource();\n\n    const sourceAppsNames = source.applications\n    .map(({ application_type_id }) => {\n        const appType = appTypes.find(({ id }) => id === application_type_id);\n        return appType ? appType.display_name : undefined;\n    });\n\n    return source.applications\n    .filter((app) => !app.isDeleting)\n    .map((app) => {\n        const type = appTypes.find((appType) => appType.id === app.application_type_id);\n\n        if (type) {\n            return {\n                display_name: type.display_name,\n                id: app.id,\n                dependent_applications: type.dependent_applications\n            };\n        }\n    })\n    .sort((a, b) => a.display_name.localeCompare(b.display_name))\n    .map(({ display_name, id, dependent_applications }) => (\n        <TextContent key={id}>\n            <Grid>\n                <GridItem md={breakpoints.display_name || 4}>\n                    <Text component={TextVariants.p} style={{ marginBottom: 0 }}>\n                        { namePrefix }{ display_name }\n                    </Text>\n                </GridItem>\n                <GridItem md={breakpoints.remove || 8} className=\"ins-c-sources__remove-app\">\n                    <Button\n                        variant={ButtonVariant.link}\n                        isInline\n                        onClick={() => setApplicationToRemove({ id, display_name, dependent_applications, sourceAppsNames })}\n                    >\n                        <FormattedMessage\n                            id=\"sources.remove\"\n                            defaultMessage=\"Remove\"\n                        />\n                    </Button>\n                </GridItem>\n            </Grid>\n        </TextContent>\n    ));\n};\n\nApplicationList.propTypes = {\n    setApplicationToRemove: PropTypes.func.isRequired,\n    breakpoints: PropTypes.shape({\n        display_name: PropTypes.number,\n        remove: PropTypes.number\n    }),\n    namePrefix: PropTypes.node\n};\n\nApplicationList.defaultProps = {\n    breakpoints: {}\n};\n\nexport default ApplicationList;\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { Grid, GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/index';\n\nimport RemoveAppModal from './RemoveAppModal';\nimport ApplicationList from '../ApplicationsList/ApplicationList';\nimport { useSource } from '../../hooks/useSource';\n\nconst AddApplicationDescription = () => {\n    const [removingApp, setApplicationToRemove] = useState({});\n\n    const sourceTypes = useSelector(({ sources }) => sources.sourceTypes);\n    const source = useSource();\n\n    const sourceType = sourceTypes.find((type) => type.id === source.source_type_id);\n    const apps = source.applications.filter((app) => !app.isDeleting);\n\n    return (\n        <React.Fragment>\n            {removingApp.id && <RemoveAppModal\n                app={removingApp}\n                onCancel={() => setApplicationToRemove({})}\n            />}\n            <TextContent>\n                <Grid gutter=\"md\">\n                    <GridItem md={2}>\n                        <Text component={TextVariants.h4}>\n                            <FormattedMessage\n                                id=\"sources.sourceName\"\n                                defaultMessage=\"Source name\"\n                            />\n                        </Text>\n                    </GridItem>\n                    <GridItem md={2}>\n                        <Text component={TextVariants.h4}>\n                            <FormattedMessage\n                                id=\"sources.type\"\n                                defaultMessage=\"Type\"\n                            />\n                        </Text>\n                    </GridItem>\n                    <GridItem md={8}>\n                        <Text component={TextVariants.h4}>\n                            <FormattedMessage\n                                id=\"sources.apps\"\n                                defaultMessage=\"Applications\"\n                            />\n                        </Text>\n                    </GridItem>\n                    <GridItem md={2}>\n                        <Text component={TextVariants.p}>\n                            {source.name}\n                        </Text>\n                    </GridItem>\n                    <GridItem md={2}>\n                        <Text component={TextVariants.p}>\n                            { sourceType ? sourceType.product_name : <FormattedMessage\n                                id=\"sources.typeNotFound\"\n                                defaultMessage=\"Type not found\"\n                            />}\n                        </Text>\n                    </GridItem>\n                    <GridItem md={8}>\n                        {apps.length > 0 ? <ApplicationList setApplicationToRemove={setApplicationToRemove}/> : <FormattedMessage\n                            id=\"sources.noApps\"\n                            defaultMessage=\"No applications\"\n                        />}\n                    </GridItem>\n                </Grid>\n            </TextContent>\n        </React.Fragment>\n    );\n};\n\nexport default AddApplicationDescription;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport merge from 'lodash/merge';\nimport cloneDeep from 'lodash/cloneDeep';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/cjs/use-form-api';\n\nexport const innerSetter = ({\n    formOptions,\n    modifiedValues,\n    authenticationValues,\n    selectedAuthentication\n}) => {\n    if (selectedAuthentication !== 'new') {\n        const authentication = authenticationValues.find(({ id }) => id === selectedAuthentication);\n\n        if (modifiedValues && modifiedValues.authentication) {\n            const newAuthenticationValues = merge(cloneDeep(authentication), modifiedValues.authentication);\n            formOptions.change('authentication', newAuthenticationValues);\n        } else {\n            formOptions.change('authentication', authentication);\n        }\n    } else {\n        if (modifiedValues && modifiedValues.authentication) {\n            formOptions.change('authentication', modifiedValues.authentication);\n        } else {\n            formOptions.change('authentication', undefined);\n        }\n    }\n};\n\nexport const AuthTypeSetter = ({ authenticationValues, modifiedValues }) => {\n    const formOptions = useFormApi();\n\n    const selectedAuthentication = formOptions.getState().values.selectedAuthentication;\n\n    const [initialValue, setInitialValue] = useState(selectedAuthentication);\n\n    useEffect(() => {\n        if (initialValue !== selectedAuthentication) {\n            innerSetter({ formOptions, authenticationValues, modifiedValues, selectedAuthentication });\n            setInitialValue(undefined);\n        }\n    }, [selectedAuthentication]);\n\n    return null;\n};\n\nAuthTypeSetter.propTypes = {\n    authenticationValues: PropTypes.arrayOf(PropTypes.object),\n    modifiedValues: PropTypes.object\n};\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/cjs/use-form-api';\n\nexport const AuthTypeCleaner = ({ modifiedValues }) => {\n    const formOptions = useFormApi();\n\n    const selectedAppId = get(formOptions.getState().values, 'application.application_type_id', '');\n\n    const [initialValue, setInitialValue] = useState(selectedAppId);\n\n    useEffect(() => {\n        if (initialValue !== selectedAppId) {\n            const values = modifiedValues && modifiedValues.authentication ? modifiedValues.authentication : undefined;\n            formOptions.batch(() => {\n                formOptions.change('authentication', values);\n                formOptions.change('selectedAuthentication', undefined);\n            });\n            setInitialValue(undefined);\n        }\n    }, [selectedAppId]);\n\n    return null;\n};\n\nAuthTypeCleaner.propTypes = {\n    modifiedValues: PropTypes.object\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { componentTypes, validatorTypes } from '@data-driven-forms/react-form-renderer';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\n\nimport { FormattedMessage } from 'react-intl';\nimport { schemaBuilder } from '@redhat-cloud-services/frontend-components-sources';\nimport get from 'lodash/get';\n\nimport AddApplicationDescription from './AddApplicationDescription';\nimport { AuthTypeSetter } from './AuthTypeSetter';\nimport { AuthTypeCleaner } from './AuthTypeCleaner';\n\nexport const NoAvailableApplicationDescription = () => (<TextContent>\n    <Text component={ TextVariants.p }>\n        <FormattedMessage\n            id=\"sources.allApplicationsAssigned\"\n            defaultMessage=\"All available applications have already been added to this source\n        or there is no available application for this source type.\"\n        />\n    </Text>\n</TextContent>);\n\nexport const ApplicationSummary = () => (<TextContent>\n    <Text component={ TextVariants.p }>\n        <FormattedMessage\n            id=\"sources.reviewAddAppSummary\"\n            defaultMessage=\"Review the information below and click Add to add the application to your source.\n            Use the Back button to make changes.\"\n        />\n    </Text>\n</TextContent>);\n\nexport const SelectAuthenticationDescription = ({ applicationTypeName, authenticationTypeName }) => (\n    <TextContent>\n        <Text component={ TextVariants.p }>\n            <FormattedMessage\n                id=\"sources.selectAuthenticationDescription\"\n                defaultMessage=\"Selected application { applicationTypeName } supports { authenticationTypeName } authentication\n                type. You can use already defined authentication values or define new.\"\n                values={{ applicationTypeName, authenticationTypeName }}\n            />\n        </Text>\n    </TextContent>\n);\n\nSelectAuthenticationDescription.propTypes = {\n    applicationTypeName: PropTypes.string,\n    authenticationTypeName: PropTypes.string\n};\n\nexport const hasAlreadySupportedAuthType = (authValues = [], appType, sourceTypeName) =>\n    authValues.find(({ authtype }) => authtype === get(appType, `supported_authentication_types.${sourceTypeName}[0]`));\n\nconst generateAuthSelectionOptions = ({\n    source, authenticationValues, applicationTypes, supportedAuthTypeName, supportedAuthType\n}) => authenticationValues.filter(({ authtype }) => authtype === supportedAuthType).map((values) => {\n    const app = source.applications.find(({ authentications }) => authentications.find(({ id }) => id === values.id));\n\n    const appType = app && app.application_type_id ? applicationTypes.find(({ id }) => id === app.application_type_id) : '';\n\n    const includeUsername = values.username ? `-${values.username}` : '';\n    const includeAppName = appType ? `-${appType.display_name}` : `-unused-${values.id}`;\n    const label = `${supportedAuthTypeName}${includeUsername}${includeAppName}`;\n\n    return {\n        label,\n        value: values.id,\n    };\n});\n\nexport const selectAuthenticationStep = ({\n    intl, source, authenticationValues, sourceType, applicationTypes, modifiedValues\n}) => {\n    const nextStep = ({ values: { application } }) => {\n        const app = application ? application : {};\n        const appId = app.application_type_id ? app.application_type_id : '';\n\n        return `${sourceType.name}-${appId}`;\n    };\n\n    const fields = [{\n        component: 'description',\n        name: 'authtypesetter',\n        Content: AuthTypeSetter,\n        authenticationValues,\n        hideField: true,\n        modifiedValues\n    }];\n\n    applicationTypes.forEach((app) => {\n        const supportedAuthType = get(app, `supported_authentication_types[${sourceType.name}][0]`, '');\n\n        if (supportedAuthType && hasAlreadySupportedAuthType(authenticationValues, app, sourceType.name)) {\n            const supportedAuthTypeName =\n                get(sourceType, `schema.authentication`, {}).find(({ type }) => type === supportedAuthType).name;\n\n            fields.push({\n                component: componentTypes.SUB_FORM,\n                name: `${app.name}-subform`,\n                condition: {\n                    when: 'application.application_type_id',\n                    is: app.id\n                },\n                fields: [\n                    {\n                        name: `${app.name}-select-authentication-summary`,\n                        component: 'description',\n                        Content: SelectAuthenticationDescription,\n                        applicationTypeName: app.display_name,\n                        authenticationTypeName: supportedAuthTypeName,\n                    },\n                    {\n                        component: componentTypes.RADIO,\n                        name: 'selectedAuthentication',\n                        label: intl.formatMessage({\n                            id: 'sources.selectAuthenticationTitle',\n                            defaultMessage: 'Select authentication'\n                        }),\n                        isRequired: true,\n                        validate: [{ type: validatorTypes.REQUIRED }],\n                        options: [\n                            {\n                                label: intl.formatMessage({\n                                    id: 'sources.selectAuthenticationradioLabel',\n                                    defaultMessage: 'Define new { supportedAuthTypeName }'\n                                }, { supportedAuthTypeName }),\n                                value: 'new'\n                            },\n                            ...generateAuthSelectionOptions(\n                                { authenticationValues, source, applicationTypes, supportedAuthTypeName, supportedAuthType }\n                            )\n                        ]\n                    },\n                ]\n            });\n        }\n    });\n\n    return ({\n        name: 'selectAuthentication',\n        title: intl.formatMessage({\n            id: 'sources.selectAuthenticationTitle',\n            defaultMessage: 'Select authentication'\n        }),\n        fields,\n        nextStep\n    });\n};\n\nconst fields = (\n    applications = [], intl, sourceTypes, applicationTypes, authenticationValues, source, modifiedValues, container\n) => {\n    const hasAvailableApps = applications.length > 0;\n\n    let nextStep = hasAvailableApps ? 'summary' : undefined;\n    let authenticationFields = [];\n    const sourceType = sourceTypes.find(({ id }) => id === source.source_type_id);\n\n    if (!source.imported && hasAvailableApps) {\n        const appendEndpoint = sourceType.schema.endpoint.hidden ? sourceType.schema.endpoint.fields : [];\n        const hasEndpointStep = appendEndpoint.length === 0;\n\n        applicationTypes.forEach(appType => {\n            if (appType.supported_source_types.includes(sourceType.name)) {\n                authenticationFields.push(\n                    schemaBuilder.createSpecificAuthTypeSelection(\n                        sourceType,\n                        appType,\n                        appendEndpoint,\n                        false,\n                    )\n                );\n            }\n        });\n\n        sourceType.schema.authentication.forEach(auth => {\n            applicationTypes.forEach(appType => {\n                if (appType.supported_source_types.includes(sourceType.name)) {\n                    const appAdditionalSteps = schemaBuilder.getAdditionalSteps(sourceType.name, auth.type, appType.name);\n\n                    if (appAdditionalSteps.length > 0) {\n                        authenticationFields.push(\n                            ...schemaBuilder.createAdditionalSteps(\n                                appAdditionalSteps,\n                                sourceType.name,\n                                auth.type,\n                                hasEndpointStep,\n                                auth.fields,\n                                appType.name,\n                            )\n                        );\n                    }\n                }\n            });\n        });\n\n        if (hasEndpointStep) {\n            authenticationFields.push(schemaBuilder.createEndpointStep(sourceType.schema.endpoint, sourceType.name));\n        }\n\n        nextStep = ({ values: { application } }) => {\n            if (application) {\n                if (\n                    hasAlreadySupportedAuthType(\n                        authenticationValues,\n                        applicationTypes.find(({ id }) => id === application.application_type_id),\n                        sourceType.name\n                    )\n                ) {\n                    return 'selectAuthentication';\n                }\n\n                return `${sourceType.name}-${application && application.application_type_id}`;\n            }\n        };\n    }\n\n    const applicationSelection = hasAvailableApps ? {\n        component: 'card-select',\n        name: 'application.application_type_id',\n        options: applications,\n        label: intl.formatMessage({\n            id: 'sources.chooseAppToAdd',\n            defaultMessage: 'Choose an application to add'\n        }),\n        DefaultIcon: null,\n        isRequired: true,\n        validate: [{\n            type: validatorTypes.REQUIRED\n        }]\n    } : {\n        component: 'description',\n        name: 'description-no-options',\n        validate: [{\n            type: validatorTypes.REQUIRED\n        }],\n        Content: NoAvailableApplicationDescription\n    };\n\n    const selectionSteps = [];\n\n    if (!source.imported && hasAvailableApps) {\n        selectionSteps.push(\n            selectAuthenticationStep({ intl, source, authenticationValues, sourceType, applicationTypes, modifiedValues })\n        );\n    }\n\n    return ({\n        fields: [\n            {\n                component: componentTypes.WIZARD,\n                name: 'wizard',\n                title: intl.formatMessage({\n                    id: 'sources.manageApps',\n                    defaultMessage: 'Manage applications'\n                }),\n                inModal: true,\n                container,\n                predictSteps: true,\n                showTitles: true,\n                crossroads: ['application.application_type_id', 'selectedAuthentication'],\n                description: intl.formatMessage({\n                    id: 'sources.addAppDescription',\n                    defaultMessage: 'You are managing applications of this source.'\n                }),\n                buttonLabels: {\n                    submit: hasAvailableApps ? intl.formatMessage({\n                        id: 'sources.add',\n                        defaultMessage: 'Add'\n                    }) : intl.formatMessage({\n                        id: 'sources.close',\n                        defaultMessage: 'Close'\n                    }),\n                    cancel: intl.formatMessage({\n                        id: 'sources.cancel',\n                        defaultMessage: 'Cancel'\n                    }),\n                    back: intl.formatMessage({\n                        id: 'sources.back',\n                        defaultMessage: 'Back'\n                    })\n                },\n                fields: [\n                    {\n                        nextStep,\n                        title: intl.formatMessage({\n                            id: 'sources.selectApp',\n                            defaultMessage: 'Select application'\n                        }),\n                        name: 'selectAppStep',\n                        fields: [\n                            {\n                                component: 'description',\n                                name: 'description',\n                                Content: AddApplicationDescription\n                            },\n                            applicationSelection,\n                            {\n                                component: 'description',\n                                name: 'authtypesetter',\n                                Content: AuthTypeCleaner,\n                                hideField: true,\n                                modifiedValues\n                            }\n                        ]\n                    }, {\n                        title: intl.formatMessage({\n                            id: 'sources.review',\n                            defaultMessage: 'Review'\n                        }),\n                        name: 'summary',\n                        fields: [{\n                            component: 'description',\n                            name: 'description-summary',\n                            Content: ApplicationSummary\n                        }, {\n                            component: 'summary',\n                            name: 'summary',\n                            sourceTypes,\n                            applicationTypes\n                        }]\n                    },\n                    ...selectionSteps,\n                    ...authenticationFields\n                ]\n            }\n        ]\n    });\n};\n\nexport default fields;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { EmptyState, EmptyStateVariant } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { EmptyStateSecondaryActions } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateSecondaryActions';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner';\nimport { Progress } from '@patternfly/react-core/dist/js/components/Progress/Progress';\n\nimport { FormattedMessage } from 'react-intl';\n\nconst LoadingStep = ({ onClose, customText, progressStep, progressTexts }) => (\n    <Bullseye>\n        <EmptyState variant={ EmptyStateVariant.full } className=\"ins-c-sources__empty-state\">\n            <EmptyStateIcon icon={ Spinner } color=\"var(--pf-global--success-color--100)\" className=\"pf-u-mb-0\"/>\n            <EmptyStateBody>\n                {progressTexts ?\n                    <Progress\n                        value={progressStep}\n                        min={0}\n                        max={progressTexts.length - 1}\n                        title=\" \"\n                        label={progressTexts[progressStep]}\n                        valueText={progressTexts[progressStep]}\n                        className=\"pf-u-mb-0 ins-c-sources__progress\"\n                    />\n                    : customText\n                }\n            </EmptyStateBody>\n            { onClose &&\n        <EmptyStateSecondaryActions className=\"pf-u-mt-xl\">\n            <Button variant=\"link\" onClick={ onClose }>\n                <FormattedMessage\n                    id=\"sources.cancel\"\n                    defaultMessage=\"Cancel\"\n                />\n            </Button>\n        </EmptyStateSecondaryActions> }\n        </EmptyState>\n    </Bullseye>\n);\n\nLoadingStep.propTypes = {\n    onClose: PropTypes.func,\n    customText: PropTypes.node,\n    progressStep: PropTypes.number,\n    progressTexts: PropTypes.arrayOf(PropTypes.string)\n};\n\nLoadingStep.defaultProps = {\n    customText: <FormattedMessage\n        id=\"sources.loading\"\n        defaultMessage=\"Loading, please wait.\"\n    />\n};\n\nexport default LoadingStep;\n","import React from 'react';\nimport { FormattedMessage  } from 'react-intl';\nimport { PropTypes } from 'prop-types';\n\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { EmptyState, EmptyStateVariant } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { EmptyStateSecondaryActions } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateSecondaryActions';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\nimport { Progress } from '@patternfly/react-core/dist/js/components/Progress/Progress';\n\nimport TimesCircleIcon from '@patternfly/react-icons/dist/js/icons/times-circle-icon';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\n\nconst ErroredStepAttach = ({ onReset, goToSources, error, progressStep, progressTexts }) => (\n    <Bullseye>\n        <EmptyState variant={ EmptyStateVariant.full } className=\"ins-c-sources__empty-state\">\n            <EmptyStateIcon icon={ TimesCircleIcon } color=\"var(--pf-global--danger-color--100)\" className=\"pf-u-mb-0\"/>\n            <Title headingLevel=\"h5\" size=\"lg\" className=\"pf-u-mt-xl\">\n                <FormattedMessage\n                    id=\"sources.configurationSuccessful\"\n                    defaultMessage=\"Configuration unsuccessful\"\n                />\n            </Title>\n            <EmptyStateBody>\n                <Progress\n                    className=\"pf-u-mb-md ins-c-sources__progress\"\n                    value={progressStep}\n                    min={0}\n                    title=\" \"\n                    max={progressTexts.length - 1}\n                    label={progressTexts[progressStep]}\n                    valueText={progressTexts[progressStep]}\n                    variant='danger'\n                />\n                <React.Fragment>\n                    <FormattedMessage\n                        id=\"sources.successAddApp\"\n                        defaultMessage=\"Your application has not been successfully added:\"\n                    />\n                    <br />\n                    <TextContent>\n                        <Text component={TextVariants.h6}>{ error }</Text>\n                    </TextContent>\n                </React.Fragment>\n            </EmptyStateBody>\n            <Button variant=\"primary\" onClick={ goToSources }>\n                <FormattedMessage\n                    id=\"sources.backToSources\"\n                    defaultMessage=\"Back to Sources\"\n                />\n            </Button>\n            <EmptyStateSecondaryActions>\n                <Button variant=\"link\" onClick={ onReset }>\n                    <FormattedMessage\n                        id=\"sources.retry\"\n                        defaultMessage=\"Retry\"\n                    />\n                </Button>\n            </EmptyStateSecondaryActions>\n        </EmptyState>\n    </Bullseye>\n);\n\nErroredStepAttach.propTypes = {\n    onReset: PropTypes.func.isRequired,\n    goToSources: PropTypes.func.isRequired,\n    error: PropTypes.string.isRequired,\n    progressStep: PropTypes.number.isRequired,\n    progressTexts: PropTypes.arrayOf(PropTypes.string).isRequired\n};\n\nexport default ErroredStepAttach;\n","import React from 'react';\nimport { FormattedMessage  } from 'react-intl';\nimport { PropTypes } from 'prop-types';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { EmptyState, EmptyStateVariant } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { EmptyStateSecondaryActions } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateSecondaryActions';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\nimport { Progress } from '@patternfly/react-core/dist/js/components/Progress/Progress';\n\nimport CheckCircleIcon from '@patternfly/react-icons/dist/js/icons/check-circle-icon';\n\nconst FinishedStepAttach = ({ goToSources, onReset, progressStep, progressTexts }) => (\n    <Bullseye>\n        <EmptyState variant={ EmptyStateVariant.full } className=\"ins-c-sources__empty-state\">\n            <EmptyStateIcon icon={ CheckCircleIcon } color=\"var(--pf-global--success-color--200)\" className=\"pf-u-mb-0\"/>\n            <Title headingLevel=\"h5\" size=\"lg\" className=\"pf-u-mt-xl\">\n                <FormattedMessage\n                    id=\"sources.configurationSuccessful\"\n                    defaultMessage=\"Configuration successful\"\n                />\n            </Title>\n            <EmptyStateBody>\n                <Progress\n                    className=\"pf-u-mb-md ins-c-sources__progress ins-c-sources__progress-success\"\n                    value={progressStep}\n                    min={0}\n                    title=\" \"\n                    max={progressTexts.length - 1}\n                    label={progressTexts[progressStep]}\n                    valueText={progressTexts[progressStep]}\n                    variant='success'\n                />\n                <FormattedMessage\n                    id=\"sources.successAddApp\"\n                    defaultMessage=\"Your application has been successfully added.\"\n                />\n            </EmptyStateBody>\n            <Button variant=\"primary\" onClick={ goToSources } className=\"pf-u-mt-xl\">\n                <FormattedMessage\n                    id=\"sources.backToSources\"\n                    defaultMessage=\"Back to Sources\"\n                />\n            </Button>\n            <EmptyStateSecondaryActions>\n                <Button variant=\"link\" onClick={onReset}>\n                    <FormattedMessage\n                        id=\"sources.continueManageApp\"\n                        defaultMessage=\"Continue managing applications\"\n                    />\n                </Button>\n            </EmptyStateSecondaryActions>\n        </EmptyState>\n    </Bullseye>\n);\n\nFinishedStepAttach.propTypes = {\n    onReset: PropTypes.func.isRequired,\n    goToSources: PropTypes.func.isRequired,\n    progressStep: PropTypes.number.isRequired,\n    progressTexts: PropTypes.arrayOf(PropTypes.string).isRequired\n};\n\nexport default FinishedStepAttach;\n","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { Wizard } from '@patternfly/react-core/dist/js/components/Wizard/Wizard';\n\nconst WizardBodyAttach = ({ step, goToSources }) => {\n    const intl = useIntl();\n\n    return (\n        <Wizard\n            isOpen={ true }\n            onClose={goToSources}\n            title={intl.formatMessage({\n                id: 'sources.manageApps',\n                defaultMessage: 'Manage applications'\n            })}\n            description={\n                intl.formatMessage({\n                    id: 'sources.addAppDescription',\n                    defaultMessage: 'You are managing applications of this source.'\n                })\n            }\n            steps={ [{\n                name: 'Finish',\n                component: step,\n                isFinishedStep: true\n            }] }\n        />\n    );\n};\n\nWizardBodyAttach.propTypes = {\n    step: PropTypes.node.isRequired,\n    goToSources: PropTypes.func.isRequired\n};\n\nexport default WizardBodyAttach;\n","import isEmpty from 'lodash/isEmpty';\nimport get from 'lodash/get';\n\nconst createProgressTextsApp = (\n    filteredValues, allFormValues, intl\n) => {\n    let progressText = [];\n    let step = 0;\n\n    if (filteredValues.endpoint && !isEmpty(filteredValues.endpoint) && !get(allFormValues, 'endpoint.id', false)) {\n        progressText.push(intl.formatMessage({\n            id: 'sources.authProgressEndpoint',\n            defaultMessage: 'Step { step }: creating endpoint'\n        }, { step: ++step }));\n    }\n\n    progressText.push(intl.formatMessage({\n        id: 'sources.authProgressValues',\n        defaultMessage: 'Step { step }: updating values and creating application'\n    }, { step: ++step }));\n\n    progressText.push(intl.formatMessage({\n        id: 'sources.authConnectingApplication',\n        defaultMessage: 'Step { step }: connecting application and authentication'\n    }, { step: ++step }));\n\n    progressText.push(intl.formatMessage({\n        id: 'sources.authReloadData',\n        defaultMessage: 'Step { step }: reloading data'\n    }, { step: ++step }));\n\n    progressText.push(intl.formatMessage({\n        id: 'sources.authCompleted',\n        defaultMessage: 'Completed'\n    }));\n\n    return progressText;\n};\n\nexport default createProgressTextsApp;\n\n","import { addedDiff, updatedDiff } from 'deep-object-diff';\nimport { patchSource, handleError } from '@redhat-cloud-services/frontend-components-sources';\nimport isEmpty from 'lodash/isEmpty';\nimport merge from 'lodash/merge';\nimport cloneDeep from 'lodash/cloneDeep';\n\nimport { getSourcesApi, doCreateApplication } from './entities';\nimport { urlOrHost } from './doUpdateSource';\nimport createProgressTextsApp from '../components/AddApplication/steps/createProgressTextsApp';\n\n// modification of https://stackoverflow.com/a/38340374\nexport const removeEmpty = (obj) => {\n    Object.keys(obj).forEach(key => {\n        if (obj[key] && typeof obj[key] === 'object') {\n            if (isEmpty(obj[key])) {\n                delete obj[key];\n            } else {\n                removeEmpty(obj[key]);\n            }\n        } else if (typeof obj[key] === 'undefined') {\n            delete obj[key];\n        }\n    });\n    return obj;\n};\n\nexport const doAttachApp = async (\n    values, formApi, authenticationInitialValues, initialValues, setState = () => {}, intl = () => {}\n) => {\n    const formState = formApi.getState();\n\n    const allFormValues = formState.values;\n\n    const selectedAuthId = allFormValues.authentication ? allFormValues.authentication.id : undefined;\n\n    const authInitialValues = selectedAuthId\n        ? authenticationInitialValues.find(({ id }) => id === selectedAuthId)\n        : undefined;\n\n    const { authentication, ...valuesWithoutAuth } = values;\n\n    const newAddedValues = addedDiff(initialValues, valuesWithoutAuth);\n    const updatedValues = updatedDiff(initialValues, valuesWithoutAuth);\n    const newAddedAuthValues = addedDiff(authInitialValues, authentication);\n    const updatedAuthValues = updatedDiff(authInitialValues, authentication);\n\n    const filteredValues = removeEmpty({\n        ...merge(cloneDeep(newAddedValues), updatedValues),\n        authentication: {\n            ...merge(cloneDeep(newAddedAuthValues), updatedAuthValues)\n        }\n    });\n\n    setState({ type: 'setProgressTexts', progressTexts: createProgressTextsApp(filteredValues, allFormValues, intl) });\n\n    try {\n        if (!allFormValues.source || !allFormValues.source.id) {\n            throw 'Missing source id';\n        }\n\n        const sourceId = allFormValues.source.id;\n        let endpointId = allFormValues.endpoint ? allFormValues.endpoint.id : undefined;\n\n        const promises = [];\n\n        if (filteredValues.source && !isEmpty(filteredValues.source)) {\n            promises.push(getSourcesApi().updateSource(sourceId, filteredValues.source));\n        } else {\n            promises.push(Promise.resolve(undefined));\n        }\n\n        const hasModifiedEndpoint = filteredValues.endpoint && !isEmpty(filteredValues.endpoint);\n        const hasModifiedUrl = filteredValues.url && !isEmpty(filteredValues.url);\n\n        if (hasModifiedEndpoint || hasModifiedUrl) {\n            const { scheme, host, port, path } = urlOrHost(filteredValues);\n\n            const endPointPort = parseInt(port, 10);\n\n            const endpointData = removeEmpty({\n                ...filteredValues.endpoint,\n                scheme,\n                host,\n                port: isNaN(endPointPort) ? undefined : endPointPort,\n                path\n            });\n\n            if (endpointId) {\n                promises.push(getSourcesApi().updateEndpoint(endpointId, endpointData));\n            } else {\n                promises.push(Promise.resolve(undefined));\n\n                const createEndpointData = {\n                    ...endpointData,\n                    default: true,\n                    source_id: sourceId\n                };\n\n                const endpoint = await getSourcesApi().createEndpoint(createEndpointData);\n                setState({ type: 'increaseProgressStep' });\n                endpointId = endpoint.id;\n            }\n        } else {\n            promises.push(Promise.resolve(undefined));\n        }\n\n        if (filteredValues.authentication && !isEmpty(filteredValues.authentication)) {\n            if (selectedAuthId) {\n                promises.push(getSourcesApi().updateAuthentication(selectedAuthId, filteredValues.authentication));\n            } else if (endpointId) {\n                const authenticationData = {\n                    ...filteredValues.authentication,\n                    resource_id: endpointId,\n                    resource_type: 'Endpoint'\n                };\n\n                promises.push(getSourcesApi().createAuthentication(authenticationData));\n            }\n        } else {\n            promises.push(Promise.resolve(undefined));\n        }\n\n        if (filteredValues.application && filteredValues.application.application_type_id) {\n            promises.push(doCreateApplication(sourceId, filteredValues.application.application_type_id));\n        } else {\n            promises.push(Promise.resolve(undefined));\n        }\n\n        // eslint-disable-next-line no-unused-vars\n        const [_sourceDataOut, _endpointDataOut, authenticationDataOut, applicationDataOut] = await Promise.all(promises);\n        setState({ type: 'increaseProgressStep' });\n\n        const authenticationId = selectedAuthId ? selectedAuthId : authenticationDataOut ? authenticationDataOut.id : undefined;\n\n        const promisesSecondRound = [];\n\n        if (applicationDataOut && applicationDataOut.id && authenticationId) {\n            const authAppData = {\n                application_id: applicationDataOut.id,\n                authentication_id: authenticationId\n            };\n\n            promisesSecondRound.push(getSourcesApi().createAuthApp(authAppData));\n        }\n\n        const isAttachingCostManagement = filteredValues.credentials || filteredValues.billing_source;\n        if (isAttachingCostManagement) {\n            const { credentials, billing_source } = filteredValues;\n            let data = {};\n            data = credentials ? { authentication: { credentials } } : {};\n            data = billing_source ? { ...data, billing_source } : data;\n            promisesSecondRound.push(patchSource({ id: sourceId, ...data }));\n        }\n\n        await Promise.all(promisesSecondRound);\n        setState({ type: 'increaseProgressStep' });\n    } catch (error) {\n        const errorMessage = await handleError(error);\n        throw errorMessage;\n    }\n};\n","export const initialState = {\n    state: 'loading',\n    error: '',\n    values: {},\n    authenticationsValues: [],\n    sourceAppsLength: 0,\n    initialValues: {},\n    progressStep: 0,\n    progressTexts: [],\n    isCancelling: false,\n};\n\nconst reducer = (state, { type, length, authenticationsValues, initialValues, error, values, progressTexts }) => {\n    switch (type) {\n        case 'setSourceAppslength':\n            return {\n                ...state,\n                sourceAppsLength: length\n            };\n        case 'loadAuthentications':\n            return {\n                ...state,\n                authenticationsValues,\n                initialValues,\n                values: {},\n                state: state.state === 'loading' ? 'wizard' : state.state\n            };\n        case 'loadWithoutAuthentications':\n            return {\n                ...state,\n                initialValues,\n                values: {},\n                state: state.state === 'loading' ? 'wizard' : state.state\n            };\n        case 'reset':\n            return {\n                ...state,\n                state: 'wizard'\n            };\n        case 'submit':\n            return {\n                ...state,\n                state: 'submitting',\n                progressStep: 0,\n                progressTexts: ['Preparing']\n            };\n        case 'finish':\n            return {\n                ...state,\n                state: 'finished',\n                progressStep: ++state.progressStep\n            };\n        case 'error':\n            return {\n                ...state,\n                state: 'errored',\n                error,\n                values\n            };\n        case 'setProgressTexts':\n            return {\n                ...state,\n                progressTexts\n            };\n        case 'increaseProgressStep':\n            return {\n                ...state,\n                progressStep: ++state.progressStep\n            };\n        case 'toggleCancelling':\n            return {\n                ...state,\n                isCancelling: !state.isCancelling,\n                ...(values && { values })\n            };\n        default:\n            return state;\n    }\n};\n\nexport default reducer;\n","import React, { useReducer, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport merge from 'lodash/merge';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { filterApps, CloseModal } from '@redhat-cloud-services/frontend-components-sources';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\n\nimport { loadEntities } from '../../redux/sources/actions';\nimport SourcesFormRenderer from '../../utilities/SourcesFormRenderer';\nimport createSchema from './AddApplicationSchema';\nimport LoadingStep from './steps/LoadingStep';\nimport ErroredStep from './steps/ErroredStep';\nimport FinishedStep from './steps/FinishedStep';\nimport WizardBody from './WizardBody';\n\nimport { getSourcesApi } from '../../api/entities';\n\nimport { useSource } from '../../hooks/useSource';\nimport { useIsLoaded } from '../../hooks/useIsLoaded';\nimport { endpointToUrl } from '../SourcesTable/formatters';\nimport { routes } from '../../Routes';\n\nimport { doAttachApp } from '../../api/doAttachApp';\nimport { checkSourceStatus } from '../../api/checkSourceStatus';\n\nimport reducer, { initialState } from './reducer';\n\nlet selectedApp = undefined; // this has to be not-state value, because it shouldn't re-render the component when changes\nconst saveSelectedApp = ({ values: { application } }) => selectedApp = application;\n\nexport const onSubmit = (values, formApi, authenticationInitialValues, dispatch, setState, initialValues, intl) => {\n    setState({ type: 'submit' });\n\n    return doAttachApp(values, formApi, authenticationInitialValues, initialValues, setState, intl)\n    .then(async () => {\n        checkSourceStatus(initialValues.source.id);\n        await dispatch(loadEntities());\n        selectedApp = undefined;\n        return setState({ type: 'finish' });\n    })\n    .catch(error => setState({\n        type: 'error',\n        error,\n        values\n    }));\n};\n\nconst FormTemplateWrapper = (props) => <FormTemplate {...props} showFormControls={false} />;\n\nconst AddApplication = () => {\n    const intl = useIntl();\n    const history = useHistory();\n\n    const loaded = useIsLoaded();\n\n    const {\n        appTypes,\n        sourceTypesLoaded,\n        appTypesLoaded,\n        sourceTypes,\n    } = useSelector(({ sources }) => sources, shallowEqual);\n\n    const source = useSource();\n\n    const dispatch = useDispatch();\n\n    const [state, setState] = useReducer(reducer, initialState);\n\n    const container = useRef(document.createElement('div'));\n\n    useEffect(() => {\n        selectedApp = undefined;\n    }, []);\n\n    useEffect(() => {\n        if (source) {\n            // When app is only removed, there is no need to reload values\n            const removeAppAction = state.sourceAppsLength >= source.applications.length && state.sourceAppsLength > 0;\n\n            setState({ type: 'setSourceAppslength', length: source.applications.length });\n\n            if (!removeAppAction) {\n                if (source.endpoints && source.endpoints[0]) {\n                    getSourcesApi()\n                    .listEndpointAuthentications(source.endpoints[0].id)\n                    .then(({ data }) => setState({\n                        type: 'loadAuthentications',\n                        authenticationsValues: data,\n                        initialValues: {\n                            source,\n                            endpoint: source.endpoints[0],\n                            url: endpointToUrl(source.endpoints[0]),\n                            application: selectedApp,\n                        },\n                        values: {}\n                    }));\n                } else {\n                    setState({\n                        type: 'loadWithoutAuthentications',\n                        initialValues: { source, application: selectedApp },\n                        values: {}\n                    });\n                }\n            }\n        }\n    }, [source]);\n\n    const goToSources = () => history.push(routes.sources.path);\n\n    if ((!appTypesLoaded || !sourceTypesLoaded || !loaded || state.state === 'loading') && state.state !== 'submitting') {\n        return  (\n            <WizardBody\n                goToSources={goToSources}\n                step={<LoadingStep />}\n            />\n        );\n    }\n\n    if (state.state === 'submitting') {\n        return  (\n            <WizardBody\n                goToSources={goToSources}\n                step={<LoadingStep\n                    progressStep={state.progressStep}\n                    progressTexts={state.progressTexts}\n                />}\n            />\n        );\n    }\n\n    const onReset = () => setState({ type: 'reset' });\n\n    if (state.state !== 'wizard') {\n        const shownStep = state.state === 'finished' ? (<FinishedStep\n            onReset={onReset}\n            goToSources={goToSources}\n            progressStep={state.progressStep}\n            progressTexts={state.progressTexts}\n        />) :\n            (<ErroredStep\n                onReset={onReset}\n                goToSources={goToSources}\n                error={state.error}\n                progressStep={state.progressStep}\n                progressTexts={state.progressTexts}\n            />);\n\n        return (\n            <WizardBody goToSources={goToSources} step={shownStep} />\n        );\n    }\n\n    const appIds = source.applications.filter(({ isDeleting }) => !isDeleting)\n    .reduce((acc, app) => [...acc, app.application_type_id], []);\n\n    const sourceType = sourceTypes.find((type) => type.id === source.source_type_id);\n    const sourceTypeName = sourceType && sourceType.name;\n    const filteredAppTypes = appTypes.filter((type) =>\n        !appIds.includes(type.id) && type.supported_source_types.includes(sourceTypeName)\n    ).filter(filterApps);\n\n    const availableAppTypes = filteredAppTypes.map((type) => {\n        const hasDeletingApp = source.applications.find(app => app.application_type_id === type.id);\n        const label = `${type.display_name} ${hasDeletingApp ? `(${intl.formatMessage({\n            id: 'sources.currentlyRemoving',\n            defaultMessage: 'Currently removing'\n        })})` : ''}`;\n\n        return ({ value: type.id, label, isDisabled: hasDeletingApp ? true : false });\n    });\n\n    const schema = createSchema(\n        availableAppTypes,\n        intl,\n        sourceTypes,\n        appTypes,\n        state.authenticationsValues,\n        source,\n        state.values,\n        container.current\n    );\n\n    const onSubmitWrapper = (values, formApi) => onSubmit(\n        values,\n        formApi,\n        state.authenticationsValues,\n        dispatch,\n        setState,\n        state.initialValues,\n        intl\n    );\n\n    const hasAvailableApps = filteredAppTypes.length > 0;\n    const onSubmitFinal = hasAvailableApps ? onSubmitWrapper : goToSources;\n\n    const finalValues = merge(cloneDeep(state.initialValues), state.values);\n\n    const onStay = () => {\n        container.current.hidden = false;\n        setState({ type: 'toggleCancelling' });\n    };\n\n    const cancelBeforeExit = (values) => {\n        if (values?.application) {\n            container.current.hidden = true;\n            setState({ type: 'toggleCancelling', values }); }\n        else {\n            goToSources();\n        }\n    };\n\n    return (\n        <React.Fragment>\n            <CloseModal\n                title={\n                    intl.formatMessage({\n                        id: 'sources.manageAppsCloseModalTitle', defaultMessage: 'Exit application adding?'\n                    })\n                }\n                isOpen={state.isCancelling}\n                onStay={onStay}\n                onExit={goToSources}\n            />\n            <SourcesFormRenderer\n                schema={schema}\n                showFormControls={false}\n                onSubmit={onSubmitFinal}\n                onCancel={cancelBeforeExit}\n                initialValues={finalValues}\n                subscription={{ values: true }}\n                debug={saveSelectedApp}\n                clearedValue={null}\n                FormTemplate={FormTemplateWrapper}\n            />\n        </React.Fragment>\n    );\n};\n\nexport default AddApplication;\n"],"sourceRoot":""}