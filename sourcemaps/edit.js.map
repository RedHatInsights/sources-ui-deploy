{"version":3,"sources":["webpack:///./src/components/EditField/EditField.js","webpack:///./src/utilities/SourcesFormRenderer.js","webpack:///./src/components/SourceEditForm/parser/genericInfo.js","webpack:///./src/components/SourceEditForm/parser/authentication.js","webpack:///./src/components/SourceEditForm/parser/unsupportedAuthType.js","webpack:///./src/components/SourceEditForm/parser/helpers.js","webpack:///./src/components/SourceEditForm/parser/endpoint.js","webpack:///./src/components/SourceEditForm/parser/application.js","webpack:///./src/components/SourceEditForm/parser/parseSourceToSchema.js","webpack:///./src/api/doLoadSourceForEdit.js","webpack:///./src/components/SourceEditForm/HorizontalFormWrapper.js","webpack:///./src/components/SourceEditForm/Header.js","webpack:///./src/components/SourceEditForm/helpers.js","webpack:///./src/components/SourceEditForm/onSubmit.js","webpack:///./src/components/SourceEditForm/SourceEditModal.js","webpack:///./src/api/getCmValues.js","webpack:///./src/components/SourceEditForm/importedRedirect.js"],"names":["EDIT_FIELD_NAME","EditField","isRequired","label","helperText","hideLabel","meta","input","type","setEdit","error","showError","touched","value","emptyText","name","includes","fieldId","isValid","helperTextInvalid","onClick","undefined","tabIndex","onKeyPress","e","charCode","preventDefault","className","propTypes","PropTypes","node","bool","string","object","FieldProvider","oneOfType","func","shape","any","EditFieldProvider","rest","props","SourcesFormRenderer","layoutMapper","formFieldsMapper","mapperExtension","genericInfo","editing","sourceId","id","defaultMessage","component","componentTypes","TEXT_FIELD","validate","asyncValidator","isReadOnly","modifyAuthSchemas","fields","map","field","editedName","startsWith","fieldName","replace","createAuthFieldName","isEditing","finalField","split","pop","values","filter","validation","validatorTypes","REQUIRED","removeRequiredValidator","authenticationFields","authentications","sourceType","length","schema","authentication","auth","schemaAuth","find","authtype","Content","TextContent","Text","TextVariants","p","additionalStepKeys","get","hardcodedSchemas","getAdditionalAuthSteps","enhancedFields","stepKey","getEnhancedAuthField","SUB_FORM","title","NOT_CHANGING_COMPONENTS","CHECKBOX","SWITCH","modifyFields","endpointFields","endpoint","hidden","getEnhancedEndpointField","APP_NAMES","cmFieldsPrefixes","isCMField","some","prefix","getCMFields","Object","keys","key","flatMap","x","getEnhancedCMField","authenticationsTypes","forEach","apps","hasAppField","appendClusterIdentifier","costManagementFields","applications","appTypes","source","costManagementApp","hasCostManagement","application_type_id","billingSourceFields","enhandcedFields","display_name","applicationsFields","parseSourceToSchema","endpoints","Boolean","HorizontalFormWrapper","children","Form","isHorizontal","Header","Grid","GridItem","xs","Title","headingLevel","TitleLevel","h1","size","prepareInitialValues","sourceTypeName","url","auhenticationsFinal","scheme","host","path","port","endpointToUrl","source_type","onSubmit","dispatch","intl","push","updateSource","filteredValues","set","selectOnlyEditedValues","formatMessage","costManagement","then","routes","sources","loadEntities","initialState","loading","initialValues","reducer","state","payload","SourceEditModal","useReducer","setState","useParams","history","useHistory","useIntl","useSelector","shallowEqual","sourceTypes","sourceTypesLoaded","appTypesLoaded","useDispatch","useEffect","Promise","all","getSourcesApi","showSource","listSourceEndpoints","listSourceApplications","axiosInstance","COST_MANAGEMENT_API_BASE","sourceData","data","basicValues","billing_source","credentials","listEndpointAuthentications","doLoadSourceForEdit","imported","addMessage","redirectWhenImported","source_type_id","product_name","returnToSources","Modal","header","isOpen","isLarge","onClose","Spinner","onCancel","formApi","getState","dirtyFields","FormWrapper","clearedValue","canReset","disableSubmit","onReset","buttonsLabels","submitLabel"],"mappings":"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","file":"js/edit.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport PencilAltIcon from '@patternfly/react-icons/dist/js/icons/pencil-alt-icon';\n\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\n\nexport const EDIT_FIELD_NAME = 'edit-field';\n\nconst EditField = ({ isRequired, label, helperText, hideLabel, meta, input, type, setEdit }) => {\n    const { error, touched } = meta;\n    const showError = touched && error;\n\n    let value = input.value;\n\n    if (typeof value === 'boolean') {\n        value = value ? 'True' : 'False';\n    }\n\n    const isPassword = type === 'password' || input.name.includes('password');\n    const emptyText = isPassword ? 'Click to edit' : 'Click to add';\n\n    return (\n        <FormGroup\n            isRequired={ isRequired }\n            label={ !hideLabel && label }\n            fieldId={ input.name }\n            isValid={ !showError }\n            helperText={ helperText }\n            helperTextInvalid={ error }\n            onClick={setEdit ? () => setEdit(input.name) : undefined}\n            tabIndex={0}\n            onKeyPress={(e) => {\n                if (e.charCode === 32 && setEdit) {\n                    e.preventDefault();\n                    setEdit(input.name);\n                }\n            }}\n        >\n            <div className={`pf-c-form__horizontal-group ins-c-sources__edit-field-group ${setEdit ? 'clickable' : ''}`}>\n                <TextContent className={`ins-c-sources__edit-field-group-text-content ${setEdit ? 'clickable' : ''}`}>\n                    <span className=\"ins-c-sources__edit-field-value pf-u-mr-sm\">\n                        {value ? value : setEdit ? emptyText : ''}\n                    </span>\n                    {setEdit && <PencilAltIcon />}\n                </TextContent>\n            </div>\n        </FormGroup>\n    );\n};\n\nEditField.propTypes = {\n    label: PropTypes.node,\n    isRequired: PropTypes.bool,\n    helperText: PropTypes.string,\n    meta: PropTypes.object.isRequired,\n    FieldProvider: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    input: PropTypes.shape({\n        value: PropTypes.any,\n        name: PropTypes.string.isRequired\n    }).isRequired,\n    hideLabel: PropTypes.bool,\n    setEdit: PropTypes.func,\n    type: PropTypes.string\n};\n\nconst EditFieldProvider = ({ FieldProvider, ...rest }) =>\n    (\n        <FieldProvider { ...rest }>\n            { (props) =>  <EditField  { ...props }/> }\n        </FieldProvider>\n    );\n\nEditFieldProvider.propTypes = {\n    FieldProvider: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired\n};\n\nexport default EditFieldProvider;\n","import React from 'react';\n\nimport FormRenderer from '@data-driven-forms/react-form-renderer';\nimport { layoutMapper, formFieldsMapper } from '@data-driven-forms/pf4-component-mapper';\nimport { mapperExtension } from '@redhat-cloud-services/frontend-components-sources';\n\nimport EditField from '../components/EditField/EditField';\n\nconst SourcesFormRenderer = props => (\n    <FormRenderer\n        layoutMapper={layoutMapper}\n        formFieldsMapper={{\n            ...formFieldsMapper,\n            ...mapperExtension,\n            'edit-field': EditField\n        }}\n        {...props}\n    />\n);\n\nexport default SourcesFormRenderer;\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { componentTypes } from '@data-driven-forms/react-form-renderer';\nimport { asyncValidator } from '@redhat-cloud-services/frontend-components-sources';\nimport { EDIT_FIELD_NAME } from '../../EditField/EditField';\n\nexport const genericInfo = (editing, setEdit, sourceId) => ([\n    {\n        name: 'source.name',\n        label: <FormattedMessage\n            id=\"sources.sourceName\"\n            defaultMessage=\"Source name\"\n        />,\n        component: editing['source.name'] ? componentTypes.TEXT_FIELD : EDIT_FIELD_NAME,\n        ...(editing['source.name'] ? {} : { setEdit }),\n        validate: [\n            (value) => asyncValidator(value, sourceId)\n        ],\n        isRequired: true\n    }, {\n        name: 'source_type',\n        label: <FormattedMessage\n            id=\"sources.sourceType\"\n            defaultMessage=\"Source type\"\n        />,\n        isReadOnly: true,\n        component: EDIT_FIELD_NAME\n    }\n]);\n","import React from 'react';\nimport get from 'lodash/get';\nimport { componentTypes, validatorTypes } from '@data-driven-forms/react-form-renderer';\nimport { hardcodedSchemas } from '@redhat-cloud-services/frontend-components-sources';\nimport { FormattedMessage } from 'react-intl';\n\nimport { EDIT_FIELD_NAME } from '../../EditField/EditField';\nimport { unsupportedAuthTypeField } from './unsupportedAuthType';\n\nexport const createAuthFieldName = (fieldName, id) => `authentications.a${id}.${fieldName.replace('authentication.', '')}`;\n\nexport const getLastPartOfName = (fieldName) => fieldName.split('.').pop();\n\nexport const removeRequiredValidator = (validate = []) =>\n    validate.filter(validation => validation.type !== validatorTypes.REQUIRED);\n\nexport const getEnhancedAuthField = (sourceType, authtype, name) =>\n    get(hardcodedSchemas, [sourceType, 'authentication', authtype, 'generic', name], {});\n\nexport const getAdditionalAuthSteps = (sourceType, authtype) =>\n    get(hardcodedSchemas, [sourceType, 'authentication', authtype, 'generic', 'includeStepKeyFields'], []);\n\nexport const modifyAuthSchemas = (fields, id, editing, setEdit) => fields.map((field) => {\n    const editedName = field.name.startsWith('authentication') ? createAuthFieldName(field.name, id) : field.name;\n    const isEditing = editing[editedName];\n\n    const finalField = ({\n        ...field,\n        name: editedName,\n        component: isEditing ? field.component : EDIT_FIELD_NAME\n    });\n\n    if (!isEditing) {\n        finalField.setEdit = setEdit;\n    }\n\n    const isPassword = getLastPartOfName(finalField.name) === 'password';\n\n    if (isPassword) {\n        finalField.helperText = (<FormattedMessage\n            id=\"sources.passwordResetHelperText\"\n            defaultMessage={`Changing this resets your current { label }.`}\n            values={{\n                label: finalField.label\n            }}\n        />);\n        finalField.isRequired = false;\n        finalField.validate = removeRequiredValidator(finalField.validate);\n    }\n\n    return finalField;\n});\n\nexport const authenticationFields = (authentications, sourceType, editing, setEdit) => {\n    if (!authentications || authentications.length === 0 || !sourceType.schema || !sourceType.schema.authentication) {\n        return [];\n    }\n\n    return authentications.map((auth) => {\n        const schemaAuth = sourceType.schema.authentication.find(({ type }) => type === auth.authtype);\n\n        if (!schemaAuth) {\n            return unsupportedAuthTypeField(auth.authtype);\n        }\n\n        const additionalStepKeys = getAdditionalAuthSteps(sourceType.name, auth.authtype);\n\n        const enhancedFields = schemaAuth.fields\n        .filter(field => !field.stepKey || additionalStepKeys.includes(field.stepKey))\n        .map((field) => ({\n            ...field,\n            ...getEnhancedAuthField(sourceType.name, auth.authtype, field.name)\n        }));\n\n        return ({\n            component: componentTypes.SUB_FORM,\n            title: schemaAuth.name,\n            name: schemaAuth.name,\n            fields: [\n                modifyAuthSchemas(enhancedFields, auth.id, editing, setEdit)\n            ]\n        });\n    });\n};\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Text, TextVariants } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\n\nexport const unsupportedAuthTypeField = (type) => ({\n    component: 'description',\n    name: `${type}-unsupported`,\n    // eslint-disable-next-line react/display-name\n    Content: () => (\n        <TextContent>\n            <Text component={ TextVariants.p }>\n                <FormattedMessage\n                    id=\"sources.unsupportedAuthType\"\n                    defaultMessage={`Authentication type of { type } is no longer supported.`}\n                    values={{ type }}\n                />\n            </Text>\n        </TextContent>\n    )\n});\n","import { EDIT_FIELD_NAME } from '../../EditField/EditField';\nimport { componentTypes } from '@data-driven-forms/react-form-renderer';\n\nexport const NOT_CHANGING_COMPONENTS = [componentTypes.CHECKBOX, componentTypes.SWITCH];\n\nexport const modifyFields = (fields, editing, setEdit) => fields.map((field) => {\n    const isEditing = editing[field.name];\n\n    const finalField = ({\n        ...field,\n        component: isEditing || NOT_CHANGING_COMPONENTS.includes(field.component)  ? field.component : EDIT_FIELD_NAME\n    });\n\n    if (!isEditing && !NOT_CHANGING_COMPONENTS.includes(field.component)) {\n        finalField.setEdit = setEdit;\n    }\n\n    return finalField;\n});\n","import React from 'react';\nimport get from 'lodash/get';\nimport { FormattedMessage } from 'react-intl';\nimport { componentTypes } from '@data-driven-forms/react-form-renderer';\nimport { hardcodedSchemas } from '@redhat-cloud-services/frontend-components-sources';\nimport { modifyFields } from './helpers';\n\nexport const getEnhancedEndpointField = (sourceType, name) =>\n    get(hardcodedSchemas, [sourceType, 'endpoint', name], {});\n\nexport const endpointFields = (sourceType, editing, setEdit) => {\n    if (!sourceType.schema || !sourceType.schema.endpoint || sourceType.schema.endpoint.hidden) {\n        return undefined;\n    }\n\n    const schemaAuth = sourceType.schema.endpoint;\n\n    const enhancedFields = schemaAuth.fields.map((field) => ({\n        ...field,\n        ...getEnhancedEndpointField(sourceType.name, field.name)\n    }));\n\n    return ({\n        component: componentTypes.SUB_FORM,\n        title: <FormattedMessage\n            id=\"sources.endpoint\"\n            defaultMessage=\"Endpoint\"\n        />,\n        name: 'endpoint',\n        fields: modifyFields(enhancedFields, editing, setEdit)\n    });\n};\n","import React from 'react';\nimport get from 'lodash/get';\nimport { componentTypes, validatorTypes } from '@data-driven-forms/react-form-renderer';\nimport { hardcodedSchemas } from '@redhat-cloud-services/frontend-components-sources';\nimport { FormattedMessage } from 'react-intl';\nimport { modifyFields } from './helpers';\nimport { EDIT_FIELD_NAME } from '../../EditField/EditField';\n\nexport const APP_NAMES = {\n    COST_MANAGAMENT: '/insights/platform/cost-management'\n};\n\nexport const cmFieldsPrefixes = ['billing_source', 'credentials'];\n\nexport const isCMField = ({ name }) => cmFieldsPrefixes.some((prefix) => name.startsWith(prefix));\n\nexport const getCMFields = (authentication) =>\n    Object.keys(authentication)\n    .map((key) => authentication[key].fields.filter(isCMField))\n    .flatMap((x) => x);\n\nexport const getEnhancedCMField = (sourceType, name, authenticationsTypes) => {\n    let field = undefined;\n\n    authenticationsTypes.forEach((type) => {\n        const apps = field ? {} : get(hardcodedSchemas, [sourceType, 'authentication', type], {});\n\n        Object.keys(apps).find((key) => {\n            const hasAppField = get(hardcodedSchemas, [sourceType, 'authentication', type, key, name], undefined);\n            if (hasAppField) {\n                field = hasAppField;\n                return true;\n            }\n        });\n    });\n\n    return field ? field : {};\n};\n\nexport const appendClusterIdentifier = (editing, setEdit, sourceType) =>\n    sourceType.name === 'openshift' ? [{\n        name: 'source.source_ref',\n        label: <FormattedMessage\n            id=\"sources.clusterIdentifier\"\n            defaultMessage=\"Cluster identifier\"\n        />,\n        isRequired: true,\n        ...(editing['source.source_ref'] ? {} : { setEdit }),\n        validate: [{ type: validatorTypes.REQUIRED }],\n        component: editing['source.source_ref'] ? componentTypes.TEXT_FIELD : EDIT_FIELD_NAME\n    }] : [];\n\nexport const costManagementFields = (\n    applications = [],\n    sourceType,\n    editing,\n    setEdit,\n    appTypes,\n    source\n) => {\n    const costManagementApp = appTypes.find(({ name }) => name === APP_NAMES.COST_MANAGAMENT);\n\n    if (!costManagementApp) {\n        return undefined;\n    }\n\n    const hasCostManagement = applications.find(({ application_type_id }) => application_type_id === costManagementApp.id);\n\n    if (!hasCostManagement) {\n        return undefined;\n    }\n\n    const billingSourceFields = getCMFields(sourceType.schema.authentication);\n\n    const authenticationsTypes = source.authentications ? source.authentications.map(({ authtype }) => authtype) : [];\n\n    const enhandcedFields = billingSourceFields.map((field) => ({\n        ...field,\n        ...getEnhancedCMField(sourceType.name, field.name, authenticationsTypes)\n    }));\n\n    return ({\n        component: componentTypes.SUB_FORM,\n        title: costManagementApp.display_name,\n        name: costManagementApp.display_name,\n        fields: [\n            ...modifyFields(enhandcedFields, editing, setEdit),\n            ...appendClusterIdentifier(editing, setEdit, sourceType)\n        ]\n    });\n};\n\nexport const applicationsFields = (\n    applications,\n    sourceType,\n    editing,\n    setEdit,\n    appTypes,\n    source\n) => ([\n    costManagementFields(\n        applications,\n        sourceType,\n        editing,\n        setEdit,\n        appTypes,\n        source\n    )\n]);\n","import { genericInfo } from './genericInfo';\nimport { authenticationFields } from './authentication';\nimport { endpointFields } from './endpoint';\nimport { applicationsFields } from './application';\n\nexport const parseSourceToSchema = (source, editing, setEdit, sourceType, appTypes) => ({\n    fields: [\n        ...genericInfo(editing, setEdit, source.source.id),\n        ...authenticationFields(source.authentications, sourceType, editing, setEdit),\n        ...applicationsFields(source.applications, sourceType, editing, setEdit, appTypes, source),\n        source.endpoints && source.endpoints.length > 0 ? endpointFields(sourceType, editing, setEdit) : false\n    ].filter(Boolean)\n});\n","import { getSourcesApi } from './entities';\nimport { getCmValues } from './getCmValues';\n\nexport const doLoadSourceForEdit = sourceId => Promise.all([\n    getSourcesApi().showSource(sourceId),\n    getSourcesApi().listSourceEndpoints(sourceId),\n    getSourcesApi().listSourceApplications(sourceId),\n    getCmValues(sourceId).catch(() => undefined)\n]).then(([sourceData, endpoints, applications, costManagement]) => {\n    const endpoint = endpoints && endpoints.data && endpoints.data[0];\n\n    let basicValues = {\n        source: sourceData,\n        applications: applications.data\n    };\n\n    if (costManagement) {\n        basicValues = {\n            ...basicValues,\n            billing_source: costManagement.billing_source,\n            credentials: costManagement.authentication.credentials\n        };\n    }\n\n    if (!endpoint) { // bail out\n        return basicValues;\n    }\n\n    return getSourcesApi().listEndpointAuthentications(endpoint.id).then(authentications => ({\n        ...basicValues,\n        endpoints: endpoints.data,\n        authentications: authentications.data\n    }));\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Form } from '@patternfly/react-core/dist/js/components/Form/Form';\n\nconst HorizontalFormWrapper = ({ children, ...props }) => <Form {...props} isHorizontal>{children}</Form>;\n\nHorizontalFormWrapper.propTypes = {\n    children: PropTypes.node\n};\n\nexport default HorizontalFormWrapper;\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Grid } from '@patternfly/react-core/dist/js/layouts/Grid/Grid';\nimport { GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/GridItem';\nimport { Title, TitleLevel } from '@patternfly/react-core/dist/js/components/Title/Title';\n\nconst Header = () => (\n    <Grid>\n        <GridItem xs={12}>\n            <Title headingLevel={TitleLevel.h1} size=\"3xl\">\n                <FormattedMessage\n                    id=\"sources.editSource\"\n                    defaultMessage=\"Edit source\"\n                />\n            </Title>\n        </GridItem>\n        <GridItem xs={12}>\n            <FormattedMessage\n                id=\"sources.editSourceDescription\"\n                defaultMessage=\"You are editing a source.\"\n            />\n        </GridItem>\n    </Grid>\n);\n\nexport default Header;\n","import get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { endpointToUrl } from '../SourcesTable/formatters';\n\nexport const selectOnlyEditedValues = (values, editing) => {\n    const filteredValues = {};\n\n    Object.keys(editing)\n    .filter((key) => editing[key])\n    .forEach((key) => {\n        set(filteredValues, key, get(values, key));\n    });\n\n    return filteredValues;\n};\n\nexport const prepareInitialValues = ({ endpoints, authentications, ...rest }, sourceTypeName) => {\n    const auhenticationsFinal = {};\n\n    if (authentications && authentications.length > 0) {\n        authentications.forEach((auth) => {\n            auhenticationsFinal[`a${auth.id}`] = auth;\n        });\n    }\n\n    let endpoint;\n    let url;\n\n    if (endpoints && endpoints.length > 0) {\n        endpoint = endpoints[0];\n    }\n\n    if (endpoint) {\n        url = (endpoint.scheme || endpoint.host || endpoint.path || endpoint.port) ? endpointToUrl(endpoint) : undefined;\n    }\n\n    return ({\n        source_type: sourceTypeName,\n        endpoint,\n        authentications: auhenticationsFinal,\n        url,\n        ...rest\n    });\n};\n","import { selectOnlyEditedValues } from './helpers';\nimport { updateSource, loadEntities } from '../../redux/sources/actions';\nimport { routes } from '../../Routes';\n\nexport const onSubmit = (values, editing, dispatch, source, intl, push) => dispatch(updateSource(\n    source,\n    selectOnlyEditedValues(values, editing),\n    intl.formatMessage({\n        id: 'sources.modifiedNotificationTitle',\n        defaultMessage: `\"{ name }\" was modified successfully.`\n    }, { name: source.source.name }),\n    intl.formatMessage({\n        id: 'sources.modifiedNotificationDescription',\n        defaultMessage: 'The source was successfully modified.'\n    }),\n    {\n        authentication: intl.formatMessage({\n            id: 'sources.sourceEditAuthFailure',\n            defaultMessage: 'Authentication update failure.'\n        }),\n        source: intl.formatMessage({\n            id: 'sources.sourceEditFailure',\n            defaultMessage: 'Source update failure.'\n        }),\n        endpoint: intl.formatMessage({\n            id: 'sources.sourceEditEndpointFailure',\n            defaultMessage: 'Endpoint update failure.'\n        }),\n        costManagement: intl.formatMessage({\n            id: 'sources.sourceCostmanagementFailure',\n            defaultMessage: 'Cost Management update failure.'\n        })\n    }))\n.then(() => {\n    push(routes.sources.path);\n    dispatch(loadEntities());\n});\n","import React, { useEffect, useReducer } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner';\n\nimport { layoutMapper } from '@data-driven-forms/pf4-component-mapper';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal';\n\nimport SourcesFormRenderer from '../../utilities/SourcesFormRenderer';\nimport { parseSourceToSchema } from './parser/parseSourceToSchema';\nimport { doLoadSourceForEdit } from '../../api/doLoadSourceForEdit';\nimport HorizontalFormWrapper from './HorizontalFormWrapper';\nimport Header from './Header';\nimport { prepareInitialValues } from './helpers';\nimport { onSubmit } from './onSubmit';\n\nimport { redirectWhenImported } from './importedRedirect';\nimport { routes } from '../../Routes';\n\nconst initialState = {\n    loading: true,\n    editing: {},\n    source: undefined,\n    initialValues: {},\n    sourceType: undefined,\n    schema: undefined\n};\n\nconst reducer = (state, payload) => ({ ...state, ...payload });\n\nconst SourceEditModal = () => {\n    const [state, setState] = useReducer(reducer, initialState);\n    const { id } = useParams();\n    const history = useHistory();\n\n    const { loading, editing, source, initialValues, sourceType, schema } = state;\n\n    const intl = useIntl();\n\n    const {\n        sourceTypes,\n        appTypes,\n        sourceTypesLoaded,\n        appTypesLoaded\n    } = useSelector(({ sources }) => sources, shallowEqual);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        doLoadSourceForEdit(id).then((source) => {\n            if (source.source.imported) {\n                redirectWhenImported(dispatch, intl, history, source.source.name);\n            }\n\n            setState({ source });\n        });\n    }, []);\n\n    const setEdit = (name) => setState({\n        editing: {\n            ...editing,\n            [name]: !editing[name]\n        }\n    });\n\n    useEffect(() => {\n        if (source && appTypesLoaded && sourceTypesLoaded) {\n            const sourceType = sourceTypes.find(({ id }) => id === source.source.source_type_id);\n\n            setState({\n                sourceType,\n                initialValues: prepareInitialValues(source, sourceType.product_name),\n                schema: parseSourceToSchema(source, editing, setEdit, sourceType, appTypes),\n                loading: false\n            });\n        }\n    }, [appTypesLoaded, source, sourceTypesLoaded]);\n\n    useEffect(() => {\n        if (source && !loading) {\n            setState({\n                schema: parseSourceToSchema(source, editing, setEdit, sourceType, appTypes)\n            });\n        }\n    }, [editing]);\n\n    const isLoading = !appTypesLoaded || !sourceTypesLoaded || loading;\n\n    const returnToSources = () => history.push(routes.sources.path);\n\n    if (isLoading) {\n        return (\n            <Modal\n                title={intl.formatMessage({\n                    id: 'sources.editSource',\n                    defaultMessage: 'Edit source.'\n                })}\n                header={<Header />}\n                isOpen={true}\n                isLarge\n                onClose={returnToSources}\n            >\n                <div className=\"ins-c-sources__dialog--spinnerContainer\">\n                    <Spinner />\n                </div>\n            </Modal>\n        );\n    }\n\n    return (\n        <Modal\n            title={intl.formatMessage({\n                id: 'sources.editSource',\n                defaultMessage: 'Edit source.'\n            })}\n            header={<Header />}\n            isOpen={true}\n            isLarge\n            onClose={returnToSources}\n        >\n            <SourcesFormRenderer\n                onCancel={returnToSources}\n                schema={schema}\n                onSubmit={\n                    (values, formApi) => onSubmit(values, formApi.getState().dirtyFields, dispatch, source, intl, history.push)\n                }\n                layoutMapper={{\n                    ...layoutMapper,\n                    FormWrapper: HorizontalFormWrapper\n                }}\n                clearedValue={null}\n                canReset\n                disableSubmit={['submitting']}\n                onReset={() => setState({ editing: {} })}\n                initialValues={initialValues}\n                buttonsLabels={{ submitLabel: intl.formatMessage({\n                    id: 'sources.save',\n                    defaultMessage: 'Save'\n                }) }}\n            />\n        </Modal>\n    );\n};\n\nexport default SourceEditModal;\n","import { axiosInstance } from './entities';\nimport { COST_MANAGEMENT_API_BASE } from './constants';\n\nexport const getCmValues = (id) => axiosInstance.get(`${COST_MANAGEMENT_API_BASE}/sources/${id}/`);\n","import { routes } from '../../Routes';\nimport { addMessage } from '../../redux/sources/actions';\n\nexport const redirectWhenImported = (dispatch, intl, history, name) => {\n    dispatch(addMessage(\n        intl.formatMessage({\n            id: 'sources.importSourceCannotEdited',\n            defaultMessage: 'Source { name } is imported.'\n        }, { name }),\n        'danger',\n        intl.formatMessage({\n            id: 'sources.importedSourcesCannotEdited',\n            defaultMessage: 'Imported sources cannot be edited.'\n        }),\n    ));\n    history.push(routes.sources.path);\n};\n"],"sourceRoot":""}