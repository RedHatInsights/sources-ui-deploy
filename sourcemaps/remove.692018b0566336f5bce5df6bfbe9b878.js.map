{"version":3,"file":"js/remove.be434edf03af509e1f7d.js","mappings":"+JAEO,MAAMA,EAAgC,CAC3CC,KAAM,0BACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,mcACTC,QAAS,EACTC,QAAS,GAGEC,GAA0B,QAAWP,GAElD,G,oNCRaQ,EAAW,SAACC,EAAIC,GAAL,aAAkB,UAAAA,EAASC,MAAK,SAACC,GAAD,OAASA,EAAIH,KAAOA,CAApB,WAAd,eAAuCI,eAAgB,SAAzE,EAEXC,EAAwB,CAACC,EAAAA,GAAgBC,EAAAA,IAEzCC,EAAe,SAACC,EAAD,OAAYjB,EAAZ,EAAYA,KAAMkB,EAAlB,EAAkBA,MAAlB,MACzB,CACCC,OACE,kBAAC,IAAD,CACEX,GAAG,+BACHY,eAAe,gEACfC,OAAQ,CACNrB,KAAM,2BAAIA,MAIhBsB,SACE,kBAAC,IAAD,CACEd,GAAG,iCACHY,eAAc,wIAEdC,OAAQ,CACNrB,KAAM,2BAAIA,GACVkB,MAAAA,KAINK,qBACE,kBAAC,IAAD,CACEf,GAAG,yCACHY,eAAc,8JAEdC,OAAQ,CACNrB,KAAM,2BAAIA,GACVkB,MAAAA,MAIND,EAjCwB,ECDtBO,EAAmB,SAAC,GAAqB,IAAnBC,EAAmB,EAAnBA,aAClBhB,GAAaiB,EAAAA,EAAAA,KAAY,qBAAGC,OAAH,GAA0BC,EAAAA,IAAnDnB,SAER,OAA4B,IAAxBgB,EAAaI,OACR,kBAAC,EAAAC,KAAD,CAAMb,QAASc,EAAAA,aAAAA,GAAiBxB,EAASkB,EAAa,GAAGO,oBAAqBvB,IAIrF,kBAAC,EAAAwB,SAAD,KACGR,EAAaS,KAAI,gBAAG1B,EAAH,EAAGA,GAAIwB,EAAP,EAAOA,oBAAP,OAChB,kBAAC,EAAAG,aAAD,CAAcC,IAAK5B,GAAKD,EAASyB,EAAqBvB,GADtC,IAKvB,EAEDe,EAAiBa,UAAY,CAC3BZ,aAAca,IAAAA,OAGhB,UCXA,IAAMC,EAAoB,SAAC,GAAiB,MAAfC,EAAe,EAAfA,SACnBC,GAASC,EAAAA,EAAAA,cAATD,KAER,GAAsCE,EAAAA,EAAAA,WAAS,GAA/C,eAAOC,EAAP,KAAoBC,EAApB,KAEMC,GAAOC,EAAAA,EAAAA,KACPC,GAASC,EAAAA,EAAAA,KAETC,GAAWC,EAAAA,EAAAA,MAETC,GAAgB1B,EAAAA,EAAAA,KAAY,qBAAGC,OAAH,GAA0BC,EAAAA,IAAtDwB,YAEFC,EAAkB,kBAAMZ,EAAKD,EAAX,EAkBlBc,EAAU,CACd,kBAAC,EAAAC,OAAD,CAAQ/C,GAAG,eAAe4B,IAAI,SAASnB,QAAQ,SAASuC,KAAK,SAASC,QAjBvD,WACfhB,EAAKiB,EAAAA,GAAAA,QAAAA,MACLR,GACES,EAAAA,EAAAA,IACEX,EAAOxC,GACPsC,EAAKc,cACH,CACEpD,GAAI,oCACJY,eAAgB,qCAElB,CAAEyC,MAAOb,EAAOhD,QAIvB,EAG0F8D,YAAalB,GACnGE,EAAKc,cAAc,CAClBpD,GAAI,wBACJY,eAAgB,gCAGpB,kBAAC,EAAAmC,OAAD,CAAQ/C,GAAG,eAAe4B,IAAI,SAASnB,QAAQ,OAAOuC,KAAK,SAASC,QAASJ,GAC1EP,EAAKc,cAAc,CAClBpD,GAAI,uBACJY,eAAgB,aAKhB2C,EAAU,UAAGX,EAAY1C,MAAK,qBAAGF,KAAgBwC,EAAOgB,cAA1B,WAApB,aAAG,EAA4DhE,KAEzEiE,EAAejB,EAAOvB,aAAayC,QAAO,qBAAGC,UAAH,IAE1CC,EACJ,kBAAC,EAAAC,YAAD,KACE,kBAAC,EAAAvC,KAAD,CAAMwC,UAAWvC,EAAAA,aAAAA,GACU,IAAxBkC,EAAapC,QAAgBb,EAAa,SAAU,CAAEhB,KAAMgD,EAAOhD,OACnEiE,EAAapC,OAAS,GACrBhB,EAAsB0D,SAASR,IAC/B/C,EAAa,WAAY,CACvBhB,KAAMgD,EAAOhD,KACbkB,MAAO+C,EAAapC,SAEvBoC,EAAapC,OAAS,IACpBhB,EAAsB0D,SAASR,IAChC/C,EAAa,uBAAwB,CACnChB,KAAMgD,EAAOhD,KACbkB,MAAO+C,EAAapC,UAGzBoC,EAAapC,OAAS,GAAK,kBAAC,EAAD,CAAkBJ,aAAcwC,IAC5D,kBAAC,EAAAO,SAAD,CACEC,MAAO3B,EAAKc,cAAc,CACxBpD,GAAI,8BACJY,eAAgB,qDAElBsD,SAAU,kBAAM7B,GAAe,SAAC8B,GAAD,OAAYA,CAAZ,GAArB,EACV,aAAY7B,EAAKc,cAAc,CAC7BpD,GAAI,8BACJY,eAAgB,qDAElBZ,GAAG,oBACHR,KAAK,oBACL4E,UAAWhC,KAKjB,OACE,kBAAC,EAAAiC,MAAD,CACEC,UAAU,UACV,aAAYhC,EAAKc,cAAc,CAC7BpD,GAAI,sBACJY,eAAgB,mBAElB2D,OACE,kBAAC,EAAAC,MAAD,CAAOC,aAAa,KAAKC,KAAK,MAAMJ,UAAU,WAC5C,kBAAC,KAAD,CAAyBI,KAAK,KAAKJ,UAAU,6CAC5ChC,EAAKc,cAAc,CAClBpD,GAAI,sBACJY,eAAgB,oBAItB+D,QAAM,EACNlE,QAAQ,QACRmE,QAAS/B,EACTC,QAASA,GAERc,EAGN,EAED7B,EAAkBF,UAAY,CAC5BG,SAAUF,IAAAA,QAGZC,EAAkB8C,aAAe,CAC/B7C,SAAUkB,EAAAA,GAAAA,QAAAA,MAGZ,S","sources":["webpack:///./node_modules/@patternfly/react-icons/dist/esm/icons/exclamation-triangle-icon.js","webpack:///./src/components/SourceRemoveModal/helpers.js","webpack:///./src/components/SourceRemoveModal/AppListInRemoval.js","webpack:///./src/components/SourceRemoveModal/SourceRemoveModal.js"],"sourcesContent":["import { createIcon } from '../createIcon';\n\nexport const ExclamationTriangleIconConfig = {\n  name: 'ExclamationTriangleIcon',\n  height: 512,\n  width: 576,\n  svgPath: 'M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z',\n  yOffset: 0,\n  xOffset: 0,\n};\n\nexport const ExclamationTriangleIcon = createIcon(ExclamationTriangleIconConfig);\n\nexport default ExclamationTriangleIcon;","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { ANSIBLE_TOWER_NAME, SATELLITE_NAME } from '../../utilities/constants';\n\nexport const idToName = (id, appTypes) => appTypes.find((app) => app.id === id)?.display_name || 'Unknown';\n\nexport const typesWithExtendedText = [SATELLITE_NAME, ANSIBLE_TOWER_NAME];\n\nexport const bodyVariants = (variant, { name, count }) =>\n  ({\n    noApps: (\n      <FormattedMessage\n        id=\"sources.deleteTextBodyNoApps\"\n        defaultMessage=\"Removing { name } will permanently delete all data collected.\"\n        values={{\n          name: <b>{name}</b>,\n        }}\n      />\n    ),\n    withApps: (\n      <FormattedMessage\n        id=\"sources.deleteTextBodyWithApps\"\n        defaultMessage={`Removing { name } detaches the following\n        connected {count, plural, one {application} other {applications}} from this source:`}\n        values={{\n          name: <b>{name}</b>,\n          count,\n        }}\n      />\n    ),\n    withAppsExtendedText: (\n      <FormattedMessage\n        id=\"sources.deleteTextBodyWithAppsExtended\"\n        defaultMessage={`Removing { name } permanently deletes all collected data and detaches the following\n    connected {count, plural, one {application} other {applications}}:`}\n        values={{\n          name: <b>{name}</b>,\n          count,\n        }}\n      />\n    ),\n  }[variant]);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useSelector } from 'react-redux';\n\nimport { Text, TextList, TextListItem, TextVariants } from '@patternfly/react-core';\n\nimport { idToName } from './helpers';\n\nconst AppListInRemoval = ({ applications }) => {\n  const { appTypes } = useSelector(({ sources }) => sources, shallowEqual);\n\n  if (applications.length === 1) {\n    return <Text variant={TextVariants.p}>{idToName(applications[0].application_type_id, appTypes)}</Text>;\n  }\n\n  return (\n    <TextList>\n      {applications.map(({ id, application_type_id }) => (\n        <TextListItem key={id}>{idToName(application_type_id, appTypes)}</TextListItem>\n      ))}\n    </TextList>\n  );\n};\n\nAppListInRemoval.propTypes = {\n  applications: PropTypes.array,\n};\n\nexport default AppListInRemoval;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useIntl } from 'react-intl';\n\nimport { Button, Checkbox, Modal, Text, TextContent, TextVariants, Title } from '@patternfly/react-core';\n\nimport ExclamationTriangleIcon from '@patternfly/react-icons/dist/esm/icons/exclamation-triangle-icon';\n\nimport { removeSource } from '../../redux/sources/actions';\nimport { useSource } from '../../hooks/useSource';\nimport { routes } from '../../Routes';\n\nimport { bodyVariants, typesWithExtendedText } from './helpers';\nimport AppListInRemoval from './AppListInRemoval';\n\nconst SourceRemoveModal = ({ backPath }) => {\n  const { push } = useHistory();\n\n  const [acknowledge, setAcknowledge] = useState(false);\n\n  const intl = useIntl();\n  const source = useSource();\n\n  const dispatch = useDispatch();\n\n  const { sourceTypes } = useSelector(({ sources }) => sources, shallowEqual);\n\n  const returnToSources = () => push(backPath);\n\n  const onSubmit = () => {\n    push(routes.sources.path);\n    dispatch(\n      removeSource(\n        source.id,\n        intl.formatMessage(\n          {\n            id: 'sources.notificationDeleteMessage',\n            defaultMessage: `{title} was deleted successfully.`,\n          },\n          { title: source.name }\n        )\n      )\n    );\n  };\n\n  const actions = [\n    <Button id=\"deleteSubmit\" key=\"submit\" variant=\"danger\" type=\"button\" onClick={onSubmit} isDisabled={!acknowledge}>\n      {intl.formatMessage({\n        id: 'sources.deleteConfirm',\n        defaultMessage: 'Remove source and its data',\n      })}\n    </Button>,\n    <Button id=\"deleteCancel\" key=\"cancel\" variant=\"link\" type=\"button\" onClick={returnToSources}>\n      {intl.formatMessage({\n        id: 'sources.deleteCancel',\n        defaultMessage: 'Cancel',\n      })}\n    </Button>,\n  ];\n\n  const sourceType = sourceTypes.find(({ id }) => id === source.source_type_id)?.name;\n\n  const filteredApps = source.applications.filter(({ isDeleting }) => !isDeleting);\n\n  const body = (\n    <TextContent>\n      <Text component={TextVariants.p}>\n        {filteredApps.length === 0 && bodyVariants('noApps', { name: source.name })}\n        {filteredApps.length > 0 &&\n          typesWithExtendedText.includes(sourceType) &&\n          bodyVariants('withApps', {\n            name: source.name,\n            count: filteredApps.length,\n          })}\n        {filteredApps.length > 0 &&\n          !typesWithExtendedText.includes(sourceType) &&\n          bodyVariants('withAppsExtendedText', {\n            name: source.name,\n            count: filteredApps.length,\n          })}\n      </Text>\n      {filteredApps.length > 0 && <AppListInRemoval applications={filteredApps} />}\n      <Checkbox\n        label={intl.formatMessage({\n          id: 'sources.deleteCheckboxTitle',\n          defaultMessage: `I acknowledge that this action cannot be undone.`,\n        })}\n        onChange={() => setAcknowledge((value) => !value)}\n        aria-label={intl.formatMessage({\n          id: 'sources.deleteCheckboxTitle',\n          defaultMessage: `I acknowledge that this action cannot be undone.`,\n        })}\n        id=\"acknowledgeDelete\"\n        name=\"acknowledgeDelete\"\n        isChecked={acknowledge}\n      />\n    </TextContent>\n  );\n\n  return (\n    <Modal\n      className=\"sources\"\n      aria-label={intl.formatMessage({\n        id: 'sources.deleteTitle',\n        defaultMessage: `Remove source?`,\n      })}\n      header={\n        <Title headingLevel=\"h1\" size=\"2xl\" className=\"sources\">\n          <ExclamationTriangleIcon size=\"sm\" className=\"ins-m-alert src-c-delete-icon pf-u-mr-sm\" />\n          {intl.formatMessage({\n            id: 'sources.deleteTitle',\n            defaultMessage: `Remove source?`,\n          })}\n        </Title>\n      }\n      isOpen\n      variant=\"small\"\n      onClose={returnToSources}\n      actions={actions}\n    >\n      {body}\n    </Modal>\n  );\n};\n\nSourceRemoveModal.propTypes = {\n  backPath: PropTypes.string,\n};\n\nSourceRemoveModal.defaultProps = {\n  backPath: routes.sources.path,\n};\n\nexport default SourceRemoveModal;\n"],"names":["ExclamationTriangleIconConfig","name","height","width","svgPath","yOffset","xOffset","ExclamationTriangleIcon","idToName","id","appTypes","find","app","display_name","typesWithExtendedText","SATELLITE_NAME","ANSIBLE_TOWER_NAME","bodyVariants","variant","count","noApps","defaultMessage","values","withApps","withAppsExtendedText","AppListInRemoval","applications","useSelector","sources","shallowEqual","length","Text","TextVariants","application_type_id","TextList","map","TextListItem","key","propTypes","PropTypes","SourceRemoveModal","backPath","push","useHistory","useState","acknowledge","setAcknowledge","intl","useIntl","source","useSource","dispatch","useDispatch","sourceTypes","returnToSources","actions","Button","type","onClick","routes","removeSource","formatMessage","title","isDisabled","sourceType","source_type_id","filteredApps","filter","isDeleting","body","TextContent","component","includes","Checkbox","label","onChange","value","isChecked","Modal","className","header","Title","headingLevel","size","isOpen","onClose","defaultProps"],"sourceRoot":""}