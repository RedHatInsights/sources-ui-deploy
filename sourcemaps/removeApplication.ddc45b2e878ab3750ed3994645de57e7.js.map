{"version":3,"file":"js/removeApplication.04a4f9aec4b70c179cc6.js","mappings":"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","sources":["webpack:///./src/components/AddApplication/RemoveAppModal.js","webpack:///./src/components/AddApplication/removeAppSubmit.js"],"sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\n\nimport { Button, Modal, Text, TextContent, TextVariants, Title } from '@patternfly/react-core';\nimport ExclamationTriangleIcon from '@patternfly/react-icons/dist/esm/icons/exclamation-triangle-icon';\n\nimport { useSource } from '../../hooks/useSource';\n\nimport removeAppSubmit from './removeAppSubmit';\nimport { replaceRouteId, routes } from '../../Routing';\nimport { useAppNavigate } from '../../hooks/useAppNavigate';\nimport AppNavigate from '../AppNavigate';\n\nconst RemoveAppModal = () => {\n  const intl = useIntl();\n  const navigate = useAppNavigate();\n  const { app_id } = useParams();\n  const source = useSource();\n\n  const appTypes = useSelector(({ sources }) => sources.appTypes);\n  const dispatch = useDispatch();\n\n  const application = source.applications?.find(({ id }) => id === app_id);\n\n  if (!application) {\n    return <AppNavigate to={replaceRouteId('/' + routes.sourcesDetail.path, source.id)} />;\n  }\n\n  const appType = appTypes.find(({ id }) => id === application?.application_type_id);\n\n  const app = {\n    id: app_id,\n    display_name: appType?.display_name,\n    dependent_applications: appType?.dependent_applications,\n    sourceAppsNames: source.applications.map(\n      ({ application_type_id }) => appTypes.find(({ id }) => id === application_type_id)?.display_name\n    ),\n  };\n\n  const onCancel = () => navigate(replaceRouteId(routes.sourcesDetail.path, source.id));\n  const onSubmit = () => removeAppSubmit(app, intl, onCancel, dispatch, source);\n\n  const dependentApps = appType?.dependent_applications\n    .map((appName) => {\n      const appType = appTypes.find(({ name }) => name === appName);\n\n      return source?.applications?.find(({ application_type_id }) => application_type_id === appType.id) && appType?.display_name;\n    })\n    .filter(Boolean);\n\n  return (\n    <Modal\n      className=\"sources\"\n      isOpen={true}\n      onClose={onCancel}\n      variant=\"small\"\n      aria-label={intl.formatMessage({\n        id: 'sources.deleteAppTitle',\n        defaultMessage: 'Remove application?',\n      })}\n      header={\n        <Title headingLevel=\"h1\" size=\"2xl\" className=\"sources\">\n          <ExclamationTriangleIcon size=\"sm\" className=\"ins-m-alert src-c-delete-icon pf-u-mr-sm\" />\n          {intl.formatMessage({\n            id: 'sources.deleteAppTitle',\n            defaultMessage: 'Remove application?',\n          })}\n        </Title>\n      }\n      actions={[\n        <Button id=\"deleteSubmit\" key=\"submit\" variant=\"danger\" type=\"button\" onClick={onSubmit}>\n          {intl.formatMessage({\n            id: 'sources.remove',\n            defaultMessage: 'Remove',\n          })}\n        </Button>,\n        <Button id=\"deleteCancel\" key=\"cancel\" variant=\"link\" type=\"button\" onClick={onCancel}>\n          {intl.formatMessage({\n            id: 'sources.cancel',\n            defaultMessage: 'Cancel',\n          })}\n        </Button>,\n      ]}\n    >\n      <TextContent>\n        <Text component={TextVariants.p}>\n          {intl.formatMessage(\n            {\n              id: 'sources.deleteAppWarning',\n              defaultMessage: '{ appName } will be disconnected from this source.',\n            },\n            { appName: <b key=\"b\">{app.display_name}</b> }\n          )}\n        </Text>\n        {dependentApps.length > 0 && (\n          <Text component={TextVariants.p}>\n            {intl.formatMessage(\n              {\n                id: 'sources.deleteAppDetails',\n                defaultMessage: 'This change will affect these applications: { apps }.',\n              },\n              { apps: dependentApps }\n            )}\n          </Text>\n        )}\n      </TextContent>\n    </Modal>\n  );\n};\n\nexport default RemoveAppModal;\n","import { removeApplication } from '../../redux/sources/actions';\n\nconst removeAppSubmit = (app, intl, onCancel, dispatch, source) => {\n  const titleSuccess = intl.formatMessage(\n    {\n      id: 'sources.removeAppWarning',\n      defaultMessage: `{ name } was removed from this source.`,\n    },\n    {\n      name: app.display_name,\n    }\n  );\n  const titleError = intl.formatMessage(\n    {\n      id: 'sources.removeAppError',\n      defaultMessage: `Removing of { name } application from this source was unsuccessful.`,\n    },\n    {\n      name: app.display_name,\n    }\n  );\n  onCancel && onCancel();\n  return dispatch(removeApplication(app.id, source.id, titleSuccess, titleError));\n};\n\nexport default removeAppSubmit;\n"],"names":["intl","useIntl","navigate","useAppNavigate","app_id","useParams","source","useSource","appTypes","useSelector","sources","dispatch","useDispatch","application","applications","find","id","to","replaceRouteId","routes","appType","application_type_id","app","display_name","dependent_applications","sourceAppsNames","map","onCancel","dependentApps","appName","name","filter","Boolean","Modal","className","isOpen","onClose","variant","formatMessage","defaultMessage","header","Title","headingLevel","size","actions","Button","key","type","onClick","removeAppSubmit","TextContent","Text","component","TextVariants","length","apps","titleSuccess","titleError","removeApplication"],"sourceRoot":""}