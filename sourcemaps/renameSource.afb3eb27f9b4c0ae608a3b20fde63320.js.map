{"version":3,"file":"js/renameSource.1655366307189.9bd2399c8047ec9cdf0f.js","mappings":"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","sources":["webpack:///./node_modules/awesome-imperative-promise/dist/index.es.js","webpack:///./node_modules/awesome-debounce-promise/dist/index.es.js","webpack:///./node_modules/awesome-only-resolves-last-promise/dist/index.es.js","webpack:///./src/components/SourceDetail/SourceRenameModal.js","webpack:///./node_modules/debounce-promise/dist/index.js"],"sourcesContent":["function createImperativePromise(promiseArg) {\r\n    var resolve = null;\r\n    var reject = null;\r\n    var wrappedPromise = new Promise(function (_resolve, _reject) {\r\n        resolve = _resolve;\r\n        reject = _reject;\r\n    });\r\n    promiseArg && promiseArg.then(function (val) {\r\n        resolve && resolve(val);\r\n    }, function (error) {\r\n        reject && reject(error);\r\n    });\r\n    return {\r\n        promise: wrappedPromise,\r\n        resolve: function (value) {\r\n            resolve && resolve(value);\r\n        },\r\n        reject: function (reason) {\r\n            reject && reject(reason);\r\n        },\r\n        cancel: function () {\r\n            resolve = null;\r\n            reject = null;\r\n        }\r\n    };\r\n}\n\nexport { createImperativePromise };\n//# sourceMappingURL=index.es.js.map\n","import DebouncePromise from 'debounce-promise';\nimport { onlyResolvesLast } from 'awesome-only-resolves-last-promise';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DefaultOptions = {\r\n    // One distinct debounced function is created per key and added to an internal cache\r\n    // By default, the key is null, which means that all the calls\r\n    // will share the same debounced function\r\n    key: function () {\r\n        var _args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _args[_i] = arguments[_i];\r\n        }\r\n        return null;\r\n    },\r\n    // By default, a debounced function will only resolve\r\n    // the last promise it returned\r\n    // Former calls will stay unresolved, so that you don't have\r\n    // to handle concurrency issues in your code\r\n    // Setting this to false means all returned promises will resolve to the last result\r\n    onlyResolvesLast: true,\r\n};\r\n// We create a debouncing function cache, because when wrapping the original function,\r\n// we may actually want to route the function call to different debounced functions depending function paameters\r\nvar DebounceCache = /** @class */ (function () {\r\n    function DebounceCache(config) {\r\n        this.config = config;\r\n        this.debounceSingleton = null;\r\n        this.debounceCache = {}; // when key feature is used\r\n    }\r\n    DebounceCache.prototype._createDebouncedFunction = function () {\r\n        var debouncedFunc = DebouncePromise(this.config.func, this.config.wait, this.config.options); // TODO TS\r\n        if (this.config.options.onlyResolvesLast) {\r\n            debouncedFunc = onlyResolvesLast(debouncedFunc);\r\n        }\r\n        return {\r\n            func: debouncedFunc,\r\n        };\r\n    };\r\n    DebounceCache.prototype.getDebouncedFunction = function (args) {\r\n        var _a;\r\n        var key = (_a = this.config.options).key.apply(_a, args);\r\n        if (key === null || typeof key === 'undefined') {\r\n            if (!this.debounceSingleton) {\r\n                this.debounceSingleton = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceSingleton;\r\n        }\r\n        else {\r\n            if (!this.debounceCache[key]) {\r\n                this.debounceCache[key] = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceCache[key];\r\n        }\r\n    };\r\n    return DebounceCache;\r\n}());\r\nfunction AwesomeDebouncePromise(func, wait, options) {\r\n    var finalOptions = __assign({}, DefaultOptions, options);\r\n    var debounceCache = new DebounceCache({\r\n        func: func,\r\n        wait: wait,\r\n        options: finalOptions,\r\n    });\r\n    var AwesomeDebouncePromiseWrapper = (function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var debouncedFn = debounceCache.getDebouncedFunction(args).func;\r\n        return debouncedFn.apply(void 0, args);\r\n    }); // TODO fix TS\r\n    /*\r\n    AwesomeDebouncePromiseWrapper.cancel = (key?: string) => {\r\n  \n    };\r\n    */\r\n    return AwesomeDebouncePromiseWrapper;\r\n}\n\nexport default AwesomeDebouncePromise;\n//# sourceMappingURL=index.es.js.map\n","import { createImperativePromise } from 'awesome-imperative-promise';\n\n// see https://stackoverflow.com/a/54825370/82609\r\nfunction onlyResolvesLast(asyncFunction) {\r\n    var cancelPrevious = null;\r\n    var wrappedFunction = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cancelPrevious && cancelPrevious();\r\n        var initialPromise = asyncFunction.apply(void 0, args);\r\n        var _a = createImperativePromise(initialPromise), promise = _a.promise, cancel = _a.cancel;\r\n        cancelPrevious = cancel;\r\n        return promise;\r\n    };\r\n    return wrappedFunction; // TODO fix TS\r\n}\n\nexport { onlyResolvesLast };\n//# sourceMappingURL=index.es.js.map\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport { Modal } from '@patternfly/react-core';\nimport componentTypes from '@data-driven-forms/react-form-renderer/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/validator-types';\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/form-template';\n\nimport { useSource } from '../../hooks/useSource';\nimport SourcesFormRenderer from '../../utilities/SourcesFormRenderer';\nimport { replaceRouteId, routes } from '../../Routes';\nimport { renameSource } from '../../redux/sources/actions';\nimport { asyncValidatorDebounced } from '../../components/addSourceWizard/SourceAddSchema';\nimport validated from '../../utilities/resolveProps/validated';\n\nconst SourceRenameModal = () => {\n  const source = useSource();\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const { push } = useHistory();\n\n  const returnToSource = () => push(replaceRouteId(routes.sourcesDetail.path, source.id));\n\n  return (\n    <Modal\n      title={intl.formatMessage({ id: 'sources.renameTitle', defaultMessage: 'Rename source' })}\n      description={intl.formatMessage({ id: 'sources.renameDescription', defaultMessage: 'Enter a new name for your source.' })}\n      onClose={returnToSource}\n      isOpen\n      variant=\"medium\"\n      className=\"sources\"\n    >\n      <SourcesFormRenderer\n        FormTemplate={(props) => (\n          <FormTemplate\n            {...props}\n            disableSubmit={['pristine', 'validating', 'invalid']}\n            submitLabel={intl.formatMessage({ id: 'sources.save', defaultMessage: 'Save' })}\n          />\n        )}\n        onSubmit={({ name }) => {\n          returnToSource();\n\n          return dispatch(\n            renameSource(\n              source.id,\n              name,\n              intl.formatMessage({ id: 'sources.renameError', defaultMessage: 'Renaming was unsuccessful' })\n            )\n          );\n        }}\n        onCancel={returnToSource}\n        schema={{\n          fields: [\n            {\n              name: 'name',\n              label: intl.formatMessage({\n                id: 'sources.name',\n                defaultMessage: 'Name',\n              }),\n              component: componentTypes.TEXT_FIELD,\n              validate: [(value) => asyncValidatorDebounced(value, source.id, intl), { type: validatorTypes.REQUIRED }],\n              isRequired: true,\n              resolveProps: validated,\n              initialValue: source.name,\n            },\n          ],\n        }}\n      />\n    </Modal>\n  );\n};\n\nexport default SourceRenameModal;\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map"],"names":["createImperativePromise","promiseArg","resolve","reject","wrappedPromise","Promise","_resolve","_reject","then","val","error","promise","value","reason","cancel","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","DefaultOptions","key","_args","_i","onlyResolvesLast","DebounceCache","config","debounceSingleton","debounceCache","_createDebouncedFunction","asyncFunction","cancelPrevious","debouncedFunc","func","wait","options","args","_a","getDebouncedFunction","finalOptions","debouncedFn","source","useSource","intl","useIntl","dispatch","useDispatch","push","useHistory","returnToSource","replaceRouteId","routes","id","Modal","title","formatMessage","defaultMessage","description","onClose","isOpen","variant","className","FormTemplate","props","disableSubmit","submitLabel","onSubmit","name","renameSource","onCancel","schema","fields","label","component","componentTypes","validate","asyncValidatorDebounced","type","validatorTypes","isRequired","resolveProps","validated","initialValue","getWait","defer","deferred","module","exports","fn","undefined","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","Array","_key","leading","accumulate","result","concat","clearTimeout","setTimeout","flush","bind","argsIndex","results","thisDeferred"],"sourceRoot":""}