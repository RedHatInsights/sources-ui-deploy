{"version":3,"sources":["webpack:///./src/components/SourceDetail/SourceSummaryCard.js","webpack:///./src/components/SourceDetail/ApplicationsCard.js","webpack:///./src/components/SourceDetail/NoApplications.js","webpack:///./src/components/SourceDetail/NoPermissions.js","webpack:///./src/api/doLoadSourceForEdit.js","webpack:///./src/api/getCmValues.js","webpack:///./src/components/SourceEditForm/parser/authentication.js","webpack:///./src/components/SourceEditForm/parser/application.js","webpack:///./src/components/SourceEditForm/helpers.js","webpack:///./src/components/SourceEditForm/onSubmit.js","webpack:///./src/components/SourceEditForm/parser/endpoint.js","webpack:///./src/components/SourceEditForm/parser/EditAlert.js","webpack:///./src/components/SourceEditForm/parser/parseSourceToSchema.js","webpack:///./src/components/SourceEditForm/reducer.js","webpack:///./src/components/SourceEditForm/SubmittingModal.js","webpack:///./src/components/SourceEditForm/TimeoutedModal.js","webpack:///./src/components/SourceEditForm/ErroredModal.js","webpack:///./src/components/SourceEditForm/SourceEditModal.js","webpack:///./src/components/SourceDetail/ApplicationResourcesCard.js","webpack:///./src/components/SourceDetail/Breadcrumbs.js","webpack:///./src/components/SourceDetail/SourceKebab.js","webpack:///./src/components/SourceDetail/DetailHeader.js","webpack:///./src/pages/Detail.js","webpack:///./src/hooks/useSource.js","webpack:///./src/hooks/useHasWritePermissions.js","webpack:///./src/hooks/useIsLoaded.js","webpack:///./src/components/RedirectNoId/RedirectNoId.js","webpack:///./src/components/Authentication.js","webpack:///./src/utilities/SourcesFormRenderer.js","webpack:///./src/components/RedirectNoWriteAccess/RedirectNoWriteAccess.js","webpack:///./src/components/CustomRoute/CustomRoute.js","webpack:///./src/api/checkSourceStatus.js","webpack:///./src/api/doUpdateSource.js","webpack:///./src/api/patchCmValues.js"],"names":["SourceSummaryCard","intl","useIntl","source","useSource","sourceTypes","useSelector","sources","shallowEqual","Card","className","CardTitle","formatMessage","id","defaultMessage","CardBody","DescriptionList","columnModifier","default","DescriptionListGroup","DescriptionListTerm","DescriptionListDescription","sourceTypeFormatter","source_type_id","undefined","last_checked_at","last_available_at","dateFormatter","created_at","updated_at","ApplicationsCard","push","useHistory","appTypes","hasRightAccess","useHasWritePermissions","sourceType","find","type","sourceTypeName","name","filteredAppTypes","filter","supported_source_types","includes","filterApps","map","app","connectedApp","applications","application_type_id","FormGroup","key","Switch","label","display_name","isChecked","Boolean","isDisabled","isDeleting","onChange","value","replaceRouteId","routes","sourcesDetailAddApp","path","replace","sourcesDetailRemoveApp","NoApplications","EmptyState","EmptyStateIcon","icon","PlusCircleIcon","Title","headingLevel","size","EmptyStateBody","NoPermissions","PrivateIcon","doLoadSourceForEdit","hasCostManagement","Promise","all","getSourcesApi","showSource","listSourceEndpoints","doLoadApplicationsForEdit","axiosInstance","get","COST_MANAGEMENT_API_BASE","then","a","sourceData","endpoints","costManagement","endpoint","data","apps","basicValues","billing_source","credentials","authentication","promises","addToApp","appAuthenticationIds","forEach","authentications","auth","showAuthentication","length","appAuths","index","listEndpointAuthentications","getLastPartOfName","fieldName","split","pop","getAdditionalFields","stepKey","fields","field","authenticationFields","appName","schema","schemaAuth","authtype","additionalStepKeys","hardcodedSchemas","getAdditionalAuthStepsKeys","additionalStepsFields","getAdditionalAuthSteps","step","flatMap","x","enhancedFields","getEnhancedAuthField","specialModifierAWS","editedName","startsWith","createAuthFieldName","finalField","component","APP_NAMES","createOneAppFields","appType","Object","keys","isRequired","validate","validatorTypes","REQUIRED","componentTypes","TEXT_FIELD","appendClusterIdentifier","applicationsFields","TABS","isBox","title","selectOnlyEditedValues","values","editing","filteredValues","set","prepareInitialValues","url","rest","auhenticationsFinal","mergeAuths","reduce","acc","curr","scheme","host","port","endpointToUrl","source_type","onSubmit","dispatch","setState","startDate","Date","doUpdateSource","loadEntities","checkSourceStatus","checkAppAvailability","statusResults","unavailableApp","availability_status","UNAVAILABLE","message","description","availability_status_error","variant","some","endpointFields","hidden","modifiedFields","getEnhancedEndpointField","subForm","SUB_FORM","condition","when","isNotEmpty","validation","isEmpty","EditAlert","useFormApi","getState","Alert","isInline","parseSourceToSchema","Content","initialState","loading","initialValues","isSubmitting","initialLoad","submitError","isTimeouted","reducer","state","product_name","SubmittingModal","customText","TimeoutedModal","Bullseye","EmptyStateVariant","full","WrenchIcon","color","newLine","Button","onClick","propTypes","PropTypes","func","ErroredModal","onRetry","onClose","secondaryActions","Text","target","href","rel","returnButtonTitle","SourceEditModal","useReducer","sourceRedux","isLoaded","useIsLoaded","sourceTypesLoaded","appTypesLoaded","useDispatch","useEffect","isLoading","Spinner","SourcesFormRenderer","formApi","dirtyFields","FormTemplate","props","canReset","submitLabel","disableSubmit","clearedValue","ApplicationResourcesCard","Breadcrumbs","Breadcrumb","BreadcrumbItem","to","isActive","SourceKebab","useState","isOpen","setOpen","disabledProps","tooltip","Dropdown","toggle","KebabToggle","onToggle","isPlain","position","dropdownItems","DropdownItem","sourcesDetailRename","sourcesDetailRemove","DetailHeader","PageHeader","Flex","FlexItem","availabilityFormatter","align","TextContent","SourceRemoveModal","lazy","AddApplication","RemoveAppModal","SourceRenameModal","Detail","fallback","CustomRoute","exact","route","Component","componentProps","backPath","sourcesDetail","Grid","GridItem","md","Fragment","RedirectNoId","useParams","entities","user","orgAdmin","isOrgAdmin","writePermissions","loaded","applicationIsLoaded","setIsApplicationLoaded","doLoadSource","addHiddenSource","addMessage","Authentication","formOptions","match","isEditing","isModified","edited","setEdited","firstClick","useRef","mounted","current","pristine","doNotRequirePassword","resolveProps","validated","helperText","onFocus","TextInput","aria-label","autoFocus","componentMapper","mapperExtension","RedirectNoWriteAccess","CustomRouteInternal","children","redirectNoId","writeAccess","shape","string","bool","node","any","oneOfType","object","checkAvailabilitySource","urlOrHost","formData","u","URL","protocol","hostname","defaultPort","pathname","error","parseUrl","updateSource","endPointPort","parseInt","endpointData","isNaN","updateEndpoint","idWithoutPrefix","updateAuthentication","cmDataOut","patch"],"mappings":"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","file":"js/sourceDetail.02dd45c465ec1f9c2270.js","sourcesContent":["import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { shallowEqual, useSelector } from 'react-redux';\n\nimport { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { CardTitle } from '@patternfly/react-core/dist/js/components/Card/CardTitle';\nimport { DescriptionList } from '@patternfly/react-core/dist/js/components/DescriptionList/DescriptionList';\nimport { DescriptionListGroup } from '@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListGroup';\nimport { DescriptionListTerm } from '@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListTerm';\nimport { DescriptionListDescription } from '@patternfly/react-core/dist/js/components/DescriptionList/DescriptionListDescription';\n\nimport { useSource } from '../../hooks/useSource';\nimport { dateFormatter, sourceTypeFormatter } from '../../views/formatters';\n\nconst SourceSummaryCard = () => {\n  const intl = useIntl();\n  const source = useSource();\n  const sourceTypes = useSelector(({ sources }) => sources.sourceTypes, shallowEqual);\n\n  return (\n    <Card className=\"pf-m-selectable pf-m-selected card summary-card pf-u-m-lg pf-u-mr-sm-on-md\">\n      <CardTitle>\n        {intl.formatMessage({\n          id: 'detail.summary.title',\n          defaultMessage: 'Source Summary',\n        })}\n      </CardTitle>\n      <CardBody>\n        <DescriptionList\n          columnModifier={{\n            default: '2Col',\n          }}\n        >\n          <DescriptionListGroup>\n            <DescriptionListTerm>\n              {intl.formatMessage({\n                id: 'detail.summary.type',\n                defaultMessage: 'Source type',\n              })}\n            </DescriptionListTerm>\n            <DescriptionListDescription>\n              {sourceTypeFormatter(source.source_type_id, undefined, { sourceTypes })}\n            </DescriptionListDescription>\n          </DescriptionListGroup>\n          <DescriptionListGroup>\n            <DescriptionListTerm>\n              {intl.formatMessage({\n                id: 'detail.summary.lastChecked',\n                defaultMessage: 'Last availability check',\n              })}\n            </DescriptionListTerm>\n            <DescriptionListDescription>\n              {source.last_checked_at || source.last_available_at\n                ? dateFormatter(source.last_checked_at || source.last_available_at)\n                : intl.formatMessage({\n                    id: 'detail.summary.notChecked',\n                    defaultMessage: 'Not checked yet',\n                  })}\n            </DescriptionListDescription>\n          </DescriptionListGroup>\n          <DescriptionListGroup>\n            <DescriptionListTerm>\n              {intl.formatMessage({\n                id: 'detail.summary.dateAdded',\n                defaultMessage: 'Date added',\n              })}\n            </DescriptionListTerm>\n            <DescriptionListDescription>{dateFormatter(source.created_at)}</DescriptionListDescription>\n          </DescriptionListGroup>\n          <DescriptionListGroup>\n            <DescriptionListTerm>\n              {intl.formatMessage({\n                id: 'detail.summary.lastModified',\n                defaultMessage: 'Last modified',\n              })}\n            </DescriptionListTerm>\n            <DescriptionListDescription>{dateFormatter(source.updated_at)}</DescriptionListDescription>\n          </DescriptionListGroup>\n        </DescriptionList>\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default SourceSummaryCard;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { CardTitle } from '@patternfly/react-core/dist/js/components/Card/CardTitle';\nimport { Switch } from '@patternfly/react-core/dist/js/components/Switch/Switch';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\n\nimport filterApps from '@redhat-cloud-services/frontend-components-sources/cjs/filterApps';\n\nimport { useSource } from '../../hooks/useSource';\nimport { replaceRouteId, routes } from '../../Routes';\nimport { useHasWritePermissions } from '../../hooks/useHasWritePermissions';\n\nconst ApplicationsCard = () => {\n  const intl = useIntl();\n  const source = useSource();\n  const { push } = useHistory();\n  const sourceTypes = useSelector(({ sources }) => sources.sourceTypes, shallowEqual);\n  const appTypes = useSelector(({ sources }) => sources.appTypes, shallowEqual);\n  const hasRightAccess = useHasWritePermissions();\n\n  const sourceType = sourceTypes.find((type) => type.id === source.source_type_id);\n  const sourceTypeName = sourceType?.name;\n  const filteredAppTypes = appTypes.filter((type) => type.supported_source_types.includes(sourceTypeName)).filter(filterApps);\n\n  return (\n    <Card className=\"card applications-card pf-u-p-lg pf-u-pl-sm-on-md\">\n      <CardTitle>\n        {intl.formatMessage({\n          id: 'detail.applications.title',\n          defaultMessage: 'Applications',\n        })}\n      </CardTitle>\n      <CardBody>\n        {!hasRightAccess && (\n          <div className=\"pf-u-mb-md\" id=\"no-permissions-applications\">\n            {intl.formatMessage({\n              id: 'sources.notAdminButton',\n              defaultMessage:\n                'To perform this adding/removing applications, you must be granted write permissions from your Organization Administrator.',\n            })}\n          </div>\n        )}\n        <div className=\"pf-c-form\">\n          {filteredAppTypes.map((app) => {\n            const connectedApp = source.applications.find((connectedApp) => connectedApp.application_type_id === app.id);\n\n            return (\n              <FormGroup key={app.id}>\n                <Switch\n                  id={`app-switch-${app.id}`}\n                  label={app.display_name}\n                  isChecked={Boolean(connectedApp)}\n                  isDisabled={connectedApp?.isDeleting || !hasRightAccess}\n                  onChange={(value) =>\n                    !value\n                      ? push(replaceRouteId(routes.sourcesDetailRemoveApp.path, source.id).replace(':app_id', connectedApp.id))\n                      : push(replaceRouteId(routes.sourcesDetailAddApp.path, source.id).replace(':app_type_id', app.id))\n                  }\n                />\n              </FormGroup>\n            );\n          })}\n        </div>\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default ApplicationsCard;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { EmptyState } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\nimport PlusCircleIcon from '@patternfly/react-icons/dist/js/icons/plus-circle-icon';\n\nconst NoApplications = () => {\n  const intl = useIntl();\n\n  return (\n    <EmptyState>\n      <EmptyStateIcon icon={PlusCircleIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        {intl.formatMessage({\n          id: 'detail.noapplications.title',\n          defaultMessage: 'No connected applications',\n        })}\n      </Title>\n      <EmptyStateBody className=\"empty-state-body\">\n        {intl.formatMessage({\n          id: 'detail.noapplications.description',\n          defaultMessage: 'You have not connected any applications to this source. Use the switches above to add applications.',\n        })}\n      </EmptyStateBody>\n    </EmptyState>\n  );\n};\n\nexport default NoApplications;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { EmptyState } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyState';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport { EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateBody';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\nimport PrivateIcon from '@patternfly/react-icons/dist/js/icons/private-icon';\n\nconst NoPermissions = () => {\n  const intl = useIntl();\n\n  return (\n    <EmptyState>\n      <EmptyStateIcon icon={PrivateIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        {intl.formatMessage({\n          id: 'detail.nopermissions.title',\n          defaultMessage: 'Missing permissions',\n        })}\n      </Title>\n      <EmptyStateBody className=\"empty-state-body\">\n        {intl.formatMessage({\n          id: 'detail.nopermissions.description',\n          defaultMessage: 'To perform this action, you must be granted write permissions from your Organization Administrator.',\n        })}\n      </EmptyStateBody>\n    </EmptyState>\n  );\n};\n\nexport default NoPermissions;\n","import { getSourcesApi, doLoadApplicationsForEdit } from './entities';\nimport { getCmValues } from './getCmValues';\n\nexport const doLoadSourceForEdit = (source, hasCostManagement) =>\n  Promise.all([\n    getSourcesApi().showSource(source.id),\n    getSourcesApi().listSourceEndpoints(source.id),\n    doLoadApplicationsForEdit(source.id),\n    hasCostManagement && getCmValues(source.id).catch(() => undefined),\n  ]).then(async ([sourceData, endpoints, applications, costManagement]) => {\n    const endpoint = endpoints && endpoints.data && endpoints.data[0];\n\n    const apps = applications?.sources[0]?.applications || [];\n\n    let basicValues = {\n      source: {\n        ...source,\n        ...sourceData,\n      },\n      applications: apps,\n    };\n\n    if (costManagement) {\n      basicValues = {\n        ...basicValues,\n        billing_source: costManagement.billing_source,\n        credentials: costManagement.authentication.credentials,\n      };\n    }\n\n    const promises = [];\n    let appAuths;\n    const addToApp = [];\n    const appAuthenticationIds = [];\n\n    apps.forEach((app) => {\n      app?.authentications?.forEach((auth) => {\n        if (auth?.id) {\n          promises.push(getSourcesApi().showAuthentication(auth.id));\n          addToApp.push(app.id);\n          appAuthenticationIds.push(auth.id);\n        }\n      });\n    });\n\n    if (promises.length > 0) {\n      appAuths = await Promise.all(promises);\n\n      addToApp.forEach((id, index) => {\n        basicValues.applications.find((app) => app.id === id).authentications.push(appAuths[index]);\n      });\n    }\n\n    if (!endpoint) {\n      return basicValues;\n    }\n\n    return getSourcesApi()\n      .listEndpointAuthentications(endpoint.id)\n      .then((authentications) => ({\n        ...basicValues,\n        endpoints: endpoints.data,\n        authentications: authentications.data.filter(({ id }) => !appAuthenticationIds.includes(id)),\n      }));\n  });\n","import { axiosInstance } from './entities';\nimport { COST_MANAGEMENT_API_BASE } from './constants';\n\nexport const getCmValues = (id) => axiosInstance.get(`${COST_MANAGEMENT_API_BASE}/sources/${id}/`);\n","import get from 'lodash/get';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\nimport hardcodedSchemas from '@redhat-cloud-services/frontend-components-sources/cjs/hardcodedSchemas';\n\nexport const createAuthFieldName = (fieldName, id) => `authentications.a${id}.${fieldName.replace('authentication.', '')}`;\n\nexport const getLastPartOfName = (fieldName) => fieldName.split('.').pop();\n\nexport const removeRequiredValidator = (validate = []) =>\n  validate.filter((validation) => validation.type !== validatorTypes.REQUIRED && validation.type !== 'required-validator');\n\nexport const getEnhancedAuthField = (sourceType, authtype, name, appName = 'generic') =>\n  get(hardcodedSchemas, [sourceType, 'authentication', authtype, appName, name], {});\n\nexport const getAdditionalAuthSteps = (sourceType, authtype, appName = 'generic') =>\n  get(hardcodedSchemas, [sourceType, 'authentication', authtype, appName, 'additionalSteps'], []);\n\nexport const getAdditionalAuthStepsKeys = (sourceType, authtype, appName = 'generic') =>\n  get(hardcodedSchemas, [sourceType, 'authentication', authtype, appName, 'includeStepKeyFields'], []);\n\nexport const getAdditionalFields = (auth, stepKey) => auth?.fields?.filter((field) => field.stepKey === stepKey) || [];\n\nexport const modifyAuthSchemas = (fields, id) =>\n  fields.map((field) => {\n    const editedName = field.name.startsWith('authentication') ? createAuthFieldName(field.name, id) : field.name;\n\n    const finalField = {\n      ...field,\n      name: editedName,\n    };\n\n    const isPassword = getLastPartOfName(finalField.name) === 'password';\n\n    if (isPassword) {\n      finalField.component = 'authentication';\n    }\n\n    return finalField;\n  });\n\nconst specialModifierAWS = (field, authtype) => {\n  if (getLastPartOfName(field.name) !== 'password') {\n    return field;\n  }\n\n  if (authtype === 'arn') {\n    return {\n      ...field,\n      label: 'Cost Management ARN',\n    };\n  }\n\n  if (authtype === 'cloud-meter-arn') {\n    return {\n      ...field,\n      label: 'Subscription Watch ARN',\n    };\n  }\n\n  return field;\n};\n\nexport const authenticationFields = (authentications, sourceType, appName) => {\n  if (!authentications || authentications.length === 0 || !sourceType.schema || !sourceType.schema.authentication) {\n    return [];\n  }\n\n  return authentications.map((auth) => {\n    const schemaAuth = sourceType?.schema?.authentication?.find(({ type }) => type === auth.authtype);\n\n    if (!schemaAuth) {\n      return [];\n    }\n\n    const additionalStepKeys = getAdditionalAuthStepsKeys(sourceType.name, auth.authtype, appName);\n    const additionalStepsFields = getAdditionalAuthSteps(sourceType.name, auth.authtype, appName)\n      ?.map((step) => ({\n        ...step,\n        fields: [...step.fields, ...getAdditionalFields(schemaAuth, step.name)],\n      }))\n      .map(({ fields }) => fields.map(({ name }) => name))\n      .flatMap((x) => x);\n\n    let enhancedFields = schemaAuth.fields\n      .filter(\n        (field) =>\n          additionalStepsFields.includes(field.name) ||\n          !field.stepKey ||\n          (field.stepKey && additionalStepKeys.includes(field.stepKey))\n      )\n      .map((field) => ({\n        ...field,\n        ...getEnhancedAuthField(sourceType.name, auth.authtype, field.name, appName),\n      }));\n\n    if (!appName && sourceType.name === 'amazon') {\n      enhancedFields = enhancedFields.map((field) => specialModifierAWS(field, auth.authtype));\n    }\n\n    return modifyAuthSchemas(enhancedFields, auth.id);\n  });\n};\n","import React from 'react';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\nimport { FormattedMessage } from 'react-intl';\nimport { authenticationFields } from './authentication';\n\nexport const APP_NAMES = {\n  COST_MANAGAMENT: '/insights/platform/cost-management',\n};\n\nexport const appendClusterIdentifier = (sourceType) =>\n  sourceType.name === 'openshift'\n    ? [\n        {\n          name: 'source.source_ref',\n          label: <FormattedMessage id=\"sources.clusterIdentifier\" defaultMessage=\"Cluster identifier\" />,\n          isRequired: true,\n          validate: [{ type: validatorTypes.REQUIRED }],\n          component: componentTypes.TEXT_FIELD,\n        },\n      ]\n    : [];\n\nconst createOneAppFields = (appType, sourceType, app) => [\n  ...authenticationFields(\n    app.authentications?.filter((auth) => Object.keys(auth).length > 1),\n    sourceType,\n    appType?.name\n  ),\n  ...(appType?.name === APP_NAMES.COST_MANAGAMENT ? appendClusterIdentifier(sourceType) : []),\n];\n\nexport const applicationsFields = (applications, sourceType, appTypes) => [\n  {\n    component: componentTypes.TABS,\n    name: 'app-tabs',\n    isBox: true,\n    fields: [\n      ...applications.map((app) => {\n        const appType = appTypes.find(({ id }) => id === app.application_type_id);\n\n        return {\n          name: appType?.id,\n          title: appType?.display_name,\n          fields: createOneAppFields(appType, sourceType, app),\n        };\n      }),\n    ],\n  },\n];\n","import get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { endpointToUrl } from '../../views/formatters';\nimport { APP_NAMES } from './parser/application';\n\nexport const selectOnlyEditedValues = (values, editing) => {\n  const filteredValues = {};\n\n  Object.keys(editing)\n    .filter((key) => editing[key])\n    .forEach((key) => {\n      set(filteredValues, key, get(values, key));\n    });\n\n  return filteredValues;\n};\n\nexport const prepareInitialValues = ({ endpoints, authentications, applications, ...rest }, sourceTypeName) => {\n  const auhenticationsFinal = {};\n\n  const mergeAuths = [\n    ...(authentications || []),\n    ...(applications?.reduce((acc, curr) => [...acc, ...curr.authentications], []) || []),\n  ];\n\n  if (mergeAuths.length > 0) {\n    mergeAuths.forEach((auth) => {\n      auhenticationsFinal[`a${auth.id}`] = auth;\n    });\n  }\n\n  let endpoint;\n  let url;\n\n  if (endpoints && endpoints.length > 0) {\n    endpoint = endpoints[0];\n  }\n\n  if (endpoint) {\n    url = endpoint.scheme || endpoint.host || endpoint.path || endpoint.port ? endpointToUrl(endpoint) : undefined;\n  }\n\n  return {\n    source_type: sourceTypeName,\n    endpoint,\n    authentications: auhenticationsFinal,\n    url,\n    ...rest,\n  };\n};\n\nexport const hasCostManagement = (source, appTypes) =>\n  source.applications\n    .map(({ application_type_id }) => application_type_id)\n    .includes(appTypes.find(({ name }) => name === APP_NAMES.COST_MANAGAMENT)?.id);\n","import { checkAppAvailability } from '@redhat-cloud-services/frontend-components-sources/cjs/getApplicationStatus';\n\nimport { selectOnlyEditedValues } from './helpers';\nimport { loadEntities } from '../../redux/sources/actions';\nimport { checkSourceStatus } from '../../api/checkSourceStatus';\nimport { doLoadSourceForEdit } from '../../api/doLoadSourceForEdit';\nimport { doUpdateSource } from '../../api/doUpdateSource';\n\nimport { UNAVAILABLE } from '../../views/formatters';\n\nexport const onSubmit = async (values, editing, dispatch, source, intl, setState, hasCostManagement) => {\n  setState({ type: 'submit', values, editing });\n\n  const startDate = new Date();\n\n  try {\n    await doUpdateSource(source, selectOnlyEditedValues(values, editing));\n  } catch {\n    dispatch(loadEntities());\n    setState({ type: 'submitFailed' });\n\n    return;\n  }\n\n  checkSourceStatus(source.source.id);\n\n  let message;\n\n  const sourceData = await doLoadSourceForEdit({ id: source.source.id }, hasCostManagement);\n\n  const promises =\n    source.applications?.map(({ id }) => checkAppAvailability(id, undefined, undefined, undefined, startDate)) || [];\n\n  if (source.endpoints?.[0]?.id) {\n    promises.push(checkAppAvailability(source.endpoints[0].id, undefined, undefined, 'getEndpoint', startDate));\n  }\n\n  let statusResults;\n  if (promises.length > 0) {\n    try {\n      statusResults = await Promise.all(promises);\n    } catch (error) {\n      dispatch(loadEntities());\n      setState({ type: 'submitFailed' });\n      return;\n    }\n\n    const unavailableApp = statusResults.find(({ availability_status }) => availability_status === UNAVAILABLE);\n\n    if (unavailableApp) {\n      message = {\n        title: intl.formatMessage({\n          id: 'wizard.failEditToastTitle',\n          defaultMessage: 'Edit source failed',\n        }),\n        description: unavailableApp.availability_status_error,\n        variant: 'danger',\n      };\n\n      setState({ type: 'submitFinished', source: sourceData, message });\n      dispatch(loadEntities());\n      return;\n    }\n\n    const anyTimetouted = statusResults.some(({ availability_status }) => !availability_status);\n\n    if (anyTimetouted) {\n      setState({ type: 'submitTimetouted', source: sourceData });\n      dispatch(loadEntities());\n      return;\n    }\n  }\n\n  message = {\n    title: intl.formatMessage(\n      {\n        id: 'wizard.successEditToastTitle',\n        defaultMessage: 'Source ‘{name}’ was edited successfully.',\n      },\n      { name: source.source.name }\n    ),\n    variant: 'success',\n  };\n\n  setState({ type: 'submitFinished', source: sourceData, message });\n  dispatch(loadEntities());\n};\n","import get from 'lodash/get';\nimport componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport hardcodedSchemas from '@redhat-cloud-services/frontend-components-sources/cjs/hardcodedSchemas';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\n\nexport const getEnhancedEndpointField = (sourceType, name) => get(hardcodedSchemas, [sourceType, 'endpoint', name], {});\n\nexport const endpointFields = (sourceType) => {\n  if (!sourceType.schema || !sourceType.schema.endpoint || sourceType.schema.endpoint.hidden) {\n    return undefined;\n  }\n\n  const schemaAuth = sourceType.schema.endpoint;\n\n  const enhancedFields = schemaAuth.fields.map((field) => ({\n    ...field,\n    ...getEnhancedEndpointField(sourceType.name, field.name),\n  }));\n\n  const modifiedFields = enhancedFields;\n\n  const subForm = {\n    component: componentTypes.SUB_FORM,\n    name: 'endpoint',\n  };\n\n  if (sourceType.name === 'ansible-tower') {\n    const url = modifiedFields.find(({ name }) => name === 'url');\n\n    return {\n      ...subForm,\n      fields: [\n        {\n          component: componentTypes.SUB_FORM,\n          name: 'receptor_node_group',\n          condition: {\n            when: 'endpoint.receptor_node',\n            isNotEmpty: true,\n          },\n          fields: [\n            {\n              ...url,\n              isRequired: false,\n              validate: url?.validate?.filter((validation) => validation.type !== validatorTypes.REQUIRED),\n            },\n          ],\n        },\n        {\n          component: componentTypes.SUB_FORM,\n          name: 'hostname_group',\n          condition: {\n            when: 'endpoint.receptor_node',\n            isEmpty: true,\n          },\n          fields: modifiedFields,\n        },\n      ],\n    };\n  }\n\n  return {\n    ...subForm,\n    fields: modifiedFields,\n  };\n};\n","import React from 'react';\n\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/cjs/use-form-api';\n\nimport { Alert } from '@patternfly/react-core/dist/js/components/Alert/Alert';\n\nconst EditAlert = () => {\n  const formOptions = useFormApi();\n\n  const { message } = formOptions.getState().values;\n\n  return (\n    <Alert variant={message?.variant} isInline title={message?.title}>\n      {message?.description}\n    </Alert>\n  );\n};\n\nexport default EditAlert;\n","import { endpointFields } from './endpoint';\nimport { applicationsFields } from './application';\nimport EditAlert from './EditAlert';\n\nexport const parseSourceToSchema = (source, sourceType, appTypes, intl) => ({\n  description: intl.formatMessage({\n    id: 'sources.editFormDescripiton',\n    defaultMessage: 'Use the form fields to edit application credentials.',\n  }),\n  fields: [\n    {\n      name: 'alert',\n      component: 'description',\n      Content: EditAlert,\n      condition: {\n        when: 'message',\n        isNotEmpty: true,\n      },\n    },\n    ...applicationsFields(source.applications, sourceType, appTypes),\n    source.endpoints && source.endpoints.length > 0 ? endpointFields(sourceType) : false,\n  ].filter(Boolean),\n});\n","import { parseSourceToSchema } from './parser/parseSourceToSchema';\nimport { prepareInitialValues } from './helpers';\n\nexport const initialState = {\n  loading: true,\n  source: undefined,\n  initialValues: {},\n  sourceType: undefined,\n  schema: undefined,\n  isSubmitting: false,\n  initialLoad: true,\n  submitError: false,\n  isTimeouted: false,\n};\n\nconst reducer = (state, { type, source, sourceType, appTypes, intl, message, values, editing }) => {\n  switch (type) {\n    case 'createForm':\n      return {\n        ...state,\n        sourceType,\n        initialValues: prepareInitialValues(state.source, sourceType.product_name),\n        schema: parseSourceToSchema(state.source, sourceType, appTypes, intl),\n        loading: false,\n      };\n    case 'setSource':\n      return {\n        ...state,\n        source,\n        initialLoad: false,\n      };\n    case 'submit':\n      return {\n        ...state,\n        isSubmitting: true,\n        submitError: false,\n        values,\n        editing,\n      };\n    case 'submitFinished':\n      return {\n        ...state,\n        isSubmitting: false,\n        source,\n        message,\n      };\n    case 'submitFailed':\n      return {\n        ...state,\n        isSubmitting: false,\n        submitError: true,\n      };\n    case 'submitTimetouted':\n      return {\n        ...state,\n        source,\n        isSubmitting: false,\n        isTimeouted: true,\n      };\n    case 'cancelTimetouted':\n      return {\n        ...state,\n        isTimeouted: false,\n      };\n    case 'sourceChanged':\n      return {\n        ...state,\n        initialLoad: true,\n        loading: true,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport LoadingStep from '@redhat-cloud-services/frontend-components-sources/cjs/LoadingStep';\n\nconst SubmittingModal = () => {\n  const intl = useIntl();\n\n  return (\n    <LoadingStep\n      customText={intl.formatMessage({\n        id: 'sources.editSubmittingTitle',\n        defaultMessage: 'Validating edited source credentials',\n      })}\n    />\n  );\n};\n\nexport default SubmittingModal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\n\nimport { Title } from '@patternfly/react-core/dist/js/components/Title';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye';\nimport { EmptyState, EmptyStateVariant, EmptyStateBody } from '@patternfly/react-core/dist/js/components/EmptyState';\nimport { EmptyStateIcon } from '@patternfly/react-core/dist/js/components/EmptyState/EmptyStateIcon';\nimport WrenchIcon from '@patternfly/react-icons/dist/js/icons/wrench-icon';\n\nconst TimeoutedModal = ({ setState }) => {\n  const intl = useIntl();\n\n  return (\n    <Bullseye>\n      <EmptyState variant={EmptyStateVariant.full} className=\"pf-u-mt-4xl\">\n        <EmptyStateIcon icon={WrenchIcon} color=\"var(--pf-global--Color--200)\" className=\"pf-u-mb-0\" />\n        <Title headingLevel=\"h2\" size=\"xl\" className=\"pf-u-mt-xl\">\n          {intl.formatMessage({\n            id: 'sources.editTimetoutedTitle',\n            defaultMessage: 'Edit source not yet complete',\n          })}\n        </Title>\n        <EmptyStateBody>\n          {intl.formatMessage(\n            {\n              id: 'sources.editTimetoutedDescription',\n              defaultMessage:\n                'We are still working to confirm your updated credentials and app settings.{newLine}To track progress, check the Status column in the Sources table.',\n            },\n            { newLine: <br key=\"br\" /> }\n          )}\n        </EmptyStateBody>\n        <Button variant=\"primary\" onClick={() => setState({ type: 'cancelTimetouted' })} className=\"pf-u-mt-xl\">\n          {intl.formatMessage({\n            id: 'sources.edit',\n            defaultMessage: 'Edit',\n          })}\n        </Button>\n      </EmptyState>\n    </Bullseye>\n  );\n};\n\nTimeoutedModal.propTypes = {\n  setState: PropTypes.func.isRequired,\n};\n\nexport default TimeoutedModal;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport PropTypes from 'prop-types';\n\nimport { Text } from '@patternfly/react-core/dist/js/components/Text/Text';\n\nimport ErroredStep from '@redhat-cloud-services/frontend-components-sources/cjs/ErroredStep';\n\nconst ErroredModal = ({ onRetry }) => {\n  const intl = useIntl();\n\n  return (\n    <ErroredStep\n      onClose={onRetry}\n      customText={intl.formatMessage({\n        id: 'sources.editErrorDescription',\n        defaultMessage:\n          'There was a problem while trying to edit your source. Please try again. If the error persists, open a support case.',\n      })}\n      secondaryActions={\n        <Text\n          component=\"a\"\n          target=\"_blank\"\n          href=\"https://access.redhat.com/support/cases/#/case/new/open-case?caseCreate=true\"\n          rel=\"noopener noreferrer\"\n        >\n          {intl.formatMessage({\n            id: 'sources.openTicket',\n            defaultMessage: 'Open a support case',\n          })}\n        </Text>\n      }\n      returnButtonTitle={intl.formatMessage({\n        id: 'sources.retryText',\n        defaultMessage: 'Retry',\n      })}\n    />\n  );\n};\n\nErroredModal.propTypes = {\n  onRetry: PropTypes.func.isRequired,\n};\n\nexport default ErroredModal;\n","import React, { useEffect, useReducer } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye';\n\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\n\nimport SourcesFormRenderer from '../../utilities/SourcesFormRenderer';\nimport { doLoadSourceForEdit } from '../../api/doLoadSourceForEdit';\nimport { onSubmit } from './onSubmit';\n\nimport { useSource } from '../../hooks/useSource';\nimport { useIsLoaded } from '../../hooks/useIsLoaded';\nimport reducer, { initialState } from './reducer';\nimport SubmittingModal from './SubmittingModal';\nimport TimeoutedModal from './TimeoutedModal';\nimport ErroredModal from './ErroredModal';\nimport { hasCostManagement } from './helpers';\n\nconst SourceEditModal = () => {\n  const [state, setState] = useReducer(reducer, initialState);\n  const sourceRedux = useSource();\n  const isLoaded = useIsLoaded();\n\n  const {\n    loading,\n    editing,\n    source,\n    initialValues,\n    schema,\n    isSubmitting,\n    initialLoad,\n    message,\n    submitError,\n    isTimeouted,\n    values,\n  } = state;\n\n  const intl = useIntl();\n\n  const { sourceTypes, appTypes, sourceTypesLoaded, appTypesLoaded } = useSelector(({ sources }) => sources, shallowEqual);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!initialLoad) {\n      setState({ type: 'sourceChanged' });\n    }\n  }, [sourceRedux, sourceRedux?.applications?.length]);\n\n  useEffect(() => {\n    if (sourceRedux && initialLoad && appTypesLoaded) {\n      doLoadSourceForEdit(sourceRedux, hasCostManagement(sourceRedux, appTypes)).then((source) => {\n        setState({ type: 'setSource', source });\n      });\n    }\n  }, [sourceRedux, isLoaded, appTypesLoaded, initialLoad]);\n\n  useEffect(() => {\n    if (source && appTypesLoaded && sourceTypesLoaded) {\n      const sourceType = sourceTypes.find(({ id }) => id === source.source.source_type_id);\n\n      setState({ type: 'createForm', sourceType, source, appTypes, intl });\n    }\n  }, [appTypesLoaded, source, sourceTypesLoaded]);\n\n  const isLoading = !appTypesLoaded || !sourceTypesLoaded || loading;\n\n  if (isTimeouted) {\n    return <TimeoutedModal setState={setState} />;\n  }\n\n  if (submitError) {\n    return (\n      <ErroredModal\n        onRetry={() => onSubmit(values, editing, dispatch, source, intl, setState, hasCostManagement(sourceRedux, appTypes))}\n      />\n    );\n  }\n\n  if (isSubmitting) {\n    return <SubmittingModal />;\n  }\n\n  if (isLoading) {\n    return (\n      <Bullseye className=\"pf-u-m-2xl\">\n        <Spinner />\n      </Bullseye>\n    );\n  }\n\n  return (\n    <SourcesFormRenderer\n      schema={schema}\n      onSubmit={(values, formApi) =>\n        onSubmit(\n          values,\n          formApi.getState().dirtyFields,\n          dispatch,\n          source,\n          intl,\n          setState,\n          hasCostManagement(sourceRedux, appTypes)\n        )\n      }\n      FormTemplate={(props) => (\n        <FormTemplate canReset submitLabel=\"Save changes\" disableSubmit={['pristine', 'invalid']} {...props} />\n      )}\n      clearedValue={null}\n      initialValues={{\n        ...initialValues,\n        message,\n      }}\n    />\n  );\n};\n\nexport default SourceEditModal;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { CardTitle } from '@patternfly/react-core/dist/js/components/Card/CardTitle';\n\nimport NoApplications from './NoApplications';\nimport { useHasWritePermissions } from '../../hooks/useHasWritePermissions';\nimport { useSource } from '../../hooks/useSource';\nimport NoPermissions from './NoPermissions';\nimport SourceEditModal from '../SourceEditForm/SourceEditModal';\n\nconst ApplicationResourcesCard = () => {\n  const intl = useIntl();\n  const source = useSource();\n  const hasRightAccess = useHasWritePermissions();\n\n  return (\n    <Card className=\"card pf-u-m-lg pf-u-mt-0\">\n      <CardTitle>\n        {intl.formatMessage({\n          id: 'detail.resources.title',\n          defaultMessage: 'Manage connected applications',\n        })}\n      </CardTitle>\n      <CardBody>\n        {!hasRightAccess && <NoPermissions />}\n        {hasRightAccess && source.applications.length === 0 && <NoApplications />}\n        {hasRightAccess && source.applications.length > 0 && <SourceEditModal />}\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default ApplicationResourcesCard;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { Breadcrumb } from '@patternfly/react-core/dist/js/components/Breadcrumb/Breadcrumb';\nimport { BreadcrumbItem } from '@patternfly/react-core/dist/js/components/Breadcrumb/BreadcrumbItem';\nimport { routes } from '../../Routes';\nimport { useSource } from '../../hooks/useSource';\n\nconst Breadcrumbs = () => {\n  const intl = useIntl();\n  const source = useSource();\n\n  return (\n    <Breadcrumb>\n      <BreadcrumbItem component={({ href, ...props }) => <Link to={href} {...props} />} to={routes.sources.path}>\n        {intl.formatMessage({\n          id: 'sources.sources',\n          defaultMessage: 'Sources',\n        })}\n      </BreadcrumbItem>\n      <BreadcrumbItem isActive>{source.name}</BreadcrumbItem>\n    </Breadcrumb>\n  );\n};\n\nexport default Breadcrumbs;\n","import React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useHistory } from 'react-router-dom';\n\nimport { Dropdown } from '@patternfly/react-core/dist/js/components/Dropdown/Dropdown';\nimport { DropdownItem } from '@patternfly/react-core/dist/js/components/Dropdown/DropdownItem';\nimport { KebabToggle } from '@patternfly/react-core/dist/js/components/Dropdown/KebabToggle';\n\nimport { replaceRouteId, routes } from '../../Routes';\nimport { useSource } from '../../hooks/useSource';\nimport { useHasWritePermissions } from '../../hooks/useHasWritePermissions';\n\nconst SourceKebab = () => {\n  const [isOpen, setOpen] = useState(false);\n  const intl = useIntl();\n  const { push } = useHistory();\n  const source = useSource();\n  const hasRightAccess = useHasWritePermissions();\n\n  const tooltip = intl.formatMessage({\n    id: 'sources.notAdminButton',\n    defaultMessage: 'To perform this action, you must be granted write permissions from your Organization Administrator.',\n  });\n\n  const disabledProps = {\n    tooltip,\n    isDisabled: true,\n    className: 'ins-c-sources__disabled-drodpown-item',\n  };\n\n  return (\n    <Dropdown\n      toggle={<KebabToggle onToggle={() => setOpen(!isOpen)} id=\"toggle-id-6\" />}\n      isOpen={isOpen}\n      isPlain\n      position=\"right\"\n      dropdownItems={[\n        <DropdownItem\n          {...(!hasRightAccess && disabledProps)}\n          key=\"rename\"\n          onClick={() => push(replaceRouteId(routes.sourcesDetailRename.path, source.id))}\n        >\n          {intl.formatMessage({\n            id: 'detail.rename.button',\n            defaultMessage: 'Rename',\n          })}\n        </DropdownItem>,\n        <DropdownItem\n          {...(!hasRightAccess && disabledProps)}\n          key=\"remove\"\n          onClick={() => push(replaceRouteId(routes.sourcesDetailRemove.path, source.id))}\n        >\n          {intl.formatMessage({\n            id: 'detail.remove.button',\n            defaultMessage: 'Remove',\n          })}\n        </DropdownItem>,\n      ]}\n    />\n  );\n};\n\nexport default SourceKebab;\n","import React from 'react';\nimport { useIntl } from 'react-intl';\nimport { shallowEqual, useSelector } from 'react-redux';\n\nimport { PageHeader } from '@redhat-cloud-services/frontend-components/components/cjs/PageHeader';\nimport { Title } from '@patternfly/react-core/dist/js/components/Title/Title';\nimport { TextContent } from '@patternfly/react-core/dist/js/components/Text/TextContent';\nimport { Text } from '@patternfly/react-core/dist/js/components/Text/Text';\nimport { Flex } from '@patternfly/react-core/dist/js/layouts/Flex/Flex';\nimport { FlexItem } from '@patternfly/react-core/dist/js/layouts/Flex/FlexItem';\n\nimport Breadcrumbs from './Breadcrumbs';\nimport { useSource } from '../../hooks/useSource';\nimport { availabilityFormatter } from '../../views/formatters';\nimport SourceKebab from './SourceKebab';\n\nconst DetailHeader = () => {\n  const intl = useIntl();\n  const source = useSource();\n  const appTypes = useSelector(({ sources }) => sources.appTypes, shallowEqual);\n\n  return (\n    <PageHeader>\n      <Breadcrumbs />\n      <Flex className=\"pf-u-mb-sm\">\n        <FlexItem>\n          <Title headingLevel=\"h1\" size=\"2xl\">\n            {source.name}\n          </Title>\n        </FlexItem>\n        <FlexItem>{availabilityFormatter(undefined, source, { appTypes })}</FlexItem>\n        <FlexItem align={{ default: 'alignRight' }}>\n          <SourceKebab />\n        </FlexItem>\n      </Flex>\n      <TextContent>\n        <Text>\n          {intl.formatMessage({\n            id: 'detail.description',\n            defaultMessage: 'View details and manage connections for this source.',\n          })}\n        </Text>\n      </TextContent>\n    </PageHeader>\n  );\n};\n\nexport default DetailHeader;\n","import React, { lazy, Suspense } from 'react';\n\nimport { Grid } from '@patternfly/react-core/dist/js/layouts/Grid/Grid';\nimport { GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/GridItem';\n\nimport SourceSummaryCard from '../components/SourceDetail/SourceSummaryCard';\nimport ApplicationsCard from '../components/SourceDetail/ApplicationsCard';\nimport ApplicationResourcesCard from '../components/SourceDetail/ApplicationResourcesCard';\nimport RedirectNoId from '../components/RedirectNoId/RedirectNoId';\nimport { useSource } from '../hooks/useSource';\nimport { DetailLoader } from '../components/SourcesTable/loaders';\nimport CustomRoute from '../components/CustomRoute/CustomRoute';\nimport { replaceRouteId, routes } from '../Routes';\nimport DetailHeader from '../components/SourceDetail/DetailHeader';\n\nconst SourceRemoveModal = lazy(() =>\n  import(\n    /* webpackChunkName: \"removeSource\" */\n    '../components/SourceRemoveModal/SourceRemoveModal'\n  )\n);\n\nconst AddApplication = lazy(() =>\n  import(\n    /* webpackChunkName: \"addApplication\" */\n    '../components/AddApplication/AddApplication'\n  )\n);\n\nconst RemoveAppModal = lazy(() =>\n  import(\n    /* webpackChunkName: \"removeApplication\" */\n    '../components/AddApplication/RemoveAppModal'\n  )\n);\n\nconst SourceRenameModal = lazy(() =>\n  import(\n    /* webpackChunkName: \"renameSource\" */\n    '../components/SourceDetail/SourceRenameModal'\n  )\n);\n\nconst Detail = () => {\n  const source = useSource();\n\n  if (!source) {\n    return (\n      <React.Fragment>\n        <DetailLoader />\n        <RedirectNoId />\n      </React.Fragment>\n    );\n  }\n\n  return (\n    <div className=\"ins-c-sources__detail-page\">\n      <Suspense fallback={null}>\n        <CustomRoute\n          exact\n          route={routes.sourcesDetailRemove}\n          Component={SourceRemoveModal}\n          componentProps={{ backPath: replaceRouteId(routes.sourcesDetail.path, source.id) }}\n        />\n        <CustomRoute exact route={routes.sourcesDetailAddApp} Component={AddApplication} />\n        <CustomRoute exact route={routes.sourcesDetailRemoveApp} Component={RemoveAppModal} />\n        <CustomRoute exact route={routes.sourcesDetailRename} Component={SourceRenameModal} />\n      </Suspense>\n      <DetailHeader />\n      <Grid>\n        <GridItem md=\"6\">\n          <SourceSummaryCard />\n        </GridItem>\n        <GridItem md=\"6\">\n          <ApplicationsCard />\n        </GridItem>\n        <GridItem md=\"12\">\n          <ApplicationResourcesCard />\n        </GridItem>\n      </Grid>\n    </div>\n  );\n};\n\nexport default Detail;\n","import { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\n\nexport const useSource = () => {\n  const { id } = useParams();\n  const source = useSelector(({ sources }) => sources.entities.find((source) => source.id === id));\n\n  return source;\n};\n","import { useSelector } from 'react-redux';\n\nexport const useHasWritePermissions = () => {\n  const { orgAdmin, writePermissions } = useSelector(({ user }) => ({\n    orgAdmin: user?.isOrgAdmin,\n    writePermissions: user?.writePermissions,\n  }));\n\n  if (typeof orgAdmin !== 'boolean' && typeof writePermissions !== 'boolean') {\n    return undefined;\n  }\n\n  return !!orgAdmin || !!writePermissions;\n};\n","import { useSelector } from 'react-redux';\n\nexport const useIsLoaded = () => {\n  const isLoaded = useSelector(({ sources }) => sources.loaded);\n\n  return isLoaded <= 0;\n};\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { useParams, Redirect } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { addMessage, addHiddenSource } from '../../redux/sources/actions';\nimport { doLoadSource } from '../../api/entities';\nimport { useIsLoaded } from '../../hooks/useIsLoaded';\nimport { routes } from '../../Routes';\nimport { useSource } from '../../hooks/useSource';\n\nconst RedirectNoId = () => {\n  const { id } = useParams();\n  const intl = useIntl();\n  const source = useSource();\n\n  const loaded = useIsLoaded();\n\n  const { appTypesLoaded, sourceTypesLoaded } = useSelector(({ sources }) => sources, shallowEqual);\n  const dispatch = useDispatch();\n\n  const [applicationIsLoaded, setIsApplicationLoaded] = useState(false);\n\n  useEffect(() => {\n    if (loaded && appTypesLoaded && sourceTypesLoaded) {\n      doLoadSource(id)\n        .then(({ sources: [source] }) => {\n          dispatch(addHiddenSource(source));\n          return source;\n        })\n        .then((source) => {\n          if (!source) {\n            dispatch(\n              addMessage(\n                intl.formatMessage({\n                  id: 'sources.sourceNotFoundTitle',\n                  defaultMessage: 'Requested source was not found',\n                }),\n                'danger',\n                intl.formatMessage(\n                  {\n                    id: 'sources.sourceNotFoundTitleDescription',\n                    defaultMessage: 'Source with { id } was not found. Try it again later.',\n                  },\n                  { id }\n                )\n              )\n            );\n          }\n\n          setIsApplicationLoaded(true);\n        });\n    }\n  }, [loaded, appTypesLoaded, sourceTypesLoaded]);\n\n  if (applicationIsLoaded && !source) {\n    return <Redirect to={routes.sources.path} />;\n  }\n\n  return null;\n};\n\nexport default RedirectNoId;\n","import React, { useState, useEffect, useRef } from 'react';\nimport get from 'lodash/get';\n\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\nimport { TextInput } from '@patternfly/react-core/dist/js/components/TextInput/TextInput';\n\nimport TextField from '@data-driven-forms/pf4-component-mapper/dist/cjs/text-field';\nimport useFormApi from '@data-driven-forms/react-form-renderer/dist/cjs/use-form-api';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/dist/cjs/validator-types';\nimport validated from '@redhat-cloud-services/frontend-components-sources/cjs/validated';\n\nconst Authentication = (rest) => {\n  const formOptions = useFormApi();\n  const values = formOptions.getState().values;\n\n  const [authenticationId] = rest?.name?.match(/\\d+/) || [];\n  const isEditing = authenticationId || values.authentication?.id;\n\n  // If there is any value, the field is modified (password is always empty on start)\n  let isModified = get(values, rest.name);\n\n  const [edited, setEdited] = useState(!isEditing || isModified);\n  const firstClick = useRef(true);\n  const mounted = useRef(false);\n\n  useEffect(() => {\n    if (mounted.current) {\n      // reset on restart\n      if (!firstClick.current && formOptions.getState().pristine) {\n        setEdited(false);\n        firstClick.current = true;\n      }\n\n      if (edited) {\n        firstClick.current = false;\n      }\n    }\n  });\n\n  useEffect(() => {\n    mounted.current = true;\n  }, []);\n\n  const doNotRequirePassword = rest.validate && rest.validate.filter(({ type }) => type !== validatorTypes.REQUIRED);\n\n  const componentProps = {\n    ...rest,\n    ...(isEditing\n      ? {\n          validate: doNotRequirePassword,\n          resolveProps: validated,\n        }\n      : {}),\n  };\n\n  if (!edited && isEditing) {\n    return (\n      <FormGroup helperText={componentProps.helperText} label={componentProps.label} onFocus={() => setEdited(true)} isRequired>\n        <TextInput aria-label=\"pre-filled-authentication\" value=\"•••••••••••••\" />\n      </FormGroup>\n    );\n  }\n\n  return <TextField {...componentProps} autoFocus={true} />;\n};\n\nexport default Authentication;\n","import React from 'react';\n\nimport FormRenderer from '@data-driven-forms/react-form-renderer/dist/cjs/form-renderer';\n\nimport FormTemplate from '@data-driven-forms/pf4-component-mapper/dist/cjs/form-template';\nimport componentMapper from '@data-driven-forms/pf4-component-mapper/dist/cjs/component-mapper';\n\nimport { mapperExtension } from '@redhat-cloud-services/frontend-components-sources/cjs/sourceFormRenderer';\n\nimport Authentication from '../components/Authentication';\n\nconst SourcesFormRenderer = (props) => (\n  <FormRenderer\n    FormTemplate={FormTemplate}\n    componentMapper={{\n      ...componentMapper,\n      ...mapperExtension,\n      authentication: Authentication,\n    }}\n    {...props}\n  />\n);\n\nexport default SourcesFormRenderer;\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { useIntl } from 'react-intl';\n\nimport { addMessage } from '../../redux/sources/actions';\nimport { useHasWritePermissions } from '../../hooks/useHasWritePermissions';\nimport { routes } from '../../Routes';\n\nconst RedirectNoWriteAccess = () => {\n  const intl = useIntl();\n\n  const writePermissions = useHasWritePermissions();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (writePermissions === false) {\n      const title = intl.formatMessage({\n        id: 'sources.insufficietnPerms',\n        defaultMessage: 'Insufficient permissions',\n      });\n      const description = intl.formatMessage({\n        id: 'sources.notAdminButton',\n        defaultMessage: 'To perform this action, you must be granted write permissions from your Organization Administrator.',\n      });\n\n      dispatch(addMessage(title, 'danger', description));\n    }\n  }, [writePermissions]);\n\n  if (writePermissions === false) {\n    return <Redirect to={routes.sources.path} />;\n  }\n\n  return null;\n};\n\nexport default RedirectNoWriteAccess;\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport RedirectNoWriteAccess from '../RedirectNoWriteAccess/RedirectNoWriteAccess';\nimport { useSource } from '../../hooks/useSource';\nimport RedirectNoId from '../RedirectNoId/RedirectNoId';\n\nconst CustomRouteInternal = ({ route, children }) => {\n  const source = route.redirectNoId && useSource();\n\n  if (!source && route.redirectNoId) {\n    return <RedirectNoId />;\n  }\n\n  return (\n    <React.Fragment>\n      {route.writeAccess && <RedirectNoWriteAccess />}\n      {children}\n    </React.Fragment>\n  );\n};\n\nCustomRouteInternal.propTypes = {\n  route: PropTypes.shape({\n    path: PropTypes.string.isRequired,\n    redirectNoId: PropTypes.bool,\n    writeAccess: PropTypes.bool,\n  }).isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nconst CustomRoute = ({ route, componentProps, Component, ...props }) => (\n  <Route {...props} path={route.path}>\n    <CustomRouteInternal route={route}>\n      <Component {...componentProps} />\n    </CustomRouteInternal>\n  </Route>\n);\n\nCustomRoute.propTypes = {\n  route: PropTypes.shape({\n    path: PropTypes.string.isRequired,\n    redirectNoId: PropTypes.bool,\n    writeAccess: PropTypes.bool,\n  }).isRequired,\n  componentProps: PropTypes.any,\n  Component: PropTypes.oneOfType([PropTypes.func, PropTypes.object]).isRequired,\n};\n\nexport default CustomRoute;\n","import { getSourcesApi } from './entities';\n\nexport const checkSourceStatus = (id) =>\n  getSourcesApi()\n    .checkAvailabilitySource(id)\n    .catch(() => {});\n","import { defaultPort } from '../views/formatters';\nimport { getSourcesApi } from './entities';\nimport { patchCmValues } from './patchCmValues';\n\nexport const parseUrl = (url) => {\n  if (url === null) {\n    return {\n      scheme: null,\n      host: null,\n      port: null,\n      path: null,\n    };\n  }\n\n  if (!url) {\n    return {};\n  }\n\n  try {\n    const u = new URL(url);\n    const scheme = u.protocol.replace(/:$/, '');\n\n    return {\n      scheme,\n      host: u.hostname,\n      port: u.port === '' ? defaultPort(scheme) : u.port,\n      path: u.pathname,\n    };\n  } catch (error) {\n    return {};\n  }\n};\n\nexport const urlOrHost = (formData) =>\n  formData.url || formData.url === null ? parseUrl(formData.url) : formData.endpoint ? formData.endpoint : formData;\n\nexport const doUpdateSource = (source, formData) => {\n  const promises = [];\n\n  if (formData.source) {\n    promises.push(getSourcesApi().updateSource(source.source.id, formData.source));\n  }\n\n  if (formData.endpoint || formData.url || formData.url === null) {\n    const { scheme, host, port, path } = urlOrHost(formData);\n    const endPointPort = port === null ? null : parseInt(port, 10);\n\n    const endpointData = {\n      scheme,\n      host,\n      path,\n      port: endPointPort === null ? null : isNaN(endPointPort) ? undefined : endPointPort,\n      ...formData.endpoint,\n    };\n\n    promises.push(getSourcesApi().updateEndpoint(source.endpoints[0].id, endpointData));\n  }\n\n  if (formData.authentications) {\n    Object.keys(formData.authentications).forEach((key) => {\n      const idWithoutPrefix = key.replace('a', '');\n\n      promises.push(getSourcesApi().updateAuthentication(idWithoutPrefix, formData.authentications[key]));\n    });\n  }\n\n  if (formData.billing_source || formData.credentials) {\n    let cmDataOut = {};\n\n    if (formData.credentials) {\n      cmDataOut = {\n        authentication: {\n          credentials: formData.credentials,\n        },\n      };\n    }\n\n    if (formData.billing_source) {\n      cmDataOut = {\n        ...cmDataOut,\n        billing_source: formData.billing_source,\n      };\n    }\n\n    promises.push(patchCmValues(source.source.id, cmDataOut));\n  }\n\n  return Promise.all(promises);\n};\n","import { axiosInstance } from './entities';\nimport { COST_MANAGEMENT_API_BASE } from './constants';\n\nexport const patchCmValues = (id, data) => axiosInstance.patch(`${COST_MANAGEMENT_API_BASE}/sources/${id}/`, data);\n"],"sourceRoot":""}